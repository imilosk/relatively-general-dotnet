
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 721 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7201">
            <a href="https://ayende.com/blog/2980/the-customer-that-microsort-asks" target="_blank">
                <h2 class="title mb-6" id="article-7201">The Customer that Microsort asks</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 01, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">So, a lot of time, I hear Microsoft talk about asking their customers about their design and their requests. I have a few personas that I have in mind when I think about that. The first one is the clueless enterprisey architect, haven&#x27;t touched code in five years. The second one? The guy that aspires to be a Mort one day, the guy that he looks down at, that is the other persona.</p>
        </article>
        <article id="article-7202">
            <a href="https://ayende.com/blog/2979/going-into-a-new-code-base" target="_blank">
                <h2 class="title mb-6" id="article-7202">Going into a new code base</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 01, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I had a chance at DevTeach to just take an hour and start looking at a large code base. I made the claim several times in the past that no matter the quality of the developers and the quality of the code base, there is no way someone can just sit down on a code base and start working on that. I tried to grok the code without help, and I failed. I could probably do that, but it would take several days. That was especially true since it was in Windows Forms, and that is not a field that I have done much at. Not knowing anything about the actual domain was a big issue as well. After about 30 minutes of sitting down and going over the code with the developer, I got a whole new level of understanding about the application. How it works, how the structure is built. I look at a test and can work how this is used, etc. I still have very little knowledge about that application works, but after 30 minutes, I am confident in my ability to both grok the code and work with it. In fact, after getting the introduction to the code base, I can say that this is probably one of the better code bases that I have seen. One of the more interesting parts was that when I looked at each class, it was when I took a step back and looked at the interactions it gotten really interesting. It was a pleasure to read the code.</p>
        </article>
        <article id="article-7203">
            <a href="https://ardalis.com/silverlight-2-0-is-coming/" target="_blank">
                <h2 class="title mb-6" id="article-7203">Silverlight 2.0 Is Coming</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 29, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">ScottGu today announced what many of us have been wondering and hoping would happen with regard to the next shipping version of Silverlight&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-7204">
            <a href="https://ardalis.com/microsoft-download-center-&#x2013;-silverlight-beta/" target="_blank">
                <h2 class="title mb-6" id="article-7204">Microsoft Download Center &#x2013; Silverlight Beta</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 29, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Microsoft has a new Download Centeron their site which is currently in Beta, being built entirely in Silverlight. Check it out &#x2013; it looks&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-7205">
            <a href="https://ayende.com/blog/2978/a-vision-of-enterprise-platform-a-database-that-you-dont-hide-in-the-attic" target="_blank">
                <h2 class="title mb-6" id="article-7205">A vision of enterprise platform</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 29, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">For some reason, the moment that peole start working on Enterprise Solutions, there is a... tendency to assume that because we are going to build a big and complex application, we can afford to ignore best practices and proven practices. That is just wrong. And it applies in many manners to many parts of the application, but it never applies to something as obiviously as it applies to the database. This is just the results of a very short research:  The metadata driven approach, AKA the 5 tables DB  The Blob  The &#xA0;5th normalized form DB  The 5th denormalized form DB  The table a day DB  The obsfuscated database - create table tbl15 (fld_a int, fld_b int, fld_g nvarchar(255) ) And those are just of the database structure, we haven&#x27;t yet arrived to the database behavior yet. Here we have interesting approachs such as rolling your own &quot;Transactions&quot; table, requiring 40 joins to get a simple value, using nvarchar as the ultimate extensibility, etc. So, how do we approach building a database that we can actually show in public? Let us start with thinking about the constraints that we have for the application. The database needs to support...  OLTP for the application itself.  Reports.  Performance.  ETL processes to take data in and out of the sytem.  Large amount of data.  Large amount of entities. Notice how we don&#x27;t have any suggestion about integrating with the application at the database level. That is a fairly common antipattern. We are going to try to keep a one to one mapping between the entity and the table structure, because that will make it significantly easier to work with the system. One to one means that the Account Name translate to an Account.Name in the entity model, and Accounts.Name in the database model. &#xA0;    We probably want the usual auditing suspects, such as Id, CreatedAt, ModifiedAt, CreatedBy, ModifiedBy, Owner, OrganizationUnit. Maybe a few&#xA0;more, if this makes sense.&#xA0;Probably not too much, because that can get to be a problem. Accessing and manipulating this in the application layer it going to be trivial, so I am not really going to cover that in depth. What I do want to talk about is how we expose it to the outside world? And by that I mean reports and ETL processes. We have several options to try to do that. We can just let the reports and ETL processes to read from the database tables directly. This is the simplest approach, I think. Other options include views, stored procedures, and other DB thingies that we can use. I have seen systems where an entity was composed of several tables, and the report was done off of&#xA0;a view that joined it all together. The underlying problem is that I have versioning to consider. I am going to dedicate a full post to the problem of building upgradable user customizable applications, so I&#x27;ll delay it to then, but let us just say that radically changing the database schema between version will be painful for the users. The usual way to handle that is to only make promises for the views, and not for the tables themselves. That is a good way to handle that, in my opinion. I would suggest putting those in a separate schema, to make it clearer that the seperation is imortant. This also&#xA0;gives you the ability to later do a view to table refactoring, and maintain that with triggers. This is usually a bad idea, but&#xA0;for performance reasons, it may very&#xA0;well be a good solution. ETL processes can use the same mechanism that reports use to read data from the database efficently, but nothing writes to the database except the application. At one point I wrote a change DB password util that run every two hours, it would change the database password and update the relevant config files. I think that you can guess what the driving force to that where, no? Getting data into the database can be done through application services (not neccesarily web services, btw). A simple example would be API similar to this one: void Insert(params Account[] accounts);&#xA;void Update(params Account[] accounts);&#xA;void Delete(params Account[] accounts);&#xA;This API explicitly allows for bulk operations, so it can be very nice to work with, instead of having to do things on per-row basis, which basically kills performance.&#xA;How to get good performance from this system is another hard question. In this case, I would usually recommend on getting a good DBA to look at the perfrormance charactaristics of the application and optimize the database structure if needed. But, a much easier solution to performance problems in the database server is to not hit the DB server, but use caching. Distributed caching solutions, like Memcached, NCache, etc are really good way of handling that.&#xA;No business logic in the DB! This is important, if you put business logic in the DB, you have to get to the DB in order to execute the business logic. This kills scalablity, hurts the ability to understand the solution, and in general makes life miserable all around.&#xA;Reports are an interesting problem. How do you deal with security, for instance? Consider the security infrastructure that I already presented. This security infrastructure should also come with a database function that you can use like this:&#xA;SELECT * FROM Accounts WHERE IsAllowed(Accounts.EntitySecurityKey, @UserId, &#x27;Account.View&#x27;)&#xA;&#xA;Or this:&#xA;SELECT * FROM Accounts&#xA;WHERE Accounts.EntitySecurityKey IN (&#xA;&#x9;SELECT EntitySecurityId FROM GetAllowed(@UserId, &#x27;Account.View&#x27;) &#xA;)&#xA;Both of which provides really easy manner to get security for the reports. If we wanted to enforce that, we can force the report writer to write somtehing like this:&#xA;SELECT * FROM GetAllowedAccounts(@UserId, &#x27;Account.View&#x27;)&#xA;We can probably get away with assuming that &#x27;Account.View&#x27; is the default operation, so it is even shorter. Among other things, this actually have valid performance characteristics.&#xA;This post it turning out to be&#xA0;a &quot;don&#x27;t make stupid mistakes&quot; post, because I don&#x27;t think that I am writing anything new here. About how to avoid making stupid mistake, that is fairly simple as well. Get a good DBA (that is left as an excersize for the reader), give him/her a big stick and encourage good design through superior firepower.</p>
        </article>
        <article id="article-7206">
            <a href="https://ayende.com/blog/2977/envrionment-validation-and-windsor-extensibility" target="_blank">
                <h2 class="title mb-6" id="article-7206">Envrionment Validation and Windsor Extensibility</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 29, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">So I was in Jermey Miller&#x27;s talk about maintainable software echo system, and one of the thing that he mentioned that StructureMap does really well is the ability to ask the container to perform envrionment validations, to make sure that the envrionment is ready for us. I really liked the idea, so I pulled up the laptop and started spiking how to handle this issue. First, let us see Jeremy&#x27;s solution: public class FileTextReader : ITextReader&#xA;{&#xA;&#x9;[ValidateConfiguration]&#xA;&#x9;public void ValidateFileExistance()&#xA;&#x9;{&#xA;&#x9;&#x9;if (File.Exists(fileName) == false)&#xA;&#x9;&#x9;&#x9;throw new FileNotFoundException(&quot;Could not find file &quot; &#x2B; fileName);&#xA;&#x9;}&#xA;}&#xA;So, when you ask structure map to validate the environment, it will run all the methods that have been decorated with [ValidateConfiguration].&#xA;So, how do that that in Windsor?&#xA;The most important thing to realize with Windsor is that it is a container that was built to be extensible. Something like that is not going to be a change to the container, it will be an extension, not a change to the container itself. Extensions are usually facilities, like this one:&#xA;public class ValidationFacility : AbstractFacility&#xA;{&#xA;&#x9;private readonly List&lt;string&gt; componentsToValidate = new List&lt;string&gt;();&#xA;&#xA;&#x9;protected override void Init()&#xA;&#x9;{&#xA;&#x9;&#x9;Kernel.AddComponent&lt;ValidateConfiguration&gt;();&#xA;&#x9;&#x9;IHandler handler = Kernel.GetHandler(typeof(ValidateConfiguration));&#xA;&#x9;&#x9;handler.AddCustomDependencyValue(&quot;componentsToValidate&quot;,&#xA;&#x9;&#x9;&#x9; componentsToValidate&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;Kernel.ComponentRegistered &#x2B;= OnComponentRegistered;&#xA;&#x9;}&#xA;&#xA;&#x9;public void OnComponentRegistered(string key, IHandler handler)&#xA;&#x9;{&#xA;&#x9;&#x9;foreach (MethodInfo method in                                 handler.ComponentModel.Implementation.GetMethods())&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;bool isValidateMethod = method                                   .GetCustomAttributes(typeof(ValidateConfigurationAttribute), true)                                    .Length != 0;&#xA;&#x9;&#x9;&#x9;if (isValidateMethod)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;componentsToValidate.Add(key);&#xA;&#x9;&#x9;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;This extends the container, and whenever a component is registered, I am checking if I need to add that to the list of components that needs validation. I am doing a&#xA0; tiny bit of cheating here and passing the componentsToValidate as a reference to the component, it is simpler that way, but the component gets the same instance, which is probably not what I would like to do with it for other approaches. I would usually got with a sub resolver that matched that issue, if I was doing something like this for more interesting purposes.&#xA;Anyway, here how the ValidationConfiguration class is built:&#xA;public class ValidateConfiguration&#xA;{&#xA;&#x9;private readonly ICollection&lt;string&gt; componentsToValidate;&#xA;&#x9;private readonly ILogger logger;&#xA;&#x9;private readonly IKernel kernel;&#xA;&#xA;&#x9;public ValidateConfiguration(&#xA;&#x9;&#x9;ICollection&lt;string&gt; componentsToValidate,&#xA;&#x9;&#x9;ILogger logger,&#xA;&#x9;&#x9;IKernel kernel)&#xA;&#x9;{&#xA;&#x9;&#x9;this.componentsToValidate = componentsToValidate;&#xA;&#x9;&#x9;this.logger = logger;&#xA;&#x9;&#x9;this.kernel = kernel;&#xA;&#x9;}&#xA;&#xA;&#x9;public void PerformValidation()&#xA;&#x9;{&#xA;&#x9;&#x9;foreach (string key in componentsToValidate)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;ValidateComponent(key);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#xA;&#x9;private void ValidateComponent(string key)&#xA;&#x9;{&#xA;&#x9;&#x9;IHandler handler = kernel.GetHandler(key);&#xA;&#x9;&#x9;if (handler == null)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Warn(&quot;Component {0} was removed before it could be validated&quot;, key);&#xA;&#x9;&#x9;&#x9;return;&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;try&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;object component = handler.Resolve(CreationContext.Empty);&#xA;&#x9;&#x9;&#x9;foreach (MethodInfo method in component.GetType().GetMethods())&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;bool isValidateMethod = method.GetCustomAttributes(typeof(ValidateConfiguration), true).Length == 0;&#xA;&#x9;&#x9;&#x9;&#x9;if (isValidateMethod)&#xA;&#x9;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;ExecuteValidationMethod(component, method);&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;catch (TargetInvocationException e)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Error(&quot;Failed to run validation for {0}, because: {1}&quot;, key, e.InnerException);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;catch (Exception e)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Error(&quot;Failed to run validation for {0}, because: {1}&quot;, key, e);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#xA;&#x9;private void ExecuteValidationMethod(object component, MethodBase method)&#xA;&#x9;{&#xA;&#x9;&#x9;try&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;method.Invoke(component, new object[0]);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;catch (Exception e)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Error(&quot;Failed to validate {0}.{1}. Error: {2}&quot;,&#xA;&#x9;&#x9;&#x9;&#x9;method.DeclaringType,&#xA;&#x9;&#x9;&#x9;&#x9;method.Name,&#xA;&#x9;&#x9;&#x9;&#x9;e);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;This is a class that has some deep association with the container. It is usually not something that I would like in my application services, but it is fine for instrastracture pieces, like this one.&#xA;Now that I have that , I can actually test the implementation:&#xA;IWindsorContainer container = new WindsorContainer();&#xA;container.AddFacility(&quot;validation&quot;, new ValidationFacility());&#xA;container.AddComponent&lt;ITextReader, FileTextReader&gt;();&#xA;container.Kernel.GetHandler(typeof(ITextReader))&#xA;&#x9;.AddCustomDependencyValue(&quot;fileName&quot;, &quot;foo&quot;);&#xA;container.AddComponent&lt;ILogger, ConsoleLogger&gt;();&#xA;&#xA;ValidateConfiguration resolve = container.Resolve&lt;ValidateConfiguration&gt;();&#xA;resolve.PerformValidation();&#xA;And this will go over everything and perform whatever validations needs to be done.&#xA;As I said, I really like the idea, and extending this to a build task is really trivial (especially if you are using Boo Build System to do things).&#xA;The main point, however, is that I managed to write this piece of code (around 100 lines or so), during Jeremy&#x27;s talk, so from the time he talked about that feature to the time that he finished, I already got that done. This actually has nothing to do with my personal prowess with code, but it has a lot to do with the way Windsor it built, as&#xA0;a set of services that can be so readily extended. &#xA;After I have gotten used to the style that Windsor has, it is getting really addictively easy to start extending the container in interesting ways. I highly recommend that you will take a look at those features, they are interesting both from &quot;what I can do with them&quot; and from &quot;what design allowed this&quot;.</p>
        </article>
        <article id="article-7207">
            <a href="https://ayende.com/blog/2976/code-review-petshop-3-0" target="_blank">
                <h2 class="title mb-6" id="article-7207">Code Review</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 28, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I got some feedback about my previous review, that the PetShop 2.0 was recognized as architecturely unsound, and that I should look at version 3.0 of the code, which is:  Version 3.x of the .NET Pet Shop addresses the valuable feedback given by reviewers of the .NET Pet Shop 2.0 and was created to ensure that the application is aligned with the architecture guideline documents being produced by the Microsoft. I have to say, it looks like someone told the developers, we need an architecture, go build one. The result is... strange. It make my spider sense tingle. I can&#x27;t really say that it is wrong, but it makes me uncomfortable. Take a look at the account class, and how it is structured:   Well, I don&#x27;t know about you, but that is poor naming convention to start with. And I am seeing here an architecture by rote, if this makes any sort of sense. Then there are such things as:   Which leads us to this:   The MSG_FAILURE is:   I am sorry, but while there was some effort made here over the previous version, I am not really impressed with it. As I said, the architecture is now probably sound, if suspicious because of lack of character, but the implementation is still not really one that I would call decent. I have to admit about a strong bias here, though. I don&#x27;t like te naked CLR, but the code has missed a lot of opportunities to avoid unnecessary duplication and work. I have been also asked what I would consider a good sample application, and I would like to recommend Cuyahoga, as the application that probably models my thinking the best. SubText&#xA0;is also good, but it is more interesting case, because I don&#x27;t like its reliance on stored procedures. Nevertheless, it is a valid approach, and it certainly serving this blog very well.</p>
        </article>
        <article id="article-7208">
            <a href="https://ayende.com/blog/2975/code-review-the-petshop-application" target="_blank">
                <h2 class="title mb-6" id="article-7208">Code review</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 28, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I gave a talk about ReSharper today, and I used the PetShop demo app as the base code. I have purposefully avoided looking at the source code of the sample until today, because I wanted to get a gueniue experience, rather than a rehearsed one. I don&#x27;t think it went as well as it could have, but that is not the point of this post. The point is to talk about just the code quality of the PetShop application. First, let us see what the PetShop application is:  The Microsoft .NET Pet Shop 2.0 illustrates basic and advanced coding concepts within an overall architectural framework The Pet Shop example is supposed to illustrate &quot;coding concepts&quot;, but mostly it demonstrate those that you want to avoid. I was shocked by what I was seeing there. I am going to touch just the account class, because if has enough issues all on its own. The account class is supposed to be a domain entity, but what do you see when you open it?   And I really don&#x27;t like to see SQL inside my code. And then there is this:   And suddenly I am confused, because I see a class that is doing the work of three classes, and that is just by casual browsing. And then we had this:   Somehow, public fields and violating the .NET naming conventions doesn&#x27;t really strikes me as a good idea. Code duplication, like between the Account.Insert() and Account.Update(), both have significant duplication in the form of: &#xA0; I thought that the whole idea of a sample app was to show of best practices, and that is... quite not so, in this case.</p>
        </article>
        <article id="article-7209">
            <a href="https://ayende.com/blog/2974/slipping-under-the-radar" target="_blank">
                <h2 class="title mb-6" id="article-7209">Slipping under the radar</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 28, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am having quite a few interesting discussions at DevTeach, and one of those had to do with introducing projections and processes against opposition. For myself, I am a... bit forceful about such suggestions, especially in face of stupid opposition. One of the things that came up was simply to do it, the old &quot;it is easier to ask for forgiveness than permission&quot;. I am both supportive for that and not really comfortable with the idea. I support it because it is a way to actually get things done, but I got a really good example of why it is not always a smart idea. The story was using Rhino Mocks for mocking, with some team members starting to use it without proper introduction.  The resulting code created tests that passed, but had a strong coupling to the code under test (too many mocks, too much expectation).&#xA0;When the code change, the test broke, because it was specifying too much. For myself, I have&#xA0;seen similar issues that can result as slipping stuff under the radar, which is why I am not comfortable with that in most cases. It is not always the case, continuous integration is one such case in which there isn&#x27;t usually a problem in just setting it up. But if you are adding a dependency to the system, you need to make it clear to the team how it works. Doing otherwise introduce the bus factor, damage the ability of the team, and a host of other problems. By the way, this doesn&#x27;t mean that all your team members have to have a vote in any dependency, or any pattern, but it does mean that they all should be aware of them.</p>
        </article>
        <article id="article-7210">
            <a href="https://ayende.com/blog/2973/the-difference-between-meta-programming-and-il-weaving" target="_blank">
                <h2 class="title mb-6" id="article-7210">The difference between meta programming and IL weaving</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 27, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Ivan&#xA0;also posted a response to Jeremy&#x27;s C# vNext features, and he said something that caught my eye:  5. Metaprogramming =&gt; no objection here although you can do it now with reflection emit  No, there is a big difference between reflection emit and byte code weaving. Reflection emit is done after compilation is completed, meta programming occurs during compilation. This matters because it means that your code cannot refer to the results of the change being made. A case in point, I am using IL Weaving to add the Dispose method&#xA0;to a class, but because I am doing it after compilation is completed, I cannot call the Dispose() method on the class, or put it in a using statement, in the same assembly, I would get a compiler error, because the method (and the interface) are not there yet. Using meta programming, the compiler will know that those now exist, and it can not start using it, because it happened during the compilation process. The implication of that are pretty significant, if you are talking about what you can and can&#x27;t do in terms of enriching the language.</p>
        </article>
        <div class="button flex justify-between">
            <a href="720.html"><span class="back arrow"></span></a>

            <a href="722.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>