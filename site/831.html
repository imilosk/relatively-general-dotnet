
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 831 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-8301">
            <a href="https://ayende.com/blog/1908/pitching-castle" target="_blank">
                <h2 class="title mb-6" id="article-8301">Pitching Castle</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 08, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">As I mentioned, there is not a very interesting discussion on the Castle Developer mailing list.    One of the topics that just came up is evangelizing Castle to the community. I think that the main problem of Castle is that it help solves the problems that you have after you finished 30% of the project. That is when you start discoverring the limits of the stuff that MS is preaching. It takes prior experiance with this pain to make the trade off visible. I know that in the past I have talked about the seperation of UI / business logic that is inherent to MonoRail, and I got responses like: &quot;Well, that is why we have code-behind files in ASP.Net&quot;.    I wasn&#x27;t sure quite how to deal with that argument then. Every now and then I see people who are fortunate enough to build applications where the UI is truly just the ASPX and maybe a single line or two of databinding in the code behind. But my experiance is that I often need to do complex stuff in the UI. For instnace, show certain rows in a grid with a certain color, Ajax, etc. All of which are intimately tied to the UI, and are not possible to do in the ASPX. This means that they go to the code behind file, and there goes the Seperation of Concerns out the window. I have seen a date picker control that is over 2,500 lines of code. And even in this simple control, there was some business logic involved (mostly around what valid dates are, and how to handle ranges of them.    Anyway, this discussion coincides with a request from a friend to send some information about how to sell Active Record to their team lead / architects. I uploaded the presentation to my Presentations page, so feel free to start pitching Active Record (which is the easiest thing to get into a project, I have found) and then expand your Castle use later on.</p>
        </article>
        <article id="article-8302">
            <a href="https://ayende.com/blog/1907/inappropriate-advetising-take-2" target="_blank">
                <h2 class="title mb-6" id="article-8302">Inappropriate Advetising, Take 2</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Okay, now this is a major news site in Israel, Walla. I got click on a header about an escaped rapist, and the first thing I see is an ad of a girl stripping. Apperantly this has something to do with a cellular phone, but I fail to see the connection...</p>
        </article>
        <article id="article-8303">
            <a href="https://ayende.com/blog/1906/rhino-mocks-is-in-a-fighting-shape" target="_blank">
                <h2 class="title mb-6" id="article-8303">Rhino Mocks is in a fighting shape</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am testing Rhino Mocks with Dynamic Proxy 2, and I just noticed that I have a test with the following name:VerifyingThatCanAttackOtherEvent    Hm... another case on not so inocent typo, I&#xA0;believe...</p>
        </article>
        <article id="article-8304">
            <a href="https://ayende.com/blog/1905/resiliant-outlook" target="_blank">
                <h2 class="title mb-6" id="article-8304">Resiliant Outlook</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Outlook manages to survive Windows restarts without shutting down, wow...</p>
        </article>
        <article id="article-8305">
            <a href="https://ayende.com/blog/1904/on-reuse-and-thrashing" target="_blank">
                <h2 class="title mb-6" id="article-8305">On Reuse and Thrashing</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">There is an interesting debate in the Castle deveoper list at the moment. It is interesting because I think that all sides agree on just about all the points under discussion. :-)    Anyway, it got to the point where the subject of 3rd party controls and Mono Rail came up. Mono Rail has support for Web Forms view engine, which means that you can use all the usual ASP.Net controls (the in-the-box ones, Infragistics, Component Art, Telerik, etc). As readers of the blog already know, I am... not fond of the Web Forms idea. At best, this is a leaky abstraction.     Hammett qouted someone telling him this:&quot;try saying to a CTO that they wont be able to leverage on third party controls&quot;     Here is my (somewhat edited) reply that statement. Keep in mind that I recognize the difficulity in trying to sell something like this to a company. The ability to reuse their invesement     About a year ago I posted why I don&#x27;t like the ASP.Net Web Forms model, my option hasn&#x27;t changed drasitcally in the meantime.&#xA0;My response to the third party components issues is to direct to this post.&#xA0;And tell a tale from a far off land called the Here&amp;Now:             I am working on a project now (over a year in development alone, several teams, complex domain, complex requirements) where the downstream team has evaluated and purchased both Infragistics and Component Art. (This included a&#xA0;source license for Infragistics, and maybe Component Art as well).    They were drawn to the big benefits of being able to utilize 3rd party controls, speed up their dev time, etc.&#xA0;    Overall, I think that they spend quite a few man months trying to get those controls exactly the shape that they wanted. Eventually they abandoned most of them (there are remains here are there), and are using controls built in-house&#xA0; (mostly based on the default MS ones) to do all their presentations. The adventure with 3rd party controls cost them tens of thousands of dollars. And their codebase has four sets of controls, Component Art, Infragistics, Microsoft, Inhouse, all of them doing roughly the same thing, all of them subtly different.             Granted, in many cases, you could do quite a bit with 3rd party controls, but I find that the minute that I need to do something extra, and I always need to do something extra, it is taking me more time to get it right than it would have taken me to write it from scratch.         This is why my part of the project has 5 calendar controls, each written for a specific page (need to do a lot of coloring of the data, different colors, algorithms and data per page), instead of a super complex single calendar.             In most cases, I find that I don&#x27;t need all that extensability / features in a control, I usually need a very small subset (which you probably couldn&#x27;t sell alone, so it gets a lot of extra functionality, to fit a lot of cases). Writing that functionality by myself wouldn&#x27;t take much longer than learning a new control and figuring out how to get it to where I want.</p>
        </article>
        <article id="article-8306">
            <a href="https://ayende.com/blog/1903/rhino-mocks-2-9-6-released" target="_blank">
                <h2 class="title mb-6" id="article-8306">Rhino Mocks 2.9.6 Released</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Hi, over a month without a release for Rhino Mocks is a Big Thing, I think :-)&#xA;    Anyway, this is a fix to a problem with the documentation message, which only work on the default expectation (because I was lazy when I wrote this?). The basic issue was that this didn&#x27;t give the correct message:&#xA;IAppLock&#xA0;mockAppLock&#xA0;=&#xA0;this.MockFactory.CreateMock&lt;IAppLock&gt;();&#xA;//rig&#xA0;up&#xA0;Dispose()&#xA0;method&#xA;mockAppLock.Dispose();&#xA;LastCall&#xA0;&#xA;&#xA0;&#xA0; .On(mockAppLock)&#xA;&#xA0;&#xA0;&#xA0;.IgnoreArguments()&#xA;&#xA0;&#xA0;&#xA0;.Message(&quot;IAppLock&#xA0;should&#xA0;be&#xA0;disposed.&quot;);&#xA;this.MockFactory.VerifyAll()&#xA;    Now it will report to you both the fact that you didn&#x27;t call Dispose, as well as why you should have called dispose, which is a lot more interesting, IMO.&#xA;    As usual, source and binaries are here.</p>
        </article>
        <article id="article-8307">
            <a href="https://ayende.com/blog/1902/office-ui-licensable" target="_blank">
                <h2 class="title mb-6" id="article-8307">Office UI Licensable?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Mike Gunderloy is talking about the &quot;royality free&quot; office UI license. He raises some very important issues with regard to the mere feasability of the license. The basic issue here is that the ability to license a UI improvement means that you are allow to not license the improvement. And if Microsoft manage to make this a legal thing, all software deveopers are going to be in a very sad state all of&#xA0;a sudden.    The problem with this is that Apple has previously successfully sued people for copying their Look &amp; Feel, so I can see where Microsoft is coming from...</p>
        </article>
        <article id="article-8308">
            <a href="https://ayende.com/blog/1901/or-m-and-performance" target="_blank">
                <h2 class="title mb-6" id="article-8308">OR/M and Performance</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I spent most of the day going over&#xA0;an NHibernate application that was slow. The cause was most probably large number of queries for the database. I took my own advice and enabled performance logging for the application and let it run for a few days. When I read the logs today it looks like there were a number of pages where the number of queries was outside of any reasonable proportion.    When I started reading the code for this pages, I realized that the problem wasn&#x27;t with mis-use of NHibernate, or rather, it wasn&#x27;t specific for NHibernate. The most offending page had something like:            foreach(string&#xA0;idStr&#xA0;in&#xA0;claimsIds)        {        &#xA0;&#xA0;int&#xA0;id&#xA0;=&#xA0;int.Parse(idStr);        &#xA0;&#xA0;Claim&#xA0;claim&#xA0;=&#xA0;Context.Session.Load&lt;Claim&gt;(id);        &#xA0;&#xA0;claim.Status&#xA0;=&#xA0;ddlClaimsStatus.Value;        &#xA0;&#xA0;Context.Session.Save(claim);        }        Context.Session.Flush();                foreach(string&#xA0;idStr&#xA0;in&#xA0;paymentsIds)        {        &#xA0;&#xA0;int&#xA0;id&#xA0;=&#xA0;int.Parse(idStr);        &#xA0;&#xA0;Payment&#xA0;payment&#xA0;=&#xA0;Context.Session.Load&lt;Payment&gt;(id);        &#xA0;&#xA0;payment.LastUpdateDate&#xA0;=&#xA0;DateTime.Today;        &#xA0;&#xA0;Context.Session.Save(payment);        }        Context.Session.Flush();                                I think that you can see why it is making a large number of calls to the database. This is one of the few cases that I would recommend the use of a stored procedure, since it meets my two criterias for a SP:            Zero business logic            Works on a large set of records    The second worst page had something like this:            foreach(DataTable&#xA0;dt&#xA0;in&#xA0;ds.Tables)        {        &#xA0;&#xA0;foreach(DataRow&#xA0;subItem&#xA0;in&#xA0;dt.Rows)        &#xA0;&#xA0;{        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Claim&#xA0;claim&#xA0;=&#xA0;Context.Session.Load&lt;Claim&gt;.Load(subItem[&quot;id&quot;]);        &#xA0; &#xA0;&#xA0;&#xA0;//&#xA0;do&#xA0;something&#xA0;with&#xA0;the&#xA0;claim                &#xA0;&#xA0;}        }        Hm, now why would this produce large number of queries to the database, I wonder...    Only on the fifth page we managed to find a true SELECT N&#x2B;1 issue, which was something like;            //User&#xA0;and&#xA0;Groups,&#xA0;this&#xA0;actually&#xA0;cause&#xA0;two&#xA0;database calls,&#xA0;one&#xA0;to&#xA0;load&#xA0;the&#xA0;user&#xA0;(which&#xA0;would&#xA0;probably&#xA0;be&#xA0;loaded        //&#xA0;the&#xA0;second&#xA0;to&#xA0;load&#xA0;its&#xA0;users                ICollection&lt;Group&gt;&#xA0;groups&#xA0;=&#xA0;Context.User.Groups;        foreach(Group&#xA0;group&#xA0;in&#xA0;groups)        {        &#xA0;&#xA0;foreach(Section&#xA0;section&#xA0;in&#xA0;group.Sections)&#xA0;//&#xA0;database&#xA0;query                &#xA0;&#xA0;{        &#xA0;&#xA0;&#xA0;&#xA0;//do&#xA0;something&#xA0;with&#xA0;the&#xA0;sections                &#xA0;&#xA0;}        }        In this case, the fix was to explictly load all the data in advance, like this:            //&#xA0;only&#xA0;one&#xA0;database&#xA0;query&#xA0;here,&#xA0;get&#xA0;all&#xA0;the&#xA0;groups&#xA0;for&#xA0;the&#xA0;user&#xA0;as&#xA0;well&#xA0;as&#xA0;their&#xA0;sections        ICollection&lt;Group&gt;&#xA0;groups&#xA0;=&#xA0;Context.Session.CreateCriteria(typeof(Group))        &#xA0;&#xA0;.Add(Expression.Eq(&quot;User&quot;,&#xA0;Context.User))        &#xA0;&#xA0;.SetFetchMode(&quot;Sections&quot;,&#xA0;FetchMode.Eager)        &#xA0;&#xA0;.List&lt;Group&gt;();                        foreach(Group&#xA0;group&#xA0;in&#xA0;groups)        {        &#xA0;&#xA0;foreach(Section&#xA0;section&#xA0;in&#xA0;group.Sections)&#xA0;//&#xA0;database&#xA0;query                        &#xA0;&#xA0;{        &#xA0;&#xA0;&#xA0;&#xA0;//do&#xA0;something&#xA0;with&#xA0;the&#xA0;sections                &#xA0;&#xA0;}        }        That was a true two minutes fix, unlike the other four pages, which require at least a partial re-write.</p>
        </article>
        <article id="article-8309">
            <a href="https://ayende.com/blog/1900/complex-searching-querying-with-nhibernate" target="_blank">
                <h2 class="title mb-6" id="article-8309">Complex Searching / Querying With NHibernate</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 07, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Let us take the following form, the like of which has been known to cause grown man to cry. The client want something &quot;very simple&quot;: I just want to be able to search on my policies, and this is the stuff that I think that I need now, and I&#x27;ll need more in the future.        Just a hint on the data model as relevant to this search form, it goes something like this:            Polic:                        M:M - Clients:                                    1:1 Primary Address                            1:M - Claims:                                                        1:M Payments                                    Account:                        1:M - Policies    Note that I make no promises that this is a viable model for insurance, I just needed a complex domain and I can&#x27;t use my usual Employees &gt;&#xA0;Salaries example, since it would hit too close to the real issue that I did.    Anyway, the problem with this kind of fomrs is that they are complex beasts. I have seen search forms that were two pages long, and were accompanied with a manual (just for the search form) that was bigger than the entire system specification. The real kicker here is that there isn&#x27;t a single path that the user is going through, the system should be able to handle any combination of search terms, and ignore any that isn&#x27;t relevant.     There is additional complexity added by the fact that this data is not sitting in the same table, actually, just from the rough data modle above, it looks like it is sitting in no less than&#xA0;6 tables.This is also the place where the Stored Procedure approach hurts the most, in my experiance.     Let us start by looking at the UI code for this, shall we?            protected void Search_Click(object sender, EventArgs e)                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; PoliciesFinder finder = new PoliciesFinder();                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (txtClientId.Text != &quot;&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.ClientId = int.Parse(txtClientId.Text);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (txtClientName.Text != &quot;&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.ClientNameLike = txtClientName.Text;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (ddlPolicyType.SelectedIndex != 0) //everything                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.PolicyType = (PolicyType )Enum.Parse(typeof (PolicyType), ddlPolicyStatus.Text);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.PolicyStatus = (PolicyStatus )Enum.Parse(typeof (PolicyStatus), ddlPolicyStatus.Text);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.City = (WellKnownCities )Enum.Parse(typeof (WellKnownCities), ddlCity.Text);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (txtClaimNumber.Text != &quot;&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.ClaimNumber = int.Parse(txtClaimNumber.Text);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (ClaimStatus_Paid.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.ClaimStatus = ClaimStatus.Paid;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (ClaimStatus_Processing.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.ClaimStatus = ClaimStatus.Processing;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (ClaimStatus_Rejected.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.ClaimStatus = ClaimStatus.Rejected;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (txtPaymentNum.Text != &quot;&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.PaymentNumber = int.Parse(txtPaymentNum.Text);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (chkAccountSize_Small.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.AccountSize |= AccountSize.Small;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(chkAccountSize_Medium.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.AccountSize |= AccountSize.Medium;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (chkAccountSize_Big.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.AccountSize |= AccountSize.Big;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (chkAccountSize_MoneyCow.Checked)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; finder.AccountSize |= AccountSize.MoneyCow;                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IList&lt;Policy&gt;&#xA0;policies = finder.Find();                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; gridPolicies.DataSource = policies;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; gridPolicies.DataBind();                        }        [Despite its size, this is still just first attempt, with no checks for user input, etc]    What we have here is a Finder object, which the UI uses. It is not the job of the UI to make searches, especially not searches this complex. If this is more than a one liner that can be expressed with NHQG, I tend to create a finder object for this, which will contain all the logic for the search. All the properties on finder are nullables, since they are all optionals...            public class PoliciesFinder                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; int? clientId;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; string clientNameLike;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; PolicyType? policyType;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; PolicyStatus? policyStatus;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WellKnownCities? city;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; int? claimNumber;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ClaimStatus? claimStatus;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; int? paymentNumber;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AccountSize accountSize;                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;...        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...        }        Now, let us turn to the implementation of the Find() method.            public IList&lt;Policy&gt; Find()                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DetachedCriteria query = DetachedCriteria.For(typeof(Policy), &quot;policy&quot;);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AddClientQuery(query);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AddPolicyQuery(query);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AddClaimsQuery(query);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AddAccountQuery(query);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AddDateRangeQuery(query);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return query.GetExecutableCriteria(Context.Session).List&lt;Policy&gt;();                        }        We create a detached criteria, and start to pass it to each of the helper methods...            private void AddClientQuery(DetachedCriteria query)                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DetachedCriteria clientCriteria = null;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(clientId.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria = DetachedCriteria.For(typeof (Client));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria.Add(Expression.Eq(&quot;Id&quot;, clientId.Value));&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(clientNameLike!=null)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria = clientCriteria ?? DetachedCriteria.For(typeof (Client));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria.Add(Expression.Like(&quot;Name&quot;, clientNameLike, MatchMode.Anywhere));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(city.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria = clientCriteria ?? DetachedCriteria.For(typeof(Client));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria.Add(Expression.Eq(&quot;Area&quot;,city.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (clientCriteria != null)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria.SetProjection(Projections.Property(&quot;Id&quot;));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; clientCriteria.Add(Property.ForName(&quot;Id&quot;).EqProperty(&quot;client.Id&quot;));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; query.CreateCriteria(&quot;Clients&quot;,&quot;client&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; .Add(Subqueries.Exists(clientCriteria));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        }        The interesting part here is in the end, where we use a subquery to check for the existance of a client that match the descriptions.            private void AddPolicyQuery(DetachedCriteria query)                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(policyType.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; query.Add(Expression.Eq(&quot;Type&quot;, policyType.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(policyStatus.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; query.Add(Expression.Eq(&quot;Status&quot;, policyStatus.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        }        Nothing interesting above, but the next one is interesting:            private void AddClaimsQuery(DetachedCriteria query)                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DetachedCriteria claimCriteria = null;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(claimNumber.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; claimCriteria = query.CreateCriteria(&quot;Claims&quot;);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; claimCriteria.Add(Expression.Eq(&quot;Id&quot;, claimNumber.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(claimStatus.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; claimCriteria = claimCriteria ?? query.CreateCriteria(&quot;Claims&quot;);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; claimCriteria.Add(Expression.Eq(&quot;Status&quot;, claimStatus.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(paymentNumber.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; claimCriteria = claimCriteria ?? query.CreateCriteria(&quot;Claims&quot;);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; claimCriteria                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; .CreateCriteria(&quot;Payments&quot;, &quot;payment&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; .Add(Expression.Eq(&quot;Id&quot;, paymentNumber.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        }        Notice the use of CreateCriteria to join to other tables with ease, so we can check them as well.            private void AddAccountQuery(DetachedCriteria query)                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(accountSize!=AccountSize.None)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ICriterion accountSizeExpr=null;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; foreach (AccountSize value in Enum.GetValues(typeof(AccountSize)))                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if((accountSize &amp; value ) == value)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(accountSizeExpr==null)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; accountSizeExpr = Expression.Eq(&quot;Size&quot;, value);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; else                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; accountSizeExpr = Expression.Or(                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; accountSizeExpr,                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Expression.Eq(&quot;Size&quot;, value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; query.CreateCriteria(&quot;Account&quot;)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; .Add(accountSizeExpr);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        }        And this example shows the fun you can have with a search API :-) Now all we have to do is...            private void AddDateRangeQuery(DetachedCriteria query)                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(startDate.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; query.Add(Expression.Le(&quot;Range.Start&quot;, startDate.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if(endDate.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; query.Add(Expression.Ge(&quot;Range.End&quot;, endDate.Value));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        }        And we are basically done. We still need to test this finder, and to see that it give us the correct results, of course (which I hadn&#x27;t done in this case, by the way). The advantages of this approach is that the finder is easily extensible in the future, if the customer would like me to give him additional fields, I can simply add it to the UI and then add additional querying to the finder. The nice thing about it is that I am not concating strings, so I can just play with it just about everywhere I want, and let NHibernate figure out the final query.    One thing to be aware of is that the final SQL query is probably going to be fairly involved if all the filterring are going to be used, but that is not an expected usage for this kind of screen.</p>
        </article>
        <article id="article-8310">
            <a href="https://ardalis.com/c-3-0-feature-notes/" target="_blank">
                <h2 class="title mb-6" id="article-8310">C# 3.0 Feature Notes</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 06, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Anders Heljsberg has been giving us an overview of new C# 3.0 features this morning. I&#x2019;ve made a few notes. Most of this info is available&#x2026;Keep Reading &#x2192;</p>
        </article>
        <div class="button flex justify-between">
            <a href="830.html"><span class="back arrow"></span></a>

            <a href="832.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>