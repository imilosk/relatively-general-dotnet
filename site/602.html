
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 602 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-6011">
            <a href="https://ayende.com/blog/4084/more-on-macto" target="_blank">
                <h2 class="title mb-6" id="article-6011">More on Macto</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 26, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Looking at the responses that I got, I think that there is some basic misunderstanding about the goal of the sample. Some people seems to want this to be a usable product, some even went ahead and specified some&#x2026; interesting requirements.   Unlike Storefront, I don&#x2019;t intend to create something that would be a useful component to take and use, for the simple reason that I don&#x2019;t think that it would allow to show anything really interesting. Any generic component or system has to either make too much assumptions (constrained) or not enough (open ended). I don&#x2019;t care to have to hand wave things too much.  Given that I am a domain expert on exactly two things, and that I am not going to create Yet Another Bug Tracking Application, I think that it is fairly obvious what I have to build.  Macto is going to be a prison management system.   I am going to use it to demonstrate several topics that I have been dealing with lately, among them the concepts &amp; features architecture and how to build scalable systems.  I&#x2019;ll let you stew on that and will post more details about Macto tomorrow.</p>
        </article>
        <article id="article-6012">
            <a href="https://ayende.com/blog/4083/nhibernate-linq-1-0-released" target="_blank">
                <h2 class="title mb-6" id="article-6012">NHibernate Linq 1.0 released!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 26, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The most requested feature for NHibernate for the last few years has been Linq support, and it gives me great pleasure to announce the release of NHibernate Linq 1.0 RTM, which you can download from here.  NHibernate Linq support is based on the existing, proven in production, Linq provider in NHibernate Contrib. The plans to overhaul that and merge that into NHibernate&#x2019;s proper for the next release are still active, but the project team feels most strongly that production quality Linq support is something that we ought to provide for our users now.  This Linq release support just about anything that you can do with the criteria API. We do not support group joins or subqueries in select clauses, since they aren&#x2019;t supported by the criteria API. NHibernate&#x2019;s Linq support has been tested (in production!) for the last couple of years, and most people find it more than sufficient for their needs.  We do plan for expanding the Linq support to support more, but the decision has been made that it makes absolutely no sense not to provide an interim, highly capable, release in the meantime for our users.  Enjoy, and happy linqing.  Oh, and I almost forgot, which would have been a shame. Many thanks for Tuna and Chad, for doing the bulk of the work on the provider.</p>
        </article>
        <article id="article-6013">
            <a href="https://ayende.com/blog/4082/macto-an-end-to-end-sample" target="_blank">
                <h2 class="title mb-6" id="article-6013">Macto</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 25, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">It looks like what people would really like to see is an end to end sample of all the things that I have been talking about lately.  The problem with doing that is the scope that we are talking about here, it is pretty big, and there are some interconnected parts that would be hard to look at in isolation. To make things a little bit more interesting, building a &#x201C;best practice&#x201D; application is dependent on far too many variables.   Given all of that, I decided that I might as well copy a good idea and try to emulate Rob Conery&#x2019;s Storefront series of webcasts. What I absolutely refuse to do, however, is to create Yet Another Online Shop.  Hence, I have another forum, dedicated to this specific task, where you can discuss what you want to see.&#xA0; We need to decide what is the application, what are the requirements, etc.  Please have the conversation in the forum, which would make it easier to track things.  I think that I can promise at least two or three webcasts to come out of it, including the full source code.</p>
        </article>
        <article id="article-6014">
            <a href="https://ayende.com/blog/4081/blog-posts-ideas-remapped" target="_blank">
                <h2 class="title mb-6" id="article-6014">Blog posts ideas, remapped</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 25, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Wow,  I got a lot of suggestions for new blog posts. I am not promising that I would do all of them, but I am going to try.  The experiment went well enough that I decided to create a dedicated forum for this, which would allow people to also vote for individual post topics, and give me better idea what people want to see.  I also moved all the previous suggestions to the new forum, and I think that I&#x2019;ll make it a regular feature.</p>
        </article>
        <article id="article-6015">
            <a href="https://ayende.com/blog/4080/book-review-watch-on-the-rhine" target="_blank">
                <h2 class="title mb-6" id="article-6015">Book Review</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 24, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I just finished listening to this book, and it is&#x2026; quite an interesting one. The basic premise of the book is enough to ensure that it would be interesting:     After the first [alien invasion] enemy landings in 2004, the German chancellor decides, despite fierce opposition, to rejuvenate survivors of the Waffen SS. Eager to redeem their tarnished honor, these veterans display the same steadfastness and fortitude that they did in Russia and Normandy.   I think that just from that, you can understand why it is interesting by default. I have to say, Ringo and Kratman managed to set a very believable world, and the handling of the topic was superb. I am going to have another post about Ringo&#x2019;s style vs. Weber&#x2019;s style, so I&#x2019;ll skip a lot of that discussion in this post.  This is a Good Book, although I have to say, I find it much easier to accept alien invasions than the Judas Maccabiah SS brigade (which appear in the book).  I wonder the affect of Heinlein on Ringo&#x2019;s writing. Some of the themes woven throughout the plot are definitely Heinleinism. The parasitic pacifist and peace through superior firepower, in particular.  I want to say that the book&#x2019;s portrayal of the civilian attitude to the military mindset is unrealistic, but I have to say that unfortunately it isn&#x2019;t so. There are some really stupid people out there.   The one thing that I find totally unrealistic in the book, however, was that political pressure was able to basically castrate the army. Mostly from environmentalist groups and the like. I have no idea how the German political and military game is played, but in most places, there is Peace and there is War. And you don&#x2019;t mess around with the army in a time of war, the army tend to push back on that, and hard.</p>
        </article>
        <article id="article-6016">
            <a href="https://ayende.com/blog/4079/nhibernate-and-ndepend-skimming-the-surface" target="_blank">
                <h2 class="title mb-6" id="article-6016">NHibernate and NDepend &#x2013; skimming the surface</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 24, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, you are probably are already aware of the long discussion that I had about it. Patrick was kind enough to help me get to the actual information that I was interested at, and now I can try to talk with concrete data.  The post is based on skimming the following matrix:     But the reason that I am skimming is that the matrix size is just too big to really go over by hand. The matrix is showing dependencies between different types.   Here is an area that seems to be rich in cycles:     Let me list them out for you:     FutureCriteriaBatch and FutureQueryBatch have a cyclic relationship with SessionImpl. There isn&#x2019;t a problem here, since they are considered to be friend classes, they would probably have been defined as inner classes of SessionImpl, if that class wasn&#x2019;t already big enough. So we consider them to be part and parcel of the same thing, since they are tied together very tightly.     SessionFactoryImpl have cyclic relationship with SessionImpl and StatelessSessionImpl. Again, we don&#x2019;t consider this a problem, those classes are tied together by the nature of their existence. SessionFactoryImpl have to be able to create the sessions, and they need to access it to be able to touch everything that isn&#x2019;t session scoped.     MultiCriteriaImpl has a cyclic relation with SessionImpl for much the same reason, SessionImpl is its creator, after which it&#xA0; is using SessionImpl to do a lot of its work.     CritertiaImpl and its inner class, CriteriaImpl.Subcrtieria are also listed as a cycle. In this case, again, I don&#x2019;t have an issue. Especially since inner class relationship already have the concept of a cycle in it.    Here are a few other snapshots:     On the face of it, it looks like a lot of cycles in NHibernate.Type. But again, digging a bit deeper, we can see that there is actually a good reason for those. Customer types needs to be able to create additional types, and it is no great surprise that they use the TypeFactory to do so, or that the TypeFactory can also create them.  Another matrix that looks bad at first glace is this:     Except that every single one of those cyclic dependencies are between a parent class and an inner class.  Now, I don&#x2019;t want to say that there aren&#x2019;t cyclic dependencies in NHibernate that shouldn&#x2019;t be there and need to be removed. But on a(n admittedly short) study, I wasn&#x2019;t able to find a such a case. And the cases that I found had pretty good reasons for behaving the way they do.  Another observation worth noting is that NHibernate is structured using a recursive spoke and wheel approach.     What I mean by that is that we have different types of components all doing their own specific task, and then we have what, for lack of a better word, I&#x2019;ll call orchestrators, which manager a bunch of those components and how they work together.  This continues on recursively, we have orchestrators for orchestrators, until we end up at the pinnacle, with ISession and ISessionFactory.  This design make it pretty easy to add new functionality along existing lines, and adding entirely new functionality is just a matter of deciding where to put things.  One of the things that I most like with NHibernate is that so many features can be implemented using very high level concepts. For example, Futures were extremely easy to implement, because we could take advantage of all the underlying infrastructure.  An implication of this is that when I need to expose something from SessionImpl, for example, which was built mostly using SessionImpl, I am going to have a cycle.  I suggest taking a look at FutureCriteriaBatch and its association to SessionImpl to look at why we have those cycles. I don&#x2019;t believe that you will find them to be a problem after you look at the actual code.  Now, let see how big an ants&#x2019; nest I kicked this time.  Update: Patrick mentioned in the comments that I should also pay attention to direct &amp; indirect usage. The problem is that I don&#x2019;t find it very useful, from the aforementioned reasons. For that matter, when I looked at a few of the &#x201C;trouble spots&#x201D; with direct &amp; indirect usage, I was still not able to point at something that I would consider a problem.   The graph certainly looks scary, isn&#x2019;t it?     But the problem is that I can&#x2019;t find much new information when I dig in. Here are a few examples:     We already talked about SessionImpl and FutureCriteriaBatch, and it doesn&#x2019;t surprise me that IType and ISessionImplementor are tied together. ISessionImplementor needs types to do its work, and IType needs ISessionImplementor to access the services that NHibernate offers internally.   Another one:  &#xA0;   Again, nothing that I didn&#x2019;t know already.  In fact, I&#x2019;ll go a bit further and say that even for indirect only cycles in NHibernate&#x2019;s codebase, the things I said above about direct cycles still hold.</p>
        </article>
        <article id="article-6017">
            <a href="https://ayende.com/blog/4078/extending-subtext-to-report-future-posts" target="_blank">
                <h2 class="title mb-6" id="article-6017">Extending SubText to report Future Posts</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 23, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Since I am making so much use of future posts recently, I decided that it would be interesting to have a sidebar that shows the future posts. The problem is that I really don&#x2019;t want to mess around with SubText.  This is not a slight against SubText, it has served me well for a long time. It is simply that for what I wanted, the number of steps that I would have to go through is way too long:     Get the relevant source    Compile it on my machine    Figure out SubText&#x2019;s architecture and where I should make my changes    Upload a new version of the blog engine   It is possible, but it just take too long. Moreover, it would most certainly break the next time that I would update SubText, because I would forget all about it.   But it is not the only way to get stuff done, however. Here is my solution:  Update: I actually had a bug here related to time zone handling, fixed now.  Update 2: I used the 3.5 TimeZone semantics for this, but my server is running 2.0, use an okay hack instead. And fixed potential issue with &lt; &amp; &gt; in the titles.     &lt;%@ Page Language=&quot;C#&quot; %&gt;&#xA;&lt;%@ OutputCache Duration=&quot;60&quot; VaryByParam=&quot;None&quot; %&gt;&#xA;&#xA;&lt;%@ Import Namespace=&quot;System.Data.SqlClient&quot; %&gt;&#xA;&lt;%@ Import Namespace=&quot;System.Configuration&quot; %&gt;&#xA;&lt;ul&gt;&#xA;&lt;%&#xA;string connectionString = ConfigurationManager.ConnectionStrings[&quot;subtextData&quot;].ConnectionString;&#xA;using(SqlConnection connection = new SqlConnection(connectionString))&#xA;{&#xA;&#x9;connection.Open();&#xA;&#x9;&#xA;&#x9;using(SqlCommand cmd = connection.CreateCommand())&#xA;&#x9;{&#xA;&#x9;&#x9;cmd.CommandText = @&quot;&#xA;select top 15 Id, DateSyndicated, Title from subtext_Content&#xA;where DateSyndicated &gt; @nowIsrael&#xA;order by DateSyndicated&#xA;&quot;;&#xA;&#x9;&#x9;DateTime nowIsrael = DateTime.UtcNow.AddHours(3);&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;cmd.Parameters.AddWithValue(&quot;nowIsrael&quot;,nowIsrael);&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;using(SqlDataReader reader = cmd.ExecuteReader())&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;if(reader.HasRows == false)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;%&gt;&lt;li&gt;Queue is empty&lt;/li&gt;&lt;%&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;while(reader.Read())&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;DateTime dateSyndicated = (DateTime)reader[&quot;DateSyndicated&quot;];&#xA;&#x9;&#x9;&#x9;&#x9;string title = (string) reader[&quot;Title&quot;];&#xA;&#x9;&#x9;&#x9;&#x9;string formattedSyndication;&#xA;&#x9;&#x9;&#x9;&#x9;TimeSpan timeLeft = dateSyndicated - DateTime.Now;&#xA;&#x9;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;if (timeLeft.Days &gt; 7)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;formattedSyndication = timeLeft.Days / 7 &#x2B; &quot; weeks &quot; &#x2B; timeLeft.Days % 7 &#x2B; &quot; days&quot;;&#xA;&#x9;&#x9;&#x9;&#x9;else if (timeLeft.Days &gt; 0)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;formattedSyndication = timeLeft.Days &#x2B; &quot; days&quot;;&#xA;&#x9;&#x9;&#x9;&#x9;else if (timeLeft.Hours &gt; 0)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;formattedSyndication = timeLeft.Hours &#x2B; &quot; hours&quot;;&#xA;&#x9;&#x9;&#x9;&#x9;else if (timeLeft.Minutes &gt; 0)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;formattedSyndication = timeLeft.Minutes &#x2B; &quot; minutes&quot;;&#xA;&#x9;&#x9;&#x9;&#x9;else&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;formattedSyndication = &quot;In a moment&quot;;&#xA;&#x9;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;%&gt;&#xA;&#x9;&#x9;&#x9;&#x9;&lt;li&gt;&lt;%= formattedSyndication %&gt; &lt;br /&gt; &lt;%= Server.HtmlEncode(title) %&gt;&lt;/li&gt;&#xA;&#x9;&#x9;&#x9;&#x9;&lt;%&#xA;&#x9;&#x9;&#x9;}&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;%&gt;&#xA;&lt;/ul&gt;&#xA;&#xA;&#xA;And then it was just a matter of changing the template to include the following JavaScript:&#xA;&#xA;&#xA;  $(&#x27;#futurePosts&#x27;).load(&#x27;http://ayende.com/Blog/FuturePosts.aspx&#x27;);&#xA;&#xA;&#xA;And that is it. It works, it is safe, it can&#x2019;t really break anything, and it will probably survive blog upgrades.</p>
        </article>
        <article id="article-6018">
            <a href="https://ayende.com/blog/4077/feature-by-feature" target="_blank">
                <h2 class="title mb-6" id="article-6018">Feature by feature</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 23, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I commented before that a feature is usually composed of several classes, running in different places and at different times, all working together to achieve a single goal. This post is meant to expand on this notion a bit.  Let us go back to the type of architecture that I favor right now. Note that this is a physical diagram only, without actually going into the details about how each of those is implemented.     Storage, for example, may be a relational database, a key value store, a distributed hash table or something else, depending on&#xA0; the requirements and constraints that I have.  More than anything, this diagram represent physical distribution and setup behavior. For example, you really want to backup all the storage servers, but an application server can just have a image made and that would be it.  The main reason for having a separation between web &amp; app servers is mostly so we can place the web server in the DMZ and the app server in a more trusted location. But I digress.   I mentioned before that I don&#x2019;t really like layering anymore, and that I tend to think hard before I create assemblies.   Here is a sample of some of the ideas that I have been working on lately. The idea is to formalize a lot of the notions that I talked about in my concepts and features post.&#xA0;      You can think about this as a logical extension to the way people build composite applications. We have the infrastructure, the idea of the base services that are being provided by the application, and then we have features.  Each feature is a complete story, which means that a feature will contain, in the same place, all the parts required to make it work. For example, as you can see in the project image, what we have is the Search feature, which contains some UI, the logic to control the UI on the client side and the server side, helper classes to manage that. In the Finders folder we have additional functionality that is specific for this particular feature.  The infrastructure knows that it needs to pull of of that together, so we base everything on conventions. For example, we have a routing convention for aspx pages, and for finding services or controllers.  From layering perspective, there aren&#x2019;t any. Inside a feature, you can do pretty much whatever you want. There is usually some conventions around to help build things properly, but that is mostly about just getting things working, not to support layering. And I don&#x2019;t have a problem with breaking the rules inside a feature.  Features that affect each other are rare. It usually only happen whenever we have to do things like &#x201C;when you search for an order and you go to a particular order, we want to always go back to the search page, no matter how deep we went&#x201D;.  Cross feature communication is done using pub/sub mechanism, most of the time.  Most of the ideas that I outline here are composite applications notions, just applied in a more general fashion. The end result is that you gain all the usual benefits from composite applications. You don&#x2019;t step on another feature toes when you add stuff, and you have a stable base from which to work from. Each feature can be developed independently and is only worried about its own problems. The infrastructure is built during the first few features, but afterward it is mainly a stable platform on top of which we build.   I should note that notion is recursive. That is, we have a feature that keep getting expanded. At that point, we will probably treat it like the entire application, and build the infrastructure in place so we can drop additional features to the root feature. A common example of that would be to support additional authentication mechanisms for the Authentication feature.</p>
        </article>
        <article id="article-6019">
            <a href="https://ayende.com/blog/4076/book-review-by-heresies-distressed" target="_blank">
                <h2 class="title mb-6" id="article-6019">Book Review</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 23, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Hands down, David Weber is my favorite author. He has the ability to create rich worlds that are complete, logically consisted and interesting. While Weber is mostly known for the Harrington series, which I also really like, I have to say that the Prince Roger books (March Upcountry, etc) are the best military action series that I have read, and that the Safehold series is the best political action series.  Of the two, I actually think that I prefer the Safehold series, although it is a very close match, and I&#x2019;ll likely change my mind if there would be a new book in the series.  All of that said, this book is actually about the latest book in the Safehold series, which includes Off Armageddon Reef and By Schism Rent Asunder. In a single sentence, I can tell you that Weber has managed to capture my interest all over again. His ability to weave so many concurrent plot lines is the key part of the high level of enjoyment (and quality) that I derive from the books.  The one problem that I have, like the one in the previous one, is stops too early! If I were smart, I would probably drop the series for a decade or so, and wait for Weber to pump enough books out that I can get them all in one shot.  That is not to say that the books are too long, or full of fluff. It is just that Weber is painting a big picture, and that takes time. Unfortunately, it means that by the book ends, I was left with quite a desire to known what the hell is going to happen next.</p>
        </article>
        <article id="article-6020">
            <a href="https://ardalis.com/ohio-towns-top-money-top-100-small-towns-list/" target="_blank">
                <h2 class="title mb-6" id="article-6020">Ohio Towns Top Money Top 100 Small Towns List</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 22, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Money recently released their 2009 list of America&#x27;s best small towns(which, living in a small town, I was curious about). Their Top 10&#x2026;Keep Reading &#x2192;</p>
        </article>
        <div class="button flex justify-between">
            <a href="601.html"><span class="back arrow"></span></a>

            <a href="603.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
