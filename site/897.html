
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 897 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-8961">
            <a href="https://ayende.com/blog/1541/global-methods-in-c-3-0" target="_blank">
                <h2 class="title mb-6" id="article-8961">Global Methods in C# 3.0</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 19, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">As you probably know, you can&#x27;t define a stand alone method in C#, It must always reside within a class. C# 3.0 adds extention methods to the lagnague, which allows you to add methods to existing classes.    We can take advantage of that to implement a &quot;global&quot; method, like this:            public&#xA0;static&#xA0;class&#xA0;GlobalMethods        {        &#xA0;&#xA0;&#xA0;public&#xA0;static bool&#xA0;IsNull(this&#xA0;object&#xA0;ignored,&#xA0;object&#xA0;obj)        &#xA0;&#xA0;&#xA0;{        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;obj&#xA0;!=&#xA0;null;        &#xA0;&#xA0;&#xA0;}        }        Now I can use this like this:if&#xA0;(IsNull(foo))&#xA0;    This is not really useful for this case, but it is a very big step for fluent interfaces. At the moment having to have a class name prefix is somewhat of an issue with fluent interfaces. Which sometimes doesn&#x27;t make sense in the sentence structure we are trying to create.</p>
        </article>
        <article id="article-8962">
            <a href="https://ayende.com/blog/1540/what-is-a-control" target="_blank">
                <h2 class="title mb-6" id="article-8962">What is a control?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 18, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I had an argument yesterday about the interface that a control should expose to the prorammer, and I think that it makes for an interesting discussion.    First, we are not talking about a System.Web.UI.Control, which is used to display a list of possible organization units. This control is written spesifically for this purpose.    My take on the interface is something like this:            public&#xA0;class&#xA0;OuPager&#xA0;:&#xA0;Control        {        &#xA0;&#xA0;public&#xA0;OrganizationUnit&#xA0;CurrentOrganizationUnit&#xA0;{&#xA0;get;&#xA0;set;&#xA0;}        &#xA0;&#xA0;public&#xA0;event&#xA0;EventHandler&#xA0;OrganizationUnitChanged;        }         The other approach is to make the control responsible for displaying the organization unit only, and then the interface looks like:            public&#xA0;class&#xA0;OuPager&#xA0;:&#xA0;Control        {        &#xA0;&#xA0;public&#xA0;void&#xA0;SetCurrentOrganizationUnit(OrganizationUnit&#xA0;current);        &#xA0;&#xA0;public&#xA0;event&#xA0;EventHandler&#xA0;PressedNext;        &#xA0;&#xA0;public&#xA0;event&#xA0;EventHandler&#xA0;PressedPrev;        &#xA0;&#xA0;public&#xA0;bool&#xA0;HasNext&#xA0;{&#xA0;set;&#xA0;}        &#xA0; public&#xA0;bool&#xA0;HasPrev&#xA0;{&#xA0;set;&#xA0;}        }         In my opinion, putting the control in charge of the data access and manipulating the list of items free the developer that uses this control from worrying about a lot stuff.    The other opinion is that this is a UI control and it shouldn&#x27;t do anything beyond what I explicitly tell it to do.    Comments?    Just to clarify: Here is what I mean by &quot;data access&quot; in the control:            this.DataSource&#xA0;=&#xA0;Repository&lt;OrganizationUnit&gt;.FindAll();</p>
        </article>
        <article id="article-8963">
            <a href="https://ayende.com/blog/1539/complex-object-graphes" target="_blank">
                <h2 class="title mb-6" id="article-8963">Complex Object Graphes</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 18, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Recently I have been working on an application that require high level of configurability. I choose to use Castle&#x27;s Windsor&#xA0;and Inversion of Control as the main principals when designing the application.    I think I took a slightly different route than the normal one. I use Windsor to generate the entire object graph once, and then I start working with it. Actually, it is a little more complicated than that. The object graph just need a push (a call to Start() ) and it start working on its own, with no additional input/output from outside.    When I am talking about object graph, I&#x27;m talking about roughly 30 to 50 objects at the moment, nested to about 4 - 5 logical levels at the moment (likely more in the future). The high level overview of this is:            Coordinator Service - Start / Stop:                        &#xA0;Triggers (file arrived, time span expired, clock tick, etc):                                    Actions (check db, call web service, handle file, etc):                                                Helper classes                                                            Data Components                                                    Configuration Classes                                    Nested Actions                                        Helper Classes                            Work Managers                It is fairly easy to add something to the system, you decide what trigger the action, register a new trigger and the actions that follow it, and you are done. Most of the helper classes are already written, and Windsor just supplies them automatically. The biggest concern that I have in this issue is that I need to make sure that thread safety is maintained, which is actually pretty easy to do in this case. Mostly, the work manager that I posted about previously is taking care of that.     The entire code for the service itself looks something like this:            IWindsorContainer&#xA0;cotainer&#xA0;=&#xA0;new&#xA0;RhinoContainer(new&#xA0;XmlInterpreter(&quot;Windsor.config&quot;));*        ICoordinatorService&#xA0;service&#xA0;=&#xA0;container.Resolve&lt;ICoordinatorService&gt;();        service.Start();        And the whole thing just start running itself.    Advantages of this approach:            I isolated the functionality very clearly. Which means that I can truly focus on a single responsability per class, and pass additional responsabilities to other classes.            Very easy to explain what each parts does.            Easy to test in isolation.            The value of the system is with the interactions between the objects, not in the code itself.            Allows to extend the application very rapidly, because I don&#x27;t need to touch any other code.            Bringing a new programmer in requires teaching about IoC and Windsor. I spread the love.    Disadvantages:            While fairly easy to grasp at a high level, it is hard to understand the nitty gritty details, because the picture is so big.            Testing the system as a whole is complex, because so many things happen at the same time.            Creating clear transaction boundaries are complex. Because I don&#x27;t want to make a transaction dependency (where I implcitly assume that a class will always call another class), it require some thinking. I can&#x27;t say that I solved this issue fully yet.            Configuration bugs. Enough said.            Bringing a new programmer in requires teaching about IoC and Windsor.    Despite the disadvantages, I like this method. Just to give some context, I made an initial deployment that went bad because the production server is 64 bits and didn&#x27;t have the components that I relied on. I was able to replace at the client site, the dependent compoents with a custom one that I wrote in place, I plugged it in, and it just worked.    * RhinoContainer is an extention to WindsorContainer that gives some additional capabilties, mainly configuration objects and pre-registeration of some of the facilities. It is a really thin extention, less than 150 lines of code.</p>
        </article>
        <article id="article-8964">
            <a href="https://ardalis.com/19739/" target="_blank">
                <h2 class="title mb-6" id="article-8964">New Caching Video</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 17, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I recored a quick video demonstrating the effects of a very short duration cache on a page that&#x2019;s hitting the database more than 1/second&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-8965">
            <a href="https://ayende.com/blog/1538/interfaces-consolidate-partition-or-combine" target="_blank">
                <h2 class="title mb-6" id="article-8965">Interfaces: Consolidate, Partition or Combine?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 16, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">(Just to note, I am working on more than one project at any given time, so if you wonder why I am jumping between topics, it is because I am drawing from several very different projects, with different goals and technologies.)    I have a project where most (all?) of my entities implements several common interfaces:            IHaveNameAndId            IHaveHistory - I think that I will have to hate that one. Think about chained histories, and then try to debug that.            ISecurable            IVersionable    My classes are defined as:public&#xA0;class&#xA0;Employee&#xA0;:&#xA0;IHaveNameAndId,&#xA0;IHaveHistory,&#xA0;ISecurable,&#xA0;IVersionable&#xA0;{&#xA0;...&#xA0;}    It is likely that I will find more common stuff in the future that all the classes needs to implement. I am not sure if this is a good style. I can see several options in front of me:            Keep the existing interfaces, they state intent clearly, and they allow easy partioning of functionality (I can be versioned without having history, for instnace).            Consolidate the existing interfaces to one or two interfaces: IEntity, IEntityWithHistory, etc.            Combine interfaces to create a common interface:        public&#xA0;interface&#xA0;IEntity&#xA0;:&#xA0;ISecurable,&#xA0;IHaveNameAndId&#xA0;{}                I like the ability to say something like:public&#xA0;bool&#xA0;IsAllowed(ISecurable&#xA0;securable)&#xA0;    I think that this is far less clear:public&#xA0;bool&#xA0;IsAllowed(IEntity&#xA0;entity)    The second one may very well be, is allowed to move to another state by the business rules, for instnace. The first one make it very clear that it is the security that we are checking.    Any thoughts?</p>
        </article>
        <article id="article-8966">
            <a href="https://ayende.com/blog/1537/an-orm-is-no-excuse-to-violate-the-single-responsability-principal" target="_blank">
                <h2 class="title mb-6" id="article-8966">An ORM is NO excuse to violate the Single Responsability Principal</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 15, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This post is directed at yours truly. Take a look at this class:        The ISessionManager interface is provided by Windsor NHibernate Integration, it gives me an access to NHibernate&#x27;s ISession, which in turn gives me an access to the database.    It is really easy to write code for this system, you pull some stuff from the database, minor processing, and it is done. It is testable, because you are using only interfaces. The problem is with the ease of testing. I couldn&#x27;t quite put my hand on why my tests were cumbersome to write.     Take a look at this snippet:            [Test]                        public void LogErrorIfFileHasNotArrived()                        {                        &#xA0;&#xA0;&#xA0; MockRepository mocks = new MockRepository();                        &#xA0;&#xA0;&#xA0; ISessionManager sessionManager = GetSessionManagerAndSetupMocks(mocks, new ArrayList());        Where GetSessionManagerAndSetupMocks is defined:                    &#xA0;                        private static ISessionManager GetSessionManagerAndSetupMocks(MockRepository mocks, IList list)                        {                        &#xA0;&#xA0;&#xA0; ISessionManager sessionManager = mocks.CreateMock&lt;ISessionManager&gt;();                        &#xA0;&#xA0;&#xA0; ISession session = mocks.CreateMock&lt;ISession&gt;();                        &#xA0;&#xA0;&#xA0; ICriteria criteria = mocks.CreateMock&lt;ICriteria&gt;();                        &#xA0;&#xA0;&#xA0; Expect.Call(sessionManager.OpenSession()).Return(session);                        &#xA0;&#xA0;&#xA0; Expect.Call(session.CreateCriteria(typeof (FileState))).Return(criteria);                        &#xA0;&#xA0;&#xA0; Expect.Call(criteria.Add(null)).IgnoreArguments().Repeat.Twice().Return(criteria);                        &#xA0;&#xA0;&#xA0; Expect.Call(criteria.List()).Return(list);                                &#xA0;                        &#xA0;&#xA0;&#xA0; session.Flush();                        &#xA0;&#xA0;&#xA0; session.Dispose();                        &#xA0;&#xA0;&#xA0; return sessionManager;                        }        And that is for a fairly simple test. This creates an environment where it is pretty hard to write the tests, because I need to setup quite a bit of code, and it has to be intimately familiar with the structure of the class under test. I am dealing more with infrastructure than with testing something that adds a real value.    I am currently refactoring all the usages of ISessionManager (and NHibernate) to satallite interfaces/classes, which allows me to transform the above test to this:            [ Test]                        public void LogErrorIfFileHasNotArrived()                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; MockRepository mocks = new MockRepository();                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ICheckFileArrivedDataHelper dataHelper = mocks.CreateMock&lt;ICheckFileArrivedDataHelper&gt;();                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; MemoryAppender appender = new MemoryAppender();                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; BasicConfigurator.Configure(appender);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Expect.Call(dataHelper.GetFilesNotMarkedByWatcher(3)).Return(new FileState[0]);                                            &#xA0;                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; mocks.ReplayAll();                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CheckFileArrivedTask fileNotArrivedTask = new CheckFileArrivedTask(dataHelper, 3);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; fileNotArrivedTask.Execute();                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LoggingEvent loggingEvent = appender.GetEvents()[0];                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Assert.AreEqual(Level.Error, loggingEvent.Level);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; string msg = @&quot;File type: 3 did not arrived in its period!&quot;;                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Assert.AreEqual(msg, loggingEvent.MessageObject);                                &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; mocks.VerifyAll();                        }        The part in large font replaced all the code in GetSessionManagerAndSetupMocks. Now the intent of the test is much clearer, and it is far easier to test this stuff. I no longer have to match every little thing that is going on there, instead, I can focus on the bigger picture.    I still need to test the implementation of the data helper, but that can be done in the integration tests.</p>
        </article>
        <article id="article-8967">
            <a href="https://ayende.com/blog/1536/funny-spam" target="_blank">
                <h2 class="title mb-6" id="article-8967">Funny Spam</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 15, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">No, I am not out of my mind.&#xA0; I am an admin in the Castle Forums, and someone has been posting jokes with links to various medical sites. Those are actually pretty good jokes, so it is spam that get a chuckle before I delete it.</p>
        </article>
        <article id="article-8968">
            <a href="https://ayende.com/blog/1535/help-on-naming" target="_blank">
                <h2 class="title mb-6" id="article-8968">Help on naming</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 15, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Hm, I just created an interface called &quot;IDontKnowWhatToCallThisInterface&quot; as a part of a refactoring effort.     I moved a lot of data access code to it and I still can&#x27;t come up with a good name:            public interface IDontKnowWhatToCallThisInterface&lt;T&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; where T : EntityBase                        {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FileState[] GetAllFilesThatNeedsToGenerateStatusFile(int fileType);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; void UpdateGeneratedStatusFileAt(FileState state);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; int GetReportId(string name);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; T[] GetAllRowsForFileState(FileState state);                        }        Suggestions are welcome...</p>
        </article>
        <article id="article-8969">
            <a href="https://ayende.com/blog/1534/not-a-book-review-applying-domain-driven-design-and-patterns" target="_blank">
                <h2 class="title mb-6" id="article-8969">Not a  book review: Applying Domain-Driven Design and Patterns</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 15, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I got Applying Domain-Driven Design and Patterns&#xA0;two days ago, and I have been trying to read it ever since. If you followed my adventures with reading about databinding, you know that I can usually devour a book in a day or so.     At the moment, I am on page 30, and I am incredibly frustrated. The issue is with this book. I only need to touch it to feel this sudden craving (&quot;Must Code. Must Code. Must Code!&quot;) to reach the computer and start working. I am reading about two pages and then I have to code.     The last time I had this feeling I was reading Working Effectively with Legacy Code&#xA0;and I wrote Rhino Mocks to shooth the ache to code. This is really scary, so far the only things he talks about are TDD and Refactoring, which are well known to me. But I can&#x27;t keep the book in my hands too long.    Update: I am now somewhere in chapter two, and the issue is Domain Patterns. This time I had almost twenty minutes of reading time before I had to code something. I am now thinking about the reverse term to page turner to apply to the book, any suggestions?     Just to clarify: So far, I really like the book. I hold Jimmy personaly responsible for a major refactoring effort (which I just blogged about), which has made some very visible marks on the codebase I am currently working on. Very positive ones, I should add.    Here I was, peacefully reading about design patterns, eagerly waiting for the real meat to arrive, and suddenly I hit my head and exclaim: &quot;I violated the Single Responsability Principal, that is what it is so hard to test!&quot; It is rare that I get so excited about something that I has to put it down. But Applying DDD is one of those books. It is not a page turner, it is a code pusher. I read two pages I just have to apply those ideas immediately.    Like I said, I&#x27;m only in the beginning of the book, so it is not a review (I&#x27;m planning on posting that the moment I finish the book), but I already like what I read.</p>
        </article>
        <article id="article-8970">
            <a href="https://ardalis.com/19652/" target="_blank">
                <h2 class="title mb-6" id="article-8970">Best Web Hosting</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 14, 2006
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I just filled out a customer satisfaction survey for my hosting provider, ORCSWeb, which makes me think I should probably write a little&#x2026;Keep Reading &#x2192;</p>
        </article>
        <div class="button flex justify-between">
            <a href="896.html"><span class="back arrow"></span></a>

            <a href="898.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;🚀&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
