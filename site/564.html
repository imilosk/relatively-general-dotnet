
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 564 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5631">
            <a href="https://ardalis.com/goals-for-2010/" target="_blank">
                <h2 class="title mb-6" id="article-5631">Goals for 2010</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 16, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I recently wrote about how I did with my 2009 goals, now it&#x2019;s time to set a few for this year. Let&#x2019;s start with two that didn&#x2019;t go so well&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-5632">
            <a href="https://ayende.com/blog/4367/eagerly-loading-entity-associations-efficiently-with-nhibernate" target="_blank">
                <h2 class="title mb-6" id="article-5632">Eagerly loading entity associations efficiently with NHibernate</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 16, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the things that seems to pop up frequently is people wanting to load an entity with all of its associations eagerly. That is pretty easy to do when the associations are many-to-one (that is, there is only one of them for each root entity). Example of those would be things like Owner, Site, etc.  Here is an HQL query that would load a blog with its owner and site as well:     from Blog b left join fetch b.Owner left join fetch b.Site&#xA;  &#xA;&#xA;The problem starts when you try to do the same for multiple collection associations. NHibernate allows you to do so, but the result is probably not what you would initially expect. This query, for example:&#xA;&#xA;&#xA;  from Blog b left join fetch b.Posts left join fetch b.Users where b.Id = :id&#xA;  &#xA;&#xA;Will result in the following SQL statement:&#xA;&#xA;&#xA;  select blog0_.Id             as Id7_0_,&#xA;       posts1_.Id            as Id0_1_,&#xA;       user3_.Id             as Id5_2_,&#xA;       blog0_.Title          as Title7_0_,&#xA;       blog0_.Subtitle       as Subtitle7_0_,&#xA;       blog0_.AllowsComments as AllowsCo4_7_0_,&#xA;       blog0_.CreatedAt      as CreatedAt7_0_,&#xA;       posts1_.Title         as Title0_1_,&#xA;       posts1_.Text          as Text0_1_,&#xA;       posts1_.PostedAt      as PostedAt0_1_,&#xA;       posts1_.BlogId        as BlogId0_1_,&#xA;       posts1_.UserId        as UserId0_1_,&#xA;       posts1_.BlogId        as BlogId0__,&#xA;       posts1_.Id            as Id0__,&#xA;       user3_.Password       as Password5_2_,&#xA;       user3_.Username       as Username5_2_,&#xA;       user3_.Email          as Email5_2_,&#xA;       user3_.CreatedAt      as CreatedAt5_2_,&#xA;       user3_.Bio            as Bio5_2_,&#xA;       users2_.BlogId        as BlogId1__,&#xA;       users2_.UserId        as UserId1__&#xA;from   Blogs blog0_&#xA;       left outer join Posts posts1_&#xA;         on blog0_.Id = posts1_.BlogId&#xA;       left outer join UsersBlogs users2_&#xA;         on blog0_.Id = users2_.BlogId&#xA;       left outer join Users user3_&#xA;         on users2_.UserId = user3_.Id&#xA;where  blog0_.Id = 1 /* @p0 */&#xA;  &#xA;&#xA;Something that may not be apparent immediately is going to result in a Cartesian product. This is pointed out in the documentation, but I think that we can all agree that while there may be reasons for this behavior, it is far from ideal.&#xA;&#xA;Let us look at what other OR/Ms are doing, shall we?&#xA;&#xA;The comparable query using Entity Framework would look like this:&#xA;&#xA;&#xA;  db.Blogs&#xA;    .Include(&quot;Posts&quot;)&#xA;    .Include(&quot;Users&quot;)&#xA;    .Where(x =&gt; x.Id == i)&#xA;    .ToArray();&#xA;  &#xA;&#xA;And the resulting SQL would be:&#xA;&#xA;&#xA;  SELECT   [UnionAll1].[Id]             AS [C1],&#xA;         [UnionAll1].[Title]          AS [C2],&#xA;         [UnionAll1].[Subtitle]       AS [C3],&#xA;         [UnionAll1].[AllowsComments] AS [C4],&#xA;         [UnionAll1].[CreatedAt]      AS [C5],&#xA;         [UnionAll1].[C2]             AS [C6],&#xA;         [UnionAll1].[C1]             AS [C7],&#xA;         [UnionAll1].[C3]             AS [C8],&#xA;         [UnionAll1].[Id1]            AS [C9],&#xA;         [UnionAll1].[Title1]         AS [C10],&#xA;         [UnionAll1].[Text]           AS [C11],&#xA;         [UnionAll1].[PostedAt]       AS [C12],&#xA;         [UnionAll1].[BlogId]         AS [C13],&#xA;         [UnionAll1].[UserId]         AS [C14],&#xA;         [UnionAll1].[C4]             AS [C15],&#xA;         [UnionAll1].[C5]             AS [C16],&#xA;         [UnionAll1].[C6]             AS [C17],&#xA;         [UnionAll1].[C7]             AS [C18],&#xA;         [UnionAll1].[C8]             AS [C19],&#xA;         [UnionAll1].[C9]             AS [C20]&#xA;FROM     (SELECT CASE &#xA;                   WHEN ([Extent2].[Id] IS NULL) THEN CAST(NULL AS int)&#xA;                   ELSE 1&#xA;                 END AS [C1],&#xA;                 [Extent1].[Id]             AS [Id],&#xA;                 [Extent1].[Title]          AS [Title],&#xA;                 [Extent1].[Subtitle]       AS [Subtitle],&#xA;                 [Extent1].[AllowsComments] AS [AllowsComments],&#xA;                 [Extent1].[CreatedAt]      AS [CreatedAt],&#xA;                 1                          AS [C2],&#xA;                 CASE &#xA;                   WHEN ([Extent2].[Id] IS NULL) THEN CAST(NULL AS int)&#xA;                   ELSE 1&#xA;                 END AS [C3],&#xA;                 [Extent2].[Id]             AS [Id1],&#xA;                 [Extent2].[Title]          AS [Title1],&#xA;                 [Extent2].[Text]           AS [Text],&#xA;                 [Extent2].[PostedAt]       AS [PostedAt],&#xA;                 [Extent2].[BlogId]         AS [BlogId],&#xA;                 [Extent2].[UserId]         AS [UserId],&#xA;                 CAST(NULL AS int)          AS [C4],&#xA;                 CAST(NULL AS varbinary(1)) AS [C5],&#xA;                 CAST(NULL AS varchar(1))   AS [C6],&#xA;                 CAST(NULL AS varchar(1))   AS [C7],&#xA;                 CAST(NULL AS datetime)     AS [C8],&#xA;                 CAST(NULL AS varchar(1))   AS [C9]&#xA;          FROM   [dbo].[Blogs] AS [Extent1]&#xA;                 LEFT OUTER JOIN [dbo].[Posts] AS [Extent2]&#xA;                   ON [Extent1].[Id] = [Extent2].[BlogId]&#xA;          WHERE  [Extent1].[Id] = 1 /* @p__linq__1 */&#xA;          UNION ALL&#xA;          SELECT 2                          AS [C1],&#xA;                 [Extent3].[Id]             AS [Id],&#xA;                 [Extent3].[Title]          AS [Title],&#xA;                 [Extent3].[Subtitle]       AS [Subtitle],&#xA;                 [Extent3].[AllowsComments] AS [AllowsComments],&#xA;                 [Extent3].[CreatedAt]      AS [CreatedAt],&#xA;                 1                          AS [C2],&#xA;                 CAST(NULL AS int)          AS [C3],&#xA;                 CAST(NULL AS int)          AS [C4],&#xA;                 CAST(NULL AS varchar(1))   AS [C5],&#xA;                 CAST(NULL AS varchar(1))   AS [C6],&#xA;                 CAST(NULL AS datetime)     AS [C7],&#xA;                 CAST(NULL AS int)          AS [C8],&#xA;                 CAST(NULL AS int)          AS [C9],&#xA;                 [Join2].[Id]               AS [Id1],&#xA;                 [Join2].[Password]         AS [Password],&#xA;                 [Join2].[Username]         AS [Username],&#xA;                 [Join2].[Email]            AS [Email],&#xA;                 [Join2].[CreatedAt]        AS [CreatedAt1],&#xA;                 [Join2].[Bio]              AS [Bio]&#xA;          FROM   [dbo].[Blogs] AS [Extent3]&#xA;                 INNER JOIN (SELECT [Extent4].[UserId]    AS [UserId],&#xA;                                    [Extent4].[BlogId]    AS [BlogId],&#xA;                                    [Extent5].[Id]        AS [Id],&#xA;                                    [Extent5].[Password]  AS [Password],&#xA;                                    [Extent5].[Username]  AS [Username],&#xA;                                    [Extent5].[Email]     AS [Email],&#xA;                                    [Extent5].[CreatedAt] AS [CreatedAt],&#xA;                                    [Extent5].[Bio]       AS [Bio]&#xA;                             FROM   [dbo].[UsersBlogs] AS [Extent4]&#xA;                                    INNER JOIN [dbo].[Users] AS [Extent5]&#xA;                                      ON [Extent5].[Id] = [Extent4].[UserId]) AS [Join2]&#xA;                   ON [Extent3].[Id] = [Join2].[BlogId]&#xA;          WHERE  [Extent3].[Id] = 1 /* @p__linq__1 */) AS [UnionAll1]&#xA;ORDER BY [UnionAll1].[Id] ASC,&#xA;         [UnionAll1].[C1] ASC&#xA;  &#xA;&#xA;At this point, I am pretty sure, your eyes shut down in self defense. This is one complex query. But, basically, this is a complex query because EF is executing the following two queries and unioning them.&#xA;&#xA;Eager load Blog Posts:&#xA;&#xA;&#xA;  SELECT CASE &#xA;       WHEN ([Extent2].[Id] IS NULL) THEN CAST(NULL AS int)&#xA;       ELSE 1&#xA;     END AS [C1],&#xA;     [Extent1].[Id]             AS [Id],&#xA;     [Extent1].[Title]          AS [Title],&#xA;     [Extent1].[Subtitle]       AS [Subtitle],&#xA;     [Extent1].[AllowsComments] AS [AllowsComments],&#xA;     [Extent1].[CreatedAt]      AS [CreatedAt],&#xA;     1                          AS [C2],&#xA;     CASE &#xA;       WHEN ([Extent2].[Id] IS NULL) THEN CAST(NULL AS int)&#xA;       ELSE 1&#xA;     END AS [C3],&#xA;     [Extent2].[Id]             AS [Id1],&#xA;     [Extent2].[Title]          AS [Title1],&#xA;     [Extent2].[Text]           AS [Text],&#xA;     [Extent2].[PostedAt]       AS [PostedAt],&#xA;     [Extent2].[BlogId]         AS [BlogId],&#xA;     [Extent2].[UserId]         AS [UserId],&#xA;     CAST(NULL AS int)          AS [C4],&#xA;     CAST(NULL AS varbinary(1)) AS [C5],&#xA;     CAST(NULL AS varchar(1))   AS [C6],&#xA;     CAST(NULL AS varchar(1))   AS [C7],&#xA;     CAST(NULL AS datetime)     AS [C8],&#xA;     CAST(NULL AS varchar(1))   AS [C9]&#xA;FROM   [dbo].[Blogs] AS [Extent1]&#xA;     LEFT OUTER JOIN [dbo].[Posts] AS [Extent2]&#xA;       ON [Extent1].[Id] = [Extent2].[BlogId]&#xA;WHERE  [Extent1].[Id] = 1 /* @p__linq__1 */&#xA;  &#xA;&#xA;Eager load Blog Users:&#xA;&#xA;&#xA;  SELECT 2                          AS [C1],&#xA;     [Extent3].[Id]             AS [Id],&#xA;     [Extent3].[Title]          AS [Title],&#xA;     [Extent3].[Subtitle]       AS [Subtitle],&#xA;     [Extent3].[AllowsComments] AS [AllowsComments],&#xA;     [Extent3].[CreatedAt]      AS [CreatedAt],&#xA;     1                          AS [C2],&#xA;     CAST(NULL AS int)          AS [C3],&#xA;     CAST(NULL AS int)          AS [C4],&#xA;     CAST(NULL AS varchar(1))   AS [C5],&#xA;     CAST(NULL AS varchar(1))   AS [C6],&#xA;     CAST(NULL AS datetime)     AS [C7],&#xA;     CAST(NULL AS int)          AS [C8],&#xA;     CAST(NULL AS int)          AS [C9],&#xA;     [Join2].[Id]               AS [Id1],&#xA;     [Join2].[Password]         AS [Password],&#xA;     [Join2].[Username]         AS [Username],&#xA;     [Join2].[Email]            AS [Email],&#xA;     [Join2].[CreatedAt]        AS [CreatedAt1],&#xA;     [Join2].[Bio]              AS [Bio]&#xA;FROM   [dbo].[Blogs] AS [Extent3]&#xA;     INNER JOIN (SELECT [Extent4].[UserId]    AS [UserId],&#xA;                        [Extent4].[BlogId]    AS [BlogId],&#xA;                        [Extent5].[Id]        AS [Id],&#xA;                        [Extent5].[Password]  AS [Password],&#xA;                        [Extent5].[Username]  AS [Username],&#xA;                        [Extent5].[Email]     AS [Email],&#xA;                        [Extent5].[CreatedAt] AS [CreatedAt],&#xA;                        [Extent5].[Bio]       AS [Bio]&#xA;                 FROM   [dbo].[UsersBlogs] AS [Extent4]&#xA;                        INNER JOIN [dbo].[Users] AS [Extent5]&#xA;                          ON [Extent5].[Id] = [Extent4].[UserId]) AS [Join2]&#xA;       ON [Extent3].[Id] = [Join2].[BlogId]&#xA;WHERE  [Extent3].[Id] = 1 /* @p__linq__1 */) &#xA;  &#xA;&#xA;The query may be complex, but it get the job done and does so without bothering the us much. The question is, can we do the same with NHibernate?&#xA;&#xA;As it run out, we can, pretty easily too. The following code will do just that:&#xA;&#xA;&#xA;   var blogs = s.CreateQuery(&quot;from Blog b left join fetch b.Posts where b.Id = :id&quot;)&#xA;     .SetParameter(&quot;id&quot;, 1)&#xA;     .Future&lt;Blog&gt;();&#xA;&#xA; s.CreateQuery(&quot;from Blog b left join fetch b.Users where b.Id = :id1&quot;)&#xA;     .SetParameter(&quot;id1&quot;, 1)&#xA;     .Future&lt;Blog&gt;();&#xA;  &#xA;&#xA;So, what is going on here? We are actually issuing two queries, each of them to eagerly load a single collection. The trick is that we are using future queries to do so. That means that the query that is going to be sent to the database to get those results is:&#xA;&#xA;&#xA;  select blog0_.Id             as Id7_0_,&#xA;       posts1_.Id            as Id0_1_,&#xA;       blog0_.Title          as Title7_0_,&#xA;       blog0_.Subtitle       as Subtitle7_0_,&#xA;       blog0_.AllowsComments as AllowsCo4_7_0_,&#xA;       blog0_.CreatedAt      as CreatedAt7_0_,&#xA;       posts1_.Title         as Title0_1_,&#xA;       posts1_.Text          as Text0_1_,&#xA;       posts1_.PostedAt      as PostedAt0_1_,&#xA;       posts1_.BlogId        as BlogId0_1_,&#xA;       posts1_.UserId        as UserId0_1_,&#xA;       posts1_.BlogId        as BlogId0__,&#xA;       posts1_.Id            as Id0__&#xA;from   Blogs blog0_&#xA;       left outer join Posts posts1_&#xA;         on blog0_.Id = posts1_.BlogId&#xA;where  blog0_.Id = 1 /* @p0 */&#xA;select blog0_.Id             as Id7_0_,&#xA;       user2_.Id             as Id5_1_,&#xA;       blog0_.Title          as Title7_0_,&#xA;       blog0_.Subtitle       as Subtitle7_0_,&#xA;       blog0_.AllowsComments as AllowsCo4_7_0_,&#xA;       blog0_.CreatedAt      as CreatedAt7_0_,&#xA;       user2_.Password       as Password5_1_,&#xA;       user2_.Username       as Username5_1_,&#xA;       user2_.Email          as Email5_1_,&#xA;       user2_.CreatedAt      as CreatedAt5_1_,&#xA;       user2_.Bio            as Bio5_1_,&#xA;       users1_.BlogId        as BlogId0__,&#xA;       users1_.UserId        as UserId0__&#xA;from   Blogs blog0_&#xA;       left outer join UsersBlogs users1_&#xA;         on blog0_.Id = users1_.BlogId&#xA;       left outer join Users user2_&#xA;         on users1_.UserId = user2_.Id&#xA;where  blog0_.Id = 1 /* @p1 */&#xA;  &#xA;&#xA;Note that we are essentially discarding the results of the second query. The reason for that is that we aren&#x2019;t actually interested in those results, we execute this query solely to get NHibernate to fill the Users&#x2019; collection of the relevant entity.&#xA;&#xA;I generally use this method so I would have the first query to eager load all the many-to-one associations, and then a series of queries (one per required loaded collection) to load one-to-many or many-to-many associations.</p>
        </article>
        <article id="article-5633">
            <a href="https://ayende.com/blog/4366/wpf-webbrowser-and-javascript-interaction" target="_blank">
                <h2 class="title mb-6" id="article-5633">WPF WebBrowser and JavaScript interaction</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 15, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I found myself needing to interact with JavaScript API in a WebBrowser hosted in a WPF application. That turned out to be quite a challenge to figure out, but I prevailed :-)  Given the following XAML:     &lt;Window x:Class=&quot;WpfApplication1.Window1&quot;&#xA;    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;&#xA;    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;&#xA;    Title=&quot;Window1&quot; Height=&quot;300&quot; Width=&quot;300&quot;&gt;&#xA;    &lt;Grid&gt;&#xA;      &lt;WebBrowser x:Name=&quot;Browser&quot; /&gt;&#xA;    &lt;/Grid&gt;&#xA;&lt;/Window&gt;&#xA;  &#xA;&#xA;You can interact with the JavaScript API using this code:&#xA;&#xA;&#xA;  public partial class Window1 : Window&#xA;{&#xA;    public Window1()&#xA;    {&#xA;        InitializeComponent();&#xA;        Browser.LoadCompleted &#x2B;= BrowserOnLoadCompleted;&#xA;        Browser.Navigate(new Uri(&quot;http://example.com&quot;));&#xA;    }&#xA;&#xA;    private void BrowserOnLoadCompleted(object sender, NavigationEventArgs navigationEventArgs)&#xA;    {&#xA;        var doc = (HTMLDocument)Browser.Document;&#xA;        var head = doc.getElementsByTagName(&quot;head&quot;).Cast&lt;HTMLHeadElement&gt;().First();&#xA;        var script = (IHTMLScriptElement)doc.createElement(&quot;script&quot;);&#xA;        script.text = &quot;alert(&#x27;hi&#x27;);&quot;;&#xA;        head.appendChild((IHTMLDOMNode)script);&#xA;        script.text = &quot;alert(&#x27;bye&#x27;);&quot;;&#xA;    }&#xA;}&#xA;  &#xA;&#xA;This allow you to inject JavaScript commands to the browser by manipulation the script.text property. It isn&#x2019;t generally useful, I&#x2019;ll admit, but for my scenario, it seems to be doing the job.</p>
        </article>
        <article id="article-5634">
            <a href="https://ayende.com/blog/4365/my-java-experience" target="_blank">
                <h2 class="title mb-6" id="article-5634">My Java Experience</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 14, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">As I mentioned before, I am actively trying to find what I don&#x2019;t know, and plug it. As part of that endeavor, I spent the last week learning Java EE. I decided that in the interest of saving time I am going to invest some money and I took a week long course in it. That allowed me to kill several birds in a single stone, I got to experience Java in an environment that had an instructor that I could call on for help, it allowed me to learn Java EE and it allowed to me experience how people using Hibernate Profiler feel like.  Now that it is over, I can say that the course has met my expectations to a T. But that isn&#x2019;t the point of this post. I wanted to talk about what I learned and my experience.     Nitpicker corner: please note that I am talking only about Java EE and EJB 3.0. I am well aware of the existence of frameworks that build on top of that (and earlier versions), but right now I intend to discuss Naked Java EE.   From language perspective, working with Java was incredibly frustrating. I had not really realized how much I come to rely on such things as object initializers, the var keyword or null coalescing operators.   As a platform, I have a much better understanding for how the Java EE eco system developed. Basically, it works like this (the concepts does not translate exactly, mind you):              Java EE        .NET                  Servlet        Http Handler &#x2013; but with singleton semantics &amp; with threading issues.                  JSP        ASPX &#x2013; but without any code behind.                  Listener        Http Module          One of the things that really drove me crazy is the notion of making everything a singleton. I wonder if there was a time where object creation in Java was very expensive, that might result in this design. The problem in making everything a singleton is that it become shared state, which means that you need to handle concurrency yourself. This is a bad thing. In fact, I would go further and say that any framework that requires users to handle concurrency for standard scenarios is flawed.  When I learned that you had to wire each independent servlet in the web.xml, I was quite shocked. The sheer friction that this is going to add to a project is mind numbing. Imagine the camera unzooming, and the full picture showing up. There are usually very few servlets in an application, often only one. They handle the request by sending the data to an EJB to handle the business end and a JSP to handle the HTML generation end. If it sounds a lot like MVC, it should. The interesting bit is that I don&#x2019;t think that all the Java MVC frameworks came out because of anything unique in the Java sphere. They came out of sheer self defense out of the amount of toil &amp; trouble that you have to go through using what the bare bones Java EE gave you.  Moving on to what I would call the controller side of things, we have EJBs, Enterprise Java Beans. There are Session Beans and Message Driven Beans. The MDB reminded me quite strongly of a very basic service bus. Considering something like Rhino ServiceBus or NServiceBus, it looks very similar in concept and execution, but without a lot of the things that the those two do for you. Session Beans are supposed to handle requests, they are divided into stateful and stateless beans. In general, I seems that you would generally use the stateless beans.   A stateless bean is a class implementing a specific interface, and that is where a lot of the interesting things are happening, dependency injection, automatic transaction management, session management, etc. It is interesting to note that with .NET we have gotten to the same result, but without having the overreaching presence of the container everywhere. I really like the fact that there is no attempt to disguise how they are doing things, the Java&#x2019;s language decision to make everything virtual by default has really paid off in here.  Still, I can&#x2019;t say that I like the default architecture, it seems very inflexible. I do like the ideas of full blown servers that you can just deploy a file into. It is a very nice concept, but it has some sever downsides, the time that it takes to do a modify-deploy-test cycle is significantly larger than what I noticed on the .NET side of things. And keep in mind that I am talking about projects that had about 5 classes in them all told.  During the course, the instructor said something that I found very insightful, &#x201C;the tooling help you deal with&#x2026; [wiring the xml, inheriting from the appropriate interfaces, etc]&#x201D;. I found this very telling, because up until then I was quite puzzled by the behavior of all the standard wizards in Eclipse. They seem to violate the KISS principle, especially after getting used to the Yes, Dear experience when using R# on VS. It was only after I realized just how much work those poor wizards had to do for me that I understood what was going on.  After the course, I took a look at some of the MVC frameworks in the Java market. Just reading the tutorials is fascinating, from a code archaeology perspective. You can clearly see that Struts came early on, since while I am sure it is an improvement over Naked Jave EE, the amount of XML you have to deal with is not funny.  All in all, I find myself unimpressed by the amount of work that was shuffled to the tools, it doesn&#x2019;t seem right. And it seems like a justification of a bad practice. When I consider my own design principles (Zero Friction!) in light of this, I am much happier that I am mainly working in the .NET world. But I think that having this understanding is going to be very helpful moving forward.</p>
        </article>
        <article id="article-5635">
            <a href="https://ayende.com/blog/4364/designing-the-entity-framework-2nd-level-cache" target="_blank">
                <h2 class="title mb-6" id="article-5635">Designing the Entity Framework 2nd level cache</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 13, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the things that I am working on is another commercial extension to EF, a 2nd level cache. At first, I thought to implement something similar to the way NHibernate does this, that is, to create two layers of caching, one for entity data and the second for query results where I would store only scalar information and ids.  That turned out to be quite hard. In fact, it turned out to be hard enough that I almost gave up on that. Sometimes I feel that extending EF is like hitting your head against the wall, eventually you either collapse or the wall fall down, but either way you are left with a headache.  At any rate, I eventually figured out a way to get EF to tell me about entities in queries and now the following works:     // will hit the DB&#xA;using (var db = new Entities(conStr))&#xA;{&#xA;    db.Blogs.Where(x =&gt; x.Title.StartsWith(&quot;The&quot;)).FirstOrDefault();&#xA;}&#xA;&#xA;// will NOT hit the DB, will use cached data for that&#xA;using(var db = new Entities(conStr))&#xA;{&#xA;   db.Blogs.Where(x =&gt; x.Id == 1).FirstOrDefault();&#xA;}&#xA;  &#xA;&#xA;The ability to handle such scenarios is an important part of what makes the 2nd level cache useful, since it means that you aren&#x2019;t limited to just caching a query, but can perform far more sophisticated caching. It means better cache freshness and a lot less unnecessary cache cleanups.&#xA;&#xA;Next, I need to handle partially cached queries, cached query invalidation and a bunch of other minor details, but the main hurdle seems to be have been dealt with (I am willing to lay odds that I will regret this statement).</p>
        </article>
        <article id="article-5636">
            <a href="https://ayende.com/blog/4363/uberprof-new-feature-query-plan-cache-misuse" target="_blank">
                <h2 class="title mb-6" id="article-5636">UberProf new feature: Query Plan Cache Misuse</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 13, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is a new feature available for NHibernate Profiler*, Linq to SQL Profiler and Entity Profiler. Basically, it detects when the same query is executed with different parameter sizes, which generate different query plan in the query cache.  Let us say that we issue two queries, to find users by name. (Note that I am using a syntax that will show you the size of the parameters, to demonstrate the problem).  We can do this using the following queries.     exec sp_executesql &#xA;      N&#x27;SELECT * FROM Users WHERE Username = @username&#x27;,&#xA;      N&#x27;@username nvarchar(3)&#x27;,&#xA;      @username=N&#x27;bob&#x27;&#xA;exec sp_executesql &#xA;      N&#x27;SELECT * FROM Users WHERE Username = @username&#x27;,&#xA;      N&#x27;@username nvarchar(4)&#x27;,&#xA;      @username=N&#x27;john&#x27;&#xA;&#xA;&#xA;This sort of code result in two query plans stored in the database query cache, because of the different parameter sizes. In fact, if we assume that the Username column has a length of 16, this single query may take up 16 places in the query cache.&#xA;&#xA;Worse, if you have two parameters whose size change, such as username (length 16) and password (length 16), you may take up to 256 places in the query cache. Obviously, if you use more parameters, or if their length is higher, the number of places that a single query can take in the query cache goes up rapidly.&#xA;&#xA;This can cause performance problems as the database need to keep track of more query plans (uses more memory) may need evict query plans from the cache, which would result in having to rebuild the query plan (increase server load and query time).&#xA;&#xA;&#xA;&#xA;* Please note that detecting this in NHibernate requires the trunk version of NHibernate. And it is pretty useless there, since on the trunk, NHibernate will never generate this issue.</p>
        </article>
        <article id="article-5637">
            <a href="https://ayende.com/blog/4362/windsor-2-1-is-out-now-with-silverlight-support" target="_blank">
                <h2 class="title mb-6" id="article-5637">Windsor 2.1 is out &#x2013; now with Silverlight support</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 13, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Krzysztof Ko&#x17A;mic has just announced it, so I will skip posting the details here and just let you read the entire announcement on his blog.  One thing that deserves special attention is that, as you can read from the post title, this Windsor release is for both .NET 3.5 and for Silverlight 3.0.  Have fun&#x2026;</p>
        </article>
        <article id="article-5638">
            <a href="https://ayende.com/blog/4361/the-nih-dance" target="_blank">
                <h2 class="title mb-6" id="article-5638">The NIH dance</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 12, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I started thinking about all the type of stuff that I had to write or participated at, and I find it&#x2026; interesting.     Database &#x2013; Rhino.DivanDB (hobby project).    Data Access &#x2013; Multitude of those.    OR/M &#x2013; NHibernate, obviously, but a few others as well.    Distributed caching systems &#x2013; NMemcached &#x2013; several of those.    Distributed queuing systems &#x2013; Rhino Queues actually have ~7 different implementations.    Distributed hash table &#x2013; Rhino DHT is in production.    Persistent hash tables &#x2013; Rhino PHT, of course, but I actually had to write a different implementation for the profiler as well.    Mocking framework &#x2013; Rhino Mocks, obviously.    Web frameworks&#x2013; I am referring to MonoRail, although I only dabbled there, to be truthful. Rhino Igloo was a lot of fun, too, if only because I had to.    Text templating language &#x2013; Brail    Inversion of Control containers &#x2013; Windsor, and a few custom ones.    AOP &#x2013; I actually built several implementation, the most fun was with the Code DOM approach :-)    Dynamic Proxies &amp; IL weaving &#x2013; Castle Dynamic Proxy, not the recommended way to learn IL, I must say.    CMS systems &#x2013; several, but I really like Impleo and the concept behind it.    ETL system &#x2013; Took 3 times to get right.    Security system &#x2013; Rhino Security was fun to design, and quite interesting to implement.    Licensing framework &#x2013; because trying to buy one commercially just didn&#x2019;t work.    Service Bus &#x2013; which I consider to be one of my best coding efforts.    CI Server &#x2013; so I can get good GitHub integration.    Domain Specific Language framework &#x2013; well, I did write the book on that :-)    Source control server &#x2013; SvnBridge   I haven&#x2019;t written a testing framework, though.  I am probably forgetting a lot of stuff, actually&#x2026;</p>
        </article>
        <article id="article-5639">
            <a href="https://ayende.com/blog/4360/how-to-opt-out-of-program-compatibility-assistant" target="_blank">
                <h2 class="title mb-6" id="article-5639">How to opt out of Program Compatibility Assistant?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 12, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A recent change in the profiler has resulted in the following dialog showing up whenever you close the application on x64 Vista/Win7 machines.      Just to be clear, I am not using flash in any way, but something is triggering this check.  Basically, I think that somewhere a call like the one described here is made. Checking for the presence of flash, and that is what triggers the PCA dialog. That makes a sort of sense, mostly because we now shell out to IE to do some stuff for us (we use WPF&#x2019;s builtin WebBrowser control).  Now, the documentation for that says:     PCA is intended to detect issues with older programs and not intended to monitor programs developed for Windows Vista and Windows Server 2008. The best option to exclude a program from PCA is to include, with the program, an application manifest with run level (either Administrator or as limited users) marking for UAC. This marking means the program is tested to work under UAC (and Windows Vista and Windows Server 2008). PCA checks for this manifest and will exclude the program. This process applies for both installer and regular programs.   The problem, however, is that even after I included the $@#$(@# manifest, it is still showing the bloody dialog.  I find it quite annoying. Here is the custom manifest that comes with the profiler.     &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;&#xA;&lt;assembly xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot; manifestVersion=&quot;1.0&quot;&gt;&#xA;  &lt;v3:trustInfo xmlns:v3=&quot;urn:schemas-microsoft-com:asm.v3&quot;&gt;&#xA;    &lt;v3:security&gt;&#xA;      &lt;v3:requestedPrivileges&gt;&#xA;        &lt;v3:requestedExecutionLevel level=&quot;asInvoker&quot; uiAccess=&quot;false&quot; /&gt;&#xA;      &lt;/v3:requestedPrivileges&gt;&#xA;    &lt;/v3:security&gt;&#xA;  &lt;/v3:trustInfo&gt;&#xA;&lt;/assembly&gt;&#xA;  &#xA;&#xA;As far as I can see, it should work.&#xA;&#xA;Any ideas?&#xA;&#xA;And twitter came to the rescue and told me that I need to specify that I am compatible on Win7, the current manifest, which fixes the issue, is:&#xA;&#xA;&#xA;  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;&#xA;&lt;assembly xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot; manifestVersion=&quot;1.0&quot;&gt;&#xA;  &lt;v3:trustInfo xmlns:v3=&quot;urn:schemas-microsoft-com:asm.v3&quot;&gt;&#xA;    &lt;v3:security&gt;&#xA;      &lt;v3:requestedPrivileges&gt;&#xA;        &lt;v3:requestedExecutionLevel level=&quot;asInvoker&quot; uiAccess=&quot;false&quot; /&gt;&#xA;      &lt;/v3:requestedPrivileges&gt;&#xA;    &lt;/v3:security&gt;&#xA;  &lt;/v3:trustInfo&gt;&#xA;  &lt;compatibility xmlns=&quot;urn:schemas-microsoft-com:compatibility.v1&quot;&gt;&#xA;    &lt;application&gt;&#xA;      &lt;!--The ID below indicates application support for Windows Vista --&gt;&#xA;      &lt;supportedOS Id=&quot;{e2011457-1546-43c5-a5fe-008deee3d3f0}&quot;/&gt;&#xA;      &lt;!--The ID below indicates application support for Windows 7 --&gt;&#xA;      &lt;supportedOS Id=&quot;{35138b9a-5d96-4fbd-8e2d-a2440225f93a}&quot;/&gt;&#xA;    &lt;/application&gt;&#xA;  &lt;/compatibility&gt;&#xA;&lt;/assembly&gt;&#xA;  &#xA;&#xA;I would like to Paul Betts for handing me the answer in less than 3 minutes.</p>
        </article>
        <article id="article-5640">
            <a href="https://ayende.com/blog/4359/as-to-the-methods-there-may-be-a-million-but-principles-are-few" target="_blank">
                <h2 class="title mb-6" id="article-5640">As to the methods there may be a million, but principles are few</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: January 11, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I run across the following quote a while ago, and I found it quite interesting.     &#x201C;As to the methods there may be a million and then some, but principles are few. The man who grasps principles can successfully select his own methods. The man who tries methods, ignoring principles, is sure to have trouble.&#x201D;      - Ralph Waldo Emerson (1803-1882)   I have been programming, in one form or another, for about fifteen years, but I can put my finger on the precise moment in which I moved from a mere dabbler to a professional. That was in 1999, and I decided that I had enough of toying with Pascal, VB6 &amp; Java Applets. It was the height of the bubble, and I wanted to learn just enough to be able to get a job doing something that I enjoyed. I had about a year opened to me, and I registered myself to a C/C&#x2B;&#x2B; course in a local college.  In hindsight, that was one of the best things that I have ever done. That course taught me C and pointers, and then C&#x2B;&#x2B; and OO. I also introduced me to concepts that I have been using ever since. Admittedly, I don&#x2019;t want to look at any of my code from that time period, but that is probably a good thing :-) The most important part of the course was that it taught me how computers work, by introducing C first and forcing me to write my own implementation of any system call that I wanted to make.   I studied programming in High School as well, and I distinctly remember being utterly and completely baffled by strange things like dynamic memory and pointers. I mean, why don&#x2019;t you just allocate a bigger array. During that course I actually grasped pointers for the first time, and even looking back over the last couple of weeks, a lot of my performance work recently is directly based on things that I learned there.  After completing that course, I got several books to help me understand the fundamentals better. Operating Systems Design and Implementation, Modern Operating Systems and Operating System Concepts to understand how an operating system works, not just a single program. Win32 System Programming, which I read mainly to understand the environment in which I was working and Windows Sockets Network Programming, from which I learned the basic concepts of networking.  The common thread throughout all of them is that initially I focused on understanding the technical environment in which I was working, getting to understand how things are working at a very low level. And while it may appear that understand those low level details would be nice in terms of general education but have little relevance to where I am spending most of my time, that is quite inaccurate. The recently built serialization system built for the profiler was heavily influenced from my reading of the OS books, for example.  For that matter, other good books are Practical File System Design, talking about the BeOS file system, which I found utterly fascinating or Virtual Machine Design and Implementation C/C&#x2B;&#x2B; which is a horrible book, but one that gave me the confidence to do a lot of things, since I saw how trivially simple it was to build such things.  Coming back to the quote in the beginning of this post, understanding the underlying principles has allowed me to do approach a new technology with the confidence that I understand how it must work, because I understand the environment in which it works. Oh, there are a lot of details that you need to get, but once you have the conceptual model of a technology in mind, it is so much easier to get to grips with it.  Interestingly enough, I only got to software design books at a much later stage, and even today, I find the low level details quite fascinating, when I can get new material in a subject that is interesting to me.</p>
        </article>
        <div class="button flex justify-between">
            <a href="563.html"><span class="back arrow"></span></a>

            <a href="565.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;🚀&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
