
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Home â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main">
    <section aria-label="Blog post list">
        <a href="https://ayende.com/blog/4197/challenge-nh-prof-exporting-reports" target="_blank"><h1 class="title mb-6">Challenge</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 15, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the things that I am working on right now is exporting NH Prof reports. This isn&#x2019;t an earth shattering feature, the idea is to take a report like this:     And give you the ability to save it in a format that you can send to your DBA, or maybe just put it away for later perusal.  I started with the simplest thing that could possibly work, exporting the reports to XML. Using Linq to XML, that has been a true pleasure, and got me this:          &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;unique-queries xmlns=&quot;http://nhprof.com/reports/2009/09&quot;&gt;  &lt;query average-duration=&quot;0.1&quot; count=&quot;10&quot; is-cached=&quot;false&quot; is-ddl=&quot;false&quot;&gt;    &lt;duration database-only=&quot;0&quot; nhibernate=&quot;0&quot; /&gt;    &lt;short-sql&gt;SELECT ... FROM Comments comments0_ WHERE comments0_.PostId = 1&lt;/short-sql&gt;    &lt;formatted-sql&gt;SELECT comments0_.PostId   as PostId1_,       comments0_.Id       as Id1_,       comments0_.Id       as Id5_0_,       comments0_.Name     as Name5_0_,       comments0_.Email    as Email5_0_,       comments0_.HomePage as HomePage5_0_,       comments0_.Ip       as Ip5_0_,       comments0_.Text     as Text5_0_,       comments0_.PostId   as PostId5_0_FROM   Comments comments0_WHERE  comments0_.PostId = 1 /* @p0 */&lt;/formatted-sql&gt;  &lt;/query&gt;&lt;/unique-queries&gt;&#xA;  &#xA;&#xA;&#xA;That is pretty easy to do, but then I hit a wall. This is good, but it isn&#x2019;t nearly enough. I can imagine that most of NH Prof users will want access to the raw data in this format, so they can slice &amp; dice it as they see fit, but I believe that I also need to provide a more readable form.&#xA;&#xA;I started to look at how I can generate PDFs from this, and I run into a problem. I don&#x2019;t have any experience doing such things, and while I don&#x2019;t doubt that I could learn it, I don&#x2019;t think that what is very likely to be a one off requirement is worth spending the time to really learn the topic.&#xA;&#xA;Therefore, I decided to try something a little bit different. I uploaded four sample reports here. I want to see if someone can provide me with solution to convert those to a nice PDF format.&#xA0; &#xA;&#xA;I am going to give away one NH Prof license to the first one that can show me a solution that I can use with NH Prof.&#xA;&#xA;The selected solution will also be featured in this blog, of course.&#xA;&#xA;The small print: Just to be clear, some variation on the selected solution is going to end up within NH Prof. I don&#x2019;t think it is a big task for someone who know what they are doing, and I believe that the NH Prof license offer is adequate compensation for that.</p>
        <a href="https://ayende.com/blog/4196/append-only-models-with-nhibernate" target="_blank"><h1 class="title mb-6">Append Only Models with NHibernate</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 15, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I mentioned that using an append only model isn&#x2019;t just an infrastructure choice, it has a big effect on your API and your general approach to working with your model.  Let us look at a typical example of change the martial status of an employee:          // transaction is opened before method by the infrastructurepublic void Consume(ChangeMaritalStatus msg){    var emp = Session.Get&lt;Employee&gt;(msg.EmployeeId);    emp.ChangeMaritalStatus(msg.NewMaritalStatus, msg.MaybeNewSurname);}/* transaction is committed here and changes are flushed to the databaseby the infrastructure*/&#xA;  &#xA;&#xA;&#xA;As you can see, using this approach, this will issue an update statement from NHibernate. This is a typical model for using NHibernate.&#xA;&#xA;Next, let us look at the same action, using an append only model:&#xA;&#xA;&#xA;  &#xA;    // transaction is opened before method by the infrastructurepublic void Consume(ChangeMaritalStatus msg){    var emp = Session.GetLatest&lt;Employee&gt;(msg.EmployeeId);    var newEmpVersion = emp.ChangeMaritalStatus(msg.NewMaritalStatus, msg.MaybeNewSurname);    Session.Save(newEmpVersion)}/* transaction is committed here and changes are flushed to the databaseby the infrastructure*/&#xA;  &#xA;&#xA;&#xA;Notice what is going on in here. We changed two major things, first, we moved from just using a Get&lt;Employee&gt;(), an NHibernate method, to using GetLatest&lt;Employee&gt;(), which is an extension method. Second, where before we relied on NHibernate&#x2019;s change tracking to do the deed for us, now we get a new version from the method and we save it explicitly.&#xA;&#xA;If it reminds you of the functional model, this is accurate, in the append only model, data truly may not change, any update is just a copy of the old data plus whatever changes you wish to make.&#xA;&#xA;GetLatest&lt;TEntity&gt; implementation is going to depend on how you actually manage the data in the database. I would usually recommend something like the following table structure:&#xA;&#xA;&#xA;  &#xA;    CREATE TABLE Employees(    Id bigint not null,    Version int not null,    MaritalStatus int not null,    /*    other columns    */    PreviousVersion int null,    PRIMARY KEY (Id, Version)    FOREIGN KEY (Id, PreviousVersion) REFERENCES Employees(Id, Version))&#xA;  &#xA;&#xA;&#xA;Some people prefer to use dates for marking the differences between versions, but there are some significant advantages for using a version number. You have no fear of collisions or inaccuracy, which may happen with dates. It is also easier to read something like Employee # 12312/4 rather than Employee # 12312 / 2008-08-01T10:04:49.&#xA;&#xA;You can just turn all queries in the database to something like:&#xA;&#xA;&#xA;  &#xA;    &#xA;      SELECT * FROM Employees thisWHERE Id = 12312 AND Version = (    SELECT max(Version) FROM Employees version     WHERE version.Id = this.Id)&#xA;    &#xA;  &#xA;&#xA;&#xA;But this has some problems, it forces a scan of at least part of the table (although it will be at least an index scan, if the DBA is worth anything at all) which is a lot of work. We can probably get far better results by using:&#xA;&#xA;&#xA;  &#xA;    &#xA;      CREATE TABLE LatestVersions(    Type nvarchar(255) NOT NULL,    Id bigint NOT NULL,    Version int NOT NULL    PRIMARY KEY (Type, Id))    SELECT * FROM EmployeesWHERE Id = 12312 and Version = (        SELECT Version FROM LatestVersions        WHERE Type = &#x27;Employees&#x27; AND LatestVersions.Id = Employees.Id )&#xA;    &#xA;  &#xA;&#xA;&#xA;I haven&#x2019;t run any comparison tests on this, but this is likely to be faster. Regardless, I consider it more elegant.&#xA;&#xA;The GetLatest&lt;TEntity&gt; simply use HQL or Criteria API to make NHibernate perform this query.&#xA;&#xA;I usually also install a pre update event listener that just throws when it encounters an update (which is not allowed in the system).&#xA;&#xA;And yes, beyond these two changes, everything else just flows. You never update, you always get by latest, and that is about it. Well, almost, you also need to make sure that NHibernate creates the primary key properly, by incrementing the version and updating the LatestVersions table. This can be done using an IIDentityGenerator.&#xA;&#xA;There is a side topic that I am not going to discuss right now relating to how you are going to handle the reporting model. This type of model is great for a lot of reasons, versioning, auditing, etc. What is it not great at is reading data.&#xA;&#xA;The problem is that you generally have a model that doesn&#x2019;t work that well for reading from the database or for showing on the screen. What usually happen is that there is a separate process that is responsible for taking this data and turning that into a more palatable from for reporting purposes (and remember that I consider reporting to be also show me the details screen of employee #12312).&#xA;&#xA;In particular, queries on this type of model are awkward, slow and tend to be annoying in general. I heartily recommends using a separate reporting model.</p>
        <a href="https://ardalis.com/imitation-is-the-sincerest-form-of/" target="_blank"><h1 class="title mb-6">Imitation is the sincerest form of</h1></a>
        <p class="mb-2">by Ardalis</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 14, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">My SOLID Principles of OOP and ASP.NET MVC talk from this year&#x2019;s TechEd is seeing some new life this week in Vancouver, Canada. Daniel&#x2026;Keep Reading &#x2192;</p>
        <a href="https://ayende.com/blog/4195/building-nh-prof-the-background-story" target="_blank"><h1 class="title mb-6">Building NH Prof: The background story</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 14, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I was asked to comment about the background story behind NH Prof, I posted a lot about the technical details about developing NH Prof, but nothing about the actual story and the business decisions that led to developing it.  I found myself needing something that would make discovering how NHibernate works almost as soon as I started using NHibernate. That is why I created the NHibernate Query Analyzer. But over time, I realized that what I wanted isn&#x2019;t actually understanding how NHibernate works, but what it is doing. In particular, I realized that I need to figure out a way to remove the abstraction layer.   The real motivator was when I was called to a client to optimize their NHibernate usage and I grew very tired of looking at trying to figure out what SQL statements where sown in the SQL Profiler or understanding the SQL statements that NHibernate threw into the log.  I sat down at a hotel room with a pint of Guinness and tried things until I got something that gave me a beautifully formatted SQL and could do visual profiling on NHibernate.  I knew that I wanted to make this a commercial endeavor. But I was also worried about it. There is a good reason why most businesses fail in their infancy.  For NH Prof, specifically, the major concerns were:     Will someone buy it? I literally had no idea if people would be willing to pay for a complementary product for an OSS project in the .NET world.    Are there enough people interested in NHibernate to justify it? Should I try going for the Hibernate market instead?    It is going to be too big for me to handle it alone. Even in the beginning, I was well aware of what I wanted, and I knew that it would necessitate bringing other people in. That would necessitate paying them.    I can&#x2019;t work on that full time, because I need to bring enough money to live and pay other people to work on it.    I made several decisions based on those concerns. The most important one was discovering if people are willing to pay for it. I run a small survey, to see the reaction, and based on the results, I decided that it seems to be worth the risk.  I had the NHibernate download numbers and the traffic in the NH Users mailing list to tell me that there seems to be enough potential customers and I had a major advantage with NHibernate, I am a member of the project already.  Bringing other people in was a huge milestone for me. I don&#x2019;t mind spending time on something, but bringing other people in meant that I would have to either offer sharing the potential revenue or pay them out of my own pocket.  I don&#x2019;t like the idea of revenue sharing, for a lot of reasons. One of the major ones was that I am willing to risk my own money and time, but I don&#x2019;t want to put friendships on the line if this fails. That meant that I had to go with outright payment. Software development isn&#x2019;t cheap, especially if you are talking about a private person funding it all.   Now, a quirk in my psyche means that I am willing to be poor, I am not willing to be in debt. I knew that I would reach into people that I work with in the past, friends and co workers, to help me build NH Prof, and the last thing that I wanted was to have to go to them as some point and tell them that I don&#x2019;t have the money to pay them for their work.  Remember that I considered that there is about 50% likelihood that I wouldn&#x2019;t be able to cover my out of pocket expenses at the time.  I decided that I am not going to go with the usual software development model for NH Prof. I contacted the people that I wanted to work with me on NH Prof and asked them for their rates. Afterward, I told them that I am willing to pay enough money to get things started, and that I would pay them in advance.&#xA0; When that money was over, I would pay them again.   That way, the worst case scenario is that I am ending up broke. I was broke before, and I know how to handle that. I would not, however, remain obligated to other people. Everyone who worked on NH Prof worked using the same model, I purchased some amount of their time in advance.  I had one problem with that, because someone forgot that they need to be paid (you know who you are). I found it funny to have to remind that someone that I probably need to pay them again.   The next big problem was that I knew that I couldn&#x2019;t just didn&#x2019;t have enough money to pay for everything that would be required. That meant that I couldn&#x2019;t afford to stop working and concentrate on just building the profiler. That meant that I, and the rest of the people working on the project, would have to work on this in what is basically our spare time. Well, not really spare time, but sporadically, intermingle with doing other things.  That let to interesting dilemmas with regards to the actual system design. I had to design to meet my likely commitments, which meant that I had to be able to go into the code base, do some work, and bail out with a working version. A lot of the things around NH Prof (like the auto release to users of commit or the concepts &amp; features architecture) are based around that need. We had to strip down everything that we could to allow us to build it incrementally.   Another challenge that I had to face was deciding on what the price point would be. I knew that I had basically three price points to consider, what I dubbed as the ReSharper price point (~350 $), the TestDriven.NET price point (~200$) and the Visual SVN price point (~50$).  In most businesses, you have to choose if you want to sell to few few at a high price point, or to many at a lower one. But there are also two other issues here:     Price point also implies value, people associate higher value with things that cost more.    It is always possible to lower your prices, it is very hard to raise them.   I knew how much money I hoped to make from NH Prof, and I knew it would likely not be possible to do so with the Visual SVN price point. I also knew that I can always reduce the price to the Visual SVN point, but going from costing 50$ to 350$ is not likely to ever be possible. At the same time, I didn&#x2019;t want to introduce a new product with a 350$ price point. It seemed too high for a completely new product.  I decided that I would use 300$ as the base price, but in order to attract more buyers, I would offer a big discount for the beta period. Thus, the effective price for NH Prof was around 200$ for the beta period. At the same time, explicitly stating that this is not the price, but this is a discount meant that when I released NH Prof, I could discontinue the discount and go back to what I consider a good price point for NH Prof.  There is also a small side-effect here, I made the beta discount cheaper than all the bulk licensing discounts. So someone buying a bunch of licenses will be able to see that she is getting a better deal during the beta period than the bulk licensing would give them. That prevented people asking for a bulk discount on top of the beta discount.  The next decision was what currency to use for the profiler. The two obvious choices where US Dollars and Euros. The default was to name the price in USD, and go on with things, but I thought long and hard about this.   This past two years, the US Dollar has been crazy. And the last thing that I wanted was to see the currency exchange rate fluctuate all over the place. In 2008, the US Dollar to Shekel exchange rate dropped down to 3.2 shekels per dollar, soared to over 4 shekels per dollars and in general behaved very erratically.  I was exposed to that, and I felt the pain of the low exchange rate acutely. Looking at the actual numbers, it isn&#x2019;t like the Euro didn&#x2019;t play merry games with the exchange rate to the shekel as well, but I wasn&#x2019;t exposed to it and didn&#x2019;t develop the aversion to risk that I have with the US Dollar.   Looking at things, it was a good decision, here is the exchange rate for 2009 for the two currencies:     Overall, the Euro has been far more stable, and right now there is a lot of talk about the USD/NIS exchange rate plummeting even further.  There is another point to consider, 300$ US is 200 &#x20AC;, and the beta price of 200 $ is 140 &#x20AC;. It is just a trick of numbers, but it makes it more palatable for people to consider.&#xA0; In a related point, I absolutely hate prices that are 99 anything (299, 149.99, etc). I don&#x2019;t like it at all.  There are other things to talk about, but I think that I can just post this now and go to bed, it is midnight at the time of writing it, and I need to do a presentation tomorrow.</p>
        <a href="https://ayende.com/blog/4194/git-for-oss-projects" target="_blank"><h1 class="title mb-6">Git for OSS projects</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 14, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">If I needed more reasons to move to Git, this would be it:     Just to make things more interesting, a couple of those are pull requests, but the middle is just a patch that I got sent. That patch also include a binary file.  Automatically tracking who did what and where, even for people who aren&#x2019;t members of the project? Not having to handle binary files in patches in a special way?  That is just makes things so much simpler&#x2026;</p>
        <a href="https://ayende.com/blog/4193/a-design-answer-what-do-you-do-with-inaccurate-data" target="_blank"><h1 class="title mb-6">A design answer: What do you do with inaccurate data?</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 13, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I got a lot of replies for my question about this issue. I intentionally didn&#x2019;t specify what the problem was, because I wanted to get your input about the basic concept.  The problem is related to NH Prof filtering, in particular, filtering is done on the front end of NH Prof, which present some unique problems in one particular area, marked in red in the image:       The issue is that statistical data that is calculated on the backend in a very efficient manner is now potentially invalid.  Now, we could just remove all the data, but that would really be annoying and a hindrance for using filters. What we did was to show this warning for every session where the statistics were calculated on the backend without filtering.  The problem is that this open up some really nasty UI bugs (for example, the Session #1 has two statements associated with it, but it isn&#x2019;t shown here) and even nastier UX issues:     This thing just make me go Yuck! This is a good application of the law of unintended consequences, this feature was actually created before I posted the question, but it follow the same logic that most of the people suggested.  Instead of going with this route, I decided that I would rather take the hit in performance (and optimize for that) so the next step was to remove this feature, bringing us back to this:     This shows information that may be inaccurate, but it is far more relevant. The next step was a bit more complex, but it basically involved making the backend aware of the filtering just for session stats, and then making the front end always go to the backend to ask for details about session stats.  Once that was done, presto, it works!  There is some implication for performance, but I don&#x2019;t believe that we are likely to ever have a problem from that end, it is all basically in memory filtering more than anything else, and all communication are method calls not remote calls.</p>
        <a href="https://ayende.com/blog/4192/nh-prof-post-v1-0-ideas" target="_blank"><h1 class="title mb-6">NH Prof</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 13, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is just a high level list of features that I want to plug into NH Prof, now that the v1.0 mark is behind us.     Show database query plan for statements     Allow occasionally connected profiling, also known as production profiling &#x2013; note, must be secured(!)     Output reports as PDF/HTML     Exporting reports    NHibernate Search integration    NHibernate Shards integration   This isn&#x2019;t everything, but it would serve as a good place for discussion.   Licensing note: this would probably go to v1.x, which everyone who has a beta or v1.0 license can upgrade to at no additional cost.</p>
        <a href="https://ayende.com/blog/4191/automation-mark-ii" target="_blank"><h1 class="title mb-6">Automation, Mark II</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 12, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">It just hit me that I just finish executing the entire NH Prof integration test suite on my new machine, and I had done absolutely no setup.  Well, I tell a lie. I had to configure the connection string, like this:   It isn&#x2019;t very smart approach, but it is the one that has the least friction. Once I did that, all I had to do next was to execute the integration test suite. It is smart enough to recognize that it is running on a new machine (originally created because I wanted to save the other members of the team the bother of setting up the DB), create a database and populate it with the required data.  The surprising thing is that I never even thought about this until I looked at all the tests passing and realized that I had to do almost no setup.</p>
        <a href="https://ayende.com/blog/4190/hello-is-this-on-connect-bugs-sucks-again" target="_blank"><h1 class="title mb-6">Hello!!! Is this ON?! [Connect Bugs sucks, again]</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 12, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I want to point you to this bug:     Do you see the Won&#x2019;t Fix there?     Let us take a look at what ExecutionEngineException is all about, okay?     Now, the real problem here is that along with this issue there is a failing sample, so it is not a case of not being able to reproduce the error. Granted, the customer has managed to find a workaround for their problem, but the bug in the framework is still there, and was not fixed. I would assume that CLR crashing bugs that &#x201C;should never occur&#x201D; would be given some priority, even if the customer managed to find a workaround.</p>
        <a href="https://ayende.com/blog/4189/rhino-mocks-github-continuous-integration-builds" target="_blank"><h1 class="title mb-6">Rhino Mocks, Github &amp; Continuous Integration Builds</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: September 12, 2009
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, it is official now, Rhino Mocks have a new home, and it is on github.  We had a chance to try several common development scenarios with it, accepting patches &amp; commits from other people, and so far I can tell you that I am very impressed with the Git style workflow.  However, I know that many people aren&#x2019;t comfortable with Git yet, so I decided to setup things to make things easier for everyone.  You can now access the output of Rhino Mocks CI process here:     http://builds.hibernatingrhinos.com/builds/Rhino-Mocks</p>
        <div class="button flex justify-between">
            <a href="557.html"><span class="back arrow"></span></a>

            <a href="559.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>