
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 657 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-6561">
            <a href="https://ayende.com/blog/3419/why-i-will-not-code-review-your-code" target="_blank">
                <h2 class="title mb-6" id="article-6561">Why I will not code review your code...</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 15, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Like this post, this is a post that is here to serve as a statement of intention, and to clarify my position on the matter. Recently I had started to get quite a few requests for reviewing applications, frameworks and components. They all come from well meaning people, who often has very interesting code that they would like a second opinion on.  That is wonderful, except that I am most probably not going to be able to do this code review.   There are several reasons for that. I just don&#x27;t have enough hours in the day to do so. And, to be frank, if you want me to do a code review on your code base, there is going to be a good reason for that. If it the source is publicly available and interesting (as defined by yours truly, not the author of the code), I would be more than happy to dig into the code. I do it quite often, just to make sure that I keep an open mind and learn from other people.  If the source isn&#x27;t freely available, or if I don&#x27;t find it interesting, then I would suggest contacting me for a consulting engagement, in which case I would be more than happy to go over any code base (unless it is written in Ook#, which I refuse to touch).</p>
        </article>
        <article id="article-6562">
            <a href="https://ardalis.com/getting-started-with-tdd/" target="_blank">
                <h2 class="title mb-6" id="article-6562">Getting Started with TDD</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 14, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">RecentlyDannyTwrote on the altdotnet list: On our next project I really want to nail unit testing and possibly even test driven development&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-6563">
            <a href="https://ayende.com/blog/3418/obsolete-in-isolation" target="_blank">
                <h2 class="title mb-6" id="article-6563">Obsolete in Isolation</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 14, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The question of how to deal with a brown field project came up in the ALT.Net mailing list. Here is the description of the project:     You&#x27;ve inherited a software project that has deeply rooted dependencies, business logic embedded in the presentation layer (and elsewhere), &#x27;unit&#x27; testing that tests databases with hard-coded strings for primary keys, no actual unit testing but contrived integration/functional tests...   Sounds like one of my projects, from several years back, as a matter of fact. Oh, the things we did to System.Web.UI.GridView...  Oh, I was supposing to talk about how to deal with such a project, not reminisce about old projects.   My approach for such projects is called: Obsolete in Isolation.   Basically, I say that the existing software is there, and presumably it is valuable to the business. However, trying to continue development using the existing approach would cost too much time and effort. Typically, maintaining such a project is a big pain, and cost more than keeping my old car running (it was older than me, so take a guess).  Trying to restructure it is possible, but again, costly. As such, I declare the whole thing obsolete and decide that this is a green field project. Now, after having successfully escape a lynching by the customer for suggesting such a thing as throwing away &quot;Working Code&quot; because &quot;I am being uppity&quot;, let me try to explain what I mean.  The code is here and it is working. It is not written in a way that make maintainability and extending it easy. We need to maintain and extend the code. We would like to avoid the pain during the process. Throwing the code away is a bad decision in most scenarios. So we will keep it, but we will not continue developing on it.  Instead, we will do all development on a new project, which is built to be maintainable and easily extendible. The old project will stand as it is. Any new features will go to the new project, any minor bug fixes will be done in the old project. With the old &quot;tested with F5&quot; if no other approach is viable. Major bug fixes means porting the code to the new approach.  Over time, what will happen is that we move all the parts of the application that are unstable and buggy to the new approach, which will allow us to test it properly. Any new features will be in the new application as well. The stable parts of the old application are going to remain there, and they are going to keep on working. We aren&#x27;t going to lose the existing investment in them.  There are issues with this approach, of course. For example, there is a cost of integrating the systems, but it is generally a minor one. And you need to introduce new developers to both systems, the old and the new.   Even with those issues, I find that this is a good way to deal with legacy projects without too much pain.</p>
        </article>
        <article id="article-6564">
            <a href="https://ayende.com/blog/3417/alt-net-israel-registration-is-open" target="_blank">
                <h2 class="title mb-6" id="article-6564">ALT.NET Israel registration is open</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 14, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The registration for ALT.NET Israel is now open. You will need an OpenID (I use myopenid.com) to register. We are limited to 50 seats for the first event. First come first served. Worst case scenario you go into the waiting list.  Please only register if you are serious about attending.  The event takes place in two parts: Thursday eve. from 18:.30 to 20.30 and then the full day on friday (9-17.00). more details on the site.</p>
        </article>
        <article id="article-6565">
            <a href="https://ayende.com/blog/3416/alt-net-israel" target="_blank">
                <h2 class="title mb-6" id="article-6565">ALT.Net Israel</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 14, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Yeah!  We are going to have an ALT.Net conference in Israel in a few weeks. More specifically:     Thursday 7th, at 18:30-20:30: planning meeting, following a walk to a nearby pub or coffee shop to socialise.    Friday 8th, at 09:30-16:30: sessions.   The conference will be held at the SQLink offices in Ramat Gan.  Ken Egozi was kind enough to not only prod me &amp; Roy moving, but to arrange the location.  Agenda:     That is really up to the people who attend.&#xA0; We will be following an open spaces format, similar to the other alt.net conferences in the UK, USA and Canada, where the agenda is decided by the conference participants.&#xA0; Anyone can lead sessions on particular topics of interest, participate as an attendee or just hang around and chat with interesting people.   Our sponsors:      Registration is not open yet, I&#x27;ll post again when it is.</p>
        </article>
        <article id="article-6566">
            <a href="https://ardalis.com/blog-roll/" target="_blank">
                <h2 class="title mb-6" id="article-6566">Blog Roll</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 13, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I want to update my blog reading habits and make sure there aren&#x2019;t really great bloggers out there of whom I&#x2019;m unaware (I&#x2019;m sure there are&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-6567">
            <a href="https://ardalis.com/how-i-got-started-in-software-development/" target="_blank">
                <h2 class="title mb-6" id="article-6567">How I Got Started in Software Development</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 13, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Keyvan tagged me for the latest meme (started by Michael Eaton) going round the developer blogger space. I&#x2019;m not sure how much people&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-6568">
            <a href="https://ardalis.com/word-2007-search-commands/" target="_blank">
                <h2 class="title mb-6" id="article-6568">Word 2007 Search Commands</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 13, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I recently complained on Twitter that the UI in Office 2007 (and specifically Word in this case) makes it incredibly difficult to find many&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-6569">
            <a href="https://ayende.com/blog/3415/putting-the-container-to-work-refactoring-nservicebus-configuration" target="_blank">
                <h2 class="title mb-6" id="article-6569">Putting the container to work: Refactoring NServiceBus configuration</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 13, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the most common issues when people are building frameworks and applications that rely on a container is that they are not giving the container enough to do. Basically, they use the container to create some components, but they are doing a lot of things that the container could do for them outside of the container.     Note: Code for this post can be in the Scratch Pad.   NServiceBus and Mass Transit are good examples of that. I detailed some of the issues that I had with Mass Transit a while ago. Udi and I talked about this situation with NServiceBus a few days ago, and this is my attempt to figure out a better model for configuring NSB. Let us start from what we have right now.  We have XML configuration in app.config:     &lt;MsmqTransportConfig InputQueue=&quot;messagebus&quot; ErrorQueue=&quot;error&quot; NumberOfWorkerThreads=&quot;1&quot; MaxRetries=&quot;5&quot;&#xA;/&gt;&#xA;&#xA;&lt;UnicastBusConfig DistributorControlAddress=&quot;&quot; DistributorDataAddress=&quot;&quot;&gt;&#xA;  &lt;MessageEndpointMappings&gt;&#xA;      &lt;add Messages=&quot;Messages&quot; Endpoint=&quot;messagebus&quot; /&gt;&#xA;  &lt;/MessageEndpointMappings&gt;&#xA;&lt;/UnicastBusConfig&gt;&#xA;&#xA;&lt;MsmqSubscriptionStorageConfig Queue=&quot;subscriptions&quot; /&gt;&#xA;&#xA;&#xA;And we have code to initialize the bus:&#xA;&#xA;&#xA;  new ConfigMsmqSubscriptionStorage(builder);&#xA;NServiceBus.Serializers.Configure.BinarySerializer.With(builder);&#xA;new ConfigMsmqTransport(builder)&#xA;&#x9;.IsTransactional(true)&#xA;&#x9;.PurgeOnStartup(false);&#xA;new ConfigUnicastBus(builder)&#xA;&#x9;.ImpersonateSender(false)&#xA;&#x9;.SetMessageHandlersFromAssembliesInOrder(&#xA;&#x9;&#x9;typeof(RequestDataMessageHandler).Assembly&#xA;&#x9;&#x9;);&#xA;IBus bus = builder.Build&lt;IBus&gt;();&#xA;bus.Start();&#xA;&#xA;&#xA;The ConfigXyz objects are there to configure the bus itself inside the builder (the container used in the sample.&#xA;&#xA;My first step was to take this and move it to Windsor, and with no XML config. Which gave me this:&#xA;&#xA;&#xA;  // configure bus&#xA;container.Register(&#xA;&#x9;Component.For&lt;IBuilder&gt;()&#xA;&#x9;&#x9;.ImplementedBy&lt;WindsorBuilderAdapter&gt;(),&#xA;&#x9;Component.For&lt;IMessageSerializer&gt;()&#xA;&#x9;&#x9;.ImplementedBy&lt;BinaryMessageSerializer&gt;(),&#xA;&#x9;Component.For&lt;ITransport&gt;()&#xA;&#x9;&#x9;.ImplementedBy&lt;MsmqTransport&gt;()&#xA;&#x9;&#x9;.DependsOn(new&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;InputQueue = &quot;messagebus&quot;,&#xA;&#x9;&#x9;&#x9;NumberOfWorkerThreads = 1,&#xA;&#x9;&#x9;&#x9;ErrorQueue = &quot;error&quot;,&#xA;&#x9;&#x9;&#x9;MaxRetries = 5,&#xA;&#x9;&#x9;&#x9;PurgeOnStartup = true,&#xA;&#x9;&#x9;&#x9;IsTransactional = false&#xA;&#x9;&#x9;}),&#xA;&#x9;Component.For&lt;ISubscriptionStorage&gt;()&#xA;&#x9;&#x9;.ImplementedBy&lt;MsmqSubscriptionStorage&gt;()&#xA;&#x9;&#x9;.DependsOn(&#xA;&#x9;&#x9;new&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;Queue = &quot;subscriptions&quot;&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;),&#xA;&#x9;Component.For&lt;IBus&gt;()&#xA;&#x9;&#x9;.ImplementedBy&lt;UnicastBus&gt;()&#xA;&#x9;&#x9;.DependsOn(new&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;ImpersonateSender = false,&#xA;&#x9;&#x9;&#x9;MessageOwners = new Hashtable&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;{&quot;Messages&quot;, &quot;messagebus&quot;}&#xA;&#x9;&#x9;&#x9;},&#xA;&#x9;&#x9;&#x9;MessageHandlerAssemblies = new[]&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;typeof (RequestDataMessageHandler).Assembly&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;})&#xA;&#x9;);&#xA;&#xA;// configure handlers&#xA;container.Register(&#xA;&#x9;// yuck, we are registering concrete type!&#xA;&#x9;Component.For&lt;RequestDataMessageHandler&gt;()&#xA;&#x9;);&#xA;&#xA;&#xA;var bus = container.Resolve&lt;IBus&gt;();&#xA;bus.Start();&#xA;&#xA;&#xA;There are a few things that you would notice here. We have a lot more code, we hard code the configuration all over the place, you either need to understand Windsor or you have to copy/paste this, no XML (yeah!).&#xA;&#xA;Some of this is good (no XML), the rest... need some work. If we will consider the fact that this is more or less standard bus configuration (configure bus on top of MSMQ), we will see that there is quite a lot we can do here to encapsulate the entire mess into a mechanism that would be much easier to work with.&#xA;&#xA;In Windsor, packaging functionality is done using facilities. A facility is an extension to the container that contains certain behavior. It can be as simple as packaging up registration for several components into a single facility or it can be as complex as proxies and runtime component selections.&#xA;&#xA;Let us start with what the least common denominator. A Windsor facility with XML configuration. The configuration I came up with is:&#xA;&#xA;&#xA;  &lt;configuration&gt;&#xA;&#x9;&lt;facilities&gt;&#xA;&#x9;&#x9;&lt;facility&#xA;&#x9;&#x9;   id=&quot;NServiceBusFacility&quot;&#xA;&#x9;&#x9;   type=&quot;Windsor.Infrastructure.NServiceBusFacility, Windsor.Infrastructure&quot;&#xA;&#x9;&#x9;   useBinarySerialization=&quot;true&quot;&#xA;&#x9;&#x9;   subsciptionQueue=&quot;subscriptions&quot;&gt;&#xA;&#x9;&#x9;&#x9;&lt;transport inputQueue=&quot;messagebus&quot; errorQueue =&quot;error&quot;/&gt;&#xA;&#x9;&#x9;&#x9;&lt;bus impersonateSender=&quot;false&quot;&gt;&#xA;&#x9;&#x9;&#x9;&#x9;&lt;message name=&quot;Messages&quot; destination=&quot;messagebus&quot;/&gt;&#xA;&#x9;&#x9;&#x9;&#x9;&lt;handler name=&quot;Server&quot;/&gt;&#xA;&#x9;&#x9;&#x9;&lt;/bus&gt;&#xA;&#x9;&#x9;&lt;/facility&gt;&#xA;&#x9;&lt;/facilities&gt;&#xA;&#xA;&#x9;&lt;components&gt;&#xA;&#x9;&#x9;&lt;component id=&quot;RequestDataMessageHandler&quot; &#xA;&#x9;&#x9;&#x9;type=&quot;Server.RequestDataMessageHandler, Server&quot;/&gt;&#xA;&#x9;&lt;/components&gt;&#xA;&#xA;&lt;/configuration&gt;&#xA;&#xA;&#xA;And the code to make this happen is here (minus utility methods that I am not showing):&#xA;&#xA;&#xA;  public class NServiceBusFacility : AbstractFacility&#xA;{&#xA;&#x9;public bool UseXmlSerialization { get; set; }&#xA;&#x9;public bool UseBinarySerialization { get; set; }&#xA;&#xA;&#x9;protected override void Init()&#xA;&#x9;{&#xA;&#x9;&#x9;UseXmlSerialization = FacilityConfig.Value(&quot;UseXmlSerialization&quot;);&#xA;&#x9;&#x9;UseBinarySerialization = FacilityConfig.Value(&quot;UseBinarySerialization&quot;);&#xA;&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;IBuilder&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;WindsorBuilderAdapter&gt;()&#xA;&#x9;&#x9;&#x9;);&#xA;&#xA;&#xA;&#x9;&#x9;RegisterTransport();&#xA;&#x9;&#x9;RegisterSerializer();&#xA;&#x9;&#x9;RegisterSubscription();&#xA;&#x9;&#x9;RegisterBus();&#xA;&#x9;}&#xA;&#xA;&#x9;private void RegisterBus()&#xA;&#x9;{&#xA;&#x9;&#x9;var bus = FacilityConfig.Children[&quot;bus&quot;];&#xA;&#x9;&#x9;if (bus == null)&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;bus is a mandatory element&quot;);&#xA;&#x9;&#x9;var messageOwners = new Hashtable();&#xA;&#x9;&#x9;var assemblies = new List&lt;Assembly&gt;();&#xA;&#x9;&#x9;foreach (var element in bus.Children)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;if (element.Name == &quot;message&quot;)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;AddMessageDestination(element, messageOwners);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;else if (element.Name == &quot;handler&quot;)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;AddHandlerAssebmly(element, assemblies);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;else&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;Unknown element in bus: &quot; &#x2B; element.Name);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;IBus&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;UnicastBus&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.DependsOn(new&#xA;&#x9;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;MessageOwners = messageOwners,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;MessageHandlerAssemblies = assemblies&#xA;&#x9;&#x9;&#x9;&#x9;})&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;}&#xA;&#xA;&#x9;private static void AddHandlerAssebmly(IConfiguration handler, ICollection&lt;Assembly&gt; assemblies)&#xA;&#x9;{&#xA;&#x9;&#x9;string assemblyString = handler.Attributes[&quot;name&quot;];&#xA;&#x9;&#x9;if (string.IsNullOrEmpty(assemblyString))&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;name attribute is mandatory in handler element&quot;);&#xA;&#x9;&#x9;assemblies.Add(Assembly.Load(assemblyString));&#xA;&#x9;}&#xA;&#xA;&#x9;private static void AddMessageDestination(IConfiguration message, IDictionary messageOwners)&#xA;&#x9;{&#xA;&#x9;&#x9;string messsageName = message.Attributes[&quot;name&quot;];&#xA;&#x9;&#x9;if (string.IsNullOrEmpty(messsageName))&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;message must have a name&quot;);&#xA;&#x9;&#x9;string destination = message.Attributes[&quot;destination&quot;];&#xA;&#x9;&#x9;if (string.IsNullOrEmpty(destination))&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;message must have a destination&quot;);&#xA;&#xA;&#x9;&#x9;messageOwners[messsageName] = destination;&#xA;&#x9;}&#xA;&#xA;&#x9;private void RegisterSubscription()&#xA;&#x9;{&#xA;&#x9;&#x9;string attribute = FacilityConfig.Attributes[&quot;subsciptionQueue&quot;];&#xA;&#x9;&#x9;if (attribute == null)&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;subsciptionQueue is a mandatory attribute&quot;);&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;ISubscriptionStorage&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;MsmqSubscriptionStorage&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.Parameters(&#xA;&#x9;&#x9;&#x9;&#x9;Parameter.ForKey(&quot;Queue&quot;).Eq(attribute)&#xA;&#x9;&#x9;&#x9;&#x9;)&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;}&#xA;&#xA;&#x9;private void RegisterTransport()&#xA;&#x9;{&#xA;&#x9;&#x9;IConfiguration transport = FacilityConfig.Children[&quot;transport&quot;];&#xA;&#x9;&#x9;if (transport == null)&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;transport is mandatory element&quot;);&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;ITransport&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;MsmqTransport&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.Parameters(&#xA;&#xA;&#x9;&#x9;&#x9;&#x9;// mandatory&#xA;&#x9;&#x9;&#x9;&#x9;transport.Parameter(&quot;InputQueue&quot;),&#xA;&#x9;&#x9;&#x9;&#x9;transport.Parameter(&quot;ErrorQueue&quot;),&#xA;&#xA;&#x9;&#x9;&#x9;&#x9;// optional&#xA;&#x9;&#x9;&#x9;&#x9;transport.Parameter(&quot;numberOfWorkerThreads&quot;, &quot;1&quot;),&#xA;&#x9;&#x9;&#x9;&#x9;transport.Parameter(&quot;MaxRetries&quot;, &quot;5&quot;),&#xA;&#x9;&#x9;&#x9;&#x9;transport.Parameter(&quot;PurgeOnStartup&quot;, &quot;false&quot;),&#xA;&#x9;&#x9;&#x9;&#x9;transport.Parameter(&quot;IsTransactional&quot;, &quot;false&quot;)&#xA;&#xA;&#x9;&#x9;&#x9;&#x9;)&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;}&#xA;&#xA;&#x9;private void RegisterSerializer()&#xA;&#x9;{&#xA;&#x9;&#x9;AssertValidSerializationSettings();&#xA;&#xA;&#x9;&#x9;if (UseBinarySerialization)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;&#x9;Component.For&lt;IMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;BinaryMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;&#x9;if (UseXmlSerialization)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;&#x9;Component.For&lt;IMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;XmlMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#xA;&#x9;private void AssertValidSerializationSettings()&#xA;&#x9;{&#xA;&#x9;&#x9;if ((UseXmlSerialization &amp;&amp; UseBinarySerialization) || (!UseXmlSerialization &amp;&amp; !UseBinarySerialization))&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;Must define either XML or Binary, not both.&quot;);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;I am not happy with this yet, the facility has a lot of code there, and we still have XML, but we have very little configuration and the code to use this is now:&#xA;&#xA;&#xA;  IWindsorContainer container = new WindsorContainer(&quot;windsor.config&quot;);&#xA;&#xA;var bus = container.Resolve&lt;IBus&gt;();&#xA;bus.Start();&#xA;&#xA;&#xA;Which is much better than both versions. It also doesn&#x27;t require me to recompile to modify the configuration.&#xA;&#xA;Hold the press, what about administrator configuration?!&#xA;&#xA;One of the major emphasis that NServiceBus has in its configuration API it the explicit distinction it makes between developer level configuration (dependencies, which transport you are using, transactions, who handles what, etc) and administrator level configuration (queue names, mostly).&#xA;&#xA;In the configuration above we have no such separation. Problem, isn&#x27;t it?&#xA;&#xA;Again, we can use the container itself as a way to deal with this. First, we will define a configuration file, which will contain the following text:&#xA;&#xA;&lt;configuration&gt;&#xA;&#x9;&lt;properties&gt;&#xA;&#x9;&#x9;&lt;subscriptionsQueue&gt;subscriptions&lt;/subscriptionsQueue&gt;&#xA;&#x9;&#x9;&lt;inputQueue&gt;messagebus&lt;/inputQueue&gt;&#xA;&#x9;&#x9;&lt;errorQueue&gt;error&lt;/errorQueue&gt;&#xA;&#x9;&lt;/properties&gt;&#xA;&lt;/configuration&gt;&#xA;&#xA;And now in the configuration file itself we will include this configuration file, and refer to those values:&#xA;&#xA;&lt;configuration&gt;&#xA;&#x9;&lt;include uri=&quot;file://Configuration.config&quot;/&gt;&#xA;&#x9;&lt;facilities&gt;&#xA;&#x9;&#x9;&lt;facility&#xA;&#x9;&#x9;    id=&quot;NServiceBusFacility&quot;&#xA;&#x9;&#x9;    type=&quot;Windsor.Infrastructure.NServiceBusFacility, Windsor.Infrastructure&quot;&#xA;&#x9;&#x9;    useBinarySerialization=&quot;true&quot;&#xA;&#x9;&#x9;    subsciptionQueue=&quot;#{subscriptionsQueue}&quot;&gt;&#xA;&#x9;&#x9;&#x9;&lt;transport inputQueue=&quot;#{inputQueue}&quot; errorQueue =&quot;#{errorQueue}&quot;/&gt;&#xA;&#x9;&#x9;&#x9;&lt;bus impersonateSender=&quot;false&quot;&gt;&#xA;&#x9;&#x9;&#x9;&#x9;&lt;message name=&quot;Messages&quot; destination=&quot;messagebus&quot;/&gt;&#xA;&#x9;&#x9;&#x9;&#x9;&lt;handler name=&quot;Server&quot;/&gt;&#xA;&#x9;&#x9;&#x9;&lt;/bus&gt;&#xA;&#x9;&#x9;&lt;/facility&gt;&#xA;&#x9;&lt;/facilities&gt;&#xA;&#xA;&#x9;&lt;components&gt;&#xA;&#x9;&#x9;&lt;component id=&quot;RequestDataMessageHandler&quot; &#xA;&#x9;&#x9;&#x9; type=&quot;Server.RequestDataMessageHandler, Server&quot;/&gt;&#xA;&#x9;&lt;/components&gt;&#xA;&#xA;&lt;/configuration&gt;&#xA;&#xA;And just like that, we got ourselves a nice dual configuration, one for the administrators and one for the developers. &#xA;&#xA;I am still not happy with this, because I have XML and a lot of code to deal with this XML nonsense, but we did drop down to a very simple XML configuration with very little time.&#xA;&#xA;Let us see what is going to happen if we will use Binsor...&#xA;&#xA;Since we don&#x27;t want to have replication of the XML syntax (we can do much better without the limitations of XML), we will start from scratch, and define a new facility.&#xA;&#xA;&#xA;  Note: While writing this several improvements to Binsor itself occurred to me, so this is certainly something that can be improved.&#xA;&#xA;&#xA;The approach for building configuration language using Binsor is fairly simple. Create an object graph that represent your configuration, and just call it from the Binsor script.&#xA;&#xA;We start by defining the configuration model:&#xA;&#xA;&#xA;  public enum SerializationFormat&#xA;{&#xA;&#x9;Xml,&#xA;&#x9;Binary&#xA;}&#xA;&#xA;public class Transport&#xA;{&#xA;&#x9;public Transport()&#xA;&#x9;{&#xA;&#x9;&#x9;//default values for optional params&#xA;&#x9;&#x9;NumberOfWorkerThreads = 1;&#xA;&#x9;&#x9;MaxRetries = 5;&#xA;&#x9;&#x9;PurgeOnStartup = false;&#xA;&#x9;&#x9;IsTransactional = false;&#xA;&#x9;}&#xA;&#x9;public string InputQueue { get; set; }&#xA;&#x9;public string ErrorQueue { get; set; }&#xA;&#x9;public int NumberOfWorkerThreads { get; set; }&#xA;&#x9;public int MaxRetries { get; set; }&#xA;&#x9;public bool PurgeOnStartup { get; set; }&#xA;&#x9;public bool IsTransactional { get; set; }&#xA;}&#xA;&#xA;public class Bus&#xA;{&#xA;&#x9;public IDictionary MessageOwners { get; set; }&#xA;&#x9;public Assembly[] MessageHandlerAssemblies { get; set; }&#xA;}&#xA;&#xA;public class UnicastBus : Bus { }&#xA;&#xA;&#xA;As you can see, this is about as simple as it can get.&#xA;&#xA;Then we define the facility itself:&#xA;&#xA;&#xA;  public class NServiceBusFacility_Binsor : AbstractFacility&#xA;{&#xA;&#x9;public SerializationFormat SerializationFormat { get; set; }&#xA;&#x9;public string SubsciptionQueue { get; set; }&#xA;&#x9;public Transport Transport { get; set; }&#xA;&#x9;public Bus Bus { get; set; }&#xA;&#xA;&#x9;public NServiceBusFacility_Binsor(&#xA;&#x9;&#x9;SerializationFormat serializationFormat,&#xA;&#x9;&#x9;string subsciptionQueue,&#xA;&#x9;&#x9;Transport transport,&#xA;&#x9;&#x9;Bus bus)&#xA;&#x9;{&#xA;&#x9;&#x9;SerializationFormat = serializationFormat;&#xA;&#x9;&#x9;SubsciptionQueue = subsciptionQueue;&#xA;&#x9;&#x9;Transport = transport;&#xA;&#x9;&#x9;Bus = bus;&#xA;&#x9;}&#xA;&#xA;&#x9;protected override void Init()&#xA;&#x9;{&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;IBuilder&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;WindsorBuilderAdapter&gt;()&#xA;&#x9;&#x9;&#x9;);&#xA;&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;ITransport&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;MsmqTransport&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.DependsOn(Transport)&#xA;&#x9;&#x9;&#x9;);&#xA;&#xA;&#x9;&#x9;switch (SerializationFormat)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;case SerializationFormat.Binary:&#xA;&#x9;&#x9;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;&#x9;Component.For&lt;IMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;BinaryMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#x9;case SerializationFormat.Xml:&#xA;&#x9;&#x9;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;&#x9;Component.For&lt;IMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;XmlMessageSerializer&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#x9;default:&#xA;&#x9;&#x9;&#x9;&#x9;throw new NotSupportedException(&quot;Serialization format &quot; &#x2B; SerializationFormat &#x2B;                                      &quot; is not supported&quot;);&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;ISubscriptionStorage&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;MsmqSubscriptionStorage&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.Parameters(&#xA;&#x9;&#x9;&#x9;&#x9;     Parameter.ForKey(&quot;Queue&quot;).Eq(SubsciptionQueue)&#xA;&#x9;&#x9;&#x9;&#x9;)&#xA;&#x9;&#x9;&#x9;);&#xA;&#xA;&#x9;&#x9;Kernel.Register(&#xA;&#x9;&#x9;&#x9;Component.For&lt;IBus&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.ImplementedBy&lt;NServiceBus.Unicast.UnicastBus&gt;()&#xA;&#x9;&#x9;&#x9;&#x9;.DependsOn(Bus)&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;It is significantly simpler than the XML configuration based one. And now we can get to the configuration itself:&#xA;&#xA;&#xA;  import System.Reflection&#xA;import Windsor.Infrastructure&#xA;import Server&#xA;&#xA;facility NServiceBusFacility_Binsor:&#xA;&#x9;serializationFormat = SerializationFormat.Binary&#xA;&#x9;transport = Transport ( &#xA;&#x9;&#x9;InputQueue: &quot;messagebus&quot;,&#xA;&#x9;&#x9;ErrorQueue: &quot;errors&quot;&#xA;&#x9;)&#xA;&#x9;subsciptionQueue = &quot;subscriptions&quot;&#xA;&#x9;bus = UnicastBus (&#xA;&#x9;&#x9;&#x9;MessageOwners : {&#xA;&#x9;&#x9;&#x9;&#x9;&quot;Messages&quot; : &quot;messagebus&quot;&#xA;&#x9;&#x9;&#x9;},&#xA;&#x9;&#x9;&#x9;MessageHandlerAssemblies : ( Assembly.Load(&quot;Server&quot;), )&#xA;&#x9;)&#xA;&#x9;&#xA;component RequestDataMessageHandler&#xA;&#xA;&#xA;Wait! What about administrator configuration? Now that we are using a script to configure our application, it is even more important to separate the administrative configuration from the application configuration.&#xA;&#xA;We will take the exact same approach as we did before. Creating a separate file for administration purposes. In order to do so in a way that gives the admin a nice syntax for configuration, we will define a configuration model:&#xA;&#xA;&#xA;  public class MyConfiguration&#xA;{&#xA;&#x9;public static string InputQueue { get; set; }&#xA;&#x9;public static string ErrorQueue { get; set; }&#xA;&#x9;public static string SubscriptionsQueue { get; set; }&#xA;}&#xA;&#xA;&#xA;Now we can create the default AdminConfiguration.boo file:&#xA;&#xA;&#xA;  import Windsor.Infrastructure # namespace of MyConfiguration&#xA;&#xA;MyConfiguration.SubscriptionsQueue = &quot;subscriptions&quot;&#xA;MyConfiguration.InputQueue = &quot;messagebus&quot;&#xA;MyConfiguration.ErrorQueue  = &quot;error&quot;&#xA;&#xA;&#xA;And our Windsor.boo file is now:&#xA;&#xA;&#xA;  import System.Reflection&#xA;import Windsor.Infrastructure&#xA;import Server&#xA;import file from AdminConfiguration.boo&#xA;&#xA;AdminConfiguration().Run() # execute admin configuration&#xA;&#xA;facility NServiceBusFacility_Binsor:&#xA;&#x9;serializationFormat = SerializationFormat.Binary&#xA;&#x9;transport = Transport ( &#xA;&#x9;&#x9;InputQueue: MyConfiguration.InputQueue,&#xA;&#x9;&#x9;ErrorQueue: MyConfiguration.ErrorQueue&#xA;&#x9;)&#xA;&#x9;subsciptionQueue = MyConfiguration.SubscriptionsQueue&#xA;&#x9;bus = UnicastBus (&#xA;&#x9;&#x9;&#x9;MessageOwners : {&#xA;&#x9;&#x9;&#x9;&#x9;&quot;Messages&quot; : &quot;messagebus&quot;&#xA;&#x9;&#x9;&#x9;},&#xA;&#x9;&#x9;&#x9;MessageHandlerAssemblies : ( Assembly.Load(&quot;Server&quot;), )&#xA;&#x9;)&#xA;&#x9;&#xA;component RequestDataMessageHandler&#xA;&#xA;&#xA;Now we don&#x27;t have any XML involved, but the format that we have is suspiciously similar to the way we worked when we had XML. So, except from a small reduction in the configuration complexity, what did we gain?&#xA;&#xA;We have a full fledged programming language for our configuration purposes. We can now apply rules to our configuration, make logic based decisions, etc.&#xA;&#xA;As a simple example, instead of having to hard code the message owners and handlers, we can scan the application directory for matching assemblies. Want to add a new handler, drop it into the directory, done. This is a really powerful concept, and I am using this extensively in my applications.&#xA;&#xA;&#xA;  Note: Code for this post can be in the Scratch Pad.</p>
        </article>
        <article id="article-6570">
            <a href="https://ayende.com/blog/3414/notes-on-versioning-domain-specific-languages" target="_blank">
                <h2 class="title mb-6" id="article-6570">Notes on versioning Domain Specific Languages</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 13, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Those are just a few topics that I feel are important for discussion when talking about versioning DSL:     Different behavior at runtime    API vs. Syntax     Different dialects    Backward and forward Compatibility    Pros:         Keeping existing assets      Training      Knowledge      The Test of Fire       Cons:         Increased costs      Harder to change       Preparing for versioning:         Syntax Documentation      Closed world - control what you can access      Limit to a scenario       Versioning strategies:         The Holy Compatibility      Build &amp; abandon      Version marker      The Big Upgrade      Thoughts?</p>
        </article>
        <div class="button flex justify-between">
            <a href="656.html"><span class="back arrow"></span></a>

            <a href="658.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>