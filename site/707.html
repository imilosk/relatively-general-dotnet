
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Home â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main">
    <section aria-label="Blog post list">
        <a href="https://ayende.com/blog/2984/dsl-vs-fluent-interface-compare-contrast" target="_blank"><h1 class="title mb-6">DSL vs. Fluent interface: Compare &amp; Contrast</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Let us take a simple example, scheduling tasks, and see how we can demonstrate the difference between the two. From the perspective of the client, what do we want from a scheduling tasks?   Define named tasks  Define what happens when the task is executed  Define when a task should execute  Define conditions to execute the task  Define recurrence pattern Now, let us look at the fluent interface for this: new FluentTask(&quot;warn if website is not alive&quot;)&#xA;&#x9;.Every( TimeSpan.FromMinutes(3) )&#xA;&#x9;.StartingFrom( DateTime.Now )&#xA;&#x9;.When(delegate&#xA;&#x9;{&#xA;&#x9;&#x9;return WebSite(&quot;http://example.org&quot;).IsAlive == false;&#xA;&#x9;})&#xA;&#x9;.Execute(delegate&#xA;&#x9;{&#xA;&#x9;&#x9;Notify(&#x201C;admin@example.org&#x201D;, &#x201C;server down!&#x201D;);&#xA;&#x9;});&#xA;&#xA;And contrast that with the DSL sample:&#xA;task &quot;warn if website is not alive&quot;:&#xA;&#x9;every 3.Minutes&#xA;&#x9;starting now&#xA;&#x9;when WebSite(&quot;http://example.org&quot;).IsAlive is false&#xA;&#x9;then:&#xA;&#x9;&#x9;notify &quot;admin@example.org&quot;, &quot;server down!&quot;&#xA;&#xA;The second version has far less line noise, it a lot more clearer, and allows me to grow my DSL as I get more information, without hitting the language limits.&#xA;It also brings to mind another issue, who define these tasks and when? &#xA;Most of the time, I use a DSL as a way to setup and configure a runtime engine. I might talk later about imperative vs. declarative DSL. I tend to write my DSL at a different time than the code. &#xA;In fact, if you have no need to ever do something externally, and a fluent interface manages to express the ideas that you have clearly enough, than you probably should just use that. &#xA;If you need to do things externally, than a DSL is the place to look for. In fact, if you feel the urge to put XML into place, as anything except strict data storage mechanism, that is a place to go with a DSL.</p>
        <a href="https://ayende.com/blog/2983/a-suggested-alt-net-logo" target="_blank"><h1 class="title mb-6">A suggested ALT.Net logo</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20"></p>
        <a href="https://ayende.com/blog/2982/thinking-about-repositories" target="_blank"><h1 class="title mb-6">Thinking about repositories</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">For a long time, I have used the idea of IRepository&lt;T&gt; as my main data access method.  It is a very good approach, and I have used a static gateway to be able to resolve that effectively. The code to use that read like this: Repository&lt;Account&gt;.Save(account); But, I have an issue with that, because this is an opque dependency. I don&#x27;t have a way to look at the declaration and just get what this needs. It makes testing a lot harder than it should be, because you now need to do indirect dependency injection. There is the additional problem of the actual IRepository&lt;T&gt; interface:  That is an interface with 40 methods. And most of those methods are dealing directly with the data access code. When I first to move away from this approach, I started to inject the IRepository&lt;Account&gt; into my services, which worked well. The code looked like this: public class AccountService&#xA;{&#xA;&#x9;public AccountService(IRepository&lt;Account&gt; accountsRepository)&#xA;&#x9;{&#xA;&#x9;&#x9;//...&#xA;&#x9;}&#xA;}&#xA;The problem with that is readability, take a look at the usage:&#xA;accountsRepository.FindAll(&#xA;     Where.Account.LastActivity &lt; DateTime.Now.AddDays(-60)&#xA;);&#xA;Can you tell me what the meaning of this is? It express what it is doing really well, I think,&#xA0;but not what the meaning of it.&#xA;So, I started with the idea that I have domain repositories and infrastructure repositories. So I introduced this interface:&#xA; &#xA;And then I can call:&#xA;accountsRepository.FindAllInvactiveAccounts()&#xA;I didn&#x27;t really like that, because infrastracture repository doesn&#x27;t really sit well with me. There is another issue, which is the implementation of IAccountsRepository implementation:&#xA; &#xA;I have the IAccountRepository depending on IRepository&lt;Account&gt;, but that is... a smell. Then I thought about this approach:&#xA; &#xA;But that doesn&#x27;t sit very well with me either.&#xA;Eventually, I got to this design:&#xA;accountsRepository.FindAll(&#xA;&#x9;new InactiveAccountQuery()&#xA;);&#xA;Where the accountsRepository is a IRepository&lt;Account&gt; implementation. A better syntax for that is probably this:&#xA;accountsRepository.FindAll(&#xA;&#x9;Accounts.Inactive&#xA;);&#xA;That looks much better, and where I am going to stop for now</p>
        <a href="https://ayende.com/blog/2981/strategy-provisioning-for-application-management-b" target="_blank"><h1 class="title mb-6">Strategy Provisioning for Application Management b...</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Glenn Block has posted to the ALT.Net mailing list&#xA0;that the P&amp;P team are working on a dependency injection application block. At this point, I am not really sure what to think. ObjectBuilder was bad. I am still having to deal with fallout from that failure. The OSS community already has several mature IoC products. Just in case Microsoft has missed them: 1/ Castle Windsor 2/ Structure Map 3/ Spring.NET &#xA0; If they want to decouple themselves from an IoC implementation, there is a way to do that already in .Net. It is called IServiceProvider, and is already supported by the IoC implementation. A default implementation can be done with 15 lines of code, if they want to provide one. I would really like to know, why the hell do we need another duplication of OSS?</p>
        <a href="https://ayende.com/blog/2980/the-customer-that-microsort-asks" target="_blank"><h1 class="title mb-6">The Customer that Microsort asks</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">So, a lot of time, I hear Microsoft talk about asking their customers about their design and their requests. I have a few personas that I have in mind when I think about that. The first one is the clueless enterprisey architect, haven&#x27;t touched code in five years. The second one? The guy that aspires to be a Mort one day, the guy that he looks down at, that is the other persona.</p>
        <a href="https://ayende.com/blog/2979/going-into-a-new-code-base" target="_blank"><h1 class="title mb-6">Going into a new code base</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I had a chance at DevTeach to just take an hour and start looking at a large code base. I made the claim several times in the past that no matter the quality of the developers and the quality of the code base, there is no way someone can just sit down on a code base and start working on that. I tried to grok the code without help, and I failed. I could probably do that, but it would take several days. That was especially true since it was in Windows Forms, and that is not a field that I have done much at. Not knowing anything about the actual domain was a big issue as well. After about 30 minutes of sitting down and going over the code with the developer, I got a whole new level of understanding about the application. How it works, how the structure is built. I look at a test and can work how this is used, etc. I still have very little knowledge about that application works, but after 30 minutes, I am confident in my ability to both grok the code and work with it. In fact, after getting the introduction to the code base, I can say that this is probably one of the better code bases that I have seen. One of the more interesting parts was that when I looked at each class, it was when I took a step back and looked at the interactions it gotten really interesting. It was a pleasure to read the code.</p>
        <a href="https://ardalis.com/silverlight-2-0-is-coming/" target="_blank"><h1 class="title mb-6">Silverlight 2.0 Is Coming</h1></a>
        <p class="mb-2">by Ardalis</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: November 29, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">ScottGu today announced what many of us have been wondering and hoping would happen with regard to the next shipping version of Silverlight&#x2026;Keep Reading &#x2192;</p>
        <a href="https://ardalis.com/microsoft-download-center-&#x2013;-silverlight-beta/" target="_blank"><h1 class="title mb-6">Microsoft Download Center &#x2013; Silverlight Beta</h1></a>
        <p class="mb-2">by Ardalis</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: November 29, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Microsoft has a new Download Centeron their site which is currently in Beta, being built entirely in Silverlight. Check it out &#x2013; it looks&#x2026;Keep Reading &#x2192;</p>
        <a href="https://ayende.com/blog/2978/a-vision-of-enterprise-platform-a-database-that-you-dont-hide-in-the-attic" target="_blank"><h1 class="title mb-6">A vision of enterprise platform</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: November 29, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">For some reason, the moment that peole start working on Enterprise Solutions, there is a... tendency to assume that because we are going to build a big and complex application, we can afford to ignore best practices and proven practices. That is just wrong. And it applies in many manners to many parts of the application, but it never applies to something as obiviously as it applies to the database. This is just the results of a very short research:  The metadata driven approach, AKA the 5 tables DB  The Blob  The &#xA0;5th normalized form DB  The 5th denormalized form DB  The table a day DB  The obsfuscated database - create table tbl15 (fld_a int, fld_b int, fld_g nvarchar(255) ) And those are just of the database structure, we haven&#x27;t yet arrived to the database behavior yet. Here we have interesting approachs such as rolling your own &quot;Transactions&quot; table, requiring 40 joins to get a simple value, using nvarchar as the ultimate extensibility, etc. So, how do we approach building a database that we can actually show in public? Let us start with thinking about the constraints that we have for the application. The database needs to support...  OLTP for the application itself.  Reports.  Performance.  ETL processes to take data in and out of the sytem.  Large amount of data.  Large amount of entities. Notice how we don&#x27;t have any suggestion about integrating with the application at the database level. That is a fairly common antipattern. We are going to try to keep a one to one mapping between the entity and the table structure, because that will make it significantly easier to work with the system. One to one means that the Account Name translate to an Account.Name in the entity model, and Accounts.Name in the database model. &#xA0;    We probably want the usual auditing suspects, such as Id, CreatedAt, ModifiedAt, CreatedBy, ModifiedBy, Owner, OrganizationUnit. Maybe a few&#xA0;more, if this makes sense.&#xA0;Probably not too much, because that can get to be a problem. Accessing and manipulating this in the application layer it going to be trivial, so I am not really going to cover that in depth. What I do want to talk about is how we expose it to the outside world? And by that I mean reports and ETL processes. We have several options to try to do that. We can just let the reports and ETL processes to read from the database tables directly. This is the simplest approach, I think. Other options include views, stored procedures, and other DB thingies that we can use. I have seen systems where an entity was composed of several tables, and the report was done off of&#xA0;a view that joined it all together. The underlying problem is that I have versioning to consider. I am going to dedicate a full post to the problem of building upgradable user customizable applications, so I&#x27;ll delay it to then, but let us just say that radically changing the database schema between version will be painful for the users. The usual way to handle that is to only make promises for the views, and not for the tables themselves. That is a good way to handle that, in my opinion. I would suggest putting those in a separate schema, to make it clearer that the seperation is imortant. This also&#xA0;gives you the ability to later do a view to table refactoring, and maintain that with triggers. This is usually a bad idea, but&#xA0;for performance reasons, it may very&#xA0;well be a good solution. ETL processes can use the same mechanism that reports use to read data from the database efficently, but nothing writes to the database except the application. At one point I wrote a change DB password util that run every two hours, it would change the database password and update the relevant config files. I think that you can guess what the driving force to that where, no? Getting data into the database can be done through application services (not neccesarily web services, btw). A simple example would be API similar to this one: void Insert(params Account[] accounts);&#xA;void Update(params Account[] accounts);&#xA;void Delete(params Account[] accounts);&#xA;This API explicitly allows for bulk operations, so it can be very nice to work with, instead of having to do things on per-row basis, which basically kills performance.&#xA;How to get good performance from this system is another hard question. In this case, I would usually recommend on getting a good DBA to look at the perfrormance charactaristics of the application and optimize the database structure if needed. But, a much easier solution to performance problems in the database server is to not hit the DB server, but use caching. Distributed caching solutions, like Memcached, NCache, etc are really good way of handling that.&#xA;No business logic in the DB! This is important, if you put business logic in the DB, you have to get to the DB in order to execute the business logic. This kills scalablity, hurts the ability to understand the solution, and in general makes life miserable all around.&#xA;Reports are an interesting problem. How do you deal with security, for instance? Consider the security infrastructure that I already presented. This security infrastructure should also come with a database function that you can use like this:&#xA;SELECT * FROM Accounts WHERE IsAllowed(Accounts.EntitySecurityKey, @UserId, &#x27;Account.View&#x27;)&#xA;&#xA;Or this:&#xA;SELECT * FROM Accounts&#xA;WHERE Accounts.EntitySecurityKey IN (&#xA;&#x9;SELECT EntitySecurityId FROM GetAllowed(@UserId, &#x27;Account.View&#x27;) &#xA;)&#xA;Both of which provides really easy manner to get security for the reports. If we wanted to enforce that, we can force the report writer to write somtehing like this:&#xA;SELECT * FROM GetAllowedAccounts(@UserId, &#x27;Account.View&#x27;)&#xA;We can probably get away with assuming that &#x27;Account.View&#x27; is the default operation, so it is even shorter. Among other things, this actually have valid performance characteristics.&#xA;This post it turning out to be&#xA0;a &quot;don&#x27;t make stupid mistakes&quot; post, because I don&#x27;t think that I am writing anything new here. About how to avoid making stupid mistake, that is fairly simple as well. Get a good DBA (that is left as an excersize for the reader), give him/her a big stick and encourage good design through superior firepower.</p>
        <a href="https://ayende.com/blog/2977/envrionment-validation-and-windsor-extensibility" target="_blank"><h1 class="title mb-6">Envrionment Validation and Windsor Extensibility</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: November 29, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">So I was in Jermey Miller&#x27;s talk about maintainable software echo system, and one of the thing that he mentioned that StructureMap does really well is the ability to ask the container to perform envrionment validations, to make sure that the envrionment is ready for us. I really liked the idea, so I pulled up the laptop and started spiking how to handle this issue. First, let us see Jeremy&#x27;s solution: public class FileTextReader : ITextReader&#xA;{&#xA;&#x9;[ValidateConfiguration]&#xA;&#x9;public void ValidateFileExistance()&#xA;&#x9;{&#xA;&#x9;&#x9;if (File.Exists(fileName) == false)&#xA;&#x9;&#x9;&#x9;throw new FileNotFoundException(&quot;Could not find file &quot; &#x2B; fileName);&#xA;&#x9;}&#xA;}&#xA;So, when you ask structure map to validate the environment, it will run all the methods that have been decorated with [ValidateConfiguration].&#xA;So, how do that that in Windsor?&#xA;The most important thing to realize with Windsor is that it is a container that was built to be extensible. Something like that is not going to be a change to the container, it will be an extension, not a change to the container itself. Extensions are usually facilities, like this one:&#xA;public class ValidationFacility : AbstractFacility&#xA;{&#xA;&#x9;private readonly List&lt;string&gt; componentsToValidate = new List&lt;string&gt;();&#xA;&#xA;&#x9;protected override void Init()&#xA;&#x9;{&#xA;&#x9;&#x9;Kernel.AddComponent&lt;ValidateConfiguration&gt;();&#xA;&#x9;&#x9;IHandler handler = Kernel.GetHandler(typeof(ValidateConfiguration));&#xA;&#x9;&#x9;handler.AddCustomDependencyValue(&quot;componentsToValidate&quot;,&#xA;&#x9;&#x9;&#x9; componentsToValidate&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;Kernel.ComponentRegistered &#x2B;= OnComponentRegistered;&#xA;&#x9;}&#xA;&#xA;&#x9;public void OnComponentRegistered(string key, IHandler handler)&#xA;&#x9;{&#xA;&#x9;&#x9;foreach (MethodInfo method in                                 handler.ComponentModel.Implementation.GetMethods())&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;bool isValidateMethod = method                                   .GetCustomAttributes(typeof(ValidateConfigurationAttribute), true)                                    .Length != 0;&#xA;&#x9;&#x9;&#x9;if (isValidateMethod)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;componentsToValidate.Add(key);&#xA;&#x9;&#x9;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;This extends the container, and whenever a component is registered, I am checking if I need to add that to the list of components that needs validation. I am doing a&#xA0; tiny bit of cheating here and passing the componentsToValidate as a reference to the component, it is simpler that way, but the component gets the same instance, which is probably not what I would like to do with it for other approaches. I would usually got with a sub resolver that matched that issue, if I was doing something like this for more interesting purposes.&#xA;Anyway, here how the ValidationConfiguration class is built:&#xA;public class ValidateConfiguration&#xA;{&#xA;&#x9;private readonly ICollection&lt;string&gt; componentsToValidate;&#xA;&#x9;private readonly ILogger logger;&#xA;&#x9;private readonly IKernel kernel;&#xA;&#xA;&#x9;public ValidateConfiguration(&#xA;&#x9;&#x9;ICollection&lt;string&gt; componentsToValidate,&#xA;&#x9;&#x9;ILogger logger,&#xA;&#x9;&#x9;IKernel kernel)&#xA;&#x9;{&#xA;&#x9;&#x9;this.componentsToValidate = componentsToValidate;&#xA;&#x9;&#x9;this.logger = logger;&#xA;&#x9;&#x9;this.kernel = kernel;&#xA;&#x9;}&#xA;&#xA;&#x9;public void PerformValidation()&#xA;&#x9;{&#xA;&#x9;&#x9;foreach (string key in componentsToValidate)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;ValidateComponent(key);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#xA;&#x9;private void ValidateComponent(string key)&#xA;&#x9;{&#xA;&#x9;&#x9;IHandler handler = kernel.GetHandler(key);&#xA;&#x9;&#x9;if (handler == null)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Warn(&quot;Component {0} was removed before it could be validated&quot;, key);&#xA;&#x9;&#x9;&#x9;return;&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;try&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;object component = handler.Resolve(CreationContext.Empty);&#xA;&#x9;&#x9;&#x9;foreach (MethodInfo method in component.GetType().GetMethods())&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;bool isValidateMethod = method.GetCustomAttributes(typeof(ValidateConfiguration), true).Length == 0;&#xA;&#x9;&#x9;&#x9;&#x9;if (isValidateMethod)&#xA;&#x9;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;ExecuteValidationMethod(component, method);&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;catch (TargetInvocationException e)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Error(&quot;Failed to run validation for {0}, because: {1}&quot;, key, e.InnerException);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;catch (Exception e)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Error(&quot;Failed to run validation for {0}, because: {1}&quot;, key, e);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#xA;&#x9;private void ExecuteValidationMethod(object component, MethodBase method)&#xA;&#x9;{&#xA;&#x9;&#x9;try&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;method.Invoke(component, new object[0]);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;catch (Exception e)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;logger.Error(&quot;Failed to validate {0}.{1}. Error: {2}&quot;,&#xA;&#x9;&#x9;&#x9;&#x9;method.DeclaringType,&#xA;&#x9;&#x9;&#x9;&#x9;method.Name,&#xA;&#x9;&#x9;&#x9;&#x9;e);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;This is a class that has some deep association with the container. It is usually not something that I would like in my application services, but it is fine for instrastracture pieces, like this one.&#xA;Now that I have that , I can actually test the implementation:&#xA;IWindsorContainer container = new WindsorContainer();&#xA;container.AddFacility(&quot;validation&quot;, new ValidationFacility());&#xA;container.AddComponent&lt;ITextReader, FileTextReader&gt;();&#xA;container.Kernel.GetHandler(typeof(ITextReader))&#xA;&#x9;.AddCustomDependencyValue(&quot;fileName&quot;, &quot;foo&quot;);&#xA;container.AddComponent&lt;ILogger, ConsoleLogger&gt;();&#xA;&#xA;ValidateConfiguration resolve = container.Resolve&lt;ValidateConfiguration&gt;();&#xA;resolve.PerformValidation();&#xA;And this will go over everything and perform whatever validations needs to be done.&#xA;As I said, I really like the idea, and extending this to a build task is really trivial (especially if you are using Boo Build System to do things).&#xA;The main point, however, is that I managed to write this piece of code (around 100 lines or so), during Jeremy&#x27;s talk, so from the time he talked about that feature to the time that he finished, I already got that done. This actually has nothing to do with my personal prowess with code, but it has a lot to do with the way Windsor it built, as&#xA0;a set of services that can be so readily extended. &#xA;After I have gotten used to the style that Windsor has, it is getting really addictively easy to start extending the container in interesting ways. I highly recommend that you will take a look at those features, they are interesting both from &quot;what I can do with them&quot; and from &quot;what design allowed this&quot;.</p>
        <div class="button flex justify-between">
            <a href="706.html"><span class="back arrow"></span></a>

            <a href="708.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>