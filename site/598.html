
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 598 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5971">
            <a href="https://ayende.com/blog/4130/the-radical-idealist-problem" target="_blank">
                <h2 class="title mb-6" id="article-5971">The radical idealist problem</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 19, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is merely a simple observation. I had a chance to talk with a few people recently, and I heard something that really bothered me. Sadly, this is not a new thing, but it is still extremely annoying and disrespectful.  Basically, the problem is that concerns that are being brought up are dismissed as unrealistic, idealist and non workable in the real world. The people who bring up those concerns are also dismissed as radical tree huggers with no concept of how to build things in the field.  The reason that I think this is stupid, insulting and disrespectful is that a lot of the people bringing up those concerns are real world practitioners. It is more than just merely annoying to hear that.  Calling a raised problem an idealist issue or a perfectionist problem is an eventual guarantee that the feedback and concerns being brought up will dry up. And that the next feedback received will be in terms that aren&#x2019;t favorable.</p>
        </article>
        <article id="article-5972">
            <a href="https://ayende.com/blog/4129/jaoo-2009" target="_blank">
                <h2 class="title mb-6" id="article-5972">JAOO 2009</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 19, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I will be speaking at JAOO 2009, talking about advanced OR/M techniques and giving a tutorial about Rhino Mocks.  I spoke at JAOO 2007, and had a great time there. The content was superb and the attendees and the crew were great. I remember sitting at a session with Joe Armstrong talking about Erlang and finally getting things that were annoying just beyond my grasp, and that was one of several sessions that left me wanting more.  You can actually watch me and Hammett&#x2019;s session about Active Record in JAOO 2007.  This year, there are two things that I am looking forward to in JAOO.   Probably the most important one is that JAOO is giving free tickets for women, which hopefully help us avoid the token female per conference, which seems to be the rule.   There are women in IT, I know because I have met quite a few of them (the best coworker and the best project manager that I had the pleasure of working with where women). Hopefully this will get more of them into more visible spots.  The second, of course, is the content. For a change, I actually have the time to attend most of the sessions that I want to see. I&#x2019;ll probably change my mind at least a few more times, but here is my current list of session I plan to be at:     Working Effectively with Legacy Code 2 - Michael Feathers       I loved working effectively with legacy code, and I consider it the inspiration for Rhino Mocks. (I got to tell Michael Feathers that I &#x201C;blame&#x201D; him for Rhino Mocks in NDC 2009, priceless!)     Evolving the Key/Value programming model to a higher level - Billy Newport       I am quite interested in the no-sql databases, and this looks to be a good way to learn more about key / value pairs.     CouchDB from 3,333km - Jan Lehnardt       And, of course, I really like CouchDB. One of those days I am going to get a sponsor to finish Divan DB, too :-)     Enterprise Architecture, Top 10 Mistakes - Eoin Woods       Searched and Found - Fulltext search with Hibernate - Hardy Ferentschik       Those two run in parallel, but unfortunately I&#x2019;ll have to choose and pick. The first one sounds funny, the second one is interesting because I did a lot of work on the port of NHibernate Search, full text searching for NHibernate.     Buy it, Build it, Download It, or Browse It? Achieving Effectiveness with Enterprise Applications - Michael T. Nygard       No idea what this is about, but Michael Nygard (who I hope will never have to hear my trying to pronounce his last name) is someone I want to hear.     Object Relational Mapping &#x2B;= 2: More than just data &lt;-&gt; object - Oren Eini       Engineering in Five Dimensions - Michael T. Nygard       This is another problematic timing issue. I wonder if I can send Ayende to listen to Michael and have Oren give the presentation.     Distributed Programming the Google Way - Gregor Hohpe       And this ties back to my interest in distributed computing. Should be interesting    All in all, I hope to see you there.</p>
        </article>
        <article id="article-5973">
            <a href="https://ayende.com/blog/4128/nh-prof-new-feature-multiple-session-factory-support" target="_blank">
                <h2 class="title mb-6" id="article-5973">NH Prof New Feature</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 19, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One common request for NH Prof is that we will support multiple session factories. This turn out to be a bit more problematic than it would seems, mostly because NHibernate doesn&#x2019;t currently output this relation in any way that NH Prof can access.  But here is the first step along the way, NH Prof can now report statistics from multiple session factories.</p>
        </article>
        <article id="article-5974">
            <a href="https://ayende.com/blog/4127/code-ownership-also-mean-code-responsibility" target="_blank">
                <h2 class="title mb-6" id="article-5974">Code Ownership also mean Code Responsibility</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I recently reviewed a code base. Nothing unusual about that, I do this all the time. But this is the first time that I actually had a migraine from reading a codebase.  I talked to a couple of team members about that, and the name of a previous developer came up repeatedly. That developer is no longer on the team, however, and has no input on the way it currently works. Moreover, the code base is pretty small, and the team had had sole ownership of that for months by this time.  Here is a small piece of advice, learned from my army experience, if you own something, you are also responsible for it. Now, there are some special cases, where it takes a while to turn the freighter, but after a while, that excuse is no longer valid.  It is your code, why is it so ugly that I have a migraine?!  And no, saying that X did that this way is not a valid option if it past a week from the time you got the code base. Take a look at the image to the right, what do you think is the first priority of a new captain on that ship?    And if it wasn&#x2019;t your priority, then it is going to be your fault that it is still in this stage. You don&#x2019;t get to blame the other guy. You own the code, you are responsible for it, period.</p>
        </article>
        <article id="article-5975">
            <a href="https://ayende.com/blog/4126/virtually-everything" target="_blank">
                <h2 class="title mb-6" id="article-5975">Virtually everything</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is a short reply to Ward Bell&#x2019;s post, Do Not Make Every Method Virtual. More specifically, I have an issue with this statement:     My argument is with opening up the class blindly and totally by making everything virtual. Suddenly nothing in the class is truly &#x201C;closed for modification.&#x201D; The &#x201C;virtual&#x201D; keyword announces to the world &#x201C;here is my extension point.&#x201D; When every method is virtual, the world is invited to change every method.   I think that there is some confusion here. The original class is closed for modification. I can&#x2019;t change it. I can create a new class extending the behavior. That is what OCP is all about.  Ward is giving the example of an Elevator, and overriding its Up() method:     I knew that Up() sent the elevator ascending. But I can&#x2019;t stop someone from re-implementing Up() so that it descends instead. Maybe base.Up() triggers the doors to close. The developer might call base.Up() too late, sending the elevator in motion before the doors have closed. The developer could replace my base.Up with something that juggled the sequence of door closing and elevator motion methods, interleaving custom behaviors, yielding upward motion that failed to satisfy some other elevator guarantees.   And the problem here is&#x2026; ?  I am sorry, but I see some descriptions of potential bugs (or desired behaviors) listed here. I fail to see a problem.     But I write frameworks for you to use. You&#x2019;ve licensed my product and you&#x2019;re paying me for support. When the elevator goes down instead of up; when the doors close suddenly and injure a rider; when the elevator simply stops &#x2026; you don&#x2019;t say &#x201C;I wonder what I did?&#x201D; You say &#x201C;that elevator we bought is a piece of crap.&#x201D;   Well, guess what, if you switch the wires in the elevator, it will behave strangely. Nothing out of the ordinary here. And by switching the wires you accept responsibility for the actions you did.  I have several frameworks available that are nothing but huge extension points that the user can plug into at any point and at any time. More than that, I have those extension points at several layers, so they can choose at what level to interact. And no, those aren&#x2019;t designed extension points, they fall out of the way I build software. And so far, based on actual evidence on the field, it is working.</p>
        </article>
        <article id="article-5976">
            <a href="https://ayende.com/blog/4125/benchmark-cheating-a-how-to" target="_blank">
                <h2 class="title mb-6" id="article-5976">Benchmark cheating, a how to</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I already talked about the benchmark in general, but I want to focus for a bit on showing how you can carefully craft a benchmark to say exactly what you want.  Case in point, Alex Yakunin has claimed that NHibernate is:     NH runs a simple query fetching 1 instance 100&#x2B; times slower when ~ 10K instances are already fetched into the Session   I am assuming that he is basing his numbers of this test:    And you know what, he is right. NHibernate will get progressively slower as more items are loaded. This is by design.  Huh? NHibernate is slower by design? WTF?!  Well, it is all related to the way you build the test. And this test appears specifically designed NHibernate looks bad. Let me go back a bit and explain. NHibernate underlying premise is that you live in OO world, and we take care of everything we can in the RDBMS world.&#xA0; One of the ways we are doing that is by automatically flushing the session if a query is performed that may be affected changes in memory.  Huh? That still doesn&#x2019;t make sense. It is much simpler to understand in code.     using(tx = s.BeginTransaction())&#xA;{&#xA;&#x9;foo = s.Get&lt;Foo&gt;(1);&#xA;&#x9;foo.Name = &quot;ayende&quot;;&#xA;&#x9;var list = s.CreateQuery(&quot;from Foo f where f.Name = &#x27;ayende&#x27;&quot;).List&lt;Foo&gt;();&#xA;&#x9;Assert.Contains(list, foo);&#xA;&#x9;tx.Commit();&#xA;}&#xA;&#xA;&#xA;The following test will pass. When the times come to execute this query, NHibernate will check all the loaded instance that may be affected by this query, and flush any changes to the database. &#xA;&#xA;NHibernate is smart enough to check only the loaded instances that may be affected, so in general, this is a very quick operation, and it means that you don&#x2019;t have to worry about the current state of operations. NHibernate manages everything for you.&#xA;&#xA;However, in the case of the QueryTest above, this is using this feature of NHibernate to show that it is slow. All queries are made against the same class, which forces NHibernate to perform a dirty check on every single loaded object. With more objects loaded into memory, that dirty check is going to take longer. &#xA;&#xA;Now, there is no real world scenario where code like that would ever be written (except maybe as a bug), but the result of the &#x201C;test&#x201D; are being used to say that NHibernate is slow. &#xA;&#xA;Of course you can show that NHibernate is slow if you build a test specifically for that.&#xA;&#xA;Oh, and a hint, session.FlushMode = FlushMode.Commit; will make NHibernate skip the automatic flush on query, meaning that we will not perform any dirty checks on queries.&#xA;&#xA;But that is not really relevant. Tight loop benchmarks for frameworks as complex as OR/Ms are always going to lie. The only way to really create a benchmark is to create a full blown application with several backend implementations. That is still a bad idea, as there are still plenty of ways to cheat. All you have to do is to look at the PetShop issues from 2002/3 to figure that one out.</p>
        </article>
        <article id="article-5977">
            <a href="https://ayende.com/blog/4124/taking-advantage-on-the-data-transfer-tier" target="_blank">
                <h2 class="title mb-6" id="article-5977">Taking advantage on the Data Transfer Tier</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">When talking about RIA applications, we usually have the following physical architecture:     That is, we have the application actually running on the client&#x2019;s machine, we access the host server in order to perform operations that cannot be made locally and we save to some persistent storage, usually an RDBMS.  The great advantage that in a RIA application, we have a real platform at the client side, and not the hack that is HTML &#x2B; JavaScript. That make it a much more pleasant experience to actually work with them. However, we then encounter a very interesting choice. Where are we going to put the weight?     We have two choices, server side and client side. On the server side, we would need to develop a real service layer. This is usually called if the RIA app is making use of services that will also be consumed elsewhere. It is an old, traditional, approach. It is also more costly than the alternative, assuming that we need the server side only to support the application itself, which is quite common.  In many cases, the application itself is the only reason for development, and in that case, spending time in the server side is probably a waste of our time for a lot of tasks. It is easier and cheaper to perform tasks completely on the client. And at that point, the server side functionality is limited to &#x201C;let us just expose the data the application needed&#x201D; . It is no longer a real independent piece, it has became merely a data transfer tier, with no additional responsibilities.     Note: you still may want to keep some minor validation logic on the server side, but that is about the extent of server side functionality in this case.&#xA0; Well, that and authorization :-)   RIA Services are supposed to make building that part in RIA applications as simple as possible, making the data transfer side (which we are usually almost totally unconcerned with) as simple and idiot proof as possible.   This is why this post it titled taking advantage of. If you are aware that your server side functionality isn&#x2019;t important, you can deal with it in as brutal a manner as possible, because that is not where you want to spend your time. You want to spend you time actually doing something useful, and that is probably going to happen all on the client side.</p>
        </article>
        <article id="article-5978">
            <a href="https://ayende.com/blog/4123/what-is-the-cost-of-opening-a-session" target="_blank">
                <h2 class="title mb-6" id="article-5978">What is the cost of opening a session?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Damien Guard asked me an interesting question:     Is SessionFactory.OpenSession() very lightweight because you call it on every request even if you have pages that don&#x27;t need it.      I would have thought the lazy construction in CurrentSession get would have been a little safer.   The answer is that it is literally not worth your time to write the lazy construction. Here is what is happening when you opening a session:     public ISession OpenSession(IDbConnection connection, bool flushBeforeCompletionEnabled, bool autoCloseSessionEnabled,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;ConnectionReleaseMode connectionReleaseMode)&#xA;{&#xA;&#x9;return&#xA;&#x9;&#x9;new SessionImpl(connection, this, true, settings.CacheProvider.NextTimestamp(), interceptor,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;settings.DefaultEntityMode, flushBeforeCompletionEnabled, autoCloseSessionEnabled,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;connectionReleaseMode);&#xA;}&#xA;&#xA;&#xA;We new up a SessionImpl, which in turn:&#xA;&#xA;&#xA;  internal SessionImpl(&#xA;&#x9;IDbConnection connection,&#xA;&#x9;SessionFactoryImpl factory,&#xA;&#x9;bool autoclose,&#xA;&#x9;long timestamp,&#xA;&#x9;IInterceptor interceptor,&#xA;&#x9;EntityMode entityMode,&#xA;&#x9;bool flushBeforeCompletionEnabled,&#xA;&#x9;bool autoCloseSessionEnabled,&#xA;&#x9;ConnectionReleaseMode connectionReleaseMode)&#xA;&#x9;: base(factory)&#xA;{&#xA;&#x9;using (new SessionIdLoggingContext(SessionId))&#xA;&#x9;{&#xA;&#x9;&#x9;if (interceptor == null)&#xA;&#x9;&#x9;&#x9;throw new AssertionFailure(&quot;The interceptor can not be null.&quot;);&#xA;&#xA;&#x9;&#x9;rootSession = null;&#xA;&#x9;&#x9;this.timestamp = timestamp;&#xA;&#x9;&#x9;this.entityMode = entityMode;&#xA;&#x9;&#x9;this.interceptor = interceptor;&#xA;&#x9;&#x9;listeners = factory.EventListeners;&#xA;&#x9;&#x9;actionQueue = new ActionQueue(this);&#xA;&#x9;&#x9;persistenceContext = new StatefulPersistenceContext(this);&#xA;&#x9;&#x9;this.flushBeforeCompletionEnabled = flushBeforeCompletionEnabled;&#xA;&#x9;&#x9;this.autoCloseSessionEnabled = autoCloseSessionEnabled;&#xA;&#x9;&#x9;this.connectionReleaseMode = connectionReleaseMode;&#xA;&#x9;&#x9;connectionManager = new ConnectionManager(this, connection, connectionReleaseMode, interceptor);&#xA;&#xA;&#x9;&#x9;if (factory.Statistics.IsStatisticsEnabled)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;factory.StatisticsImplementor.OpenSession();&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;&#x9;if (log.IsDebugEnabled)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;log.Debug(string.Format(&quot;[session-id={0}] opened session at timestamp:{1}&quot;, SessionId, timestamp));&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;&#x9;CheckAndUpdateSessionStatus();&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;Is going to setup its fields and new up some additional stuff as well. All the work that is being done is merely newing up a few objects, and that is lightning fast. There is no database involved, NHibernate will manage the database connection to ensure minimal time spent with an open database connection automatically.</p>
        </article>
        <article id="article-5979">
            <a href="https://ayende.com/blog/4122/benchmarks-are-useless-yes-again" target="_blank">
                <h2 class="title mb-6" id="article-5979">Benchmarks are useless, yes, again</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 15, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I was informed about ORMBattle.NET existence a few minutes ago. This is a site that:     ORMBattle.NET is devoted to direct ORM comparison. We compare quality of essential features of well-known ORM products for .NET framework, so this site might help you to:             Compare the performance of your own solution (based on a particular ORM listed here) with peak its performance that can be reached on this ORM, and thus, likely, to improve it.       Choose the ORM for your next project taking its performance and LINQ implementation quality into account.      NHibernate is faring rather poorly in the tests there, and I thought that I might respond to that.  First, I want to point out that the company behind the website is Xtensive, which makes another ORM Product. This is not to discredit them, they make it very clear who is behind the site and that they have an ORM product in the benchmark. And they were the one who contacted me about it.  The problem with benchmarks, especially when you are trying to compare a wide variety of products that have different feature sets and different capabilities, is that they are essentially useless. The problem is that in order to be able to measure anything useful, you have to resort to the common denominators, and they are pretty bad.  In the case of the benchmark scenarios used for NHibernate, it shows the problem rather clearly.     I don&#x2019;t even need to think about anything to know that this is going to perform badly. There are several reasons for that. First, NHibernate was never intended to be a batch processing tool. It is an OLTP tool. The benchmark (all the tests in the benchmark) are aimed specifically at measuring batch processing. That is problem number one.  Second, NHibernate actually contains a lot of features that are aimed to give us great performance in many scenarios, including batch processing. For example, in this case, using a stateless session alone would generate a significant performance boost, not to mention that there is no use of batching whatsoever.      This two tests are also showing examples of &#x201C;this isn&#x2019;t how we do things&#x201D;. For one thing, calling the database in a loop is a bug. For another, I would generate the same result, which greatly improved performance using Executable DML:     session.CreateQuery(&quot;update Simplest s set s.Value = s.Value &#x2B; 1&quot;).ExecuteUpdate();&#xA;&#xA;session.CreateQuery(&quot;delete Simplest&quot;).ExecuteUpdate();&#xA;&#xA;&#xA;And so on, and so forth.&#xA;&#xA;To summarize, because I have talked about this before. Trying to compare different products without taking into account their differences is a flawed approach. Moreover, this benchmark is intentionally trying to measure something that NHibernate was never meant to perform. We don&#x2019;t need to try to optimize those things, because they are meaningless, we have much better ways to resolve things.&#xA;&#xA;And you know what? The problem is that even if you did put those in, they would still be invalid. Benchmarks tend to ignore such things as the impact of the builtin caching features, or the optimization options that are available in the mapping.&#xA;&#xA;In short, if you want me to &#x201C;admit&#x201D; that NHibernate isn&#x2019;t a batch processing tool, I will do so gladly, it was never meant to be. And benchmarks that try to show how it is in batch processing are going to show it being slow. For real world application development, however, NHibernate is a great fit, and show excellent performance.&#xA;&#xA;Oh, and because management told me that I must, if you find perf problems with NHibernate, that is why we have the NHibernate Profiler for you :-)</p>
        </article>
        <article id="article-5980">
            <a href="https://ayende.com/blog/4121/instantiating-interfaces" target="_blank">
                <h2 class="title mb-6" id="article-5980">Instantiating interfaces</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 15, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">How do you make this code legal?     var foo = new IFoo(1);&#xA;&#xA;&#xA;And yes, IFoo is an interfacae.&#xA;&#xA;The answer is quite simple, actually. It was there since C# 1.0, I am told, and I just stumbled upon it. Take a look at this code:&#xA;&#xA;&#xA;  class Program&#xA;{&#xA;&#x9;static void Main(string[] args)&#xA;&#x9;{&#xA;&#x9;&#x9;var foo = new IFoo(1);&#xA;&#x9;&#x9;foo.Do();&#xA;&#x9;}&#xA;}&#xA;&#xA;[&#xA;&#x9;ComImport, &#xA;&#x9;Guid(&quot;C906C002-B214-40d7-8941-F223868B39A5&quot;), &#xA;&#x9;CoClass(typeof(FooImpl))&#xA;]&#xA;public interface IFoo&#xA;{&#xA;&#x9;void Do();&#xA;}&#xA;&#xA;public class FooImpl : IFoo&#xA;{&#xA;&#x9;private readonly int i;&#xA;&#xA;&#x9;public FooImpl(int i)&#xA;&#x9;{&#xA;&#x9;&#x9;this.i = i;&#xA;&#x9;}&#xA;&#xA;&#x9;public void Do()&#xA;&#x9;{&#xA;&#x9;&#x9;Console.WriteLine(i);&#x9;&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;We have an interface, and we specify the co class that implements it and is the default implementation. The rest is just required to make the compiler happy about it.&#xA;&#xA;What it means, in turn, is that you can instantiate an interface and have a default implementation selected. You can even use constructor parameters. It has quite a lot of implications, if you think about it right. &#xA;&#xA;Not sure it is a wise feature to use, but it is certainly an interesting tidbit.</p>
        </article>
        <div class="button flex justify-between">
            <a href="597.html"><span class="back arrow"></span></a>

            <a href="599.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;🚀&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
