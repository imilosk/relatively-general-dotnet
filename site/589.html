
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 589 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5881">
            <a href="https://ayende.com/blog/3997/some-linq-love" target="_blank">
                <h2 class="title mb-6" id="article-5881">Some linq love</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 06, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, because of things like this:     var entityModels = model&#xA;&#x9;.Sessions&#xA;&#x9;.First()&#xA;&#x9;.Views&#xA;&#x9;.OfType&lt;SessionEntities&gt;()&#xA;&#x9;.Single()&#xA;&#x9;.EntityModels;&#xA;&#xA;&#xA;I feel like I am working with XPath or CSS selectors :-)</p>
        </article>
        <article id="article-5882">
            <a href="https://ayende.com/blog/3996/how-design-rot" target="_blank">
                <h2 class="title mb-6" id="article-5882">How design rot</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 05, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am currently doing some big modifications on the NH Prof code base, getting it ready for v1.0 status (and reserving some surprises as well).  Among other things, it means that I am trying to touch as much of the code base as possible.  It also means that I am finding stuff that I generally don&#x2019;t see when using the application normally.  Here is a good example:     The internals of NH Prof are built on the notion of pub/sub, mostly because I wanted to be able to have good separation of concerns.   Take a good look at FormattedStatement. It is the reason for this post. Its design is about as rotten as you can get without having nasty liquids splashing off the keyboard every time it is used.  Again, this is an issue with historical changes. It used to be part of the following process:     There are other things going on there, like parameter extraction, alerts, etc.  Anyway, it started its life as a usual message, just a stupid data container, but it&#x2026; evolved.     Obviously, this is no longer a message. But what to do about it? It is an important piece of the app, more so, with the changes that we are currently making here.  Well, for a start, it is no longer just a formatted statement, so I changed that to a SqlStatement. The second was to get that out of the Messages namespace and put it in the root backend model, where it actually belongs.  Now, it is being created as part of processing events from NHibernate, and I have some issue with that, since all the rest of the backend model is created in a later stage. But I think that this is acceptable. A statement is about the only part of the event stream that I don&#x2019;t have to do correlations on, so it make sense not to create an additional causality layer on top of it, it is a single event, no need to correlate it.  Is this it? Didn&#x2019;t I just said that it was a piece of rotten design? What did I do? Rename &amp; change namespace! Is that enough to fix the design?  Well, yes. The reason that this was problematic is quite simple, it wasn&#x2019;t in the right place, and it wasn&#x2019;t doing what it stated it was doing. By moving it, we fixed those issues. To give a similar example, if you saw data access code in the UI, the action that you need to take is to move the data access code to the appropriate layer, that is all.</p>
        </article>
        <article id="article-5883">
            <a href="https://ayende.com/blog/3995/castle-windsor-2-0-rtm-released" target="_blank">
                <h2 class="title mb-6" id="article-5883">Castle Windsor 2.0 RTM Released</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 05, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Some would say that it is about time, I would agree. Windsor might not be the OSS project in pre release state for the longest time (I think that the honor belong to Hurd), but it spent enough time at that state to at least deserve a honorary mention.  That was mostly because, although Windsor was production ready for the last three or four years or so, most of the people making use of it were happy to make use of the trunk version.   If you will look, you won&#x2019;t find Windsor 1.0, only release candidates for 1.0. As I believe I mentioned, Windsor has been production ready for a long time, and for the full release we decided to skip the 1.0 designator, which doesn&#x2019;t really fit, and go directly to 2.0  The last Windsor release (RC3) was almost a year and a half ago, and in the meantime, much has improved in Windsor land. Adding upon the already superb engine and facilities, we have fitted Windsor to the 3.5 release of the .Net framework, created a full fledged fluent API to support easy configuration, allowed more granular control over the behavior of the container when selecting components and handlers and improved overall performance.  All in all, pretty good stuff, even if I say so myself. Just to give you an idea, the list of changes from the previous release goes for quite a while, so I am going to let the short listing above to stand in its place.  You can get the new release from the source forge site.</p>
        </article>
        <article id="article-5884">
            <a href="https://ayende.com/blog/3994/the-buddy-classes-are-drowning-dry" target="_blank">
                <h2 class="title mb-6" id="article-5884">The buddy classes are drowning DRY</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The notion of buddy classes has appeared at first in ASP.Net Dynamic Data, and now has made its way to RIA services. I don&#x2019;t really bother to keep track with all the new tech from Microsoft, but this post came to my attention.  What is a buddy class? Let us take this example as an example, which was generate by a tool:          public partial class MyClass&#xA;{&#xA;    public int MyProperty { get; set; }&#xA;}&#xA;  &#xA;&#xA;&#xA;And say that we need to add some attribute to that, to add instruction for tools support. We can&#x2019;t do that, because MyClass is generated by a tool. ASP.Net Dynamic Data came up with the following scheme:&#xA;&#xA;&#xA;  &#xA;    [MetadataClass(typeof(MyMetadataClass))]&#xA;public partial class MyClass&#xA;{&#xA;    public int MyProperty { get; set; }&#xA;}&#xA;&#xA;public class MyMetadataClass&#xA;{&#xA;    [Range(1,100)]&#xA;    public int MyProperty{ get; set; } &#xA;}&#xA;  &#xA;&#xA;&#xA;This make me feel ill. &#xA;&#xA;DRY is one of the few truly universal CS principles, and here we have a idiom that not only ignores it, but encourage repeating ourselves over and over and over again.&#xA;&#xA;No doubt this is an easy solution, easy to document, easy to implement, easy to work with. It is also a maintenance nightmare, and cause sever harm to the project. If you want to create external metadata to generated classes, there are other ways of doing that, violating DRY as a systematic approach is a mistake that will come back to haunt you.</p>
        </article>
        <article id="article-5885">
            <a href="https://ayende.com/blog/3993/nhibernate-filters" target="_blank">
                <h2 class="title mb-6" id="article-5885">NHibernate Filters</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the more interesting ability of NHibernate is to selectively filter records based on some global filters. This allow us to very easily create global where clauses that we can flip on and off at the touch of a switch.   Let us take a look at see what I mean.  We define the filter effectiveDate:     &lt;filter-def name=&quot;effectiveDate&quot;&gt;&#xA;&#x9;&lt;filter-param name=&quot;asOfDate&quot; type=&quot;System.DateTime&quot;/&gt;&#xA;&lt;/filter-def&gt;&#xA;&#xA;&#xA;A filter definition is most commonly just a set of parameters that we can define, which will later be applied to in the appropriate places. An example of an appropriate place would be Post.PostedAt, we don&#x2019;t want to show any post that was posted at a later time than the effective date. We can define this decision in the mapping, like this:&#xA;&#xA;&#xA;  &lt;class name=&quot;Post&quot;&#xA;&#x9;&#x9;   table=&quot;Posts&quot;&gt;&#xA;&#x9;&#x9;&lt;id name=&quot;Id&quot;&gt;&#xA;&#x9;&#x9;&#x9;&lt;generator class=&quot;identity&quot;/&gt;&#xA;&#x9;&#x9;&lt;/id&gt;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&lt;property name=&quot;Title&quot;/&gt;&#xA;&#x9;&#x9;&lt;property name=&quot;Text&quot;/&gt;&#xA;&#x9;&#x9;&lt;property name=&quot;PostedAt&quot;/&gt;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&lt;filter name=&quot;effectiveDate&quot;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;condition=&quot;:asOfDate &gt;= PostedAt&quot;/&gt;&#xA;&#x9;&lt;/class&gt;&#xA;&#xA;&#xA;And now we can start play:&#xA;&#xA;&#xA;  s.CreateCriteria&lt;Post&gt;()&#xA;&#x9;.SetMaxResults(5)&#xA;&#x9;.List();&#xA;&#xA;s.EnableFilter(&quot;effectiveDate&quot;)&#xA;&#x9;.SetParameter(&quot;asOfDate&quot;, DateTime.Now);&#xA;&#xA;s.CreateCriteria&lt;Post&gt;()&#xA;&#x9;.SetMaxResults(5)&#xA;&#x9;.List();&#xA;&#xA;&#xA;Who do you think this will generate?&#xA;&#xA;Well, the first query is pretty easy to understand:&#xA;&#xA; &#xA;&#xA;But the second one is much more interesting:&#xA;&#xA; &#xA;&#xA;We have selectively applied the filter so only posted posted after the 16th can be seen.&#xA;&#xA;This is a very powerful capability to have, since we can use this globally, to define additional condition. For that matter, we can apply it in multiple places, so comments would also be so limited, etc.&#xA;&#xA;For that matter, we can also put filters on associations as well:&#xA;&#xA;&#xA;  &lt;set name=&quot;Comments&quot;&#xA;&#x9; table=&quot;Comments&quot;&gt;&#xA;&#x9;&lt;key column=&quot;PostId&quot;/&gt;&#xA;&#x9;&lt;one-to-many class=&quot;Comment&quot;/&gt;&#xA;&#x9;&lt;filter name=&quot;effectiveDate&quot;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;condition=&quot;:asOfDate &gt;= PostedAt&quot;/&gt;&#xA;&lt;/set&gt;&#xA;&#xA;&#xA;And trying to access the Comments collection on a Post would generate the following SQL when the filter is active:&#xA;&#xA; &#xA;&#xA;Nice, isn&#x2019;t it?</p>
        </article>
        <article id="article-5886">
            <a href="https://ayende.com/blog/3992/nhibernate-search" target="_blank">
                <h2 class="title mb-6" id="article-5886">NHibernate Search</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 03, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">NHibernate Search is an extension to NHibernate that allows you to utilize Lucene.NET, a full text search engine as your query engine, instead of putting additional load on the database itself. In a sense, this is a good way outsource your queries from the database.  This has several chief advantages:     Your database is now mostly about performing queries by primary key (fast) and handling data storage, transactional semantics, etc. All of which should be very fast.    Your costly queries can now run on a different (cheap) machine, and a long query isn&#x2019;t going to take locks in the database (slowing everything down).    Lucene.NET is a document database, this means that some things are significantly cheaper to query than in an RDBMS   Using NHibernate Search is very easy, from configuration stand point, we need to define the following listeners:     &lt;listener class=&#x27;NHibernate.Search.Event.FullTextIndexEventListener, NHibernate.Search&#x27;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;type=&#x27;post-insert&#x27;/&gt;&#xA;&lt;listener class=&#x27;NHibernate.Search.Event.FullTextIndexEventListener, NHibernate.Search&#x27;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;type=&#x27;post-update&#x27;/&gt;&#xA;&lt;listener class=&#x27;NHibernate.Search.Event.FullTextIndexEventListener, NHibernate.Search&#x27;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;type=&#x27;post-delete&#x27;/&gt;&#xA;&#xA;&#xA;That done, we need to annotate our classes with attributes that will tell NHibernate Search how we want our entities to be indexed. Unlike NHibernate Validator, there is no alternate XML configuration for the indexing specification.&#xA;&#xA;We annotate our entities like this:&#xA;&#xA;&#xA;  [Indexed]&#xA;public class Post&#xA;{&#xA;&#x9;[DocumentId]&#xA;&#x9;public virtual int Id { get; set; }&#xA;&#xA;&#x9;[IndexedEmbedded]&#xA;&#x9;public virtual Blog Blog { get; set; }&#xA;&#xA;&#x9;[IndexedEmbedded]&#xA;&#x9;public virtual User User { get; set; }&#xA;&#xA;&#x9;[Field(Index.Tokenized, Store = Store.Yes)]&#xA;&#x9;public virtual string Title { get; set; }&#xA;&#xA;&#x9;[Field(Index.Tokenized)]&#xA;&#x9;public virtual string Text { get; set; }&#xA;&#xA;&#x9;public virtual DateTime PostedAt { get; set; }&#xA;&#xA;&#x9;public virtual ISet&lt;Comment&gt; Comments { get; set; }&#xA;&#xA;&#x9;[IndexedEmbedded]&#xA;&#x9;public virtual ISet&lt;Category&gt; Categories { get; set; }&#xA;&#xA;&#x9;[IndexedEmbedded]&#xA;&#x9;public virtual ISet&lt;Tag&gt; Tags { get; set; }&#xA;}&#xA;&#xA;&#xA;I am not going to go over the semantics of each attribute, and how they play together, suffice to say that Hibernate Search in Action will give you all the details about how to use this.&#xA;&#xA;That said, let us look how this will actually get indexed:&#xA;&#xA; &#xA;&#xA;We have a document, which has fields, and we can query those fields by any of its values, and get a pretty fast reply back. Note that the document structure that we have here is flat, so what would usually be a join is now an almost no cost operation. Of course, the more we put in the index, the bigger it is, but that is another tradeoff.&#xA;&#xA;We can now query the index using:&#xA;&#xA;&#xA;  using (var s = sf.OpenSession())&#xA;using(var search = Search.CreateFullTextSession(s))&#xA;using (var tx = s.BeginTransaction())&#xA;{&#xA;&#x9;var list = search.CreateFullTextQuery&lt;Post&gt;(&quot;Tags.Name:Hello&quot;)&#xA;&#x9;&#x9;.SetMaxResults(5)&#xA;&#x9;&#x9;.List&lt;Post&gt;();&#xA;&#xA;&#x9;foreach (var post in list)&#xA;&#x9;{&#xA;&#x9;&#x9;Console.WriteLine(post.Title);&#xA;&#x9;}&#xA;&#xA;&#x9;tx.Commit();&#xA;}&#xA;&#xA;&#xA;As I said, actually getting down into all the syntax, options and tricks that we can use here is beyond the scope of this post, that is why I pointed out the book, which cover all of them in depth.</p>
        </article>
        <article id="article-5887">
            <a href="https://ayende.com/blog/3991/nhibernate-the-database-query-cache-and-parameter-sizes" target="_blank">
                <h2 class="title mb-6" id="article-5887">NHibernate, the database query cache and parameter sizes</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 02, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A while ago I took part in a herding code episode where the question was brought up, what would NHibernate&#x2019;s behavior would be in the following scenario?     s.CreateQuery(&quot;from Blog b where b.Title = :title&quot;)&#xA;&#x9;.SetString(&quot;title&quot;,&quot;hello&quot;)&#xA;&#x9;.List();&#xA;&#xA;s.CreateQuery(&quot;from Blog b where b.Title = :title&quot;)&#xA;&#x9;.SetString(&quot;title&quot;, &quot;hello world&quot;)&#xA;&#x9;.List();&#xA;&#xA;&#xA;The actual problem related more to the way NHibernate interacts with the database than to the way NHibernate itself works. The issue was whether or not NHibernate will generate a query that will reuse the same query plan for parameters with different sizes, or whatever it will generate a copy of the query plan for each parameter size.&#xA;&#xA;There are arguments for both sides, but most DBAs would really like to see only a single query plan for all parameter sizes. I didn&#x2019;t have the answer off the top of my head, but I was pretty sure that NHibernate did the right thing from the point of view of the database.&#xA;&#xA;As it turn out, I was wrong. By default, NHibernate will generate two separate query plans for this query in the database. Sounds bad, right?&#xA;&#xA;Not really, here is the fix, just put the following in your configuration:&#xA;&#xA;&#xA;  &lt;property name=&#x27;prepare_sql&#x27;&gt;true&lt;/property&gt;&#xA;&#xA;&#xA;And you are done, nothing else needs to be done, because NHibernate will now generate consistent query plan for all queries of this type.</p>
        </article>
        <article id="article-5888">
            <a href="https://ayende.com/blog/3990/nhibernate-validator" target="_blank">
                <h2 class="title mb-6" id="article-5888">NHibernate Validator</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 01, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Validation is one of those things that goes hand in hand with data access. I guess it is not much of surprise that one of the contrib projects for NHibernate is extensive validation support.  True, there are about as many validation frameworks as there are ToDo applications, but NHibernate Validator bring something special to the table, it brings tight integration with NHibernate itself and:     &#x201C;&#x2026;multi-layered data validation, where constraints are expressed in a single place and checked in various different layers of the application.&#x201D;   I am sorry, I just love this quote. :-)  Anyway, let me jump right it and show you what I mean by that.  We can initialize the validation framework using several ways, but probably the easier would be:     var configuration = new Configuration()&#xA;&#x9;.Configure(&quot;hibernate.cfg.xml&quot;);&#xA;&#xA;var engine = new ValidatorEngine();&#xA;engine.Configure(new NHVConfigurationBase());&#xA;&#xA;ValidatorInitializer.Initialize(configuration, engine);&#xA;&#xA;&#xA;And now, all we need to do is set the validation attributes on our the entities, and we are done:&#xA;&#xA;&#xA;  [NotNullNotEmpty]&#xA;[Length(25)]&#xA;public virtual string Title&#xA;&#xA;&#xA;At this point, several very interesting things are going to happen. First, if we ask NHibernate to generate the schema for us we are going to get the following:&#xA;&#xA;&#xA;    &#xA;      Before using NHV&#xA;&#xA;      After using NHV&#xA;    &#xA;&#xA;    &#xA;      &#xA;        create table Blogs (&#xA;  Id INT IDENTITY NOT NULL,&#xA;   Title NVARCHAR(255) null,&#xA;   Subtitle NVARCHAR(255) null,&#xA;   AllowsComments BIT null,&#xA;   CreatedAt DATETIME null,&#xA;   primary key (Id)&#xA;)&#xA;      &#xA;&#xA;      &#xA;        create table Blogs (&#xA;   Id INT IDENTITY NOT NULL,&#xA;   Title NVARCHAR(25) not null,&#xA;   Subtitle NVARCHAR(255) null,&#xA;   AllowsComments BIT null,&#xA;   CreatedAt DATETIME null,&#xA;   primary key (Id)&#xA;)&#xA;      &#xA;    &#xA;  &#xA;&#xA;Note the title column, where before we used the default values (null and 255) we are now using the values defined in the validation scheme. That is what we mean when we say that we can get pretty multi layered data validation.&#xA;&#xA;That is not the end of it, however, NHibernate Validator is hooking up into the NHibernate engine, and if we tried to save the following, we will get a validation exception:&#xA;&#xA;&#xA;  s.Save(new Blog&#xA;{&#xA;&#x9;Title = new string(&#x27;*&#x27;,255),&#xA;});&#xA;&#xA;&#xA;And, obviously, we support a way to extract all the validation errors from the entity:&#xA;&#xA;&#xA;  var invalidValues = engine.Validate(blog);&#xA;foreach (var invalidValue in invalidValues)&#xA;{&#xA;&#x9;Console.WriteLine(&#xA;        &quot;{0}: {1}&quot;,&#xA;&#x9;&#x9;invalidValue.PropertyName, &#xA;&#x9;&#x9;invalidValue.Message);&#xA;}&#xA;&#xA;&#xA;NHibernate Validator also support all the other things that you would expect from validation frameworks, the ability to create your own constraints (including the ability to embed them in the database schema!), i18n, XML only configuration, if you want to keep your entities clear of attributes, etc.&#xA;&#xA;This has been truly just a tidbit, to whet your appetite. &#xA;&#xA;You can learn more about NH Validator here.</p>
        </article>
        <article id="article-5889">
            <a href="https://ardalis.com/teched-2010-back-in-new-orleans/" target="_blank">
                <h2 class="title mb-6" id="article-5889">TechEd 2010 Back In New Orleans</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 30, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">shrimpcreole As previously announced, it&#x27;s official! TechEd 2010 will (finally) be back in New Orleans! The dates are June 7-11, 2010. It&#x27;s&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-5890">
            <a href="https://ayende.com/blog/3989/vienna-beers-night" target="_blank">
                <h2 class="title mb-6" id="article-5890">Vienna Beers night</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 30, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A bunch of us will have beers in Vienna on Tuesday (5th Mai) at about 18:30 and would welcome you to join us!   I also don&#x27;t know if telavivbeach has opened, but i know that &quot;Hermes Strandbar&quot; has opened. If the weather is fine you can find us there:   ttp://www.strandbarherrmann.at/ or if it&#x27;s cold/rainy at Bar Vulcania located here: http://tinyurl.com/dcq4t7   Anybody is welcome to join us.  Thanks for Christoph for setting this up.</p>
        </article>
        <div class="button flex justify-between">
            <a href="588.html"><span class="back arrow"></span></a>

            <a href="590.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>