
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Home â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<script>
    const lightModePref = window.matchMedia("(prefers-color-scheme: light)");

    function getUserPref() {
        const storedTheme = typeof localStorage !== "undefined" && localStorage.getItem("theme");
        return storedTheme || (lightModePref.matches ? "light" : "dark");
    }

    function setTheme(newTheme) {
        if (newTheme !== "light" && newTheme !== "dark") {
            return console.warn(
                `Invalid theme value '${newTheme}' received. Expected 'light' or 'dark'.`,
            );
        }

        const root = document.documentElement;

        // root already set to newTheme, exit early
        if (newTheme === root.getAttribute("data-theme")) {
            return;
        }

        root.setAttribute("data-theme", newTheme);

        const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");
        const bgColour = getComputedStyle(document.body).getPropertyValue("--theme-bg");
        colorThemeMetaTag.setAttribute("content", `hsl(${bgColour})`);
        if (typeof localStorage !== "undefined") {
            localStorage.setItem("theme", newTheme);
        }
    }

    // initial setup
    setTheme(getUserPref());

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("theme-toggle").addEventListener("click", () => {
            const theme = localStorage.getItem("theme");

            if (theme === "dark") {
                setTheme("light");
            } else {
                setTheme("dark");
            }
        });

        document.getElementById("toggle-navigation-menu").addEventListener("click", (e) => {
            const button = e.target;
            const ariaExpanded = button.getAttribute("aria-expanded");
            const header = document.getElementById("main-header");

            if (ariaExpanded === "true") {
                button.setAttribute("aria-expanded", "false");
                header.classList.remove("menu-open");
            } else {
                button.setAttribute("aria-expanded", "true");
                header.classList.add("menu-open");
            }
        });
    });
</script>

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <theme-toggle class="ms-auto">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main">
    <section aria-label="Blog post list">
        <a href="https://ayende.com/blog/3552/meaningless-code-quality-part-2" target="_blank"><h1 class="title mb-6">Meaningless code quality, part 2</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 23, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Here is the next slide in my presentation.    Code quality is a hard metric, it can be backed up by numbers, if you need to. Fairly often, it is measured by gut feeling and &quot;this is a mess&quot;.  One interesting problem with code quality is that you generally don&#x27;t have a good way to measure the maintainability of a particular solution, regardless of its current code quality.</p>
        <a href="https://ayende.com/blog/3551/nhibernate-2-0-final-is-out" target="_blank"><h1 class="title mb-6">NHibernate 2.0 Final is out!</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 23, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Guys, gals and its. I am overjoyed to tell you that NHibernate 2.0 has been released.  You can get it directly from the download page.  I would like to thank to the NHibernate project lead, Fabio Maulo, for doing such an awesome amount of work, and getting this out.      Thanks, Fabio.   I am not going to list all the features, suffice to say that we are now in a comparable position to Hibernate 3.2.  Have fun!</p>
        <a href="https://ayende.com/blog/3550/code-quality-is-meaningless" target="_blank"><h1 class="title mb-6">Code quality is meaningless</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 23, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is part of a presentation that I am preparing:    What do you think about that?</p>
        <a href="https://ayende.com/blog/3549/boo-lang-studio-1-0-alpha-it-out" target="_blank"><h1 class="title mb-6">Boo Lang Studio 1.0 Alpha it out!</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 22, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Jeffery Olson has just made the first release of Boo Lang Studio available.   This one comes with a &quot;Yes, Dear&quot; installer.     Yeah, we have Boo installed!     Let us create a new project:    And take a look at the code:     And intellisense works as well, whew!     Jeffery Olson and James Gregory: THANKS!</p>
        <a href="https://ayende.com/blog/3548/jfhci-considering-scale" target="_blank"><h1 class="title mb-6">JFHCI</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 22, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">There are some really good comments in this post, which I am going to respond to. Before that, I want to emphasis that I am still playing devil&#x27;s advocate here.  Joe has two very insightful comments, regarding the just hard code everything and don&#x27;t provide any admin interface for the parameters:     When you&#x27;re making software that will be used by more than one customer, you can&#x27;t hardcode these things in.    And:     Again, why not? Why can&#x27;t Company A use the same software as Company B and A wants to give 30% discount when amount is over $10K whereas B wants to give 20% when it&#x27;s over $15K?     Why is that so hard to expose? It&#x27;s just a matter a validation from the admin UI.   There is obviously no technical reason to do that, right?     Well, there is one good reason to avoid this at all costs. It just doesn&#x27;t work when you have any significant amount of rules. And by that, I am talking anything over two dozens or so.  Let us consider what the implications of such a system would be when talking about a system with any kind of reasonable complexity.  The cost of adding a rule has gone up from a simple &quot;add a class&quot; to creating UI, validating values, saving values, adding to the current UI, loading parameters from persistence storage. This translate to moving from twenty minutes task (including testing) to much more complex endeavor. Consider a rule that should give you discount based on geographical location, you need to provide a way to select that. For that matter, you now need to have multi instance rules, where you need to have the same rule bound to different parameters.  Are you willing to estimate the cost now? It is an order of magnitude or two more complex.  Now, let us say that we have solved the problem in some manner. It is not a hard problem to solve, admittedly. We are still left with operational issues that we have to deal with. How are we going to educate the ops team about all the rules? So far I have chosen a very simple set of rules to show, but real business rules are nothing trivial.  Then, we have UI issues, how are we going to show the ops team the set of rules that they can edit? How are we going to represent hundreds and thousands of rules in a meaningful fashion?   My answer is very simple. Don&#x27;t even try. Instead of trying so hard to cut developers out of the loop, start from assuming that there will be a developer along the way. Now you need to optimize the hell out of this approach.  Remember, we aren&#x27;t talking about a system that has a very small set of rules, we are talking about a very large set of them. A competitive advantage is how fast we can go from a business requirement to that behavior running in production.  Take into account that a lot of the changes in the system are not just parameters changes, let us take example of just a few business rules that come up as things that the business wants to do. This is not in design phase. This is when the system is on the air:     A customer shopping on his birthday gets a 5% discount    A preferred customer that has been with us for over a year gets three [product name] for the price of one for this fall.   Again, pre planning for this might give you a way to deal with those (if you thought about that scenario), but even so, you are going to incur a much higher cost at the system implementation phase. Pushing the changes to code makes the implementation much easier, and the ability to modify the system at a later date is greatly improved, because you already built your system around the concept of dynamically changing environment.  But, as Joe said, this doesn&#x27;t really work if you have more than one customer. It actually does, in my experience. There are a lot of system out there that have a dedicate person for their care, and giving someone a three hours course in how to do this kind of thing is fairly easy (with the requirement that they can program in C# or VB.Net, which is not inconceivable demand).  If this is still not something that you can do, put a DSL in place. A DSL script is much easier to work with for business oriented stuff, and it incur about the same cost from design and implementation view. However, deployment is ever so much easier, since you are deploying a single script, instead of a dll. You can even provide in app UI to do this, if you really wants.  In short, consider the scenario that I am describing, and oft changing environment with a lot of rules. If you have an opinion on how stupid this is, please provide that opinion within this given context.</p>
        <a href="https://ayende.com/blog/3547/jfhci-the-evil-that-is-configuration" target="_blank"><h1 class="title mb-6">JFHCI</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 22, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Chris Ortman asks a very good question about my just hard code it post:        I really like the simplicity of the approach, but does this impose a requirement that in order to change the discount percentage of the system I must be able to write c# code? I think it would not take very long for someone to ask me for and &#x27;admin&#x27; screen to do that.     I run into this all the time with new features that would be trivial to implement if not for the database table to hold the settings, the model to work with the table, and the admin screen to edit it. How do we get from &#x27;enter 5 into this box in the admin screen&#x27; to write class that applies the discount percentage you want .    I have a very simple answer for that. You don&#x27;t provide any sort of admin screen, and you don&#x27;t provide any way for a business user to go into the system and make a change. To start with, the system administrator has no idea what are the implications of changing such a configuration. Next, we have the standard issues of when we reload the value, validation, etc. All sorts of things that we really don&#x27;t want to deal with unless we have to. Not to mentions that the idea of letting anyone the option to modify operational parameters without regard to testing and QA makes me very unhappy.  All of those are workable with enough effort, however. What is not workable is the end result of such a system. Here is what you&#x27;ll end up with:         Remember, we expect to have a lot of such rules. So we expect to have a lot of configuration values. And don&#x27;t get me started on reusing configuration values for different purposes, just because a dev saw something that looked even somewhat similar to what they were doing now.  Given this piece of code, then, how are we going to handle a changing business condition? Let us say that we want to offer this only to preferred members after the first 6 months:     public class DiscountPreferredMembers : OnOrderSubmittal&#xA;{&#xA;&#x9;public override void Execute()&#xA;&#x9;{&#xA;&#x9;&#x9;if ( User.IsPreferred )&#x9;&#xA;&#x9;&#x9;&#x9;Order.AddDiscountPrecentage(5);&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;This is trivially simple:&#xA;&#xA;&#xA;  public class DiscountPreferredMembers : OnOrderSubmittal&#xA;{&#xA;&#x9;public override void Execute()&#xA;&#x9;{&#xA;&#x9;&#x9;if ( User.IsPreferred &amp;&amp; DateTime.Now &gt; User.PreferredMemberSince.AddMonths(6) )&#x9;&#xA;&#x9;&#x9;&#x9;Order.AddDiscountPrecentage(5);&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;Compile this rule (which will usually be in a separate project, along with a bunch of other tightly related rules) and push it to production. If you are doing an out of band release, you might want to do it in a completely separate DLL.&#xA;&#xA;And yes, we are still talking about using the lowest common denominator, without introducing any concept more complex than a class and the if statement. More advance solution would be a DSL, in which the deployment unit would be the individual script, instead of a full DLL.&#xA;&#xA;But even so, I hope that I am demonstrating the concept.&#xA;&#xA;All we have to do is to stop thinking about the code as set in stone and accept that this is one of the richer way we have to express semantics.</p>
        <a href="https://ayende.com/blog/3546/stupid-micro-benchmarking-proxy-performance" target="_blank"><h1 class="title mb-6">Stupid Micro Benchmarking: Proxy Performance</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 21, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Let us take a look at this class:     public class Trivial&#xA;{&#xA;    public void EmptyStandard()&#xA;    {&#xA;&#xA;    }&#xA;&#xA;    public virtual void EmptyVirtual()&#xA;    {&#xA;&#xA;    }&#xA;&#xA;    [MethodImpl(MethodImplOptions.NoInlining)]&#xA;    public void EmptyNoInline()&#xA;    {&#xA;&#xA;    }&#xA;&#xA;    [MethodImpl(MethodImplOptions.NoInlining)]&#xA;    public virtual void EmptyVirtualNoInline()&#xA;    {&#xA;&#xA;    }&#xA;}&#xA;&#xA;&#xA;Now let us see what is the effect of using Dynamic Proxy on performance, here is the test rig:&#xA;&#xA;&#xA;  int count = 100000000;&#xA;var trivial = new Trivial();&#xA;Stopwatch sp = Stopwatch.StartNew();&#xA;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;    trivial.EmptyStandard();&#xA;Console.WriteLine(&quot;EmptyStandard: &quot; &#x2B; sp.ElapsedMilliseconds);&#xA;sp.Reset();&#xA;sp.Start();&#xA;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;    trivial.EmptyVirtual();&#xA;Console.WriteLine(&quot;EmptyVirtual: &quot; &#x2B; sp.ElapsedMilliseconds);&#xA;sp.Reset();&#xA;sp.Start();&#xA;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;    trivial.EmptyNoInline();&#xA;Console.WriteLine(&quot;EmptyNoInline: &quot; &#x2B; sp.ElapsedMilliseconds);&#xA;sp.Reset();&#xA;sp.Start();&#xA;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;    trivial.EmptyVirtualNoInline();&#xA;Console.WriteLine(&quot;EmptyVirtualNoInline: &quot; &#x2B; sp.ElapsedMilliseconds);&#xA;&#xA;&#xA;trivial = (Trivial)new ProxyGenerator().CreateClassProxy(typeof (Trivial));&#xA;&#xA;sp.Reset();&#xA;sp.Start();&#xA;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;    trivial.EmptyVirtual();&#xA;Console.WriteLine(&quot;Proxy EmptyVirtual: &quot; &#x2B; sp.ElapsedMilliseconds);&#xA;&#xA;&#xA;sp.Reset();&#xA;sp.Start();&#xA;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;    trivial.EmptyVirtualNoInline();&#xA;Console.WriteLine(&quot;Proxy EmptyVirtualNoInline: &quot; &#x2B; sp.ElapsedMilliseconds);&#xA;&#xA;&#xA;The result of this is:&#xA;&#xA;&#xA;  EmptyStandard: 382&#xA;    EmptyVirtual: 397&#xA;&#xA;    EmptyNoInline: 557&#xA;&#xA;    EmptyVirtualNoInline: 520&#xA;&#xA;    Proxy EmptyVirtual: 6628&#xA;&#xA;    Proxy EmptyVirtualNoInline: 6372&#xA;&#xA;&#xA;On first glance, it is horrible, using a proxy have a 10x perf penalty. But notice just how many times I am running the code. a hundred million times, to be able to get anything observable.&#xA;&#xA;As usual, this micro benchmark basically means that I don&#x27;t really care about such things :-)</p>
        <a href="https://ayende.com/blog/3545/enabling-change-by-hard-coding-everything-the-smart-way" target="_blank"><h1 class="title mb-6">Enabling change by hard coding everything: the smart way</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 21, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Okay, hopefully this post has caused enough interest in the subject. Let us explore what I said:     I consider hard coding as much as possible as a key concept in enabling change.   The first part that you need to notice is &quot;as much as possible&quot;. This is another way of saying YAGNI. That is, if you don&#x27;t really need it flexible, just hard code it. JFHCI is my new motto. When accepting an order, we want to give 5 percent discount for preferred members. How are we going to handle this scenario?  We will hard code it!     public void SumbitOrder()&#xA;{&#xA;&#x9;if ( User.IsPrferred ) &#xA;&#x9;&#x9;AddDiscountPrecentage(5);&#xA;&#x9;// do other interesting stuff&#xA;}&#xA;&#xA;&#xA;Oh, you also need to change that? Bummer, I guess we can&#x27;t hard code this. And at this point, the typical reaction is usually one of the following:&#xA;&#xA;&#xA;  Let us go with a rules engine! &#xA;&#xA;  Let us build a DSL! &#xA;&#xA;  We should write a framework! &#xA;&#xA;  Put it in XML! &#xA;&#xA;&#xA;From the tone of this post, you can probably understand that this is not something that I am going to suggest. I am going to suggest that we will still should hard code it. But this time, we should hard code it in a smart fashion.&#xA;&#xA;It is easier to show the code than to explain:&#xA;&#xA;&#xA;  public class DiscountPreferredMembers : OnOrderSubmittal&#xA;{&#xA;&#x9;public override void Execute()&#xA;&#x9;{&#xA;&#x9;&#x9;if ( User.IsPreferred )&#x9;&#xA;&#x9;&#x9;&#x9;Order.AddDiscountPrecentage(5);&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;As you can see, the business rule is still hard coded. But now we also have a structure to it. With just a tiny bit of infrastructure, we can take this code and start adding other interesting aspects to it. Deploying a DLL containing this class to a specified folder will automatically pick it up and run it at the appropriate times.&#xA;&#xA;Our solution is incredibly simple. We hard code the rules, which is the easiest approach to getting things done. Because we have a structured way of doing that, we can now apply the ways in which we use it. For instance, if we wanted to support runtime replacements of rules, that is easy, all we need to do is to provide a FileSystemWatcher and reload them. If we want to add a rule, we just create a new class for that. If we want to modify a rule, we go and change the hard coded logic.&#xA;&#xA;This post and the previous ones has been intentionally written in a somewhat inflammatory fashion. I want to encourage people to get used to thinking about things in the simplest possible way. Embrace hard coding, it will make your life easier.&#xA;&#xA;Readability is improved, testing is easy, maintainability is a snap.&#xA;&#xA;Just hard code it!</p>
        <a href="https://ayende.com/blog/3544/basic-intellisense" target="_blank"><h1 class="title mb-6">Basic intellisense</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 21, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In many cases, intellisense is the killer feature that will make all the difference in using a language. However, it is significantly harder than just defining the syntax rules. The main problem is that we need to deal with the current context. Let us take a look at what we would like our intellisense to do for the Quote Generation DSL.        On empty line, show &quot;specification&quot;    On specification parameter, show all available modules.    On empty line inside specification block, show all actions (requires, users_per_machine, same_machine_as)    On action parameter, find appropriate value (available modules for the requires and same_machine_as actions, pre-specified user counts for the users_per_machine)   And this is for a scenario when we don&#x27;t even want to deal with intellisense for the CLR API that we can use&#x2026;   #Develop will give us the facilities, but it can&#x27;t give us the context, this is something that we need to provide.Let us see how this works, shall we?  First, we need to decide what will invoke the intellisense. In this case, I decided to use the typical ctrl&#x2B;space, so I added this:     this.editorControl.ActiveTextAreaControl.TextArea.KeyDown&#x2B;=delegate(object sender, KeyEventArgs e)&#xA;{&#xA;    if (e.Control == false)&#xA;        return;&#xA;    if (e.KeyCode != Keys.Space)&#xA;        return;&#xA;    e.SuppressKeyPress = true;&#xA;    ShowIntellisense((char)e.KeyValue);&#xA;};&#xA;&#xA;&#xA;I don&#x27;t think that this code requires any explanation, so we will move directly to the ShowIntellisense method:&#xA;&#xA;&#xA;  private void ShowIntellisense(char value)&#xA;{&#xA;    ICompletionDataProvider completionDataProvider = new CodeCompletionProvider(this.imageList1);&#xA;&#xA;    codeCompletionWindow = CodeCompletionWindow.ShowCompletionWindow(&#xA;        this,                // The parent window for the completion window&#xA;        editorControl, &#x9;     // The text editor to show the window for&#xA;        &quot;&quot;,&#x9;       &#x9;     // Filename - will be passed back to the provider&#xA;        completionDataProvider,// Provider to get the list of possible completions&#xA;        value&#x9;&#x9;     // Key pressed - will be passed to the provider&#xA;        );&#xA;    if (this.codeCompletionWindow != null)&#xA;    {&#xA;        // ShowCompletionWindow can return null when the provider returns an empty list&#xA;        this.codeCompletionWindow.Closed &#x2B;= CloseCodeCompletionWindow;&#xA;    }&#xA;}&#xA;&#xA;&#xA;We aren&#x27;t doing much here, simply invoking the facilities that #Develop gives us for intellisense. The interesting bit of work all happen in CodeCompletionProvider. There is a lot of boiler plate code there, so we will scan it shortly, and then arrive to the real interesting part:&#xA;&#xA;&#xA;  public class CodeCompletionProvider : ICompletionDataProvider&#xA;{&#xA;    private ImageList imageList;&#xA;&#xA;    public CodeCompletionProvider(ImageList imageList)&#xA;    {&#xA;        this.imageList = imageList;&#xA;    }&#xA;&#xA;    public ImageList ImageList&#xA;    {&#xA;        get&#xA;        {&#xA;            return imageList;&#xA;        }&#xA;    }&#xA;&#xA;    public string PreSelection&#xA;    {&#xA;        get&#xA;        {&#xA;            return null;&#xA;        }&#xA;    }&#xA;&#xA;    public int DefaultIndex&#xA;    {&#xA;        get&#xA;        {&#xA;            return -1;&#xA;        }&#xA;    }&#xA;&#xA;    public CompletionDataProviderKeyResult ProcessKey(char key)&#xA;    {&#xA;        if (char.IsLetterOrDigit(key) || key == &#x27;_&#x27;)&#xA;        {&#xA;            return CompletionDataProviderKeyResult.NormalKey;&#xA;        }&#xA;        return CompletionDataProviderKeyResult.InsertionKey;&#xA;    }&#xA;&#xA;    /// &lt;summary&gt;&#xA;    /// Called when entry should be inserted. Forward to the insertion action of the completion data.&#xA;    /// &lt;/summary&gt;&#xA;    public bool InsertAction(ICompletionData data, TextArea textArea, int insertionOffset, char key)&#xA;    {&#xA;        textArea.Caret.Position = textArea.Document.OffsetToPosition(&#xA;            Math.Min(insertionOffset, textArea.Document.TextLength)&#xA;            );&#xA;        return data.InsertAction(textArea, key);&#xA;    }&#xA;&#xA;    public ICompletionData[] GenerateCompletionData(string fileName, TextArea textArea, char charTyped)&#xA;    {&#xA;        return new ICompletionData[] {&#xA;             new DefaultCompletionData(&quot;Text&quot;, &quot;Description&quot;, 0),&#xA;             new DefaultCompletionData(&quot;Text2&quot;, &quot;Description2&quot;, 1)&#xA;        };&#xA;    }&#xA;}&#xA;&#xA;&#xA;The properties should be self explanatory. ProcessKey allows you decide how to handle the current keypress. Here, you get to see only normal keys (send to the actual text control) and insertion (add the current text to the text control). Another is CompletionDataProviderKeyResult.BeforeStartKey, which tells the control to ignore this key. That is important when you want to narrow the selection choice based on what the user it typing.&#xA;&#xA;InsertAction simply instructs the editor in where to place the newly added text. This is important if the user enabled intellisense in the middle of a term, and you want to fix that term.&#xA;&#xA;GenerateCompletionData is where the real interest lies. Everything else is just user experience, a very important detail, but basically just a detail. GenerateComletionData is where the power lies. (note, this is the appropriate Muhahaha! moment).&#xA;&#xA;The current implementation isn&#x27;t doing much, just returning a hard coded list of values. Note that even this trivial implementation, without any context whatsoever will give you a lot of value. Just because you can now expose more easily the DSL structure. And let us not forget the marketing side of that, if you have intellsense, even if none too intelligent one, you are already way ahead of the game. And here is out result:&#xA;&#xA;&#xA0;&#xA;&#xA;I&#x27;ll go over providing the actual context for the code in another post.</p>
        <a href="https://ayende.com/blog/3543/enabling-change-by-hard-coding-everything" target="_blank"><h1 class="title mb-6">Enabling change by hard coding everything</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: August 21, 2008
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I had a discussion today about how to make change easier. My take on that was a bit of a surprise to the other guy, &quot;Just hard code everything&quot;.  Yes, I consider hard coding as much as possible as a key concept in enabling change.  I am going to leave this as is for now, and post a continuation for that tomorrow, just to see what kind of response this has.</p>
        <div class="button flex justify-between">
            <a href="636.html"><span class="back arrow"></span></a>

            <a href="638.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
</body>
</html>