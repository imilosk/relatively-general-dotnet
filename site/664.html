
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 664 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-6631">
            <a href="https://ardalis.com/sql-server-2008-ships/" target="_blank">
                <h2 class="title mb-6" id="article-6631">SQL Server 2008 Ships</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 06, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Microsoft has released SQL Server 2008 officially, according to this press release. The software is currently available to MSDN and TechNet&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-6632">
            <a href="https://ayende.com/blog/3494/multi-tenancy" target="_blank">
                <h2 class="title mb-6" id="article-6632">Multi Tenancy</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 06, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Wikipedia defines Multi Tenancy as:&#xA;&#xA;  Multitenancy refers to the architectural principle, where a single instance of the software runs on a software-as-a-service (SaaS) vendor&#x27;s servers, serving multiple client organizations (tenants). Multitenancy is contrasted with a multi-instance architecture where separate software instances (or hardware systems) are set up for different client organizations. With a multitenant architecture, a software application is designed to virtually partition its data and configuration so that each client organization works with a customized virtual application instance.&#xA;&#xA;My definition of multi tenant includes a single instance service multiple tenants and multiple instances, one for each tenant. In fact, it would also include the idea of a product line as well. Or, like I like to think about it, perhaps it is product lines that are used in multi tenant scenarios.&#xA;Let us start from the beginning. We have a need for building an application that can handle several tenant. A typical example would be Invoicing System that we can sell to different clients. Note that I explicitly don&#x27;t care in this scenario how the application is deployed. It may be at the client site, hosted in as multi instance or single instance. The only thing that is important in this scenario is that the application is the same for all tenants.&#xA;That is, they have no, or very little, customizations options. By customizations I don&#x27;t mean having the ability to change the logo or the skin, but true customization. Changing the way the system behaves, extending the domain, adding more UI, adding more behavior, editing existing behavior, etc.&#xA;If you don&#x27;t have customization, then you really have very little issue, you can take a standard application and deal with the tenants as purely infrastructure concern (yes, I know that you need a bit more control than that, but bear with me).&#xA;If you do need this customization behavior, then it doesn&#x27;t matter what your deployment strategy is, the important issue is that you have to support multiple parallel customizations to your application, including the ability to extend the model and override the application behavior. And that is applicable for product lines as well as multi tenant applications.&#xA;As it turn out, there isn&#x27;t a lot of actual challenge in making such an application once you have an IoC in place, you can trivially change services and model without any issues. The problems are with the extension strategy, customization management, tenant management and conventions emplacement and enforcements.&#xA;I am going to talk some more about this in the future, but that will go down into the gory details and will be a real zoo.</p>
        </article>
        <article id="article-6633">
            <a href="https://ayende.com/blog/3493/beyond-mere-software-design" target="_blank">
                <h2 class="title mb-6" id="article-6633">Beyond mere software design</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 06, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">No, I am not going to talk about how to design a system, I am going to take it as granted that you are aware on all the traditional checklists for good design and are actively applying them. What I wold like to talk about are the parts that a lot of people tend to forget until they find out about it after the system is already at the hands of the users.&#xA;I am going to talk about Rhino Security as an example to that. The predecessor for Rhino Security was a proprietary piece of software that worked on top of some incredibly confusing set of business rules. (You may not see a product vNext if you have a contract for vPrev in the last year over some dollar value, as an example). Rhino Security&#x27;s design was heavily influenced by that project, including the inclusion, as a first level concept, of the &quot;explain the reasons for this security decision&quot;. The hours I spent debugging the security system only to find out that it was absolutely correct has thought me that much, if nothing else.&#xA;So the hooks for make the system understandable are built in, they are explicit and the design and are a major advantage when it comes the time to implement, experiment and deploy the system.&#xA;Another important concern is handling errors, logging, tracing and alerts are all important concepts. Do you have a backup procedure? Do it have a way to SHOUT that the backup have failed? Do you have scheduled jobs? Do you get NOTIFIED when they do? (A lot of the problem in software occur when a scheduled job hasn&#x27;t been running for three months straight)&#xA;You ask the system to do some operation. In any sort of non trivial system, figuring out why it reached this decision is as important, if not more so, than the decision / operation made. Do you plan for that? Logging isn&#x27;t it. I am talking about planing for that at the infrastructure and operation levels, exposing this as a first level ability/feature in the user interface and making this visible. Give the user control over what the system is doing. You&#x27;ll find that the level of understanding that they gain from it will enable them to get a far higher productivity.&#xA;As an aside, it is extremely helpful in troubleshooting, but that is beside the point.&#xA;Is your system stable? Stable in the sense that new features don&#x27;t break old ones, that deploying a new version is a straightforward process. Stable in the sense that the approaches you take in the beginning of the project are stable enough to last the lifetime of the project (another way of putting this, avoid hacks in the infrastructure).&#xA;The development environment. Have you given it any thought? Do you have a well defined process for developing new functionality? (Well defined process == you have thought it out, not documented it in excruciating details). Did you consider the source control story? Did you consider the ability to split the system into independent parts?&#xA;Versioning concerns - do you need to run in a multi version environment? Do you need to support just upgrade from old version?&#xA;Tracing / auditing - this is BAM, but I don&#x27;t like the term. Do you have the ability to see what the system is doing?&#xA;As you can see, we have a few separate grouping here. One is visibility and transparency of the system, second is operational issues, and last is the developer environment story. I find that all too often people are ignoring those issues completely, in favor of complete focus on architecture and application design. Those are important, but they are only part of the story.</p>
        </article>
        <article id="article-6634">
            <a href="https://ayende.com/blog/3492/it-isnt-scalable" target="_blank">
                <h2 class="title mb-6" id="article-6634">It isn&#x27;t scalable!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 06, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">That was the first thing out of my mouth when I saw a diagram the day before yesterday. The diagram was of a domain model and included four entities.&#xA;No, I can&#x27;t see the future and extrapolate from customer/order/order lines whatever the system is going to scale or not. I wasn&#x27;t talking about the system scalability at all. I was thinking of using the diagram as the main means for expressing concepts. A single diagram is just not a good solution for showing any sort of a complex concept. At that particular case, the diagram is a view on top of a model, so the issue wasn&#x27;t really relevant,&#xA;It did, however, made me think about my use of scalable. I make the word work for its living, because for me, it means:&#xA;&#xA;  Scalable traditional - can we make the system handle more operations&#xA;&#xA;  Scalable complexity - when we increase the complexity of the problem, do we need to increase the complexity of the solution by the same amount, by doubling or tripling the complexity?&#xA;&#xA;  Scalable maintainability - how much work do I need to do in order to maintain this application? Is the work required going to rapidly increase over time?&#xA;&#xA;  Scalable size - as the project grow, do I have the facilities for it? That means, can I split the work between developers / teams? Will VS become extremely slow with huge amount of projects? Do I have an SCM strategy planned.&#xA;&#xA;  Scalable management - as the project grow, how are we going to manage that?&#xA;&#xA;  Scalable IT - as the project grows, do we have the tooling in place to actually understand the application in production. Remote Debugging doesn&#x27;t work.</p>
        </article>
        <article id="article-6635">
            <a href="https://ayende.com/blog/3491/and-the-wrong-way-to-go-about-getting-help-is" target="_blank">
                <h2 class="title mb-6" id="article-6635">And the wrong way to go about getting help is...</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 06, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I got an assistance request for Rhino Mocks directly to my email about forty minutes go. As usual, and as outlined here, I asked that the question be sent to the relevant mailing list. I get a lot of such requests, and that it my standard response for most of them, when they are on the list, other people have a shot at that, and the answer is a searchable record. If you want to something more, we can discuss my rates.  Anyway, I am getting of lot of such requests, and I am perfectly fine with redirecting them to the mailing list. But twenty minutes after I replied to the first email, another one got into my inbox. Same guy, same question.    He got the same reply, as you can see.  Just to make this clear, I welcome questions and discussions, I currently (as in, today) carry ~7 of them from people who just thought they could ask me a question. But I might as well decide that I am not interested in having a discussion in private email, and ask to turn that to the relevant mailing list. It mostly depends on how interesting is the question. So feel free to contact me if you have something you want to talk about, but do consider that the mailing lists are usually a better place for that and I might turn you that way anyway.   And no, I don&#x27;t intend to make a habit of putting annoying people on the blog. And yes, it took me longer to write this blog post than it would have to answer the question.</p>
        </article>
        <article id="article-6636">
            <a href="https://ayende.com/blog/3490/solution-what-is-the-problem" target="_blank">
                <h2 class="title mb-6" id="article-6636">Solution: What is the problem?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 05, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I asked what is wrong with the following DSL:     specification @vacations:      &#xA0;&#xA0;&#xA0; requires @scheduling_work       &#xA0;&#xA0;&#xA0; requires @external_connections   I also constrained the problem so it can&#x27;t be any of the following:     It has nothing to do with the implementation.     It has nothing to do with the actual engine running this.     Look for what isn&#x27;t there.     It is only a problem when you scale up.     And no, there are no performance problems whatsoever.    The problem has nothing to do with technical issues, and all to do with management issues. The code above makes a certain modification to the current state of the system, but it doesn&#x27;t tell us why!  Consider the case where we have several hundreds (or thousands) of those rules.&#xA0; How are you going to associate the end result of executing all those rules with the actual rule that caused a particular issue? How are you going to know why?  For a well defined DSL, we need more than just the syntax, we need an environment that supports the whole development process, and that includes being able to give good answers during runtime, about what caused what and why. Some of that are things that you can add to the syntax, that is, you can write is as:     specification @vacations: &#xA;&#x9;requires @scheduling_work, &quot;Vacations requires work scheduling so we can plan around vacations&quot;&#xA;&#x9;requires @external_connections, &quot;We need to order vacation spots&quot;&#xA;&#xA;&#xA;Note: I don&#x27;t want to hear about the ridiculousness of the business example, I know it is. It is here as an example for something else, not the actual business logic.&#xA;&#xA;But this still doesn&#x27;t give you enough information, the DSL engine itself needs to record the information about what rule (and what script) had modified the state of the application, and allow you to just directly from the result to the rule that allowed it.&#xA;&#xA;Otherwise, what you have is chaos.</p>
        </article>
        <article id="article-6637">
            <a href="https://ayende.com/blog/3489/ugly-linq" target="_blank">
                <h2 class="title mb-6" id="article-6637">Ugly Linq</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 05, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the things that always bothered me with Linq was that it is actually not an interesting idea from the compiler perspective. I just had to implement a very simple expression to expression tree converter, which only served to strengthen my opinion. Here is the (ugly, proof of concept, horrible) implementation, using the Boo AST:     private static Block Linqify(Expression expr)&#xA;{&#xA;&#x9;var block = new Block(expr.LexicalInfo);&#xA;&#x9;ReferenceExpression condition = AddCondition(block);&#xA;&#x9;Parse(block, condition, expr);&#xA;&#x9;block.Add(new ReturnStatement(condition));&#xA;&#x9;return block;&#xA;}&#xA;&#xA;private static ReferenceExpression AddCondition(Block block)&#xA;{&#xA;&#x9;var condition = new MethodInvocationExpression(new ReferenceExpression(&quot;Condition&quot;));&#xA;&#x9;var expression = new ReferenceExpression(&quot;condition_&quot; &#x2B; CompilerContext.Current.AllocIndex());&#xA;&#x9;block.Add(&#xA;&#x9;&#x9;new BinaryExpression(&#xA;&#x9;&#x9;&#x9;BinaryOperatorType.Assign,&#xA;&#x9;&#x9;&#x9;expression,&#xA;&#x9;&#x9;&#x9;condition)&#xA;&#x9;&#x9;);&#xA;&#x9;return expression;&#xA;}&#xA;&#xA;private static void Parse(Block block, Expression condition, Expression expr)&#xA;{&#xA;&#x9;var be = expr as BinaryExpression;&#xA;&#x9;if (be != null &amp;&amp; (be.Operator == BinaryOperatorType.Or || be.Operator == BinaryOperatorType.And))&#xA;&#x9;{&#xA;&#x9;&#x9;block.Add(new BinaryExpression(&#xA;&#x9;&#x9;&#x9;BinaryOperatorType.Assign,&#xA;&#x9;&#x9;&#x9;new MemberReferenceExpression(condition, &quot;Operator&quot;),&#xA;&#x9;&#x9;&#x9;new StringLiteralExpression(be.Operator.ToString().ToLowerInvariant()))&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;ReferenceExpression left = AddCondition(block);&#xA;&#x9;&#x9;block.Add(&#xA;&#x9;&#x9;&#x9;new MethodInvocationExpression(&#xA;&#x9;&#x9;&#x9;&#x9;new MemberReferenceExpression(new MemberReferenceExpression(condition, &quot;Expressions&quot;), &quot;Add&quot;), left));&#xA;&#x9;&#x9;ReferenceExpression right = AddCondition(block);&#xA;&#x9;&#x9;block.Add(&#xA;&#x9;&#x9;&#x9;new MethodInvocationExpression(&#xA;&#x9;&#x9;&#x9;&#x9;new MemberReferenceExpression(new MemberReferenceExpression(condition, &quot;Expressions&quot;), &quot;Add&quot;), right));&#xA;&#x9;&#x9;Parse(block, left, be.Left);&#xA;&#x9;&#x9;Parse(block, right, be.Right);&#xA;&#x9;&#x9;return;&#xA;&#x9;}&#xA;&#x9;var fragment = new MethodInvocationExpression(new ReferenceExpression(&quot;Fragment&quot;));&#xA;&#x9;if (expr is UnaryExpression)&#xA;&#x9;{&#xA;&#x9;&#x9;fragment.NamedArguments.Add(&#xA;&#x9;&#x9;&#x9;new ExpressionPair(new ReferenceExpression(&quot;Modifier&quot;),&#xA;&#x9;&#x9;&#x9;&#x9;new StringLiteralExpression(&quot;not&quot;))&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;be = (BinaryExpression)((UnaryExpression)expr).Operand;&#xA;&#x9;}&#xA;&#x9;var func1 = (MethodInvocationExpression)be.Left;&#xA;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Func1&quot;), new StringLiteralExpression(func1.Target.ToString())));&#xA;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Prop1&quot;), GetStringArgument(func1.Arguments[0])));&#xA;&#x9;var func2 = be.Right as MethodInvocationExpression;&#xA;&#x9;if (func2 != null)&#xA;&#x9;{&#xA;&#x9;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Func2&quot;), new StringLiteralExpression(func2.Target.ToString())));&#xA;&#x9;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Prop2&quot;), GetStringArgument(func2.Arguments[0])));&#xA;&#x9;}&#xA;&#x9;else&#xA;&#x9;{&#xA;&#x9;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Func2&quot;), new StringLiteralExpression(&quot;literal&quot;)));&#xA;&#x9;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Prop2&quot;), GetStringArgument(be.Right)));&#xA;&#x9;}&#xA;&#x9;fragment.NamedArguments.Add(new ExpressionPair(new ReferenceExpression(&quot;Operator&quot;),&#xA;&#x9;&#x9;new StringLiteralExpression(GetOperator(be))));&#xA;&#xA;&#x9;block.Add(&#xA;&#x9;&#x9;new MethodInvocationExpression(&#xA;&#x9;&#x9;&#x9;new MemberReferenceExpression(new MemberReferenceExpression(condition, &quot;Expressions&quot;), &quot;Add&quot;), fragment));&#xA;&#xA;}&#xA;&#xA;private static Expression GetStringArgument(Expression expr)&#xA;{&#xA;&#x9;if (expr is StringLiteralExpression)&#xA;&#x9;&#x9;return expr;&#xA;&#x9;return new StringLiteralExpression(expr.ToString());&#xA;}&#xA;&#xA;private static string GetOperator(BinaryExpression be)&#xA;{&#xA;&#x9;switch (be.Operator)&#xA;&#x9;{&#xA;&#x9;&#x9;case BinaryOperatorType.Equality:&#xA;&#x9;&#x9;&#x9;return &quot;==&quot;;&#xA;&#x9;&#x9;case BinaryOperatorType.Inequality:&#xA;&#x9;&#x9;&#x9;return &quot;!=&quot;;&#xA;&#x9;&#x9;case BinaryOperatorType.Member:&#xA;&#x9;&#x9;&#x9;return &quot;in&quot;;&#xA;&#x9;&#x9;case BinaryOperatorType.LessThan:&#xA;&#x9;&#x9;&#x9;return &quot;&lt;&quot;;&#xA;&#x9;&#x9;case BinaryOperatorType.LessThanOrEqual:&#xA;&#x9;&#x9;&#x9;return &quot;&lt;=&quot;;&#xA;&#x9;&#x9;case BinaryOperatorType.GreaterThan:&#xA;&#x9;&#x9;&#x9;return &quot;&gt;&quot;;&#xA;&#x9;&#x9;case BinaryOperatorType.GreaterThanOrEqual:&#xA;&#x9;&#x9;&#x9;return &quot;&gt;=&quot;;&#xA;&#x9;&#x9;default:&#xA;&#x9;&#x9;&#x9;throw new NotSupportedException(be.Operator.ToString());&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;This takes a Boo expression and transform that into the code that creates an object model that represents this expression. Linq is simply an extension to this implementation.</p>
        </article>
        <article id="article-6638">
            <a href="https://ayende.com/blog/3488/writing-domain-specific-languages-in-boo-chapter-10-creating-professional-dsl-table-of-contents" target="_blank">
                <h2 class="title mb-6" id="article-6638">Writing Domain Specific Languages in Boo: Chapter 10 - Creating professional DSL - Table of Contents</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 04, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">An incomplete list of subjects for the 10th chapter.&#xA;The editor environment&#xA;&#xA;  Color highlighting&#xA;&#xA;  Intellisense&#xA;&#xA;  Sharp Develop&#xA;&#xA;  Visual Studio&#xA;&#xA;DSL Code Generation&#xA;&#xA;  The Code DOM Provider for Boo&#xA;&#xA;  Specific DSL Writers&#xA;&#xA;Graphical UI&#xA;&#xA;  Displaying the DSL&#xA;&#xA;  Saving DSL modifications&#xA;&#xA;  The value of a graphical front end&#xA;&#xA;Errors and warnings handling&#xA;Debugging&#xA;Dealing with the large scale - what the hell is going on?</p>
        </article>
        <article id="article-6639">
            <a href="https://ayende.com/blog/3487/building-domain-specific-languages-with-boo-chapter-9-versioning" target="_blank">
                <h2 class="title mb-6" id="article-6639">Building Domain Specific Languages with Boo: Chapter 9 - Versioning</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 03, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">At long last, I am done with Chapter 9. The actual writing process didn&#x27;t took so long, but the ideas took a long time to come into a coherent form.  Here is the final table of content:     9.1 Starting from a stable origin     9.2 Planning our DSL&#x27;s versioning story      9.2.1 Implications of modifying the DSL engine      9.2.2 Implications of modifying the DSL API and Model      9.2.3 Implications of modifying the DSL Syntax      9.2.4 Implications of modifying the DSL Environment      9.3 Regression Test Suite      9.4 Versioning Strategies      9.4.1 Abandon Ship Strategy      9.4.2 Single Shot Strategy      9.4.3 Additive Change Strategy      9.4.4 Tower of Babel Strategy      9.4.5 Adapter / Compatibility Mode Strategy      9.4.6 The Great Migration Strategy      9.5 Applying versioning strategies      9.5.1 - Managing safe, additive, changes      9.5.2 Handling required breaking change      9.6 DSL versioning in the real world      9.6.1 Versioning Brail - Boo based templating language      9.6.2 Versioning Binsor - Inversion of Control Container Configuration DSL      9.6.3 Versioning Rhino ETL - Extract Transform Load DSL      9.7 Versioning - only at release boundary      9.8 Summary   And the chapter summary:     In this chapter, we have discussed how we can ensure the longevity of our languages, how we can make them survive and prosper from one version to the next.     Of particular importance are the tests and the regression test suite, which we use to ensure that existing behavior is not changed in an incompatible way, those breaking client scripts.     We also discussed the implication of versioning on the design and implementation of our DSLs. In particular, we mentioned the importance of using fa&#xE7;ades to separate our DSL from the application&#x27;s model and API, in order to allow them both to be developed independently. This separation goes a bit further than merely a fa&#xE7;ade, however. We want to ensure that the DSL engine is usable even without the DSL.    This seems like a strange requirement, but it is a very important one. You want to be able to modify the engine without modifying the DSL, and vice versa. In addition to that, you might want to have several dialects of the same language (typically several versions) based on the same engine. This tends to be hard to impossible if there isn&#x27;t a good level of isolation between the two.    The DSL environment (evaluation order, invocation call sites and naming conventions)and its implication on versioning are something that most people tend to forget about, until they find out just how critical it is for the usage of the language.    We walked through several versioning strategies, from the &quot;we always start fresh&quot; to the &quot;no changes are allowed&quot; to multi dialect languages and automatic migration tools. We also applied a few of those strategies to the Quote Generation DSL, and then seen how real world DSLs have dealt with the problem, and the various constraints that led to the different choices that were made.    Versioning is a big topic, and there is not enough room in a single chapter to cover it all. Most of the guidance about versioning is directly applicable for languages as well, and I strongly recommend referring to it as well as this chapter.    At this point, we are surely ready to release our DSL to the whole wide world, right? Well, from the technical perspective, certainly. But we are still missing something, a bit of shine, just a hint of polish.    Creating a DSL is easy, making is slick and professional is another matter, that is what we will spend the next chapter discussing.   Next chapter - Creating professional DSL.</p>
        </article>
        <article id="article-6640">
            <a href="https://ayende.com/blog/3486/logging-auditing-and-alerts" target="_blank">
                <h2 class="title mb-6" id="article-6640">Logging, Auditing and Alerts</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 02, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Udi has a few things to say about logging, in response for my logging with AOP post. As usual, I agree with Udi. :-) In particular, I am in agreement with this:     In broader terms, all logging goes in framework-level code. For smart clients, one really good place to put logging is in your Command infrastructure - every time a command is invoked, log it and the args. For data access, well, any decent O/R Mapper has a lot of logging already, just use it. For communication, ditto. Funny that just last week this was one of the major bits of feedback I gave in a code review.   Logging is for troubleshooting, nothing else. They are incredibly helpful when you need to find out what the hell is going on, but they are very bad in the other two tasks that are usually assigned to them. Alerting you that something is wrong and getting information out of the application during normal operation.  Alerts are raised when something in the application has gone wrong. Maybe a circuit breaker tripped because an external system is failing, or maybe disk space is getting very low, or a batch process failed, etc. Those alerts should be wired into whatever monitoring system your IT team is using (ArcSight, MOM, Nagios, etc). This is important. Trust me on that.  The other aspect is auditing. I want to know who changed what as well as when and why. In on of my projects we had an ISystemUsage interface, which controllers would call to inform the system about interesting things happening. This is at a much higher level than logging. We aren&#x27;t interested in the raw details, only in business significant data.   If I recall correctly, the data we gathered was about logins, view data, failed searches, feature usage, taken actions, etc. That let us reconstitute the activities of user at a later data, as well as mine some fairly interesting out of the system.   Udi suggests using a Business Activity Monitoring system for doing this. My only experience with BAM was with BizTalk&#x27;s so I have bad impression about the name, but in general, I agree. You want to give as much visibility as possible into the system.  Oh, and read Release It!</p>
        </article>
        <div class="button flex justify-between">
            <a href="663.html"><span class="back arrow"></span></a>

            <a href="665.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>