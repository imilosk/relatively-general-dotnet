
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 772 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7711">
            <a href="https://ayende.com/blog/2522/phsycic-debugging-from-blogs" target="_blank">
                <h2 class="title mb-6" id="article-7711">Phsycic Debugging from Blogs</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, I got my phsycic hat today, and I wanted to refer to Frans&#x27;&#xA0;post and try to answer the question that Frans is asking:            Roger:         9. Provide read-only access to foreign key values.             Mike:         This is actually a feature I&#x2019;m fighting to get into our final milestone for V1. Can you describe the scenarios where this is used? Do you need the ability to query on the foreign key value, or simply expose it on the domain object?             If I have an Order entity object in memory, if I want to obtain its CustomerID and I only have the ability to get that ID is by fetching the related Customer entity into memory, instead of doing Order.CustomerID, I lose performance which is unnecessary. It&#x27;s simple data-access stuff and it puzzles me a bit why Mike has to put up a fight to get this into their framework in the first place. Especially since the underlying object context knows that Order.CustomerID as it has to save it to the DB if you change the Customer related to that particular Order instance.         I should mention that I know very little about the way the Entity Framework internals work, but I would like to make an educated guess about the reasons for this issue, and why it is appernatly hard to do for V1.    The problem is basically this:            Order&#xA0;order&#xA0;=&#xA0;GetOrderFromDatabase();        Console.WriteLine(&quot;Order&#x27;s&#xA0;Customer&#xA0;ID:&#xA0;{0}&quot;,&#xA0;order.Customer.CustomerID);        Now, the Entity Framework is apperantely not able to handle this case without loading the entire customer entity, which isn&#x27;t really not needed, since you already have loaded the CustomerID column when you loaded the Order entity.    The reason that this is likely hard (again, I am making guesses here) is that the EF uses code generation where other frameworks use interception, and&#xA0;I assume that there isn&#x27;t really a good way to detect when the identifier property is access and when it is a normal property (that does require loading the object). This likely means that trying to access the Customer entity when it is not loaded would throw, and trying to deal with that would force the EF to handle lazy loading, which is something that they seem to want to push to the client, rather than the framework.</p>
        </article>
        <article id="article-7712">
            <a href="https://ayende.com/blog/2521/private-database-mydatabase" target="_blank">
                <h2 class="title mb-6" id="article-7712">private Database myDatabase;</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is an integration story. Once upon a time there was the need to integrate between two systems. A meeting (blah!) was scheduled and it was decided that web services are an appropriate integration technology. Fast forward some time, and now you get&#xA0;a strange situation where the other side has found that they are unable to use web services because of technical limitations in Java. Sound suspicious to me, but whatever. How do you suppose we will integrate, then? Well, they know how to talk to a database... So, they can&#x27;t figure out web services but you want to talk to my database? I don&#x27;t think so. But you can add security and stored procedures and then they would not be able to do any harm. So, because they are incompetent, I need to start managing security in the database layer? I don&#x27;t think so. create database Application_Integration; Here is the user/pass, enjoy. Abstraction is for more&#xA0;than just code. Now I wonder how long it would take them to complain that I don&#x27;t do any work because I have a single table in the database.</p>
        </article>
        <article id="article-7713">
            <a href="https://ayende.com/blog/2520/it-is-not-a-war-not-even-a-hot-argument" target="_blank">
                <h2 class="title mb-6" id="article-7713">It is not a war, not even a hot argument</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">From Kevin, the OR/M Wars: Now there are is a lot of uproar at the moment from the NHibernate Mafia (as termed in DotNetRocks) slamming everything that isn&#x27;t there WAY. First, Richard &amp; Carl, I believe the terms belongs to you - I am going to send a triple nested cursors with Cartesian products to your database as a revenge. Second, I am rarely the kind of guy that would simply ignore something that he doesn&#x27;t agree on. I don&#x27;t think that there is any slamming involved in the discussions we are having, merely an opinionated argument, and I like those because they make me think. Kevin&#x27;s mentions that he evaluated NHibernate and Active Record, and he doesn&#x27;t think that they will speed up development. I would like to know why, but that is a totally acceptable stand, especially when it is given from a position of someone that tried it.  The biggest thing that seems to set the NHibernate people off is using the database as anything more than a means for object persistence. What if I want to use the flash XML features or SQL 2k5? CLR types? If you have a big expensive database damn sure use it. Give me a use case, and I&#x27;ll give you an answer, you&#x27;ll be surprised how much you can get out of an OR/M when you put your mind to it. And yes, there will be cases when I will say, &quot;that is a valid use case, use the DB directly for that&quot;. Otherwise you could just have one table in the database and serialize out your objects to and from the db. That way you never have to worry about relational data or normalizing a database or tuning a database. Not really a good approach, &quot;Give me all the users registered last week&quot; and see you next week. What is really important, however, is this: Now the thing that worries me most though seems to be the venom in the both some of the posts and some of the comments. In general, I think that the discussion was being professional and educating. There were some incidents, but we are all friends now :-) I don&#x27;t like confrontational situations, they lead to violence and they I have to do paperwork, so I have a vested interest in keeping the discussion professional.</p>
        </article>
        <article id="article-7714">
            <a href="https://ayende.com/blog/2519/boos-dsl" target="_blank">
                <h2 class="title mb-6" id="article-7714">Boo&#x27;s DSL</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Yeah, better support for DSLs in Boo! I am using Boo as my&#xA0;programming language of choice, and I really like the ability to just&#xA0;drop off and build new syntax any way I want to. This new change make it even easier, hence more approachable, so this is very cool.</p>
        </article>
        <article id="article-7715">
            <a href="https://ayende.com/blog/2518/you-are-allowed-to-disagree-too" target="_blank">
                <h2 class="title mb-6" id="article-7715">You are allowed to disagree, too</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Just to clarify, the other side of this post&#xA0;in this one. Rob Conery&#xA0;says that he landed on my bad side. Allow me to clarify, I may disagree with with Rob, but I like this types of discussions. Oh, and Rob, in the last week I posted 55 posts,&#xA0;5 of which were about this discussion. Considering that this is usually how much I post in a week month, and considering that this is a topic which is (a) near and dear to my heart, (b) I disagree with Rob on this matter, I wouldn&#x27;t be surprised to see more coming soon. I actually have one that I still need to work on, regarding Rob&#x27;s to Evan&#x27;s post. What sucks is that ORM can easily be abused The universe keeps producing better idiots, it is a shame, I know. By the way, I agree with the spirit of what Rob is saying, except that I don&#x27;t agree with the examples that he is using. Basically, going anywhere blinding is a bad approach, you should really learn the stack that you are using and be able to utilize every part of it. Closing off options because of dogma is a really bad place to be when the shit hit the fan.</p>
        </article>
        <article id="article-7716">
            <a href="https://ayende.com/blog/2517/isnt-this-pushing-politically-correct-too-far" target="_blank">
                <h2 class="title mb-6" id="article-7716">Isn&#x27;t this pushing politically correct too far?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20"></p>
        </article>
        <article id="article-7717">
            <a href="https://ayende.com/blog/2516/handling-legacy-data-using-or-m" target="_blank">
                <h2 class="title mb-6" id="article-7717">Handling Legacy Data using OR/M</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Patrik has a good post describing how to handle legacy database with an OR/M. I have used similar techniques to map a basically flat file database to a nice relational view, and from there to a workable domain model that make work much easier (Say: Policy and Insurance vs. AF_432 and GF_2345).</p>
        </article>
        <article id="article-7718">
            <a href="https://ayende.com/blog/2515/what-does-it-takes-to-calculate-a-sales-tax" target="_blank">
                <h2 class="title mb-6" id="article-7718">What does it takes to calculate a sales tax?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Lately a few people have pointed out at sales tax calculation as a simple business logic that can be done in the database. Let us consider what is involved in such a task, shall we? Well, on the first iteration we have: The sales tax is 10% of the listed price. CalcSalesTax(price): return price * 1.1  On the second iteration, we learn that we now need to support more than a single location, so we need to keep an association of location to sale tax.  CalcSalesTax(price, location): &#xA0;&#xA0; salesTax = locationsToSalesTax[location]&#xA0;&#xA0; return price * salesTax On the third iteration we learn that the business is paying 50% of the sales tax for preferred customers customers:  CalcSalesTax(price, location, customer):&#xA0;&#xA0; salesTax = locationsToSalesTax[location]&#xA0;&#xA0; salesTax /= 2 if customer.IsPrferred&#xA0;&#xA0; return price * salesTax (Note that this ignores the need to record that the business is paying the other half). On the forth iteration we learn that we have the time dimension as well, since calculating a sales tax in the future need to take into account changes in the law:  CalcSalesTax(price, location, customer, calculationDate): &#x9;salesTax = locationsToSalesTax[location] &#xA;&#x9;salesTaxValue = salesTax.GetTaxRateAt(calculationDate) &#x9;salesTaxValue/= 2 if customer.IsPrferred &#xA;&#x9;return price * salesTaxValue &#xA;On the fifth iteration we learn that country Xyz is using a system where you pay sales tax based on your earning (why not, that would make as much sense as anything else in tax law):&#xA;CalcSalesTax(price, location, customer, calculationDate):&#xA;    salesTax = locationsToSalesTax[location]&#xA;    if location == specialCaseForCountryXyz:&#xA;&#x9;salesTax = CountryXyzWebService.GetTaxRateFor(customer)&#xA;    salesTaxValue = salesTax.GetTaxRateAt(calculationDate)    salesTaxValue/= 2 if customer.IsPrferred return price * salesTaxValue &#xA;On the sixth iteration you break down in tears and write the whole thing in XML.&#xA;There is no such thing as simple business logic beyond the username&#x27;s field length,</p>
        </article>
        <article id="article-7719">
            <a href="https://ayende.com/blog/2514/frameworks-vs-services-on-choosing-the-right-approach" target="_blank">
                <h2 class="title mb-6" id="article-7719">Frameworks vs. Services: On choosing the right approach</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Recently there was some discussion about the CAB during which I think we found the core difference&#xA0;between the CAB approach vs. some of the OSS tools that were brought up in the discussion (sorry, I can&#x27;t recall who first brought up this observation). Frameworks has a much higher adoption cost associated with them vs. services. Services are more easily compassable and replaceable. The general option is that services&#xA0; == Often Good, Frameworks == Sometimes Good. Feel free to shift the scales every which way you want, obviously I am leaning toward the services over frameworks, but others has different approaches. So, given this, how do you explain the success of Ruby on Rails? Isn&#x27;t it a big framework? Well, I don&#x27;t see&#xA0;RoR as a framework, it is a Framework Skeleton, and filling this skeleton there is a set of independent services that can be used to build your application. This approach means that you can:  Replace the services with your own implementations Use the services outside the framework This means that if you really liked the logging component in the framework, you can pull it out very easily and start using it, without having to drag the rest of the framework in.</p>
        </article>
        <article id="article-7720">
            <a href="https://ayende.com/blog/2513/security-considerations" target="_blank">
                <h2 class="title mb-6" id="article-7720">Security Considerations</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 07, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Security is always an annoyance, on the one hand, you really need to do something about it, on the other hand, the moment you do, the entire application breaks. It is often useful to build the security infrastructure at the first stages of the application, but that is not always possible.  For various reasons, I just now got to the point where I could deal with security, and I had a radically different set of requirements than I had at the beginning of the project. That left me wondering how to ensure that I didn&#x27;t forget to add security in the proper places. A while ago I wrote an article&#xA0;that has shown how you can add generic security features directly into the data access layer. Security was&#xA0;very simple, you literarily could not&#xA0;break the security, because the data access would filter / reject anything that you didn&#x27;t have authority to do. The problem with this approach is that it assumes something about the domain. Let us say that I use the usual CRUD permissions. Now, I have business rules (themselves entities) that can be attached to a policy. A user has access to view / edit the policy, but is not allowed to view /edit the associated business rules.  Can you guess what happened when you turn on the security mechanism? Ouch! The system would behave as if the business rules did not exist if (and only if) the user didn&#x27;t have permissions to edit / view the business rules. This created the amusing situation where the admin is able to test the business rules but the user&#x27;s actions completely ignore them. The client wasn&#x27;t amused, and I learned an important lesson. I am currently using a two tiers approach for security, I have the authorization service, which contains the logic for allowing/denying permissions from the user:   Note that the authorization service has a lot of methods per scenario. The idea is that all the methods call to the IsAllowed() method, but it leaves me with a much nicer syntax to use. I don&#x27;t have enough permissions that this approach would be a problem. Then, in my abstract controller, I have defined:  ///&lt;summary&gt;/// Validate that the user is allowed to use this controller or/// this use case///&lt;/summary&gt;public abstract void AssertUserHasPermissions(); Now, I must take action in each and every controller, and decide how I would treat the security implications at each use case.  Here are a few examples:  // In: ChangePasswordControllerpublic override void AssertUserHasPermissions(){&#xA0;&#xA0;&#xA0; // Well, anyone can change their password&#xA0;&#xA0;&#xA0; // nothing to assert}// In: BaseAdminControllerpublic override void AssertUserHasPermissions(){&#xA0;&#xA0; if(AuthorizationService.IsAdmin==false)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; base.AccessForbidden(Resources.YouAreNotAnAdmin);}// In: PolicySearchControllerpublic override void AssertUserHasPermissions(){&#xA0;&#xA0; // well, basically anyone can try to search for policies&#xA0;&#xA0; // security here is done by the finders for each scenario.&#xA0;&#xA0; // AbstractPolicyFinder has AssertSearchingForAsscoiatedCustomersOnly&#xA0;&#xA0; // and FilterSearchResultsBasedOnAuthorization methods to handle the&#xA0;&#xA0; // security there.} The advantage, I am making explicit the security decisions that I am making, and I make the action very explicit. It does mean that I am going to return tomorrow for an application that is compromised of a login page and an access denied page, though :-) (One thing that I would like to recommend is to always have a usable (not necessarily pretty, but usable) UI for the security, and ton of logging.)</p>
        </article>
        <div class="button flex justify-between">
            <a href="771.html"><span class="back arrow"></span></a>

            <a href="773.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>