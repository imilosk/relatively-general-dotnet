
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 643 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-6421">
            <a href="https://ayende.com/blog/3533/tools-matter" target="_blank">
                <h2 class="title mb-6" id="article-6421">Tools matter</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 17, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A few hours ago I responded to a mail message that had:&#xA;&#xA;  The scenic route is also the poor-man&#x27;s route...&#xA;  Pushing a Typemock purchase at the current state of things won&#x27;t bear any fruit.&#xA;&#xA;I have run into similar sentiments with regards to ReSharper, dotTrace, RedGate&#x27;s SQL Compare, etc.&#xA;I am not sure how to respond to such a statement, because it the underlying assumptions are all wrong. Let us do the math.&#xA;TypeMock (enterprise) costs 500$. That is the most expensive version they have (although if you ask nicely, I am pretty sure they will agree to raise the price). Resharper is 350$ for the VB &amp; C# edition, and just 250$ for the C# edition. dotTrace is 500$, and SQL Compare is 400$.&#xA;So you need a 500$ tool, or 2000$ set of tools, or something of this order.&#xA;What is the ROI of that?&#xA;I hit oDesk in order to get some estimates about outsourced costs. It seems that at the high end, in oDesk, you can get a C# dev for around 60$ an hour, but the common rate is something around 20$ an hour.&#xA;None of those tools is really mandatory. With a bit of work, you can get things working without them. But that bit of work is expensive.&#xA;Taking SQL Compare as an example, it costs 400$. Without it, you are forced to spent time maintaining alter scripts, find out that Joe forgot to checkin the latest script so it is now breaking in QA, etc. Using the common outsource rate as a metric, SQL Compare would cover itself if it would save 2.5 days. From experience with projects that did manual schema management, it takes a lot more than that over the life time of a project.&#xA;R# saves a lot of time. It saves it in tiny increments, so it is sometimes not noticeable, but it does. Using the outsource rate again, it would pay for itself by saving a day and a half. I write software 3 to 5 times faster when I have R# than without it. It would be a steal for triple the price (but don&#x27;t tell JetBrains that).&#xA;Trying to put a legacy system under test without TypeMock is possible, but you are going to spend a whole lot more than the 3 days it takes to pay it back. And this math is stupid! I am taking the low end of the pool. If we will take the 60$ an hour, which is more reasonable it takes just a day to see the ROI of any of those tools.&#xA;Tools matter, a lot. And we need to consider the moral effects as well. Another big productivity enhancer.&#xA;Now, tools aren&#x27;t silver bullets. You should evaluate a tool to see its worth, absolutely, and there are some tools that may be valuable in one scenario and worthless in the other. But if you believe that a tool will save you time and effort, just do the math. It is usually worth it.&#xA;So, given that this math is trivial, why do so many organizations choose the stupid approach? The answer is quite simple, budget.&#xA;A department has a budget of 100$. But usually it is not a budget of 100$ outright. It tends to be things like, 85$ allocated to X, 10$ allocated to Y, etc. Salaries are not included in most budgets. Headcount does, but the salary is not something that is usually within a particular department. So given that a salary is fixed and usually outside the direct control of the department, the worth of a time for employees tends to be dismissed. That is already budgeted for, after al, and outside my control. Buying a tool, however, comes out of my budget, which is a problem.&#xA;This is the story of trying to achieve local optimum by harming the organization as a whole in all its glory.</p>
        </article>
        <article id="article-6422">
            <a href="https://ayende.com/blog/3532/inversion-of-control-is-not-about-testability" target="_blank">
                <h2 class="title mb-6" id="article-6422">Inversion of Control is NOT about testability</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Jacob have an interesting perspective on testability:&#xA;&#xA;  The thing is that using Typemock means that you can unit test literally any public method of any public class, regardless of any and all internal dependencies that class might have. And you can do so without changing the design and/or architecture of your software at all.&#xA;&#xA;  In other words, using Typemock means that everything is testable. Unit testable. Seriously. Everything.&#xA;  ....&#xA;  Which is why I had such a hard time reading Jeffrey Palermo&#x27;s latest blog post entitled &#x201C;Inversion of Control is NOT about testability&#x201D;. Since I know Jeffrey Palermo is a .Net developer, my initial response is a big fat &#x201C;Duh. He must be using Typemock.&#x201D; Sadly, this is not the case.&#xA;  ...&#xA;&#xA;  &#x201C;Testable design&#x201D; only has value in the things it allows us to do&#x2014;namely, unit test our classes. If we can unit test our classes as easily no matter what design patterns we choose, then that frees us up to explore other aspects of design choices. It isn&#x27;t that &lt;le design du jour&gt; ceases to have value, it&#x27;s just that testability is no longer a factor in evaluating its utility.&#xA;  ...&#xA;&#xA;  So, uh, forget all I just said. Spend lots of time making sure your .Net projects are testable. Also: Typemock sucks. Don&#x27;t bother going there...&#xA;&#xA;  &#xA;&#xA;There are so many things that I disagree with in this post, I am not sure where to even begin. Before that, I need to point out, as usual, that TypeMock is an awesome tool, and that it can bring a lot of value to the table. It doesn&#x27;t fit the way that I , personally, works, but that is a personal opinion, and I am just a little bit biased. I just want to make it clear that this post is not an attempt to dismiss TypeMock or its value.&#xA;With that out of the way, let us concentrate on the actual content of the post.&#xA;First, there is no silver bullet. TypeMock is wonderful, but it is not the answer to every testability prayer (is there such a thing?). If the code is bad, TypeMock can do a lot to help, but it will still be a PITA to test this code.&#xA;Second, it looks like Jacob missing the actual message in Palermo&#x27;s post about &quot;this is not about testability&quot;. Good design is one which preserves separation of concerns, maintain the single responsibility principal, amenable to change, etc. This also happen to be a design that is easily testable, but that is beside the point.&#xA;Good design is simple one where each piece of the code does one thing, and is not dependent on everything else in the application. To violate that means that you would run into issues the first time you need to make a modification. The reason that we want to avoid dependencies as much as possible is that we have to avoid the cascading change reaction.&#xA;I didn&#x27;t have to look far for an example, two posts prior to this one, Jacob has given an excellent example why a design that is testable with TypeMock (and thus, holy*), run into problems with real world requirements. This is not my scenario, it is his. I can come up with quite a lot of war stories about the problems that code with too much dependencies caused.&#xA;Let us take Rhino Mocks as an example (I still think of it as my best work), the project is over 3 years old, started in .Net 1.1 and C# 1.0. It has got through numerous versions and grown through two (and a half :-)) major framework versions. The code is stable and as usable as the the day I started this project. If you dig into Rhino Mocks, you&#x27;ll find that the code is heavily segregated. That allowed me to add functionality and modify the way things work without difficulty, even when dealing with major changes, like the move to Dynamic Proxy 2 or support the AAA syntax.&#xA;That is what you get out of having a good design, software that is maintainable.&#xA;* sorry, this is a snipe at Jacob, not TypeMock.</p>
        </article>
        <article id="article-6423">
            <a href="https://ayende.com/blog/3531/vpsland-com-support-nightmare" target="_blank">
                <h2 class="title mb-6" id="article-6423">VPSLand.com - Support nightmare</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Let me start by stating the scenario. hibernatingrhinos.com is down. The server is compromised, dead, whatever.  I don&#x27;t know what actually happened to is, but it is no longer bootable.  I don&#x27;t have complete backups. That is totally and completely my fault. I am an idiot. That is not the point of this post. I should have had backups, and ensured that they work correctly, no arguments here.  What I want to talk about now is the support experience that I got from VPSLand.  We can start with this bad news:     Just to give you some background, I had two &quot;chats&quot; with the &quot;support&quot;. In the first it became clear that the &quot;complimentary weekly backups&quot; that they offer are a myth and doesn&#x27;t really exists. They can&#x27;t create a new VPS instance and hook the current virtual disk to the new instance, so I can get the data off of the old machine.  The only solution that they offer was to rewipe the entire machine. Losing all the data in it.  Here is my second chat transcript.     VPSLAND.com Sales: Oren, I already told you that there is no back up available for your VPS and it&#x27;s not possible for us to take back up for your VPS      Oren Eini: okay, then don&#x27;t      Oren Eini: I need the server itself back up      VPSLAND.com Sales: We want this in written       VPSLAND.com Sales: Please update your ticket again       Oren Eini: Can I get the actual image?      Oren Eini: The VM file?      VPSLAND.com Sales: No      Oren Eini: why not?      VPSLAND.com Sales: Don&#x27;t you understand, I already told you that your VPS is not up and it&#x27;s not possible to provide you any data       VPSLAND.com Sales: Any type of data       Oren Eini: I want the VM FILE      Oren Eini: Not any data from it      Oren Eini: The ACTAUL FILE      Oren Eini: The VM is sitting on a file.      Oren Eini: If I have that, _I_ can get the data      Oren Eini: I don&#x27;t want anything from the machine.      Oren Eini: I want the file that _is_ the machine      VPSLAND.com Sales: Can I have the path for VM ?      VPSLAND.com Sales: VM FILE *      Oren Eini: I don&#x27;t know. It is on your system      VPSLAND.com Sales: Well Oren, we are not able to mount your VPS on main node which is the reason. We are not able to take back up of your VPS. So Its not possible to provide you VM FILES       Oren Eini: I want the file that you are mounting      Oren Eini: Not the VM itself      VPSLAND.com Sales: Have read my last message carefully       VPSLAND.com Sales: ?      Oren Eini: Yes.      Oren Eini: You are trying to mount the VPS      Oren Eini: You are failing.      Oren Eini: I want the VPS file      Oren Eini: The thing that you are trying to mount      VPSLAND.com Sales: Yes, The VM files are also mounted under root directory       VPSLAND.com Sales: Which is not mounting       VPSLAND.com Sales: So its not possible for us to provide you any VM FILES       Oren Eini: Sorry?      Oren Eini: what root directory are you talking about?      VPSLAND.com Sales: Is there anything else I can help you with ?      Oren Eini: I want the file that you are trying to mount.      VPSLAND.com Sales: You do not understand that, right ?      Oren Eini: The .vhd file      VPSLAND.com Sales: So just listen to me, we are not able to provide you any type of VM FILES       VPSLAND.com Sales: Would you like to reinstall your VPS or NOT ?      Oren Eini: Let me go back to the beginning      Oren Eini: There is the VPS, right?      VPSLAND.com Sales: Ae are not able to provide you any type of VM FILES      VPSLAND.com Sales: Ae = We*      Oren Eini: Please bear with me.      Oren Eini: There is the VPS      Oren Eini: You are trying to mount that on the VM Server      Oren Eini: The VPS is a file      VPSLAND.com Sales: Read above chat once again       Oren Eini: I want that file      Oren Eini: It is not a file inside the VPS.      Oren Eini: It is the file that _is_ the VPS.      Oren Eini: It is the vhd file that you are trying to mount      VPSLAND.com Sales: I understand that, and I apologize for the inconvenience. The fact of the matter is that you are talking to the Sales department right now and unfortunately we don&#x27;t have any control over such technical issues.      Oren Eini: Okay, than can I get a SUPPORT person to talk to me?      Oren Eini: I am talking to support.vpsland.com      Oren Eini: Not sales.vpsland.com      Oren Eini: I need a TECHNICAL person to solve this issue      VPSLAND.com Sales: They do not have Live Chat support       Oren Eini: Do they have a phone?      VPSLAND.com Sales: Contact them through the email to support@vpsland.com       Oren Eini: Can they answer my emails in a reasonable time frame?      VPSLAND.com Sales: We do not have phone support       Oren Eini: 12 hours between emails is not acceptable      VPSLAND.com Sales: Update to your ticket ULX-445304      Oren Eini: Again, 12 hours between responses are NOT helpful      Oren Eini: If there is support stuff, I would like to communicate with them.      Oren Eini: ASAP      VPSLAND.com Sales: No, they are in the Support Department       Oren Eini: That is lovely.      Oren Eini: Please contact them and tell them that I would like to get a tech people respond to this ticket in a reasonable time frame      VPSLAND.com Sales: Sure, I will update them for you       Oren Eini: Thank you, bye   As of now, for a support issue that is marked as critical, I still don&#x27;t have any response from their tech support. This is about 30 minutes after the chat, by the way.  Now, this isn&#x27;t an issue of violating SLA, I don&#x27;t have one with them for support, I find this deeply disturbing in term of customer service.   I won&#x27;t be doing business with them again.</p>
        </article>
        <article id="article-6424">
            <a href="https://ayende.com/blog/3530/multi-tenancy-approaches-and-applicability" target="_blank">
                <h2 class="title mb-6" id="article-6424">Multi Tenancy - Approaches and Applicability</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Previously on the Multi Tenancy series:     Multi Tenancy - Definition and scenario.     Reviewing Litware HR - P&amp;P Multi Tenancy Sample.     Multi Tenancy - The Physical Data Model    Multi Tenancy - Extensible Data Model    Multi Tenancy - Extensible Behaviors    Multi Tenancy - Development Structure    Multi Tenancy - Where do you put variability?    Multi Tenancy - Scriptability and DSL    Multi Tenancy - multi tenant apps and frameworks    Multi Tenancy - Keep It Simple, REALLY Simple    Multi Tenancy - User Interface   Yes, I said that the UI post was the last one before I got to the actual implementation details, but I am having a Skype chat now about the subject, and it is important.  The approach that I have outlined so far is focused on building a system that supports variability at all levels, from the database to the UI, through the entities, services and external integration points. The sweet spot for that is if you have a multi tenant application where a tenant want to have high degree of control on the way the application works.  This high degree of control often means that the tenant desires to change specific parts of the applications in ways that make sense to this tenant, but may not make sense to others. A good example would be payroll system. Here, each tenant has their own processes for how to handle this, and they tend to maintain a high degree of control over that.   A good example from the other side would be something like Subtext. Here, we have a multi tenant application that is essentially the same for all the tenants. The behavior of the system is essentially the same for everyone.  That doesn&#x27;t means that if you need variability in the application, you should immediately jump to the approach that I outline here. If you have a limited number of variability points, and limited number of variability options (that is, you have X amount of strategies that you can configure for each tenant), you might want to consider that approach.  I would probably avoid that anyway, but it is something to take into account. Some people would feel that a few configuration options makes their life easier than a composite, contextual, application.  My rule of the thumb is that if you have both data extensibility and process variability you need to use the composite approach that I have spoken off. Even if you don&#x27;t have data extensibility, but &quot;merely&quot; lot of variability in the process across the tenants that cannot be standardize, you will want to take the composite approach.</p>
        </article>
        <article id="article-6425">
            <a href="https://ayende.com/blog/3529/multi-tenancy-user-interface" target="_blank">
                <h2 class="title mb-6" id="article-6425">Multi Tenancy - User Interface</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Previously on the Multi Tenancy series:     Multi Tenancy - Definition and scenario.     Reviewing Litware HR - P&amp;P Multi Tenancy Sample.     Multi Tenancy - The Physical Data Model     Multi Tenancy - Extensible Data Model     Multi Tenancy - Extensible Behaviors     Multi Tenancy - Development Structure     Multi Tenancy - Where do you put variability?     Multi Tenancy - Scriptability and DSL     Multi Tenancy - multi tenant apps and frameworks     Multi Tenancy - Keep It Simple, REALLY Simple    Note, this is nearly the end as far as the theory and the constraints of Multi Tenancy applications goes, the next posts in this series are high level design, trying to touch all the points that were brought up so far, and then a big surprise...  So far, we have spoken only on the backend stuff, we haven&#x27;t touched on how we are going to deal with the UI at all. We need to think about what kind of UI changes we need to handle.  Skinning / Templating  This include everything that is not actually functional to the application. That is, the customer wants their own logo instead of the default one, they may want different colors, etc. This is what I call templating or skinning.  Semi localization   I don&#x27;t have a good name for this, but broadly, this include things like &quot;our date format is&quot;, &quot;our time format is&quot;, &quot;we always enter FirstName, LastName&quot;, etc. This is mainly formatting issues, most of them are locale oriented, but there are a lot of similar issues that aren&#x27;t handled by the locale.  As a simple example, in Israel, it is very rare for someone to have a middle name, so an application build to display the user&#x27;s name as: {FirstName} {MiddleInitial}. {LastName} would look ridiculous (&quot;Ayende . Rahien&quot;).  Different Presentation  One client may want something to be a report, another may want a tree, and yet another as a graph (please, don&#x27;t ask). Very often, the issue of field ordering comes into play. For that matter, the customer may have no interest in some fields, and want to hide them. (see: middle name in Israel example).  Handling additional responsibilities   This goes beyond just showing / hiding fields, here we need to handle the extra fields that the tenant has defined. This can be interestingly complex, especially when you have thinks like related fields. This is interesting because we want to handle this without having to modify the core page.  Crazy Tenant Syndrome  I am not sure how to call this one, but this is usually the case when you have a big client that wants to have things their ways. In the old system, all text boxes were UPPER CAPS, so they have to be in the new system as well. They only sell to France and Germany, so they must never see the full countries list.  I am sure that you know the type, if not the actual situation.  Now, how do we handle all of this?   Again, divide and conquer is the only feasible strategy. We split the application into separate pieces, and deal with of them individually. The templating issue is fairly obvious, we will maintain a css / layout for each tenant. By the same token we can handle each of the other issues by putting them in their individual boxes, which we can then shuffle at will.  And yes, we will touch on the next post in this series.</p>
        </article>
        <article id="article-6426">
            <a href="https://ayende.com/blog/3528/setting-out-to-break-the-compiler" target="_blank">
                <h2 class="title mb-6" id="article-6426">Setting out to break the compiler...</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I look at a bit of code that dealt with traversing expression an expression tree, using recursion, of course. The edge condition immediate popped to mind was unbounded expression. I decided to see if I can kill the compiler using this. Why? Because.  The first thing to do is to find out how deep a stack we usually need. I wrote this simple test:     class Program&#xA;{&#xA;&#x9;static void Main(string[] args)&#xA;&#x9;{&#xA;&#x9;&#x9;Recursive(1);&#xA;&#x9;}&#xA;&#xA;&#x9;static void Recursive(int i)&#xA;&#x9;{&#xA;&#x9;&#x9;Console.WriteLine(i);&#xA;&#x9;&#x9;Recursive(i&#x2B;1);&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;The last result was: 79994&#xA;&#xA;Obviously this change based on how much stack space each function takes, but it is a good number to go with. I started with this code:&#xA;&#xA;&#xA;  class Program&#xA;{&#xA;&#x9;static void Main(string[] args)&#xA;&#x9;{&#xA;&#x9;&#x9;using(var fw = File.CreateText(&quot;text.txt&quot;))&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;for (int i = 0; i &lt; 80000; i&#x2B;&#x2B;)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;fw.Write(&quot; a &gt; &quot;&#x2B;i &#x2B;&quot; &amp;&amp; &quot;);&#xA;&#x9;&#x9;&#x9;&#x9;if(i%10==0)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;fw.WriteLine();&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;I then took the file ( slightly over 1 MB in size) and pasted the content to Visual Studio. &#xA;&#xA;That was a mistake:&#xA;&#xA; &#xA;&#xA;Okay, I can deal with this, let us try a different approach:&#xA;&#xA;&#xA;  class Program&#xA;{&#xA;&#x9;static void Main(string[] args)&#xA;&#x9;{&#xA;&#x9;&#x9;using(var fw = File.CreateText(&quot;text.cs&quot;))&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;public class Program {&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;&#x9;static void Main(string[] args) {&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;&#x9;&#x9;var a = -1;&quot;);&#xA;&#x9;&#x9;&#x9;fw.Write    (&quot;&#x9;&#x9;var test = &quot;);&#xA;&#x9;&#x9;&#x9;for (int i = 0; i &lt; 80000; i&#x2B;&#x2B;)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;fw.Write(&quot; a &gt; &quot;&#x2B;i &#x2B;&quot; &amp;&amp; &quot;);&#xA;&#x9;&#x9;&#x9;&#x9;if(i%10==0)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;fw.WriteLine();&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot; a &lt; 0;&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;System.Console.WriteLine(test);&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;&#x9;}&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;}&quot;);&#xA;&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;Trying to compile that produces:&#xA;&#xA;&#xA;  fatal error CS1647: An expression is too long or complex to compile near &#x27;&#x27;&#xA;&#xA;&#xA;The help for CS1647 is:&#xA;&#xA;&#xA;  There was a stack overflow in the compiler processing your code. To resolve this error, simplify your code. If your code is valid, contact Product Support.&#xA;&#xA;&#xA;The is valid, I guess, just not really reasonable. What is scary is that this is something that was added for 2.0, so at the 1.0 days, someone actually run into this issue.&#xA;&#xA;Some experimentation showed that the C# compiler can handle expressions composed of 23,553 nodes. Now it is the time to get to the next stage, now the code is this:&#xA;&#xA;&#xA;  class Program&#xA;{&#xA;&#x9;static void Main(string[] args)&#xA;&#x9;{&#xA;&#x9;&#x9;using(var fw = File.CreateText(&quot;text.cs&quot;))&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;using System;&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;using System.Linq.Expressions;&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;public class Program {&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;&#x9;static void Main(string[] args) {&quot;);&#xA;&#x9;&#x9;&#x9;fw.Write    (&quot;&#x9;&#x9;Expression&lt;Predicate&lt;int&gt;&gt; test = (a) =&gt; &quot;);&#xA;&#x9;&#x9;&#x9;for (int i = 0; i &lt; 11700; i&#x2B;&#x2B;)&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;fw.Write(&quot; a &gt; &quot;&#x2B;i &#x2B;&quot; &amp;&amp; &quot;);&#xA;&#x9;&#x9;&#x9;&#x9;if(i%10==0)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;fw.WriteLine();&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot; a &lt; 0;&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;System.Console.WriteLine(test);&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;&#x9;}&quot;);&#xA;&#x9;&#x9;&#x9;fw.WriteLine(&quot;}&quot;);&#xA;&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;Note that I had to dramatically simplify the expression. Before it handled 23 thousands and change, but now it chokes on merely 12 thousands.&#xA;&#xA;What is really surprising is that after compiling the code, it is running and seems to do the expected thing. Amazing.&#xA;&#xA;Anyway, here is a completely useless post, but now I know that the C# compiler has well defined behavior for stack overflows. :-)</p>
        </article>
        <article id="article-6427">
            <a href="https://ayende.com/blog/3527/multi-tenancy-keep-it-simple-really-simple" target="_blank">
                <h2 class="title mb-6" id="article-6427">Multi Tenancy - Keep It Simple, REALLY Simple</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 15, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Previously on the Multi Tenancy series:      Multi Tenancy - Definition and scenario.     Reviewing Litware HR - P&amp;P Multi Tenancy Sample.     Multi Tenancy - The Physical Data Model     Multi Tenancy - Extensible Data Model     Multi Tenancy - Extensible Behaviors     Multi Tenancy - Development Structure     Multi Tenancy - Where do you put variability?     Multi Tenancy - Scriptability and DSL    Multi Tenancy - multi tenant apps and frameworks   One of the most common approaches for handling multi tenancy is composed of the following core ideas: Dynamic and Configurable.   You build the application to be dynamic, so you can change the entities layout, the UI look and feel, modify business logic using configuration, etc.  This is wrong!  This is wrong mainly because it is so bloody complex as an approach. Let us take the example of the UI, dynamic UI is fairly simple to start with. However, when you need to start considering things like validation, error handling, different field types, and so on, you get to realize that this is not really as simple as it seems.  Don&#x27;t get me started on the 3 tables DB (tblEntities, tblFields, tblFieldValues) that get you so much dynamic it is dynamite.  The main issue is that trying to build something using this approach is just bloody hard. You have to keep the dynamicism of the application at mind at all point. Most of the time, you wouldn&#x27;t even notice that your choice prevent you from applying the dynamicism in the app, but you are still paying the price for using this.  In many ways, it is similar to having VB.Net Option Implicit (If I got it right, the one where it doesn&#x27;t give you a compilation error if you call non existing method, only at runtime). In fact, this is a great corollary. The VB.Net &quot;dynamic&quot; stuff is so limited that it is useless in most scenarios. Compare what you can do with a dynamic language like Python or Ruby vs. what you can do with VB.Net. There is very little value of having this option in VB.Net. It is usually a mine, not a feature. (Yeah, okay, it is really good feature if you are working with IDispatch, I know. Work with me here).  By the same token adding dynamic features to your application, runtime configurable and so on, will tend to be a mine more often than help.   My approach is quite different. Instead of trying to add configurability to the application, or adding dynamic behaviors, we can choose a static approach, one that allows use to make the best use of the tools and approaches that we have.  How do we get the variability that we need?  Oh, that is easy. Seams.  Each individual piece has no concept of dynamic / configuration / fubar. It is self contained and cohesive unit that can be combined with other pieces.  If I want to modify the behavior of the system, I can just plug in a new piece, and the entire machine keep on chugging along, without really noticing that the new Widgetometor is bright orange and flashing in Morse code.  Using this approach, we don&#x27;t have to pay the price for using dynamic, configurable to the Nth degree. We can write the application as we would always will, and when variability calls...   Just plug the new stuff in.  Keep is simple, and keep it simple throughout!</p>
        </article>
        <article id="article-6428">
            <a href="https://ayende.com/blog/3526/waiting-for-the-service-pack-i-dont-think-so" target="_blank">
                <h2 class="title mb-6" id="article-6428">Waiting for the Service Pack? I don&#x27;t think so</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 15, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Here are a few interesting things that I found about .Net 3.5 Service Pack 1:     Serialization hangs or throws an OutOfMemoryException with static delegate and ISerializable on 3.5 SP1    ExecutionEngineException with ParameterInfo.GetOptionalCustomModifiers and GetRequiredCustomModifiers on 3.5 SP1    .NET 3.5 SP1 breaks use of WPF under IIS    .NET 3.5 SP1 seems to break .NET 2.0 applications with assembly loading error.    .NET Framework 3.5 SP1 breaks type verification   I just googled for &quot;3.5 SP1&quot; on connect.microsoft.com, and took only the verified (by Microsoft) items for the SP1 RTM. There are more, but I didn&#x27;t feel like spending a lot of time digging there.  I don&#x27;t remember previous service packs having regression bugs. Certainly not regression bugs as big as these. Number 2 is the one responsible for breaking Rhino Mocks, by the way.  Those are all regressions. That is, it used to work in previous version, now it doesn&#x27;t.  Not happy at all.   Here is a challenge to Microsoft, Fix This. And fix this in a way that ensure that everyone get the fix. If this means SP1 Refresh, great. But fix this in a way that means that I don&#x27;t have to answer &quot;you need to call PSS and get KB32423 before you can run&quot; for the next two years.  And fix this from Connect, if you ever want Connect to be useful for something.</p>
        </article>
        <article id="article-6429">
            <a href="https://ayende.com/blog/3525/quarter-of-a-book-review-the-last-centurion" target="_blank">
                <h2 class="title mb-6" id="article-6429">Quarter of a Book Review: The Last Centurion</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 14, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am not really sure what to think about this book. On the one hand, it is entertaining. On the other hand, it seems to be filled with... propaganda?   I am not sure that this is an accurate statement, but I am on 2.5 hours, and so far it has been interesting. The description of the handling of a crisis and analysis of how it could be prevented is fascinating in itself. But the last twenty minutes or so seems to be focused really heavily on showing off the US healthcare system and interesting political views.  The start of the book is wonderful, as I already mentioned, and I am going to hear it all, because it is still entertaining, but I really hope it would get to some more interesting bits soon.  Two interesting observations, the story begins with a really interesting part, which establish the credentials of the protagonist and a certain style. In particular, Do. The. Math. is an expression that is often used to compare farming techniques (hand labor vs. mechanical). I have just realized that it is used in a more controversial form. It uses the trust established for this term earlier to support this statement.  I am not sure that I agree or disagree about what he is saying. I don&#x27;t have all the facts, but again, it is interesting, although discomforting. I want to listen to a plot, not a lecture.</p>
        </article>
        <article id="article-6430">
            <a href="https://ayende.com/blog/3524/nicer-linq" target="_blank">
                <h2 class="title mb-6" id="article-6430">Nicer Linq</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 14, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A few days ago I posted about Ugly Linq. Ever since then, I kept thinking about how ugly it is to handle this by hand. Suddenly, it hit me that I don&#x27;t have to do it that way.  Boo already has the facilities to take a compiler AST and translate that into the code that would recreate this AST. In particular, this makes the code we previously had to write to this:     public class ConditionMacro : AbstractAstMacro&#xA;{&#xA;&#x9;public override Statement Expand(MacroStatement macro)&#xA;&#x9;{&#xA;&#x9;&#x9;Expression serialize = new CodeSerializer().Serialize(macro.Arguments[0]);&#xA;&#x9;&#x9;var body = new Block();&#xA;&#x9;&#x9;body.Statements.Add(new ReturnStatement(macro.Arguments[0]));&#xA;&#x9;&#x9;return new ExpressionStatement(&#xA;&#x9;&#x9;&#x9;new MethodInvocationExpression(&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;AstUtil.CreateReferenceExpression(typeof(Condition).FullName),&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;new BlockExpression(body),&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;serialize&#xA;&#x9;&#x9;&#x9;&#x9;)&#xA;&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;}&#xA;}&#xA;&#xA;&#xA;And what that means is that given this code:&#xA;&#xA;&#xA;  condition a &gt; 10&#xA;&#xA;&#xA;We can get this result:&#xA;&#xA;&#xA;   &#xA;&#xA;&#xA;And that is it.&#xA;&#xA;You get both the actual compiled expression and the AST that describes this. This is critically important because you can now take this piece of AST and do transformations / views on it.&#xA;&#xA;And that is important if you want to have reliable graphical representation on top of a textual DSL, which is what my chapter 10 is going to cover.&#xA;&#xA;Damn, this is simple! Thanks Rodrigo!</p>
        </article>
        <div class="button flex justify-between">
            <a href="642.html"><span class="back arrow"></span></a>

            <a href="644.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>