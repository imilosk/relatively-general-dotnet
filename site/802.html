
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 802 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-8011">
            <a href="https://ayende.com/blog/2370/asp-net-ajax-vs-unit-tests" target="_blank">
                <h2 class="title mb-6" id="article-8011">ASP.Net Ajax vs. Unit Tests</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 06, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">By definition, unit tests should be fast. Integration tests should be as fast as possible as well. Almost by definition, Javascript is not fast. In the battle between ASP.Net Ajax and my Unit/Integration tests, so far the only loser it me. This is the point when I am going to stop dedicating any more time to making this work.</p>
        </article>
        <article id="article-8012">
            <a href="https://ayende.com/blog/2369/wcf-and-ssis-round-2" target="_blank">
                <h2 class="title mb-6" id="article-8012">WCF and SSIS: Round 2</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 06, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">After my last post in the matter, Jeremy Boyd&#xA0;has been gracious enough to track down the problem and send me a complete solution.&#xA0; Jan Van Ryswyck was the one that pointed me at how to solve another problem&#xA0;with WCF, that I never would have assoicated with the first issue.     WCF has three places that you need to touch to setup the namespace of a service. The interface - using [ServiceContract] -&#xA0;the implementation -&#xA0;using [ServiceBehavior] - and the binding - using bindingNamespace=&quot;&quot;. I am not sure why you need to touch so many places in order to change a namespace, and I am really not fond of the implementation changing the public interface of a service, but that is another story. There are probably some cases where you want three different namespaces.     At any rate, the way WCF handles different namespaces is by generating wsdl:import and xsd:import declaration, which are apperantly not supported very well by quite a few tools. The key here is that if they are all in the same namespace, you don&#x27;t get the import declaration, and the tools can consume the WSDL just fine!     So, here is the code from last time:            [ServiceContract(Namespace=http://www.ayende.com/&quot;)]        public&#xA0;interface&#xA0;ISsisNotifications        {        &#xA0;&#xA0; &#xA0;[OperationContract]        &#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;UpdatedDatabase();        }                        [ServiceBehavior(Namespace=http://www.ayende.com/&quot;)]        public&#xA0;class&#xA0;SsisNotifications&#xA0;:&#xA0;ISsisNotifications        {        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;public&#xA0;void&#xA0;UpdatedDatabase()        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;{        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}        }        And we need to configure it like this:            &lt;service behaviorConfiguration=&quot;ExposeMetaData&quot; name=&quot;My.SsisNotifications&quot;&gt;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;endpoint address=&quot;http://my-machine//Services/SsisNotifications.svc&quot;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; bindingNamespace=&quot;http://www.ayende.com/&quot;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; binding=&quot;basicHttpBinding&quot; contract=&quot;My.ISsisNotifications&quot; /&gt;                 &lt;/service&gt;         And now SSIS can consume this service without issues.    (Victory dance)</p>
        </article>
        <article id="article-8013">
            <a href="https://ayende.com/blog/2368/building-a-space-to-grow" target="_blank">
                <h2 class="title mb-6" id="article-8013">Building a Space to Grow</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Udi has been talking lately about using spaces. Spaces are a distributed hash table that has the following operations: Write/Read/Take/Notify. The idea is that you can put entities or messages in the space, and something will handle them for you.     I find the idea interesting, since I had the chance to build such a system (~20 - 50 workers, each doing their own little part, independant from others) on a single machine. It turn out that this is a very nice approach to separating responsabilities and getting things done.    Scaling it out to a distibuted approach is interesting. I am going to ignore Udi&#x27;s suggestion to get a ready-made solution and think about the way I would implement it. Just to make it interesting, I will throw in as many technologies as possible. Remember, this is a thought experiment.    Distributed hash table... hm, where did I heard that before? Memcached is exacatly what this is talking about and using it makes Read / Write / Take operations very easy, and notify nearly impossible. Obviously notify is a critical piece here, so I would rule Memcached out for now, it may be used as our backend, but it can&#x27;t be the primary technology.    WCF has a peer to peer capabilities, and it may be interesting to try that. Read / Write / Take now becomes interesting, not in the implementation, but rather in deciding where to put the data? Ideally, I want to be ignorant of where the data is physically at, while maintaining the hash table aspect of it.    This means that for a read operation with a known key, I should be able to go to the exact node that contains the data that I want. This probably means that P2P is out, since I don&#x27;t want to query the mesh in order to get a response, I would like to communicate directly with nodes. This bring me to a design decision, do I assume that we are using a mostly reliable and static set of nodes, or do I want to go for unreliable, dynamic nodes. The first means that I can do a simple hash of the key, mod by the number of known nodes, and go directly to the node by index.    This is how Memcached works, basically a two way hashtable. The problem with that is handling failures and additions. Because failures and additions both distrub the key distributions and require re-shuffling of the data. This is not so important in a cache, which is (by definition) allowed to lose data, but it is much more important if I am going to put business data there.    I think that I will decide on the second approach, unreilable and dynamic it is. This means that the operations for the infrastructure are now: Read / Write / Take / Notify - which is what the user is familiar with, but on the wire, we have:            FindFor(key) - search the P2P mesh for the node that has this key            FindPlaceFor(key, size, attributes) - search the P2P mesh for a node that is willing to accept the data            [Read | Write | Take]Direct - talk directly to the node&#xA0;- doesn&#x27;t use the P2P mesh, rather talks directly to the node            Notify - sends a notify request on the mesh, where all the nodes will pick it up.    Now, let us think about notify, which is actually the reason that I started all this. We basically want to pass some sort of a query that will return results for us. When I am thinking about a query, there are several options, we can use something like this as the client side API:            var&#xA0;query&#xA0;=&#xA0;from&#xA0;msg&#xA0;in&#xA0;Space.OrderMessages        &#xA0;&#xA0;&#xA0;where&#xA0;msg.Status&#xA0;==&#xA0;OrderMessageStatus.ReadyToShip;        Space.Notification&#xA0;&#x2B;=&#xA0;OnMessageNotified;        Space.Notify(query);        But how is this implemented? I can think of two ways, either NHibernate criteria or Lucene queries. I am probably going to lean toward Lucene here, it is much faster for mostly search scenarios, and very easy to work with.    A client for the mesh would expose an end point for getting notified about the messages, here I&#x27;ll probably pass either the node id and the data, or just the node id and the key. Probably the second, so I can get reliable results in the case of more than a single client for the same type of message.    Transactions are a problem, though. We would usually want to do several operations, and I would really like them to run in a transaction. This is more complicated because I may need to interact with several nodes in&#xA0;a single transaction. I am not familiar enough with WCF to know how to make this work, although I do believe that this is possible.    ThoughtExperiment.End();</p>
        </article>
        <article id="article-8014">
            <a href="https://ayende.com/blog/2367/stubbing-rhino-mocks" target="_blank">
                <h2 class="title mb-6" id="article-8014">Stubbing Rhino Mocks</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Phil Haack just posted some code that made me wince:&#xA;&#xA;        [Test]                    &#xA;        public void DemoLegsProperty()                    &#xA;        {                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; MockRepository mocks = new MockRepository();                    &#xA;                &#xA0;            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //Creates an IAnimal stub&#xA0;&#xA0;&#xA0;                     &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IAnimal animalMock = (IAnimal)mocks.DynamicMock(typeof(IAnimal));                    &#xA;                &#xA0;            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //Makes the Legs property actually work, creating a fake.            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SetupResult.For(animalMock.Legs).PropertyBehavior();            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; mocks.ReplayAll();                    &#xA;                &#xA0;            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; animalMock.Legs = 0;                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Assert.AreEqual(0, animalMock.Legs);            &#xA;                &#xA0;            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SomeClass instance = new SomeClass(animalMock);                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; instance.SetLegs(10);                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Assert.AreEqual(10, animalMock.Legs);            &#xA;        }    &#xA;&#xA;    The reason that it made me wince is that it is such a common scenario, and there are four lines of Rhino Mocks code here that just doesn&#x27;t add any value to the test. The test is trying to verify that calling SetLegs on SomeClass will set the animal leg. Very trivial test, but about half of it is spent just setting up Rhino Mocks.&#xA;    I don&#x27;t like that.&#xA;    Here is my version:&#xA;&#xA;        [Test]                    &#xA;        public void DemoLegsProperty()                    &#xA;        {                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IAnimal animalStub = MockRepository.GenerateStub&lt;IAnimal&gt;();            &#xA;                &#xA0;            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; animalStub.Legs = 0;                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Assert.AreEqual(0, animalStub.Legs);            &#xA;                &#xA0;            &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SomeClass instance = new SomeClass(animalStub);                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; instance.SetLegs(10);                    &#xA;        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Assert.AreEqual(10, animalStub.Legs);            &#xA;        }    &#xA;&#xA;    Well, I cheated, I added this functionality to Rhino Mocks :-) Now we have a single line of Rhino Mocks code, which is very explicit about what it is doing.&#xA;    The code is already in the repository, and I plan to release an update today, along with a bunch of other stuff.</p>
        </article>
        <article id="article-8015">
            <a href="https://ayende.com/blog/2366/bumbler-nhibernate-dynamic-interactive-shell" target="_blank">
                <h2 class="title mb-6" id="article-8015">Bumbler: NHibernate Dynamic / Interactive Shell</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">After reading a bit about Jasper, I decided that I would like to see what it would take to build it with NHibernate and Boo. I am going to implement it and write the post at the same time, so you would get near real time documentation of the process.            18:05, decided that I want this syntax:                                     import Bumbler                                                                        &#xA0;                                                        conStr = &quot;Data Source=localhost;Initial Catalog=Northwind;Integrated Security=True;&quot;;                                                                        &#xA0;                                                        bumble = Bumble.Through(conStr)                                                        for customer in bumble.Customers:                                                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; print &quot;Customer ${customer.ContactName}&quot;                                                      c                         = bumble.GetCustomer(&quot;TRADH&quot;)                         19:10, finished building client interface and quick &amp; dirty mapping from database implementation.                 19:24, finished code generation, now working on runtime compilcation...                 19:54: finished runtime code generation                 20:13, can now successfully query the database using NHibernate just from connection string. Starting to work on dynamic implementation.                 20:16, done basic dynamics, now playing with Booish.                 20:21, the code above now works, and I am going for dinner.                 21:10, back from dinner, final polish...                 21:13, done!    So, about two hours of work, most of which had to do with generating the mapping from the database. I have cut some corners there, so it is SQL Server only, and it can&#x27;t support a legacy app, adding support for the more complex cases is simply adding it to the mapping generation, nothing else. I made sure that adding new functionality would be easy, however.    Right now, you can get the code, just run the application, and you will get a shell that you can use to interact with the objects and the database. You need to start a new Bumble (you can simply cut/paste the code above) and then play with it. You can also reference the assembly and work with it directly using Boo.    Getting the code:svn co https://rhino-tools.svn.sourceforge.net/svnroot/rhino-tools/trunk/SampleApplications/Bumbler</p>
        </article>
        <article id="article-8016">
            <a href="https://ayende.com/blog/2365/and-the-secretary-will-write-the-order-dispatching-logic" target="_blank">
                <h2 class="title mb-6" id="article-8016">And the secretary will write the order dispatching logic</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Jeremy Miller has a long post about all sorts of interesting things, the section that I wanted to talk about is about building meta-data using DB or XML with the intent of allowing non programmers to change the behavior of the system:Oh, and the people out there swearing up and down that giving the business end users a&#xA0;screen to&#xA0;configure a business&#xA0;rules engine themselves will save the day?&#xA0; BS.&#xA0; Drawing workflow&#x27;s with pictures is coding --&#xA0;with every bit of the risk and danger that coding brings.&#xA0; Only now you&#x27;re&#xA0;making noncoders code in the production system.&#xA0; Think about that last sentence.</p>
        </article>
        <article id="article-8017">
            <a href="https://ayende.com/blog/2364/beware-of-the-technical-solution" target="_blank">
                <h2 class="title mb-6" id="article-8017">Beware of the technical solution</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Imagine this fictitious scenario, you are working on some functionality, and you are pretty pleased with what you have so far. Then, a new requirement come in, and it require something that is plain out not possible with the approach that you have taken so far. Then you start to investigate it a little further, and you find that if you do this, and push that, and maybe not look too closely at the end result, you can get what you want, without major changes to your code.    I have done this. I have done things to the GridView that should make it weep in shame, and there is a reason why I know the System.Web.UI.Calendar.Render() has a special case for Hebrew calendar and Cyclomatic Complexity of 42.    The problem with these types of solutions is that they are a Hack. As such, they may serve an immediate need, but they will prevent me from continuing to evolve the software in any meaningful way. This is getting into technical debt in a serious manner. I finally drew a line in the sand when I found out that I would need to do multi threading in javascript, and I actually had an idea about how to make it work (don&#x27;t ask!).     Next time, I believe that I will draw that line much sooner. Better to cut my loses and build the functionality again than having to deal with the complexities of an inappropriate technical solutions and hacks on top of it.</p>
        </article>
        <article id="article-8018">
            <a href="https://ayende.com/blog/2363/odbc-is-not-an-api" target="_blank">
                <h2 class="title mb-6" id="article-8018">ODBC is not an API</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Phill Haack is talking about integration from the database point of view. I had the pleasure of dealing with several projects that involved interfacing to legacy systems. Invariably, the suggested solution was to use the legacy system database directly, and build the application from that.     It was assumed that this would be a less costly endevour than building interfaces at both ends and hooking them together. A few stored procedures and many (many) views later, we had the integration completed on the side of the legacy system. Then it was time to really interface with those systems, at which point we discovered just how bad that was going to be.     I will leave aside the schema warts that we run into, let us talk about how complex it was to use it in practice. Versioning support simply doesn&#x27;t exists, you are vulnerable to anything that run on that system (a long report is running, say goodbye to the app for the next half hour)...     But by far the biggest issue is the limited ability to express an interface that has a business meaning. ODBC it very suited to express data, but data is not business meaning.&#xA0;Paul Stovell wrote about SP being an interfaces, and yes, they are. But I have very little intrest in an interface like &quot;GetCustomers&quot; that gives me the select from Customers table.    Paul also suggests that exposing those stored procedures as web services will eanble a more flexible approach, where the DBA can change the intrenals without affecting my code. In my expriance, that doesn&#x27;t work, while WS may be able to solve the issue of versioning, it require a lot more work than is often applied to it. What you end up with is the result set serialized as XML at best, and huge deployment issues for the simplest change.     My opinion is that it is important not to try to abstract the database. It has significant capabilities that nearly all abstractions simply ignore. I want to get all the employees joined to their salaries on the last three months. If I am working against the database, it is easy, I&#xA0;just do it.&#xA0;If I am working against a Stored Procedures layer, or worse, Stored Procedures&#x2B;Web Services, then we talk about new stored procedure, that now needs to be maintained, checked for duplicated code, deployed, etc. If we are talking about WS as well, we need to publish a web service, write a schema, etc. Now I need to talk to the new Web Service, and changing the stored procedure now means that I have to change (at a minimum) three places, the stored procedure itself, the web service, and the client code.    Paul seems to believe that talking directly to the database implies that there is no contract involved (and I fully agree that a contract is important). I think that the mapping inherit in working with OR/M technologies is the contract. I can safely modify my database and my queries without affecting the code, and I retain all the stregnths of the&#xA0; database.    *I am talking about views and SP, not the ODBC API itself, of course.</p>
        </article>
        <article id="article-8019">
            <a href="https://ayende.com/blog/2362/nhibernate-1-2-released" target="_blank">
                <h2 class="title mb-6" id="article-8019">NHibernate 1.2 Released!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">After about 6 months, we have a new stable release of NHibernate. The full details are here.     I would strongly urge you to upgrade, but be aware that this is not a drop in replacement, there is a migration guide&#xA0;available. From experiance, it takes about a day to convert a reasonable size application to 1.2.     Favorite new features:            Filters - (I really wish that I had them when I started my previous project)            Generic Collections            Database generated properties.            SQL Dependencies for NHibernate&#x27;s cache</p>
        </article>
        <article id="article-8020">
            <a href="https://ayende.com/blog/2361/remember-what-mommy-told-you" target="_blank">
                <h2 class="title mb-6" id="article-8020">Remember what mommy told you...</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Found on the wall in one of my clients (translation below):        Liberally translated from Hebrew:Mommy said that you mustn&#x27;t put Collections in the Session, otherwise Hibernate would beat you up.    That had me cracking for quite a bit more than was polite.</p>
        </article>
        <div class="button flex justify-between">
            <a href="801.html"><span class="back arrow"></span></a>

            <a href="803.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;🚀&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
