
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 720 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7191">
            <a href="https://ayende.com/blog/2936/justin-is-giving-away-books" target="_blank">
                <h2 class="title mb-6" id="article-7191">Justin is giving away books</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 06, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Justin&#xA0;is appernately decided that it would be a good thing to pass on the trade secrets to just about anyone. He is giving away some interesting books.</p>
        </article>
        <article id="article-7192">
            <a href="https://ayende.com/blog/2935/stupid-stupid-stupid" target="_blank">
                <h2 class="title mb-6" id="article-7192">Stupid, stupid, STUPID!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Hi, my name is Oren, and I am stupid. I forgot that select() ain&#x27;t broken holds even if I wrote the select(). Let me tell you the story. We are using Rhino ETL to do ETL stuff, and one of the tasks that we had to do was importing an 80 MB file into the CRM, including all sorts of transformations and joins along the way. Until we got to that part, it was working very well, but with the 80 MB file, it read that and then appeared to be hung.  Rhino ETL is a new project, and it is heavily multi threaded. Since the only way that I know to test multi threading is by test of time, I wasn&#x27;t overly confident that it got it perfectly right, and it looked like the 80 MB file was triggerring some threading issues. After debugging the issue futilely for a while, and after careless applying of lock() with reckless abandon also failed to do the trick, I decided that I had no alternatives, but to rip out the homegrown threading solution that I had there in favor of something with more robustness. I choose Retlang for that, and I am really happy with the library, but that isn&#x27;t the story that I have to tell today. As any who dealt with threading knows, they are complex, nasty and hard. Trying to follow ten threads at the same time in not helpful by any meaning of the word. And trying to replace the threading solution with a radically different model is hard. I have a post or two on big refactoring as a result of that, but again, this isn&#x27;t the story that I have to tell. After basing Rhino ETL on Retlang, and getting enough of the tests to pass in a satisfactory manner, I turned back to the real issue at hand, and tried to run the 80 MB file through the new Rhino ETL.  It. Showed. The. Exact. Same. Problem. At that point, I was on the phone, speaking with the hiring managers about getting a thousand monkeys to type the information in, but I kept tapping the keyboard, probably out of a force of a habit. I couldn&#x27;t believe that two such radically different implementations would exhibit the same problem. I added logging and tracked down everything. I even added color coded logs, just to be sure that I am seeing everything. I tracked it down to a log statement that basically said:  Join CustomerWithFoodTypeLookup out 0 rows, Left 103,123 rows, Right 0 rows. Take a look at this, and try to tell me what the problem is.&#xA0; We are joining an empty set to a non empty set, giving... an empty set. The fix, if you can call it that, was to change the join to:  if Left.FooTypeId = Left.OldFoodTypeId or Right.FooTypeId is null I rewrote the threading layer because I couldn&#x27;t track down the root cause of a inner join instead of an left outer join. When I found that, I literally got up and started choking the developer responsible for the script. Then I went and hit myself on the head, repeatedly.</p>
        </article>
        <article id="article-7193">
            <a href="https://ayende.com/blog/2934/castle-style-errors" target="_blank">
                <h2 class="title mb-6" id="article-7193">Castle Style Errors</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I had to compare different styles of error handling approaches, and I automatically compared the ideal, Castle Style errors, to the nasty, Mystery HRESUTL of the Week. But what does Castle Style errors means? Let us take a look at a few of them. When an module that was registered before the MonoRail http module had thrown an exception: throw new Exception(&#xA;&#x9;&quot;An exception happened on Global application or on a module that run before MonoRail&#x27;s module. &quot; &#x2B; &#xA;&#x9;&quot;MonoRail will not be initialized and further requests are going to fail. &quot; &#x2B; &#xA;&#x9;&quot;Fix the cause of the error reported below.&quot;, context.Context.Error);&#xA;Or what happens when you are trying to access an ActiveRecord class when you didn&#x27;t initialize it properly?&#xA;String.Format(&quot;An ActiveRecord class ({0}) was used but the framework seems not &quot; &#x2B;&#xA;   &quot;properly initialized. Did you forget about ActiveRecordStarter.Initialize() ?&quot;,&#xA;   type.FullName);&#xA;And:&#xA;String.Format(&quot;You have accessed an ActiveRecord class that wasn&#x27;t properly initialized. &quot; &#x2B;&#xA;   &quot;The only explanation is that the call to ActiveRecordStarter.Initialize() didn&#x27;t include {0} class&quot;,&#xA;   type.FullName);&#xA;The common theme for those errors is that they are:&#xA;&#xA;Descriptive&#xA;Show all the relevant information&#xA;Suggest a probable solution&#xA;Save time&#xA;I added the following exception:&#xA;throw new ActiveRecordException(String.Format(&#xA;&#x9;&quot;You can&#x27;t use [Property] on {0}.{1} because {2} is an active record class, did you mean to use BelongTo?&quot;,&#xA;&#x9;model.Property.DeclaringType.Name, model.Property.Name, propertyType.FullName));&#xA;I added that after I spent half an hour trying to figure out why something was wrong. Since then, I keep running into this exception, and then it is a &quot;slap on the head, replace [Property] with [BelongsTo] and move on&quot;. And that is me, who wrote this bloody annoying exception that I am supposed to already know and avoid triggering. I can&#x27;t imagine how many hours this exception alone has saved, just for my team.&#xA;In fact, when I gave a talk at DevTeach about MonoRail, I have literally built the entire demo by just following the instructions from the exceptions.&#xA;That is good error handling, and that is what I consider as the standard that you should aspire to. Anything less than that is&#xA0;cause for anger, anxiety and angst. Do save yourself the ulcer, put in the best errors you can.</p>
        </article>
        <article id="article-7194">
            <a href="https://ayende.com/blog/2933/the-scary-foobartest" target="_blank">
                <h2 class="title mb-6" id="article-7194">The scary FooBarTest</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I just made some edge case coverage for SQL 2005 Dialect in NHibernate, those edge cases required a wholly different approach, and took about three times as long as I thought they would. In the end, I got a working design that I liked, and then it was time to turn on the big guns, running the entire NHibernate test suite (1028&#xA0;tests as the moment, in the core test project).&#xA0;That is fairly good in throwing all kind of weird poo at NHibernate, and ensuring that we can actually can withstand what real developer throw at us. I had four breaking tests as a result of the change, all of them in the FooBarTest, which reside in the Legacy directory. The Legacy classification is not a joke, it include such definitions as:  &lt;column name=&quot;`@@##integer_&#xA0; *`&quot; unique-key=&quot;abc&quot; not-null=&quot;true&quot;/&gt; &lt;property name=&quot;Formula&quot; formula=&quot;2 * int_&quot;/&gt; And other nice things. My poor tokenizer just started crying and went to stand in the corner when it saw that. That test fixture has over 5 KLOC, and I think that I may have nightmares about the databases that caused it to become necessary...</p>
        </article>
        <article id="article-7195">
            <a href="https://ayende.com/blog/2932/hasty-notes-on-big-refactoring" target="_blank">
                <h2 class="title mb-6" id="article-7195">Hasty notes on Big Refactoring</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am going to write a more full featured post about this, but I think that the jotted notes for that are also interesting. Big rafactoring is what I call to a refactoring that touces large swaths of the code base, changing the implementation of a core service is one such example, or changing key archtictual patterns.  Must have tests at first. Change is too big, will affect too much of the system to change in place. Can&#x27;t change the system and the test at the same time Taking as granted that you have source control. Ability to rollback at any time. Tests are hindarance, not a help. Stateful structure with tests.</p>
        </article>
        <article id="article-7196">
            <a href="https://ayende.com/blog/2931/release-it" target="_blank">
                <h2 class="title mb-6" id="article-7196">Release It!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Following Ted Neward&#x27;s recommendation, I got Michael Nygard&#x27;s Release It!&#xA0; it was worth it! It is rare to see a live blog from a book, but what the hell. I read this in about 8 hours, and I can&#x27;t recommend it enough. I am currently at chapter 5, but I had to stop and think about all the stability anti patterns that Chapter 4 has. More specifically, I had to think about all the stability anti patterns that I have put in my own code. The only thing that actually happened to me in production was an Unbounded Result Set, which had some nasty affects on performance, but not critically so. But as I am reading the stability anti patterns list, I am seeing more and more things that I am doing wrong. At least, they are wrong if I want to scale in a stable manner. It is another argument for the the simplest way ain&#x27;t the right way approach. There are a few books that I can think of that caused a fundamental change in the way that I am writing and designing software. But even at this point, I think that this is going to be one of them. I love this quote: Hope is not a design method. Data purging is a PITA. I run into issues with it just last week, we needed to remove unrelated data, and we didn&#x27;t take into account how things are handled in the application, basically, we removed rows in an ordered collection, which cause it to fail. I like the idea of a Test Harness, an application that simulate badly behaved network and integration points. Anyone is familiar with an existing one? Evaluating SMS for async messaging platform: message brokers are usually implemented with carbon and have extremely high latency Chapter 6 is interesting, it starts with explaining the &quot;one in a million in next Tuesday&quot; approach for unlikely issues. Astronomically unlikely coincidence happens every day. Something that Michael keeps repeating is that sessions are the bane of stability &amp; capacity, this is interesting. Even more interesting is real world experience of putting big sites out there, and what kind of environment they have to face. Specifically, the description of the unexpected access and the results from that are enlightening. It looks like you need to do some really nasty things in your QA environment, just to get things slightly like what they are for production. Interesting problem. Something that I can&#x27;t really make myself believe is requiring over a thousand database transactions to render the home page. Another good quote: A million dollars will pay for a lot of profiling and optimization in the application stack... Section 9.7 talks about the dangers of bypassing the OR/M layer for direct DB access because they can kill the site capacity, I wholly approve. The SQL that most OR/M tools generate is predictable, so it is very easy to optimize for that.&#xA0;Another important thing is that you need to develop against realistic data set. This usually mean building a data generator to spit some data at the DB.  Connection pooling is another strong theme in the book, which make me wonder. The CLR has both a thread pool and a connection pool, but they are on the background, I have needed to meddle with the thread pool in the past, but not with the connection pool. And I have heard very little about connection pools in .NET, while on the Java side, there seems to be one per project, I wonder why? It is that the default pool does enough to handle most scenarios that it is not necessary to do it? I didn&#x27;t know that Java had object pools, that sounds... weird. Especially if someone used the statement &quot;creating an object is the second most expensive thing you can do&quot; (the first being creating a thread). That is certainly not the case now, and I find it hard to believe that it was true then. &#xA0;Blamestorming &lt;- I love this term. Michael is certainly mentioning Akami quite a bit. On Chapter 14 now, talking about administration. That and transparency are two things that I am very interested to learn more about. He mentions the use of cmdline apps that allows to write admin scripts against the application, as well as startup verification and the ability to interrogate a funked server. Both are interesting. I have been thinking about including a boo interpreter in my project, so I could login to the application and directly &quot;debug&quot; it. I wonder how this can work for real. This would certainly allow me to access everything in the application, live. Configuration, and the importance of separating internal configuration (IoC settings) and application settings (database names), was mentioned, including the necessity to make the configuration understandable to the admin. He mentioned the problem of distributing configuration across multiply hosts, I wonder why not use a well known configuration service for that. There is a really good description about how they were able to get a system working by basically going in and setting properties on live instances. So I guess the idea of an interpreter isn&#x27;t that weird. There even a name for it, Recovery Oriented Computing. Another good quote: Last week is history only in IT and high fashion.  A startling number of business-level issues can be traced back to batch jobs failing invisibly for 33 days straight. Ouch! Ouch! Ouch! Been there, done that, ouch! Log file readability: Yes! Yes! Yes! Especially when the only interface into the system is the log file! Some good points how to make a log file readable, and good message logging. I like the discussion on superstitions as a survival trait. It seems that scriptability of a live application is a big thing in the Java space, with JMX being the standard way to do that. We don&#x27;t have anything like that for .NET, but I think that it should be simple enough to wire something up with Windsor and&#xA0;IRemoteQuackFu :-) Another alternative to Boo would be PowerShell, which admins are supposedly familiar with. On chapter 18, adaptation. I would call it maintainability, but I think it is the same thing. I like the view on integration databases:  Integration databases - don&#x2019;t do it! Seriously! Not even with views. Not even with stored procedures. Take it up a level, and wrap a web servicearound the database. Then make the web service redundant and accessed through a virtual IP. ... That&#x2019;s an enterprise integration technology. Reaching into another system&#x2019;s database is just...icky. I have been saying much the same thing for a long while now. Very icky indeed. The description of zero downtime deployment reminded me of the Erlang talk in JAOO, you have no consistent state, and you must deal with this. Final thought, design for production, not for QA Go and read this book, you really need it.</p>
        </article>
        <article id="article-7197">
            <a href="https://ayende.com/blog/2930/regex-vs-string-indexof" target="_blank">
                <h2 class="title mb-6" id="article-7197">Regex vs. string.IndexOf</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I send a piece of code to Justin, which dealt with doing some simple text parsing. His comment was:  text.Substring(lastIndex, currentIndex - lastIndex);  Dude, Regex, dude! This code reminds me of when I wrote an XML parser in ASP3 The reason that I used IndexOf there was performance, this piece of code is in the critical path, and I don&#x27;t think that Regex would give me much there. But Justin&#xA0;said that compiled Regex is more efficient than IndexOf, so I decided to check it. Here is my quick perf test: static void Main(string[] args)&#xA;{&#xA;&#x9;string testStr = &quot;select foo, bar, x, y, z, 5 from Items&quot;;&#xA;&#x9;int count = 500000;&#xA;&#x9;DateTime start = DateTime.Now;&#xA;&#x9;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;&#x9;{&#xA;&#x9;&#x9;int last = 0, current = 0;&#xA;&#x9;&#x9;while ((current = testStr.IndexOf(&#x27;,&#x27;, current)) != -1)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;string x = testStr.Substring(last, current - last);&#xA;&#x9;&#x9;&#x9;current = last = current &#x2B; 1;&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#x9;Console.WriteLine(DateTime.Now -start);&#xA;&#x9;start = DateTime.Now;&#xA;&#x9;Regex r = new Regex(&quot;,&quot;, RegexOptions.Compiled);&#xA;&#x9;for (int i = 0; i &lt; count; i&#x2B;&#x2B;)&#xA;&#x9;{&#xA;&#x9;&#x9;int last = 0, current = 0;&#xA;&#x9;&#x9;Match match = r.Match(testStr, current);&#xA;&#x9;&#x9;while (match.Success)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;current = match.Index;&#xA;&#x9;&#x9;&#x9;string y = testStr.Substring(last, current - last);&#xA;&#x9;&#x9;&#x9;current = last = current &#x2B; 1;&#xA;&#x9;&#x9;&#x9;match = r.Match(testStr, current);&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;&#x9;Console.WriteLine(DateTime.Now - start);&#xA;}&#xA;The results, on my machine:&#xA;&#xA;String.IndexOf:&#xA0;&#xA0; 00.2343750Compiled Regex: 01.4687500</p>
        </article>
        <article id="article-7198">
            <a href="https://ayende.com/blog/2929/herd-mentality-and-writing-compilers" target="_blank">
                <h2 class="title mb-6" id="article-7198">Herd Mentality and writing Compilers</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Quotes from a discussion with Justin:  I am using Active Record out of Herd Mentality, you are big enough to be considered a herd. And:  You are writing a compiler, this is just a state machine. Workflow Foundation is a state machine. You should use that to write the compiler.</p>
        </article>
        <article id="article-7199">
            <a href="https://ayende.com/blog/2928/runsharp-reflection-emit-for-mere-mortals" target="_blank">
                <h2 class="title mb-6" id="article-7199">RunSharp: Reflection Emit for Mere Mortals</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I have been dealing with IL generation using Reflection Emit for about two years. I believe that I have enough experience with it to get a feeling for how it goes, and it usually goes slowly and painfully. There are wrappers around it (Castle Dynamic Proxy has a AST for this), but they are fairly specialized, and anyone somehow I always find myself needing to fix the code that build the AST, mostly because I have users that throws weird curve balls at Rhino Mocks. Nevertheless, IL generation is a powerful technique, just very cumbersome to deal with. RunSharp&#xA0;is a OSS project that aims to solve this issue, it generate code on the fly, using high-level syntax. This means that you can write code like this: g.Assign(x, o.Invoke(&quot;MyMethod&quot;, arg1, arg2));&#xA;g.Assign(y, o.Property(&quot;MyProperty&quot;));&#xA;g.Assign(o.Property(&quot;MyProperty&quot;), z);&#xA;g.Assign(f, o.Field(&quot;myField&quot;));&#xA;And it will generate the appropriate:&#xA;x = o.MyMethod(arg1, arg2);&#xA;y = o.MyProperty;&#xA;o.MyProperty = z;&#xA;f = o.myField;&#xA;I am impressed, if this works, it can mean some very interesting possibilities. I took a very brief glance at the code, and it is using the ILGenerator from the framework, I would be very interested in getting this to work on (a) dynamic methods, (b) cecil.&#xA;The license is GPL, however, which means that it is a problem to use in any scenario. In my opinion, such a thing should be LGPL, which would allow its use in other projects, but that is a subject for another day.&#xA;Thanks Roy, for finding it.</p>
        </article>
        <article id="article-7200">
            <a href="https://ayende.com/blog/2927/retlang-concurrency-library-for-c" target="_blank">
                <h2 class="title mb-6" id="article-7200">Retlang - Concurrency Library for C#</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: November 01, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I have been investigating Retlang&#xA0;as a way to handle concurrency in Rhino ETL. There are quite a few samples there, but no over all explanation, I am going to document what I find as I learn them. Retlang is based on the concept of message passing in C#, a typical pub/sub infrastructure, within a single a process. As such, you always need to know where you are publishing to, and where to reply. The message header serves as a way to decouple the two. So you can build loosely coupled components that talks to each other by message passing. Obviously, my first step when evaluating a library is checking how well it plays with my own semantics, and I have to say that on first glance, Retlang looks really nice. I am starting to explore it, and I am impressed. There is, for me, a sense of very well designed API. In fact, I have encountered several instances of thinking &quot;I would have done it like this&quot;, only to encounter exactly that thing within the code. The minimal example is this one: IProcessContextFactory factory = new ProcessContextFactory();&#xA;factory.Start();&#xA;IProcessContext publisher = factory.CreateAndStart();&#xA;IProcessContext consumer = factory.Create();&#xA;consumer.Subscribe&lt;int&gt;(new TopicEquals(&quot;test&quot;), delegate (IMessageHeader header, int id)&#xA;{&#xA;    Console.WriteLine(id);&#xA;});&#xA;consumer.Start();&#xA;for (int i = 0; i &lt; 50; i&#x2B;&#x2B;)&#xA;{&#xA;    publisher.Publish(&quot;test&quot;, i);&#xA;}&#xA;consumer.Stop();publisher.Stop();consumer.Join();publisher.Join();factory.Stop();&#xA;&#xA;This just publish a list of numbers and print them, but it demonstrate several imprtant factors in Retlang. First of which, we have the publish / subscribe mechanism, but we also have the topic select which we pass to the subscribe method. This implementation is a very good one for extensibility, and it mimics Erlang&#x27;s pattern matching capabilities to a high degree.&#xA;Threading concerns:&#xA;I am not an expert yet, but as far as I can tell, each IProcessContext is running in its own thread, and the IProcessContextFactory has another thread as well, the bus thread. All the contextes screated from a single factory share the same bus space. This means that you probably do not want&#xA0;to&#xA0;have too many&#xA0;Process Contextes around, but you can register as many subscribiers as you want, and they will be routed appropriately. &#xA;Again, those are just my observations on how it works, from an initial survery only, so it is entirely possible (and probable) that I am entirely mistaken.</p>
        </article>
        <div class="button flex justify-between">
            <a href="719.html"><span class="back arrow"></span></a>

            <a href="721.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>