
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 530 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5291">
            <a href="https://ayende.com/blog/4664/presentation-intro-to-nosql" target="_blank">
                <h2 class="title mb-6" id="article-5291">Presentation: Intro to NoSQL</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 17, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">My session with the .NET user group in Aarhus, Denmark was recorded and is available.  I tried to discuss (in the space of an hour) about the major types of NoSQL databases. It is a bit rush, but I think it is pretty good.</p>
        </article>
        <article id="article-5292">
            <a href="https://ayende.com/blog/4663/ravendb-the-great-simplification" target="_blank">
                <h2 class="title mb-6" id="article-5292">RavenDB &#x2013; The great simplification</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 16, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">There is always a tension between giving users an interface that is simple to use and giving them something that is powerful.  With RavenDB, we run into a problem with the session interface. I mean, just take a look&#x2026;     Look how many operations you can do here! Yes, it is powerful, but it is also very complex to talk about &amp; explain. For that matter, look at the interface:    We have 4(!) different ways of querying (actually, we have more, but that is beside the point).  Something had to be done, but we didn&#x2019;t want to lose any power. So we decided on the following method:              Basically, we grouped all the common methods into a super simple session interface. This means that when you need to use the session, you see only:     4 of those methods (Equals, GetHashCode, GetType, ToString) are from System.Object and one is from IDisposable. Users pretty much are going to not see those methods.&#xA0; The CRUD interface is there, as well as the starting point for querying. And that is it.  I think that it makes it very easy to get started with RavenDB. And all those operations that are important but uncommonly used are still there, they just require an explicit step to access them.</p>
        </article>
        <article id="article-5293">
            <a href="https://ayende.com/blog/4662/ravendb-managed-storage" target="_blank">
                <h2 class="title mb-6" id="article-5293">RavenDB &amp; Managed Storage</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 15, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the things that I really wanted with to do with RavenDB is to create something that is really easy to use for .NET developers. I think that I have managed to do that. But the one big challenge that we still had was running everything using managed storage.   As you can imagine, building transactional, crash-safe, data stores isn&#x2019;t particularly easy, but we actually did that, and now RavenDB can run in managed core. That has other implications, like being able to run completely in memory. Which means that you can test your RavenDB code simply by using:     var store = new DocumentStore { RunInMemory = true; }&#xA;  &#xA;&#xA;And just use this as you normally would. For that matter, you can ask the RavenDB server to run in memory as well (extremely useful for demos):&#xA;&#xA;&#xA;  Raven.Server.exe /ram&#xA;&#xA;&#xA;As a side note, I am going to be posting a lot about the recent storm of features that were just added to RavenDB.</p>
        </article>
        <article id="article-5294">
            <a href="https://ayende.com/blog/4661/ravendb-live-projections-or-how-to-do-joins-in-a-non-relational-database" target="_blank">
                <h2 class="title mb-6" id="article-5294">RavenDB &#x2013; Live projections, or how to do joins in a non relational database</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 14, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This feature has me really excited, because it solves a pretty big problem and it does so in a really elegant fashion.  Let us start from the beginning. Documents are independent, which means that processing a single document should not require loading additional documents. This, in turn, leads to denormalization, so we can keep the data that we need about our associations in the same document.   The problem, of course, is that there are many cases where this denormalization is annoying. In particular, it means that you have to take responsibility for handling the updates to the denormalized data. There are good reasons to want to do that, particularly if you are working on a sharded data store. And yet&#x2026; many people don&#x2019;t run in a sharded store, so why make them pay for that?  I found it hard to answer, especially since we already introduced the includes feature. For a while, I thought that just doing the include was enough, but then I got into a discussion with Rob about this. And we had the chance to talk about projections vs. documents. We agreed that we wanted a solution, and we started throwing a lot of crazy ideas (multi sourced, background updated, materialized views &#x2013; to name one) around. Until we finally realized that we were being really stupid. The data is already there!   It was just that I was too blind to see how we can push it out.  Let us talk in code for a minute, since it would be easier to demonstrate how things work:     using (var s = ds.OpenSession())&#xA;{&#xA;    var entity = new User { Name = &quot;Ayende&quot; };&#xA;    s.Store(entity);&#xA;    s.Store(new User { Name = &quot;Oren&quot;, AliasId = entity.Id });&#xA;    s.SaveChanges();&#xA;}&#xA;  &#xA;&#xA;This creates two documents and links between them.&#xA;&#xA;Now, let us say that we want to display the following grid:&#xA;&#xA;&#xA;  &#xA;      &#xA;        User&#xA;&#xA;        Alias&#xA;      &#xA;&#xA;      &#xA;        Oren&#xA;&#xA;        Ayende&#xA;      &#xA;    &#xA;&#xA;&#xA;Well, we need to query for all the users that has an alias, then include the associated document. Something like this:&#xA;&#xA;&#xA;  var usersWithAliases = from user in session.Query&lt;User&gt;().Include(x=&gt;x.AliasId)&#xA;                       where user.AliasId != null&#xA;                       select user;&#xA;&#xA;&#xA;var results = new List&lt;UserAndAlias&gt;();&#xA;&#xA;foreach(var user in usersWithAliases)&#xA;{&#xA;    results.Add(&#xA;        new UserAndAlias&#xA;        {&#xA;            User = user.Name&#xA;            Alias = session.Load&lt;User&gt;(user.AliasId).Name&#xA;        }&#xA;    );&#xA;}&#xA;  &#xA;&#xA;Here is the deal, this is very efficient in terms of calling the database only once, but it does means that we are passing the full document back, which may be something that we may not want to do.&#xA;&#xA;Not to mention that there is a whole lot of code here.&#xA;&#xA;Okay, so far we have introduced the problem. Let us see how we can solve it. We can do that by applying a live projection at the server side. A live projection transforms the results of a query on the server side, and it has access to other documents as well. Let us see what I mean by that:&#xA;&#xA;&#xA;  public class Users_ByAlias : AbstractIndexCreationTask&lt;User&gt;&#xA;{&#xA;    public Users_ByAlias()&#xA;    {&#xA;        Map =&#xA;            users =&gt; from user in users&#xA;                     select new {user.AliasId};&#xA;&#xA;        TransformResults =&#xA;            (database, users) =&gt; from user in users&#xA;                                 let alias= database.Load&lt;User&gt;(user.AliasId)&#xA;                                 select new {Name = user.Name, Alias = alias.Name};&#xA;    }&#xA;}&#xA;  &#xA;&#xA;It is important to understand exactly what is going on here. The TransformResults will be executed on the results on the query, which gives it the change to modify, extend or filter them. In this case, it gives you the ability to look at data from another document.&#xA;&#xA;&#xA;  For the DB guys among you, this performs a nested loop join.&#xA;&#xA;&#xA;Now, we can just write:&#xA;&#xA;&#xA;  var usersWithAliases = &#xA;     (from user in session.Query&lt;User, Users_ByAlias&gt;()&#xA;     where user.AliasId != null&#xA;     select user).As&lt;UserAndAlias&gt;();&#xA;  &#xA;&#xA;This will query the index, transform the results on the server side, and give us the UserAndAlias colelction that we can just use.&#xA;&#xA;Did I mention that I am really excited about this feature?</p>
        </article>
        <article id="article-5295">
            <a href="https://ayende.com/blog/4660/small-optimizations-did-you-check-that-idiot-checkbox-yet" target="_blank">
                <h2 class="title mb-6" id="article-5295">Small optimizations? Did you check that idiot checkbox yet?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 13, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I started to write the following code:     operationsInTransactions.GetOrAdd(txId,  new List&lt;Command&gt;())&#xA;    .Add(new Command&#xA;    {&#xA;        Key = key,&#xA;        Position = position,&#xA;        Type = CommandType.Put&#xA;    });&#xA;  &#xA;&#xA;But then I realized that in the happy path, I would always allocate a list, even if I don&#x2019;t need it, and I changed it to this:&#xA;&#xA;&#xA;  operationsInTransactions.GetOrAdd(txId, guid =&gt; new List&lt;Command&gt;())&#xA;    .Add(new Command&#xA;    {&#xA;        Key = key,&#xA;        Position = position,&#xA;        Type = CommandType.Put&#xA;    });&#xA;  &#xA;&#xA;Why am I being stupid?&#xA;&#xA;Hint: It has nothing to do with the stupidity associated with trying to do micro optimizations&#x2026;</p>
        </article>
        <article id="article-5296">
            <a href="https://ayende.com/blog/4659/riddle-me-this-file-access-multi-threading" target="_blank">
                <h2 class="title mb-6" id="article-5296">Riddle me this</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 12, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">What would be the output of the following code?     var list = new List&lt;Task&gt;();&#xA;&#xA;var fileStream = File.Open(&quot;test&quot;, FileMode.Create, FileAccess.ReadWrite, FileShare.None);&#xA;for (int i = 0; i &lt; 150; i&#x2B;&#x2B;)&#xA;{&#xA;    var index = i;&#xA;    var task = Task.Factory.StartNew(() =&gt;&#xA;    {&#xA;        var buffer = Encoding.ASCII.GetBytes(index &#x2B; &quot;\r\n&quot;);&#xA;        fileStream.Write(buffer, 0, buffer.Length);&#xA;    });&#xA;    list.Add(task);&#xA;}&#xA;&#xA;&#xA;Task.WaitAll(list.ToArray());&#xA;fileStream.Flush(true);&#xA;fileStream.Dispose();&#xA;  &#xA;&#xA;Please note that:&#xA;&#xA;&#xA;  What order the data is saved is not important.&#xA;&#xA;  Preventing data corruption is important.&#xA;&#xA;&#xA;Can you guess?</p>
        </article>
        <article id="article-5297">
            <a href="https://ayende.com/blog/4658/how-should-the-ravendb-ui-look-like-there-is-a-prize" target="_blank">
                <h2 class="title mb-6" id="article-5297">How should the RavenDB UI look like? (There is a prize!)</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 11, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Update: The offer is now closed.&#xA;&#xA;Currently, RavenDB comes with a builtin user interface which is HTML/JS based. The UI is nice, but it has limitations. Getting real applications on to of HTML/JS requires a lot of work and expertise, and while I understand how it is done, I find it painful to do so. Another problem is that the UI is already becoming cluttered, and we can&#x2019;t really offer high end UX with the type of options that we have in a web interface without a ridiculously high investment in time and effort. But I still want the no-deploy option, so the next UI for RavenDB is going to be done in Silverlight. For example, giving syntax highlighting for editing index definitions would be trivial in Silverlight and very hard in HTML/JS.  Hibernating Rhinos (my company) is going to sponsor professional UI developed for RavenDB using Silverlight. Think about it like Management Studio. The work is going to be done in Silverlight, with the idea that you could gain all the usual benefits of being able to host your own UI. I was talking today with a few people about that, and everyone agrees that the actual process of implementing this is fairly simple.  The problem is what sort of UI we should do. One option, which we will not take, is simply copy the current web UI. But that is something that I strongly oppose. I think that the web UI is nice, but that we can do much better.  One of the things that bothers me is that I do not want to do is to give your a grid at any point in the UI. RavenDB is all about documents, and I want to UI to direct you toward thinking in documents.  I have all sort of crazy ideas about representing documents as a series of documents in an infinite space. Something like this:       And then zoom on a particular document to be able to work on it effectively, literally paging between different documents with page turns, etc.     I am not sure if I am going with the right direction or if I am just doing the equivalent of build an interface made of nothing by &lt;blink/&gt; tags.   So, here is how it goes. I would really like to get ideas about how to do a good UI for RavenDB. But I don&#x2019;t think that just talking about this would work. I would really like to see a prototype that I can look at. Doesn&#x2019;t have to be actually workable, I would gladly look at hand drawn pictures. It doesn&#x2019;t even have to look good, because I am more interested in seeing UX rather than UI, and how we can focus users toward document oriented thinking.  To facilitate that, I am going to offer a prize. Your choice of the a profiler license or RavenDB license if you send me your ideas about how to build such a UI. I am going to send a free license to either the profiler or RavenDB regardless if I&#x2018;ll choose your suggestion or not (as long as the suggestion itself is serious), this isn&#x2019;t just for the winner.</p>
        </article>
        <article id="article-5298">
            <a href="https://ayende.com/blog/4657/the-other-side-of-chasing-the-money" target="_blank">
                <h2 class="title mb-6" id="article-5298">The other side of chasing the money</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 11, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">When I started doing my own consulting, I realized that sometimes I would have to chase after a client in order to get paid. Luckily, it hasn&#x2019;t happened often.  I did not expect the reverse to happen, but it did. I just had to send the following formal notice to someone who does work for me:     Hi guys!     I am pretty sure that I owe you money. Would you mind terribly if I paid you?   And yes, this post is here to serve as a kick to the people in question.</p>
        </article>
        <article id="article-5299">
            <a href="https://ayende.com/blog/4656/a-murder-of-ravens" target="_blank">
                <h2 class="title mb-6" id="article-5299">A murder of Ravens</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 11, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In the last 96 hours, I slept a total of 6 (all of them while I was on a plane and had no electricity, so I couldn&#x2019;t work).  All the rest of my time was pretty much focused on doing crazy stuff with RavenDB. I am very happy to say that I (with a lot of help from Rob Ashton), have managed to really push what RavenDB can do. In particular, about 5 minutes ago I finished the last touch required to get RavenDB to run using fully managed storage.  And yes, this means that we will have a Mono build shortly.  The crazy part is that a week ago I would have said that managed storage would be the feature for RavenDB, but it is actually the case that it is on an equal footing with a few others that we recently added. We have been so busy adding those features, and working through the implication of having those features, that we didn&#x2019;t have time to sit down and document &amp; explain them properly.   No worries, this is coming. In fact, this is what I intend to do for most of tomorrow (at least, as soon as I wake up).  Ayende the excited.</p>
        </article>
        <article id="article-5300">
            <a href="https://ayende.com/blog/4655/disabling-linq" target="_blank">
                <h2 class="title mb-6" id="article-5300">Disabling Linq</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 10, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">For a lot of things, Linq is really nice. But there is one very important problem with Linq. It make it very easy to do some really stupid things, because it is so easy to intermix in memory operations with remote operations. One of the most common problems that we run into with the RavenDB API was this:     session.LuceneQuery&lt;User&gt;(&quot;Users/ByName&quot;)&#xA;            .Where(x=&gt;x.Name == username)&#xA;            .FirstOrDefault();&#xA;  &#xA;&#xA;The problem is that LuceneQuery is not the Linq endpoint to RavenDB. It is the lower level API that we use to query RavenDB, and the Linq API is built on top of that. The problem is that it is very easy to write code like that, and it works, for small amounts of data. What this code actually does is load the first page of information from the database and do the filtering in memory. &#xA;&#xA;Obviously, this is not ideal, but this is a pretty common mistake. We are currently thinking of ways to drastically simplify the API, but in the meantime, something had to be done about this.&#xA;&#xA;LuceneQuery returns an instance of IDocumentQuery:&#xA;&#xA;&#xA;  public interface IDocumentQuery&lt;T&gt; : IEnumerable&lt;T&gt;&#xA;  &#xA;&#xA;That was good, because that meant that we had a hook to place stop the user from making this mistake. The way Linq works, it first looks for an instance method and only afterward it will look for extension methods. That allowed me to define the following:&#xA;&#xA;&#xA;  [Obsolete(@&quot;&#xA;You cannot issue an in memory filter - such as Where(x=&gt;x.Name == &quot;&quot;Ayende&quot;&quot;) - on IDocumentQuery. &#xA;This is likely a bug, because this will execute the filter in memory, rather than in RavenDB.&#xA;Consider using session.Query&lt;T&gt;() instead of session.LuceneQuery&lt;T&gt;. The session.Query&lt;T&gt;() method fully supports Linq queries, while session.LuceneQuery&lt;T&gt;() is intended for lower level API access.&#xA;If you really want to do in memory filtering on the data returned from the query, you can use: session.LuceneQuery&lt;T&gt;().ToList().Where(x=&gt;x.Name == &quot;&quot;Ayende&quot;&quot;)&#xA;&quot;, true)]&#xA;IEnumerable&lt;T&gt; Where(Func&lt;T, bool&gt; predicate);&#xA;  &#xA;&#xA;Now, the code above it going to generate a very descriptive compilation error, and the entire class of bugs just went out the window.</p>
        </article>
        <div class="button flex justify-between">
            <a href="529.html"><span class="back arrow"></span></a>

            <a href="531.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
