
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 774 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7731">
            <a href="https://ayende.com/blog/2504/visual-svn-another-zero-friction-tool-in-the-toolbox" target="_blank">
                <h2 class="title mb-6" id="article-7731">Visual SVN: Another Zero Friction Tool In The Toolbox</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 06, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Full disclosure, I have received a personal license for Visual SVN (49$) from the developers on Visual SVN, since they are apparently doing a lot of stuff with Rhino Mocks and wanted to show it. About a month ago I installed Visual SVN, and then I promptly forgot about it. When the evaluation period has ended, I found myself thinking, &quot;Wait a minute, I really like this tool.&quot; Visual SVN works by extending Visual Studio with the same interface as TortoiseSVN, which means that it is instantly usable for anyone that have used TortoiseSVN (basically most developers on Windows that use SVN). The nice thing about it is that you really don&#x27;t feel that something different, until it is taken away. I have grown accustomed to the green/orange lights, and I like the ability to right click and &quot;show changes&quot;. I am still using TortoiseSVN to do a lot of stuff from explorer, but it is very nice to be able to do them from the IDE. The options that it offers directly of the right click menu are a subset of what you can do in Tortoise SVN, but it is a close match for the things that I want to be able to do in the IDE, so I have no issue with it. The thing that drove me insane for a few minutes was a menu item being renamed from the Tortoise SVN terminology that I just skipped over, but that is the only issue that I have found. As you probably know, I have great reservations about putting things in the IDE, mostly because I usually find that they make me wait for them (unacceptable). But Visual SVN is different in this regard because I literally can&#x27;t find any issues with the IDE integration, the things that I do (solution wide namespace rename, done yesterday) are immediately reflected and I didn&#x27;t notice any slow down. Recommended!</p>
        </article>
        <article id="article-7732">
            <a href="https://ayende.com/blog/2503/developing-for-scalable-applications" target="_blank">
                <h2 class="title mb-6" id="article-7732">Developing for Scalable Applications</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 06, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Evan Hoff&#xA0;has an eye opening post about the results of putting simple business logic in the database. Go read it, now. Now, after you have read that, let me continue with Rob&#x27;s reply&#xA0;to my previous post: It&#x27;s in the extreme, when you throw more and more code at a complex issue rather than use a simpler approach (like a view or SP) that the ORM model breaks. I&#x27;m sure you&#x27;ve run into this - you must have. I disagree in part, since it all depends on what do you define as extreme. Using OR/M opens new levels of extremeness with regards to the DB and queries. A few days ago I spend a few hours writing a query using NHibernate that I would never ever write in SQL, because it would be so much work to handle that. Obviously there are things that the DB does best, and for that, I have other options, including views or SP, but I use those through the OR/M, so I maintain my domain. Overall, If you document what you&#x27;re doing, is there really a question in terms of maintainability? Absolutely. I can give you well documented code that it an absolute nightmare to develop with. It may be performant, but it wouldn&#x27;t let you do anything with it. Case in point, a coworker had decides that he wants to &quot;save&quot; page load times by not using user controls in a WebForms application. He still needed to generate dynamic HTML. He put the dynamic HTML in a resource file, read it into a static variable, and then built the HTML using string.Format(). There is a chance that it is more performant solution that just using user controls, and there was a clear line of reasoning leading to this behavior, but the maintainability concerns were:  Non standard way of doing something, completely threw me off when I looked at the page. Ugly code that I couldn&#x27;t understand. Presentation logic &amp; HTML Generation are two separate concerns that were mixed together You had to restart the application if you wanted to change the HTML in the resource file (static variable for caching) Guess what happens for other cultures? No syntax highlighting or designer support for the HTML This is only from a few minutes of thinking about it. I have not profiled the differences, but I believe that they are minute if any, but even if it had significant advantage, the maintainability concerns are simply too important. I&#x27;ll throw a cache at the page and still be faster than anything hand optimized can get to. I&#x27;ve seen ORM tools completely written out of many applications because of perf issues, supportability (no one knew how to use them) and, oddly enough, maintenance nightmares You can use any tool badly, so I can&#x27;t really comment on this unless I have more information. Perf issues are not inherent to OR/M by no means, but it is certainly possible to use OR/M to create performance issues. The same is true for maintainability in OR/M, it is not a given if you use OR/M, only easier. I apologize if this comes off wrong, but if you worked at the companies I worked for you&#x27;d be fired for this comment. &quot;Just buy more hardware so I can code this way&quot;. This line of thinking is sooooo completely dev-centric that all I can do is wonder &quot;did he really just say that&quot; I didn&#x27;t have the chance of working on something in the order of PayPal or eBay, but I still disagree. There is a point in which the answer &quot;throw more hardware&quot; at it breaks, that is usually when you hit the physical constraints of the data center. Nevertheless, I think we are confusing performance and scalability here. Performance is how fast I can do something, scalability is how many concurrent somethings I can do. For the most part, I would worry about scalability more than performance. Cheap web machines and caching as a scalability measure is one of the easiest routes to scalable applications, and as Evan has pointed out, even minor business logic handling in the database can completely break this model and leaves you with scaling out from the database, which is not a good thing. So, let me try that comment again:  I can scale up faster and bigger and have more ability to change the application using this approach, rather than spending the time shaving milliseconds now and not being able to respond to change in three months time because of the optimizations that I did now. I&#x27;ll add one final thing - you guys are assuming that all &quot;good engineers&quot; out there know and understand NHibernate. In your view does knowledge of NHibernate factor into maintenance? And if not, how can this NOT be construed as a &quot;one off&quot; position? I do not assume that all good engineers know &amp; understand NHibernate. I do assume that it is possible to pick up NHibernate in a week or so. Knowledge about NHibernate is simple a pre-requisite for the application, much like knowledge of SQL is. NHibernate is not a &quot;one off&quot; approach because it is not something that is built for this particular project, it is a&#xA0;general framework with a wealth&#xA0;of knowledge, support,&#xA0;community, etc.&#xA0; Oh, and did I said that you really want to read Evan&#x27;s post</p>
        </article>
        <article id="article-7733">
            <a href="https://ayende.com/blog/2502/a-developer-perspective-on-sql-server-2008" target="_blank">
                <h2 class="title mb-6" id="article-7733">A developer perspective on SQL Server 2008</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 06, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I just read this&#xA0;about the SQL Server 2008 features, and I thought to provide my own commentary on the new features:  Declarative Management Framework - not really interesting to me. Table Value Parameters - YEAH, that is more like it. There are too many cases when I need to use IN on a large data set and I run into the 2100 parameters limitations. This is going to make working with this so much easier. MERGE&#xA0; SQL Statement - I got tired of writing my own Update/Insert very early. This also means that the tools will support it as well, probably (SSIS), so that makes my life easier still. Change Data Capture - Hm, that looks interesting in the abstract, will probably want to check that out. Star Join Query Optimizations - not really interesting yet. There is also the EDM stuff that they are apparently putting there, which is also interesting, but not likely to be usable unless you are using the Entity Framework. The announcement about that was very vague.</p>
        </article>
        <article id="article-7734">
            <a href="https://ayende.com/blog/2501/nhibernate-query-generator-more-collections-magic" target="_blank">
                <h2 class="title mb-6" id="article-7734">NHibernate Query Generator - More Collections Magic</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I wouldn&#x27;t have expected it to be this hard*, but it is alive! Here is the query:       1:  User one = User.FindOne(   2:         Where.User.Blogs   3:              .With(JoinType.InnerJoin)   4:                   .Name == &quot;Ayende @ Blog&quot;   5:  );&#xA;And the generated SQL:&#xA;&#xA;&#xA;&#xA;   1:  SELECT    2:     this_.Id as Id4_1_,   3:     this_.Name as Name4_1_,   4:     this_.Email as Email4_1_,   5:     blog1_.Id as Id3_0_,   6:     blog1_.Name as Name3_0_,   7:     blog1_.Author as Author3_0_    8:  FROM Users this_ inner join Blogs blog1_    9:     on this_.Id=blog1_.Author   10:  WHERE blog1_.Name = @p0&#xA;And, because Rob has asked, here is how you do a more complex query, over Many To Many association:&#xA;&#xA;&#xA;&#xA;   1:  User one = User.FindOne(   2:      Where.User.Name == &quot;Ayende&quot; &amp;&amp;   3:      Where.User.Roles.With().Name == &quot;Administrator&quot;   4:  );&#xA;And the generated SQL:&#xA;&#xA;&#xA;&#xA;   1:  SELECT this_.Id as Id0_1_,   2:     this_.Name as Name0_1_,   3:     this_.Email as Email0_1_,   4:     roles3_.UserId as UserId__,   5:     role1_.Id as RoleId,   6:     role1_.Id as Id9_0_,   7:     role1_.Name as Name9_0_    8:  FROM Users this_ inner join UsersRoles roles3_    9:     on this_.Id=roles3_.UserId   10:        inner join Roles role1_   11:           on roles3_.RoleId=role1_.Id   12:  WHERE this_.Name = @p0 and role1_.Name = @p1&#xA;It is in the repository now, but right now I would consider it beta stage, it works, but the generation will probably die if you have any sort of interesting schemas (specifically, if you have collections of value types, it is supposed to die horribly with confusing error message).&#xA;I intend to do a screen cast about this area of querying, searching and persistence soon.&#xA;* Right now code generation competes with template magic and three stars code in my internal dislike list. Trying to get the sort of syntax that you see about is really stretching C# to its limits. When can I get a Method Missing implementation&#xA0;on C#? That would actually make my life easier?</p>
        </article>
        <article id="article-7735">
            <a href="https://ayende.com/blog/2500/generic-entity-equality" target="_blank">
                <h2 class="title mb-6" id="article-7735">Generic Entity Equality</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Just got bit by reference equality vs. value equality again. Since this is the third time that I am writing this base class, I decided to put it in the blog for future reference (I wrote it first and forgot to overload the == / != operators).    By the way, this is the perfect example of a Mixin.    Updated: Ben Scheirman&#xA0;reminded me that I need to handle trasient objects as well.                      /// &lt;summary&gt;                        /// This is a trivial class that is used to make sure that Equals and GetHashCode                        /// are properly overloaded with the correct semantics. This is exteremely important                        /// if you are going to deal with objects outside the current Unit of Work.                        /// &lt;/summary&gt;                        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;                        /// &lt;typeparam name=&quot;TKey&quot;&gt;&lt;/typeparam&gt;                        public abstract class EqualityAndHashCodeProvider&lt;T, TKey&gt;                        &#xA0;&#xA0;&#xA0; where T : EqualityAndHashCodeProvider&lt;T, TKey&gt;                        {                        &#xA0;&#xA0;&#xA0; private int? oldHashCode;                                &#xA0;                        &#xA0;&#xA0;&#xA0; /// &lt;summary&gt;                        &#xA0;&#xA0;&#xA0; /// Determines whether the specified &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt; is equal to the current &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt;.                        &#xA0;&#xA0;&#xA0; /// &lt;/summary&gt;                        &#xA0;&#xA0;&#xA0; /// &lt;param name=&quot;obj&quot;&gt;The &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt; to compare with the current &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt;.&lt;/param&gt;                        &#xA0;&#xA0;&#xA0; /// &lt;returns&gt;                        &#xA0;&#xA0;&#xA0; /// true if the specified &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt; is equal to the current &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt;; otherwise, false.                        &#xA0;&#xA0;&#xA0; /// &lt;/returns&gt;                        &#xA0;&#xA0;&#xA0; public override bool Equals(object obj)                        &#xA0;&#xA0; &#xA0;{                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; T other = obj as T;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (other == null)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return false;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //to handle the case of comparing two new objects                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; bool otherIsTransient = Equals(other.Id ,default(TKey));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; bool thisIsTransient = Equals(this.Id, default(TKey));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (otherIsTransient &amp;&amp; thisIsTransient)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return ReferenceEquals(other, this);                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return other.Id.Equals(Id);                        &#xA0;&#xA0;&#xA0; }                                &#xA0;                        &#xA0;&#xA0;&#xA0; /// &lt;summary&gt;                        &#xA0;&#xA0;&#xA0; /// Serves as a hash function for a particular type. &lt;see cref=&quot;M:System.Object.GetHashCode&quot;&gt;&lt;/see&gt; is suitable for use in hashing algorithms and data structures like a hash table.                        &#xA0;&#xA0;&#xA0; /// &lt;/summary&gt;                        &#xA0;&#xA0;&#xA0; /// &lt;returns&gt;                        &#xA0;&#xA0;&#xA0; /// A hash code for the current &lt;see cref=&quot;T:System.Object&quot;&gt;&lt;/see&gt;.                        &#xA0;&#xA0;&#xA0; /// &lt;/returns&gt;                        &#xA0;&#xA0;&#xA0; public override int GetHashCode()                        &#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //This is done se we won&#x27;t change the hash code                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (oldHashCode.HasValue)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return oldHashCode.Value;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; bool thisIsTransient = Equals(this.Id, default(TKey));                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //When we are transient, we use the base GetHashCode()                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; //and remember it, so an instance can&#x27;t change its hash code.                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (thisIsTransient)                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; oldHashCode = base.GetHashCode();                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return oldHashCode.Value;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return Id.GetHashCode();                        &#xA0;&#xA0;&#xA0; }                                &#xA0;                        &#xA0;&#xA0;&#xA0; /// &lt;summary&gt;                        &#xA0;&#xA0;&#xA0; /// Get or set the Id of this entity                        &#xA0;&#xA0;&#xA0; /// &lt;/summary&gt;                        &#xA0;&#xA0;&#xA0; public abstract TKey Id { get; set; }                                &#xA0;                        &#xA0;&#xA0;&#xA0; /// &lt;summary&gt;                        &#xA0;&#xA0;&#xA0; /// Equality operator so we can have == semantics                        &#xA0;&#xA0;&#xA0; /// &lt;/summary&gt;                        &#xA0;&#xA0;&#xA0; public static bool operator ==(EqualityAndHashCodeProvider&lt;T, TKey&gt; x, EqualityAndHashCodeProvider&lt;T, TKey&gt; y)                        &#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return Equals(x, y);                        &#xA0;&#xA0;&#xA0; }                                &#xA0;                        &#xA0;&#xA0;&#xA0; /// &lt;summary&gt;                        &#xA0;&#xA0;&#xA0; /// Inequality operator so we can have != semantics                        &#xA0;&#xA0;&#xA0; /// &lt;/summary&gt;                        &#xA0;&#xA0;&#xA0; public static bool operator !=(EqualityAndHashCodeProvider&lt;T, TKey&gt; x, EqualityAndHashCodeProvider&lt;T, TKey&gt; y)                        &#xA0;&#xA0;&#xA0; {                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return !(x == y);                        &#xA0;&#xA0;&#xA0; }                        }</p>
        </article>
        <article id="article-7736">
            <a href="https://ayende.com/blog/2499/obscuring-http" target="_blank">
                <h2 class="title mb-6" id="article-7736">Obscuring HTTP</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Jeff Perrin&#xA0;do a really great job is sumrising what the biggest issue with WebForm is:Now the first problem with Webforms is not that it&#x2019;s an abstraction, or even that it&#x2019;s a leaky one (they all are). The problem is that what Webforms attempts to abstract away is actually simpler than the abstraction!</p>
        </article>
        <article id="article-7737">
            <a href="https://ayende.com/blog/2498/more-views-from-an-or-m-person" target="_blank">
                <h2 class="title mb-6" id="article-7737">More views from an OR/M person</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Rob Conery&#xA0;responded in a comment to my previous post, which includes some interesting points of discussion.I think, in your example above, that it&#x27;s only fair to also include the &quot;under the hood&quot; stuff you need to map these associations. In other words - I count the XML mapping as line of code too :) since this is code and it does have to be maintained.    Okay, no problem, I am using [ActiveRecord] attributes, so that puts me about 1-2 lines of attributes per property &#x2B; 1 to 2 lines of code per entity. You can see the mapping in the first example that I have posted.Your code sample RE the forum bits is a great exhibition of the power of the NHibernate query tool, but at the same time it reminds me of LINQ - why not just write SQL? I understand that in many cases you&#x27;d want to abstract that stuff away in case you change DBs    I am not using OR/M because I want to keep the DB abstracted. I am using an OR/M because it frees me from a lot of persistence related concerns and allows me to concentrate on the domain and the business problems.In terms of perf vs maintainability - I really think this needs more consideration. To be honest, who&#x27;s the app for anyway? The dev team or the client?    Only in the most extreme cases, and even then, after you have measured. Because the client is king, you want to ensure that you can keep giving value from the code that you have written. I am not seeing a problem between maintainable applications and performant applications, on the contrary. Maintainable applications give you a lot more flexibility in performance tuning.Less lines of code - more direct: (SELECT * FROM MyView).    Also, less performant, no?    BTW, why did you bring MySQL to the discussion?</p>
        </article>
        <article id="article-7738">
            <a href="https://ayende.com/blog/2497/on-the-advantages-of-one-off-tools" target="_blank">
                <h2 class="title mb-6" id="article-7738">On the advantages of one off tools</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I don&#x27;t like general purpose code generation, but I am fan of special purpose ones. The main reason that I don&#x27;t like the general purpose ones is in my experience they have invariably fell into the &quot;Generate code that I don&#x27;t like&quot; or &quot;Requires too much futzing to get to work the way I want it.&quot; Part of it is related to the fact that I consider generated code as a maintainability concern as well, and I am very nervous about trying to do that. Nevertheless, I do like code generation, I tend to write simple code-generators for a lot of purposes. In my current project, we have a lot of churn in database schema wise (add field, rebuild, get a new DB), but we also have all kinds of ETL process to and from the DB, so that makes life more interesting. I wrote a code generator based on SMO that reads the DB schema after NHibernate generates it, and basically handles ~85% of the ETL process mess. The nice thing about doing a one off tool is that I can make a lot of assumptions about the structure that I will be using (all tables has PK named Id, for instances) that a general purpose tool cannot make.</p>
        </article>
        <article id="article-7739">
            <a href="https://ayende.com/blog/2496/as-an-or-m-person" target="_blank">
                <h2 class="title mb-6" id="article-7739">As an OR/M Person...</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I really should learn not to read blogs at 1AM, nevertheless...    Rob Conery (SubSonic) talks about why OR/M sucks:If you&#x27;re an ORM person, ask yourself how much code you need to write to support a many to many relationship...    Just to demonstrate:         1: [HasAndBelongsToMany(Table=&quot;UsersToRoles&quot;, ColumnKey =&quot;`User`&quot;, ColumnRef = &quot;Role&quot;)]         2: public ISet&lt;Role&gt; Users { get { ... } set { ... } }        I also get lovely relational DB as a side benefit, but that is beside the point. Rob brings the point about &quot;what is a DB from OO point of view&quot; which came out in the OR/M Smackdown, I will give the same answer that I did then, if the tools does that, feel free to shot the tool.Your goal should always be performance - don&#x27;t sacrifice extra connections just to satisfy the ORM design model.    Rob, that sounds like a limitation of the tool, not the technology.    And my firstmost goal&#xA0;is rarely performance, actually, it is maintainability.Think of the code you&#x27;d have to write in an ORM model to get something like a summary thread list for a forum app - you&#x27;d want to show the name of the thread, the number of replies, and the date/author of the last reply. How do you do this with ORM? The answer: lots of code.    Ha? Didn&#x27;t checked it, but it is something in the order of: &quot;select thread.Name, count(thread.Replies), r.DatePublished, r.User.Name from Thread thread, Reply r where r.Id = (select max(r.Id) from Reply where r.Thread = thread)&quot;.&#xA0; Not really that much code at all, actually. Worst case scenario,&#xA0;I resort to something like this, which is still not a lot of code.</p>
        </article>
        <article id="article-7740">
            <a href="https://ayende.com/blog/2495/nhibernate-query-generator-collection-querying" target="_blank">
                <h2 class="title mb-6" id="article-7740">NHibernate Query Generator - Collection querying</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In the repository (Exists / NotExists):        1:  [Test]   2:  public void CanQueryOverCollections()   3:  {   4:      User one = User.FindOne(Where.User.Blogs.Exists(   5:                                  Where.Blog.Name == &quot;Ayende @ Blog&quot;   6:                                  ));   7:      Assert.IsNotNull(one);   8:  }&#xA0;&#xA;Will result in:&#xA;&#xA0;&#xA;   1:  SELECT this_.Id as Id4_0_, this_.Name as Name4_0_, this_.Email as Email4_0_    2:  FROM Users this_ WHERE exists (SELECT this_0_.Id as y0_ FROM Blogs    3:  this_0_ WHERE this_0_.Name = @p0)&#xA;&#xA0;&#xA;Fluent interfaces? Take that.</p>
        </article>
        <div class="button flex justify-between">
            <a href="773.html"><span class="back arrow"></span></a>

            <a href="775.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>