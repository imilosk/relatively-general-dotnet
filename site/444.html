
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 444 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-4431">
            <a href="https://ayende.com/blog/156929/good-errors" target="_blank">
                <h2 class="title mb-6" id="article-4431">Good errors</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 11, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am trying out the new Encryption support in RavenDB 1.2 (written by Dor), and the very first thing I got was a failure: The Raven/Encryption/Key setting must be set to an encryption key. The key should be in base 64, and should be at least 8 bytes long.You may use EncryptionSettings.GenerateRandomEncryptionKey() to generate a key.&#xA;If you&#x27;d like, here&#x27;s a key that was randomly generated:&#xA;&lt;add key=&quot;Raven/Encryption/Key&quot; value=&quot;3w17MIVIBLSWZpzH0YarqRlR2&#x2B;yHiv1Zq3TCWXLEMI8=&quot; /&gt;&#xA;&#xA;I like this!</p>
        </article>
        <article id="article-4432">
            <a href="https://benfoster.io/blog/automatic-null-model-checks-in-aspnet-mvc/" target="_blank">
                <h2 class="title mb-6" id="article-4432">Automatic null model checks in ASP.NET MVC</h2>
            </a>
            <p class="mb-2">by Ben Foster</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 11, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Automatically return a 404 (Resource not found) if your view models are null in ASP.NET MVC.</p>
        </article>
        <article id="article-4433">
            <a href="https://ayende.com/blog/156897/raven-suggest-review-options" target="_blank">
                <h2 class="title mb-6" id="article-4433">Raven Suggest: Review &amp; Options</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 10, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Phil Jones has posted some demo code for doing suggestions in RavenDB.        [HttpPost]&#xA;        public JsonResult CompanySuggestions(string term)&#xA;        {&#xA;            var rq = RavenSession.Query&lt;Company, Companies_QueryIndex&gt;();&#xA;&#xA;            var ravenResults = rq.Search(x =&gt; x.Name, string.Format(&quot;*{0}*&quot;, term),                                                       escapeQueryOptions: EscapeQueryOptions.AllowAllWildcards,                                                       options: SearchOptions.And)&#xA;                                        .Take(5)&#xA;                                        .ToList();&#xA;&#xA;            return Json(ravenResults.Select(x =&gt; new&#xA;            {&#xA;                id = x.Id,&#xA;                value = x.Name,&#xA;                description = string.Format(&quot;({0}, {1})&quot;, x.Category, x.Location)&#xA;            }));&#xA;        }&#xA;&#xA;&#xA;&#xA0;&#xA;And the data looks like this:&#xA;&#xA;The Companies_QueryIndex is a simple one, with the Name field marked as analyzed.&#xA;This code works, but it isn&#x2019;t ideal. In fact, it contains an major problem. It uses string.Format(&quot;*{0}*&quot;, term), which is identical to doing a Foo LIKE &#x2018;%&#x2019; &#x2B; @term &#x2B;&#x2019;%&#x2019; in SQL. And bad for the same reason, it means that we can&#x2019;t use the index efficiently, but have to scan the entire index.&#xA;The test app also populate the database with about 30,000 documents, enough to get a handle on how thins are going, even if this is a relatively small data set. Let us see how this actually behaves:&#xA;&#xA;&#xA;There are a few things to note here:&#xA;&#xA;The query time is significant. &#x2013; Leading wildcard queries tend to be expensive, they are essentially an O(N) query.&#xA;The results are&#x2026; interesting. &#x2013; In particular, look at the first few results, they are a match, but not what I would have expected.&#xA;A very simple change would be:&#xA;&#xA;&#xA; All I did was remove the leading wildcard, and suddenly the results look at a lot nicer, if only because they are closer to what I am actually searching on. By the way, note that in the last result, we are actually finding a company whose second name starts with Lua, it isn&#x2019;t just a raw StartsWith, since we are actually working on individual tokens levels, not the entire name level. This is because we indexed the Name as analyzed.&#xA;Let us see how this plays out in the actual app, first, using *term*:&#xA;&#xA;Now, using term*:&#xA;&#xA;That is somewhat better, but the results are still poor in terms of search relevance. Let us try something a little bit different:&#xA; var ravenResults = rq&#xA;    .Search(x =&gt; x.Name, term)&#xA;    .Search(x=&gt;x.Name, term &#x2B; &quot;*&quot;, escapeQueryOptions: EscapeQueryOptions.AllowPostfixWildcard     .Take(5)&#xA;     .ToList();&#xA;&#xA;&#xA;&#xA;&#xA;Here we force the search to search for the user&#x2019;s actual term, as well as terms that starts with it. This means that any results that actually contains the name will stand up:&#xA;&#xA;&#xA;&#xA;The most important thing about searching is to know that the problem is NOT that you can&#x2019;t find enough information, it is that you find too much information that is not relevant.&#xA;But a better alternative all together might be using RavenDB suggest feature:[HttpPost]&#xA;public JsonResult CompanySuggestions(string term)&#xA;{&#xA;    var rq = RavenSession.Query&lt;Company, Companies_QueryIndex&gt;()&#xA;        .Search(x =&gt; x.Name, term)&#xA;        .Take(5);&#xA;&#xA;    var ravenResults = rq&#xA;        .ToList();&#xA;&#xA;    if(ravenResults.Count &lt; 5)&#xA;    {&#xA;        var suggestionQueryResult = rq.Suggest();&#xA;&#xA;        ravenResults.AddRange(RavenSession.Query&lt;Company, Companies_QueryIndex&gt;()&#xA;                                  .Search(x =&gt; x.Name, string.Join(&quot; &quot;, suggestionQueryResult.Suggestions))&#xA;                                  .Take(5 - ravenResults.Count));&#xA;    }&#xA;&#xA;    return Json(ravenResults.Select(x =&gt; new&#xA;    {&#xA;        id = x.Id,&#xA;        value = x.Name,&#xA;        description = string.Format(&quot;({0}, {1})&quot;, x.Category, x.Location)&#xA;    }));&#xA;}&#xA;&#xA;&#xA;Which result in:&#xA;&#xA;&#xA;What we are doing here is basically query the database for exact matches. Then, if we have no matches, we ask RavenDB to suggest additional words, and then query for those.&#xA;Here are the raw network traffic:Query:  Name:&lt;&lt;lua&gt;&gt;&#xA;        Time: 1 ms&#xA;        Index: Companies/QueryIndex&#xA;        Results: 1 returned out of 1 total.&#xA;&#xA;Suggest: &#xA;    Index: Companies/QueryIndex&#xA;    Term: lua&#xA;    Field=Name    Time: 1 ms&#xA;&#xA;Query:  Name:&lt;&lt;wlua luaz luka luau laua luoa lue luw lut lum luj lui lug luf lwa&gt;&gt;&#xA;        Time: 3 ms&#xA;        Index: Companies/QueryIndex&#xA;        Results: 4 returned out of 22 total.&#xA;&#xA;&#xA;As you can see, the speed difference between this and the first version is non trivial. More than that, note that it found companies with names such as &#x201C;wlua&#x201D;, which was also found in the first (*term*) version.&#xA;Just about any searching strategy would require that you take into account the dataset, the customer requirements, the user behavior and many more. But I would start with the suggestion option before I would go to anything as brute force as *term*.</p>
        </article>
        <article id="article-4434">
            <a href="https://benfoster.io/blog/password-policies-do-not-enforce-security/" target="_blank">
                <h2 class="title mb-6" id="article-4434">Password policies do not enforce security</h2>
            </a>
            <p class="mb-2">by Ben Foster</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 10, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">You know there are problems with an &#x201C;online&#x201D; service when you have to make a phone call in order to log in.</p>
        </article>
        <article id="article-4435">
            <a href="https://benfoster.io/blog/using-the-view-factory-pattern-in-aspnet-mvc/" target="_blank">
                <h2 class="title mb-6" id="article-4435">Using the View Factory Pattern in ASP.NET MVC</h2>
            </a>
            <p class="mb-2">by Ben Foster</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 10, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Use the View Factory Pattern to encapsulate complex view creation in ASP.NET MVC and put your fat controllers on a diet.</p>
        </article>
        <article id="article-4436">
            <a href="https://ayende.com/blog/156865/ravendb-net-memory-management-and-variable-size-obese-documents" target="_blank">
                <h2 class="title mb-6" id="article-4436">RavenDB, .NET memory management and variable size obese documents</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 09, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">We just got a support issue from a customer, regarding out of control memory usage of RavenDB during indexing. That was very surprising, because a few months ago I spent a few extremely intense weeks making sure that this won&#x2019;t happen, building RavenDB auto tuning support. Luckily, the customer was able to provide us with a way to reproduce things locally. And that is where things get interesting. Here are a few fun facts, looking at the timeline of the documents, it was something like this:  Note that the database actually had several hundreds of thousands of documents, and the reason I am showing you this merely to give you some idea about the relative sizes. As it turned out, this particular mix of timeline sizes is quite unhealthy for RavenDB during the indexing period. Why? RavenDB has a batch size, the number of documents that would be indexed in a particular batch. This is used to balance between throughput and latency in RavenDB. The higher the batch, the higher the latency, but the bigger the throughput. Along with the actual number of documents to index, we also have the need to balance things like CPU and memory usage. RavenDB assumes that the cost of processing a batch of documents is roughly related to the number of documents.  In other words, if we just used 1 GB to index 512 documents, we would probably use roughly 2 GB to index the next 1,024 documents. This is a perfectly reasonable assumption to make, but it also hide an implicit assumption in there, that the size of documents is roughly the same across the entire data set. This is important because otherwise, you have the following situation:  Index 512 documents &#x2013; 1 GB consumed, there are more docs, there is more than 2 GB of available memory, double batch size. Index 1,024 documents &#x2013; 2.1 GB consumed, there are more docs, there is more than 4 GB of available memory, double batch size. Index 2,048 documents &#x2013; 3 GB consumes, there are more docs, there is enough memory, double batch size. Index 4,092 documents -&#xA0; and here we get to the obese documents! By the time we get to the obese documents, we have already increased our batch size significantly, so we are actually trying to read a LOT of documents, and suddenly a lot of them are very big. That caused RavenDB to try to consume more and more memory. Now, if it HAD enough memory to do so, it would detect that it is using too much memory, and drop back, but the way this dataset is structured, by the time we get there, we are trying to load tens of thousands of documents, many of them are in the multi megabyte range. This was pretty hard to fix, not because of the actual issue, but because just reproducing this was tough, since we had other issues just getting the data in. For example, if you were trying to import this dataset in, and you choose a batch size that was greater than 128, you would also get failures, because suddenly you had a batch of documents that were extremely large, and all of them happened to fall within a single batch, resulting in a error saving them to the database. The end result of this issue is that we now take into account actual physical size in many more places inside RavenDB, and that this error has been eradicated. We also have much nicer output for the smuggler tool . On a somewhat related note. RavenDB and obese documents. RavenDB doesn&#x2019;t actually have a max document size limitation. In contrast to other document databases, which have a hard limit at 8 or 16 MB, you can have a document as big as you want*. It doesn&#x2019;t mean that you should work with obese documents. Documents that are multi megabytes tend to be&#x2026; awkward to work with, and they generally aren&#x2019;t respecting the most important aspect of document modeling in RavenDB, follow the transaction boundary. What does it means that it is awkward to work with obese documents? Just that, it is awkward. Serialization times are proportional to the document time, as are retrieval time from the server, and of course, the actual memory usage on both server and client are impacted by the size of the documents. It is often easier to work with smaller documents that a few obese ones. * Well, to be truthful, we do have a hard limit, it is somewhere just short of the 2 GB mark, but we don&#x2019;t consider this realistic.</p>
        </article>
        <article id="article-4437">
            <a href="https://benfoster.io/blog/checkbox-lists-in-aspnet-mvc/" target="_blank">
                <h2 class="title mb-6" id="article-4437">CheckBox lists in ASP.NET MVC</h2>
            </a>
            <p class="mb-2">by Ben Foster</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 09, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Creating CheckBox lists in ASP.NET MVC has never been easier.</p>
        </article>
        <article id="article-4438">
            <a href="https://www.meziantou.net/show-file-extension-in-a-sharepoint-document-library.htm" target="_blank">
                <h2 class="title mb-6" id="article-4438">Show file extension in a SharePoint document library</h2>
            </a>
            <p class="mb-2">by G&#xE9;rald Barr&#xE9;</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 09, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">By default, document libraries do not show file extensions. You have to look at the icon to guess the kind of document. However, multiple extensions can have the same icon. So, it could be useful to display the extension.Open SharePoint DesignerEdit the document library viewRight-click on the file</p>
        </article>
        <article id="article-4439">
            <a href="https://ardalis.com/gas-pump-ui-failure/" target="_blank">
                <h2 class="title mb-6" id="article-4439">Gas Pump UI Failure</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 07, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Take a look at this picture (click to enlarge): IMG_3346 What do you notice about the octane stickers? If this were a software application&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-4440">
            <a href="https://ayende.com/blog/156706/geo-location-spatial-searches-with-ravendb-part-vii-ravendb-client-vs-separate-rest-service" target="_blank">
                <h2 class="title mb-6" id="article-4440">Geo Location &amp; Spatial Searches with RavenDB&#x2013;Part VII&#x2013;RavenDB Client vs. Separate REST Service</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: July 06, 2012
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In my previous post, I discussed how we put the GeoIP dataset in a separate database, and how we access it through a separate session. I also asked, why use RavenDB Client at all? I mean, we might as well just use the REST API and expose a service.  Here is how such a service would look like, by the way: public class GeoIPClient : IDisposable&#xA;{&#xA;    private readonly HttpClient httpClient;&#xA;&#xA;    public GeoIPClient(string url, ICredentials credentials)&#xA;    {&#xA;        httpClient = new HttpClient(new HttpClientHandler{Credentials = credentials})&#xA;        {&#xA;            BaseAddress = new Uri(url),&#xA;                &#xA;        };&#xA;    }&#xA;&#xA;    public Task&lt;Location&gt; GetLocationByIp(IPAddress ip)&#xA;    {&#xA;        if (ip.AddressFamily != AddressFamily.InterNetwork)&#xA;            return null;&#xA;&#xA;        var reverseIp = (long)BitConverter.ToUInt32(ip.GetAddressBytes().Reverse().ToArray(), 0);&#xA;&#xA;        var query = string.Format(&quot;Start_Range:[* TO 0x{0:X16}] AND End_Range:[0x{0:X16} TO NULL]&quot;, reverseIp);&#xA;&#xA;        return httpClient.GetAsync(&quot;indexes/Locations/ByRange?pageSize=1&amp;&quot; &#x2B; query)&#xA;            .ContinueWith(task =&gt; task.Result.Content&#xA;                .ReadAsAsync&lt;QueryResult&gt;()&#xA;                .ContinueWith(task1 =&gt; task1.Result.Results.FirstOrDefault())).Unwrap();&#xA;&#xA;    } &#xA;&#xA;    public void Dispose()&#xA;    {&#xA;        httpClient.Dispose();&#xA;    }&#xA;}&#xA;&#xA;&#xA;I think that you can agree that this is fairly simple and easy to understand. It make it explicit that we are just going to query the database and it is even fairly easy to read.&#xA;Why not go with that route?&#xA;Put simply, because it is doing only about 10% of the things that we do in the RavenDB Client. The first thing that pops to mind is that this service doesn&#x2019;t support caching, HTTP ETag responses, etc. That means that we would have to implement that ourselves. This is decidedly non trivial. &#xA;The RavenDB Client will automatically cache all data for you if it can, you don&#x2019;t have to think about it, worry about it or even pay it any mind. It is just there and working hard to make sure that you application is more performant.&#xA;Next, this will only support Windows Authentication. RavenDB also support OAuth, so if you wanted to run this on RavenHQ, for example, which requires OAuth. You would have to write some additional stuff as well.&#xA;Finally, using the RavenDB Client leaves us open to do additional things in the future very easily, while using a dedicate service means that we are on the hook for implementing from scratch basically anything else that we want.&#xA;Sure, we could implement this service using RavenDB Client, but that is just adding layers, and I really don&#x2019;t like that. There is no real point.</p>
        </article>
        <div class="button flex justify-between">
            <a href="443.html"><span class="back arrow"></span></a>

            <a href="445.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>