
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 599 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5981">
            <a href="https://ayende.com/blog/3889/solving-problems-with-messaging-creating-a-new-user" target="_blank">
                <h2 class="title mb-6" id="article-5981">Solving problems with messaging: Creating a new user</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 22, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Another example, which is naturally asynchronous, is the way most web sites create a new user. This is done in a two stage process. First, the user fills in their details and initial validation is done on the user information (most often, that we have no duplicate user names).  Then, we send an email to the user and ask them to validate their email address. It is only when they validate their account that we will create a real user and let them login into the system. If a certain period of time elapsed (24 hours to a few days, usually), we need to delete any action that we perform and make that user name available again.  When we want to solve the problem with messaging, we run into an interesting problem. The process of creating the user is a multi message process, in which we have to maintain the current state. Not only that, but we also need to deal with the timing issues build into this problem.  It gets a bit more interesting when you consider the cohesiveness of the problem. Let us consider a typical implementation.  First, we have the issue of the CreateUser page:     Then we have the process of actually validating the user:     And, lest us forget, we have a scheduled job to remove expired user account reservations:     We have the logic for this single feature scattered across three different places, which execute in different times, and likely reside in different projects.  Not only that, but if we want to make the experience pleasant for the user, we have a lot to deal with. Sending an email is slow. You don&#x2019;t want to put this as a part of synchronous process, if only because of the latency it will add to showing a response to the user. It is also an unreliable process. And we haven&#x2019;t even started to discuss error handling yet.  For that matter, sending an email is not something that you should just new an SmtpClient for. You have to make sure that someone doesn&#x2019;t use your CreateUser page to bomb someone else&#x2019;s mailbox, you need to keep track of emails for regulatory reasons, you need to detect invalid emails (from SMTP response), etc.   Let us see how we can do this with async messaging, first we will tackle the register user and send an email to validate their email:       When the user click on the link in their email, we have the following set of interactions:     And, of course, we need to expire the reserved username:     In the diagrams, everything that happens in the App Server is happening inside the context of a single saga. This is a single class that manages all the logic relating to the creation of a new user. That is good in itself, but I gain a few other things from this approach.  Robustness from errors and fast response times are one thing, of course, but there are other things that I am not touching here. In the previous example, I have shown a very simplistic approach to handling the behavior, where everything is happening inline. This is done because, frankly, I didn&#x2019;t have the time to sit and draw all the pretty boxes for the sync example.   In the real world, we would want to have pretty much the same separation in the sync example as well. And now we are running into even more &#x201C;interesting&#x201D; problems. Especially if we started out with everything running locally. The sync model make it really hard to ignore the fallacies of distributed computing. The async model put them in your face, and make you deal with them explicitly.  The level of complexity that you have to deal with with async messaging remains more or less constant when you try to bring the issues of scalability, fault tolerance and distribution. They most certainly do not stay the same when you have sync model.  Another advantage of this approach is that we are using the actor model, which make it very explicit who is doing what and why, and allow us to work on all of those in an independent fashion.  The end result is a system compromised of easily disassembled parts. It is easy to understand what is going on because the interactions between the parts of the system are explicit, understood and not easily bypassed.</p>
        </article>
        <article id="article-5982">
            <a href="https://ayende.com/blog/3888/nhibernate-hql-ast-parser" target="_blank">
                <h2 class="title mb-6" id="article-5982">NHibernate HQL AST Parser</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 22, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Steve from iMeta has been doing a lot of work on the HQL AST Parser. For a long time, that has been a really troublesome pain point for us, since this is a prerequisite for a lot of other features. It is also one of two parts of NHibernate that really need significant refactoring because the way they are built right now make it hard to do stuff (the second being the semantic model for the mapping, which the Fluent NHibernate guys are working on).  Just to give you two features that should make you drool which depends on this work:     Full Linq implementation    Set based DML operations on top of the domain model   In true Open Source manner, you can view the work being done right now: http://unhaddins.googlecode.com/svn/trunk, Checkout the ANTRL-HQL project.  This is something that several members of the NHibernate project has tried doing in the past, but the scope of the work is very big, and require full time work for an extended period of time. iMeta has been sponsoring Steve&#x2019;s work on NHibernate, which make this possible.   I have been going through the code, and I am literally jumping up and down in excitement. It is still very early, but it is already clear that Steve has taken us much farther than before, and it is possible to see the end. The most significant milestone has been reached, and we are currently able to execute ( a very simple ) query and get the results back:     Yes, it also integrates with NH Prof :-)</p>
        </article>
        <article id="article-5983">
            <a href="https://ayende.com/blog/3887/5-books-that-i-am-waiting-for" target="_blank">
                <h2 class="title mb-6" id="article-5983">5 Books that I am waiting for&#x2026;</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 21, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, technically I am not expecting this any longer, since it is out.     One of the best sources for information about NHibernate is finally available!  Moving on to books that aren&#x2019;t out yet, but I am really looking for, and have nothing to do with technology (well, they are both SF, but other than that):  &#xA0;   Both are really good, and I have been reading (well, hearing) the series for a long time. Don&#x2019;t expect to hear much from me the next day or two after each of them out.  And, of course, this book is on Amazon as well:    Although you can read it right now, it feels more real that you can see it in Amazon.  I am still trying to convince Manning that Oren Eini is not a fiction, and that it should really appear on the cover as well.  And this is not a book, but I am very excited about this:    I should have this next week, and then my time would get even busier, because the Kindle is the ultimate impulse read device.</p>
        </article>
        <article id="article-5984">
            <a href="https://ayende.com/blog/3886/progressive-net-event" target="_blank">
                <h2 class="title mb-6" id="article-5984">Progressive.NET Event</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 21, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Skills Matter is co-organising The Progressive .NET Tutorials with some of us. This will be a really exciting 3 day long event with 2 tracks featuring half day and full day Tutorials by me, David Laribee, Gojko Adzic, Hammet, Ian Cooper, Mike Hadlow, Scott Belware and Sebastien Lambla.     For the full programme and description of the tutorials, check out: http://skillsmatter.com/event/open-source-dot-net/progressive-dot-net-exchange  If you are going to book before Feb 28th, just put SM1368-622459-33L (in the Promo Code field) and&#xA0; pay just &#xA3;350 (normal price &#xA3;1000). I hear that the tickets are going fast, so if you would like to secure a place and claim your discount &#x2013; do hurry up!   As a bonus, you can stay for the next week and enroll in the NHibernate course that I am also giving.    The last event where we did something similar was Kazien Conf, and we are going to try to reproduce the same thing in the Seattle ALT.Net conference in a week as well.   I can&#x2019;t talk about what will happen next week, but the previous workshops were a tremendous success. We are going to run 12 sessions during this event, and I am finding myself in the problematic position of wanting to be in at least three places at the same time, while I can only manage two (maybe I need to let Barid out as well*).  * Bonus points for anyone who manages to track down that reference.</p>
        </article>
        <article id="article-5985">
            <a href="https://ayende.com/blog/3885/dictionary-enum-t-puzzler" target="_blank">
                <h2 class="title mb-6" id="article-5985">Dictionary&lt;Enum,T&gt; Puzzler</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 21, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A while ago in the NHibernate mailing list we got a report that NHibernate is making use of a dictionary with an enum as the key, and that is causing a big performance issue.  The response was almost unanimous, I think, &#x201C;what?! how can that be?!!?&#x201D;. Several people went in to and tried to figure out what is going on there. The answer is totally non oblivious, Dictionary&lt;K,V&gt; force boxing for any value type that is used as the key.  That sound completely contradictory to what you would expect, after all, one of the major points in generics was the elimination of boxing, so what happened?  Well, the issue is that Dictionary&lt;K,V&gt; has to compare the keys, and for that, it must make some assumptions about the actual key. It is abstracted into EqualityComparer, and that is where the actual problem starts. EqualityComparer has some special cases for the common types (anything that is IEquatable&lt;T&gt;, which most of the usual suspects implements), to speed this up.  The problem is that the fall back is to an ObjectComparer, and that, of course, will box any value type.  And enum does not implements IEquatable&lt;T&gt;&#x2026;  Omer has a good coverage on the subject, with really impressive results. Take a look at his results.     I am not going to steal his thunder, but I suggest going over and reading the code, it is very elegant.</p>
        </article>
        <article id="article-5986">
            <a href="https://ayende.com/blog/3884/unmanaged-api-fun-finding-out-msmq-subqueues-names-in-c" target="_blank">
                <h2 class="title mb-6" id="article-5986">Unmanaged API &#x201C;fun&#x201D;, finding out MSMQ subqueues names in C#</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 21, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I needed to get a list of subqueues of a queue, and there is no way of actually doing that in managed code. I decided that I can still use P/Invoke and just make the appropriate unmanaged calls. In hindsight, it would have been significantly simpler to just build an unmanaged DLL in C&#x2B;&#x2B;/CLR, but I was already too deep, and I can never remember how to properly compile a C&#x2B;&#x2B; app anymore.  I finally had to slap myself a couple of times and remind me that I was a C&#x2B;&#x2B; developer for a long time, and I damn well should remember how to treat memory like it was something both sacred and abused. I had tested that on a Windows 2008 64 bits machine. During this project, I also found out that there is basically no information at all about this sort of thing, so I am putting the code here.          public class MsmqUtil&#xA;&#xA;    {&#xA;&#xA;        internal const int PROPID_MGMT_QUEUE_SUBQUEUE_NAMES = 27;&#xA;&#xA;        internal const ushort VT_NULL = 1;&#xA;&#xA;    &#xA0;&#xA;&#xA;        public static unsafe string[] GetMsmqSubQueueNames(string queueFormatName)&#xA;&#xA;        {&#xA;&#xA;            var props = new MQMGMTPROPS {cProp = 1};&#xA;&#xA;            var variant = new MQPROPVariant {vt = VT_NULL};&#xA;&#xA;            try&#xA;&#xA;            {&#xA;&#xA;                props.aPropID = Marshal.AllocHGlobal(sizeof (int));&#xA;&#xA;                Marshal.WriteInt32(props.aPropID, PROPID_MGMT_QUEUE_SUBQUEUE_NAMES);&#xA;&#xA;    &#xA0;&#xA;&#xA;                props.aPropVar = Marshal.AllocHGlobal(Marshal.SizeOf(typeof (MQPROPVariant)));&#xA;&#xA;                Marshal.StructureToPtr(new MQPROPVariant {vt = VT_NULL}, props.aPropVar, false);&#xA;&#xA;    &#xA0;&#xA;&#xA;                props.status = Marshal.AllocHGlobal(sizeof (int));&#xA;&#xA;                Marshal.WriteInt32(props.status, 0);&#xA;&#xA;    &#xA0;&#xA;&#xA;                var result = MQMgmtGetInfo(null, &quot;queue=&quot; &#x2B; queueFormatName, ref props);&#xA;&#xA;                if (result != 0)&#xA;&#xA;                    throw new Win32Exception(result);&#xA;&#xA;    &#xA0;&#xA;&#xA;                if (Marshal.ReadInt32(props.status) != 0)&#xA;&#xA;                {&#xA;&#xA;                    return null;&#xA;&#xA;                }&#xA;&#xA;    &#xA0;&#xA;&#xA;                variant = (MQPROPVariant) Marshal.PtrToStructure(props.aPropVar, typeof (MQPROPVariant));&#xA;&#xA;    &#xA0;&#xA;&#xA;                var subQueues = new List&lt;string&gt;();&#xA;&#xA;                for (int i = 0; i &lt; variant.Val.calpwstr.cElems; i&#x2B;&#x2B;)&#xA;&#xA;                {&#xA;&#xA;                    var item = new string(variant.Val.calpwstr.pElems[i]);&#xA;&#xA;                    subQueues.Add(item);&#xA;&#xA;                }&#xA;&#xA;                return subQueues.ToArray();&#xA;&#xA;            }&#xA;&#xA;            finally&#xA;&#xA;            {&#xA;&#xA;                if (variant.vt != VT_NULL)&#xA;&#xA;                {&#xA;&#xA;                    for (var i = 0; i &lt; variant.Val.calpwstr.cElems; i&#x2B;&#x2B;)&#xA;&#xA;                    {&#xA;&#xA;                        MQFreeMemory(variant.Val.calpwstr.pElems[i]);&#xA;&#xA;                    }&#xA;&#xA;                    MQFreeMemory(variant.Val.calpwstr.pElems);&#xA;&#xA;                }&#xA;&#xA;                Marshal.FreeHGlobal(props.aPropID);&#xA;&#xA;                Marshal.FreeHGlobal(props.aPropVar);&#xA;&#xA;                Marshal.FreeHGlobal(props.status);&#xA;&#xA;            }&#xA;&#xA;        }&#xA;&#xA;    &#xA0;&#xA;&#xA;        [DllImport(&quot;mqrt.dll&quot;)]&#xA;&#xA;        internal static extern int MQMgmtGetInfo([MarshalAs(UnmanagedType.BStr)] string computerName,&#xA;&#xA;                                                 [MarshalAs(UnmanagedType.BStr)] string objectName,&#xA;&#xA;                                                 ref MQMGMTPROPS mgmtProps);&#xA;&#xA;    &#xA0;&#xA;&#xA;        [DllImport(&quot;mqrt.dll&quot;)]&#xA;&#xA;        internal static extern unsafe int MQFreeMemory(void* queue);&#xA;&#xA;    &#xA0;&#xA;&#xA;        [StructLayout(LayoutKind.Sequential)]&#xA;&#xA;        internal struct CALPWSTR&#xA;&#xA;        {&#xA;&#xA;            public uint cElems;&#xA;&#xA;            public unsafe char** pElems;&#xA;&#xA;        }&#xA;&#xA;    &#xA0;&#xA;&#xA;        [StructLayout(LayoutKind.Sequential)]&#xA;&#xA;        internal struct MQMGMTPROPS&#xA;&#xA;        {&#xA;&#xA;            public uint cProp;&#xA;&#xA;            public IntPtr aPropID;&#xA;&#xA;            public IntPtr aPropVar;&#xA;&#xA;            public IntPtr status;&#xA;&#xA;        }&#xA;&#xA;    &#xA0;&#xA;&#xA;        [StructLayout(LayoutKind.Sequential, Size = 16)]&#xA;&#xA;        internal struct MQPROPVariant&#xA;&#xA;        {&#xA;&#xA;            public ushort vt;&#xA;&#xA;            public ushort wReserved1;&#xA;&#xA;            public ushort wReserved2;&#xA;&#xA;            public ushort wReserved3;&#xA;&#xA;            public UnionedVariant Val; //8&#xA;&#xA;        }&#xA;&#xA;    &#xA0;&#xA;&#xA;        [StructLayout(LayoutKind.Explicit, Size = 8)]&#xA;&#xA;        internal struct UnionedVariant&#xA;&#xA;        {&#xA;&#xA;            [FieldOffset(0)] public uint ulVal; /* VT_UI4    */&#xA;&#xA;            [FieldOffset(0)] public CALPWSTR calpwstr; /* VT_VECTOR | VT_LPWSTR  */&#xA;&#xA;        }&#xA;&#xA;    }</p>
        </article>
        <article id="article-5987">
            <a href="https://ayende.com/blog/3883/challange-the-sample-legacy-database-from-hell" target="_blank">
                <h2 class="title mb-6" id="article-5987">Challange</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I need a legacy database for my NHibernate course. I can take some of the creepy ones in the NHibernate test suite, but I think that would be evil to the students.&#xA;Anyone can come up with a good (um, bad) legacy database that is also small enough to be a good example?</p>
        </article>
        <article id="article-5988">
            <a href="https://ayende.com/blog/3882/challenge-write-a-self-extracting-program" target="_blank">
                <h2 class="title mb-6" id="article-5988">Challenge</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I had to do this yesterday, and it was fun enough to post about it. Not only that, but the solution that I came up with is enough of a twist that I think would make this hard for many people.  Here is the challenge:     Given a zip file, produce an executable that when run on another machine, will unzip the content of the zip file on that machine. (nitpicker corner: yes, there are many ways to cheat this, but don&#x2019;t try to cheat). You may use any library and process that you want, but the end result must be a standalone file that can be copied to an separate machine and when execute will extract the content of the zip file.    You can assume that on that separate machine you will have the .Net framework installed, but you cannot depend on the presence of external libraries. I&#x2019;ll note that the default compression streams in the .Net framework are not applicable here, since they can&#x2019;t handle zip files (which contains a directory structure), they can only handle zip streams.   I took me roughly 30 minutes, most of which were spent dealing with ICSharpCode.SharpZipLib API, which is not something that I dealt with before.</p>
        </article>
        <article id="article-5989">
            <a href="https://ayende.com/blog/3881/production-errors-best-practices" target="_blank">
                <h2 class="title mb-6" id="article-5989">Production Errors Best Practices</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I have been practicing deployment lately, and today we have gotten everything squared away very nicely, only to be confronted with a failure when we actually run the app.  The error was: KeyNotFoundException, because we forgot to move some data to the QA database.&#xA0; We fixed the error, but I also change the error message that we were getting.  Now, we get the following error for this scenario:     Rhino.ServiceBus.Exceptins.InvalidDeploymentException: ERROR_ORDER_ATTRIB_NOT_FOUND: Could not find order attribute with the name: CorrelationId     This is usually an indication that the database has not been properly prepared for the deployment.      You need to add the order attribute to the appropriate table.      Important! If the order attribute &#x27;CorrelationId&#x27; is missing, it is likely that other required order attributes are also missing.      Please refer to the deployment guide about the required attributes. If you don&#x27;t find the required attributes in the deployment guide, please shout at the developer, preferably at 2 AM.   There are a couple of important things that I want to discuss about this error:     It is very explicit about what is going on.    It contains the information about how to fix the error.    It warns about additional problems that this may relate to.    It contains a uniquely identifying string that can be used to clearly communicate the error, placed in Google or put in a knowledge base.</p>
        </article>
        <article id="article-5990">
            <a href="https://ayende.com/blog/3880/resolving-graphics-problems-with-nh-prof" target="_blank">
                <h2 class="title mb-6" id="article-5990">Resolving graphics problems with NH Prof</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: February 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Christopher has good coverage on how we solved and isolated a problem that we&#xA0; run into using NH Prof. In essence, the issue was messed up text being reported by some of the users.  To be frank, it was a very frustrating issue, because none of us could come up with a repro, and the only thing that sometimes seemed to help is updating the graphic drivers. Having to update your graphic drivers to use NH Prof isn&#x2019;t something that I consider appropriate. It reminded me of the time that to deploy a system that I built, we had to replace the organization domain controller. It is&#x2026; not a place where you want to be.   We had accidently reproduced it in a SharedView session, and I got to see Christopher and Rob get to the root of the issue in a matter of minutes. It is not an area that I have any sort of expertise on, and it was fascinating to watch.   And, of course, we got rid of the problem that NH Prof had.</p>
        </article>
        <div class="button flex justify-between">
            <a href="598.html"><span class="back arrow"></span></a>

            <a href="600.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>