
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 578 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5771">
            <a href="https://ayende.com/blog/4023/nhibernate-queries-examples" target="_blank">
                <h2 class="title mb-6" id="article-5771">NHibernate Queries - Examples</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 19, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Today was the first day of my NHibernate course, and I think that it might be good to point out a few of the samples that we worked with. Those are pretty basic NHibernate queries, but they are probably going to be useful for beginners.&#xA;Let us take my usual Blog model, and see what kind of queries (and results) we can come up with:&#xA; &#xA;Let us find a blog by its identifier:&#xA;&#xA;&#xA;var blog = s.Get&lt;Blog&gt;(1);&#xA;&#xA;&#xA;Which results in:&#xA;&#xA;We can also try:&#xA;&#xA;var blog = s.Load&lt;Blog&gt;(1);&#xA;&#xA;Which would result in&#x2026; absolutely no SQL queries. You can look at a more deep discussion of that here.&#xA;Now, let us try to search by a property:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Restrictions.Eq(&quot;Title&quot;, &quot;Ayende @ Rahien&quot;))    .List&lt;Blog&gt;();&#xA;&#xA;  &#xA;Which results in:&#xA; &#xA;If we try to make the same with HQL, it would look:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.Title = :title&quot;)    .SetParameter(&quot;title&quot;,&quot;Ayende @ Rahien&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which results in slight different SQL than using the criteria:&#xA;&#xA0;&#xA;What about trying a more complex conditional? Let us try to see comparing two properties:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Restrictions.Eq(&quot;Title&quot;,&quot;Ayende @ Rahien&quot;))    .Add(Restrictions.Eq(&quot;Subtitle&quot;, &quot;Send me a patch for that&quot;))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which results in:&#xA; &#xA;Let us do that again, but using two properties using an OR:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Restrictions.Disjunction()             .Add(Restrictions.Eq(&quot;Title&quot;, &quot;Ayende @ Rahien&quot;))             .Add(Restrictions.Eq(&quot;Subtitle&quot;, &quot;Send me a patch for that&quot;)))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which would result in:&#xA; &#xA;We can also execute the same SQL using the following syntax:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(            Restrictions.Eq(&quot;Title&quot;, &quot;Ayende @ Rahien&quot;) ||             Restrictions.Eq(&quot;Subtitle&quot;, &quot;Send me a patch for that&quot;)        )    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Doing the same using HQL would be:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.Title = :title and b.Subtitle = :subtitle&quot;)    .SetParameter(&quot;title&quot;,&quot;Ayende @ Rahien&quot;)    .SetParameter(&quot;subtitle&quot;, &quot;Send me a patch for that&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which results in:&#xA; &#xA;And changing that to an OR is pretty self explanatory :-)&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.Title = :title or b.Subtitle = :subtitle&quot;)    .SetParameter(&quot;title&quot;,&quot;Ayende @ Rahien&quot;)    .SetParameter(&quot;subtitle&quot;, &quot;Send me a patch for that&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Giving us:&#xA; &#xA;Let us try something a bit more complex, finding a blog by a post title:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .CreateCriteria(&quot;Posts&quot;)    .Add(Restrictions.Eq(&quot;Title&quot;,&quot;NHibernate Rocks&quot;))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;That gives us:&#xA; &#xA;You will note that we force a load of the Posts collection. We can try something else, though:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Subqueries.PropertyIn(&quot;id&quot;,        DetachedCriteria.For&lt;Post&gt;()            .Add(Restrictions.Eq(&quot;Title&quot;,&quot;NHibernate Rocks&quot;))            .SetProjection(Projections.Property(&quot;Blog.id&quot;))        ))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which would give us the same result, but without loading the Posts collection:&#xA; &#xA;This is a pretty common example of changing the way that we compute complex conditionals when we want to avoid wide result sets.&#xA;Let us do the same with HQL:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b join b.Posts p where p.Title = :title&quot;)    .SetParameter(&quot;title&quot;, &quot;NHibernate Rocks&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which would result:&#xA; &#xA;We have the same issue as with the first Criteria API, and we can resolve it in the same way:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.id in (from Post p where p.Title = :title)&quot;)    .SetParameter(&quot;title&quot;, &quot;NHibernate Rocks&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;And the same result as in the Criteria API show us:&#xA; &#xA;And the final test, let us try to find a blog that has a post posted by a specific user:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Subqueries.PropertyIn(&quot;id&quot;,        DetachedCriteria.For&lt;Post&gt;()            .SetProjection(Projections.Property(&quot;Blog.id&quot;))            .CreateCriteria(&quot;User&quot;)            .Add(Restrictions.Eq(&quot;Username&quot;,&quot;Ayende&quot;))        ))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;And this give us:&#xA; &#xA;The same thing with HQL will give us:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.id in (from Post p where p.User.Username = :user)&quot;)    .SetParameter(&quot;user&quot;,&quot;Ayende&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;  &#xA;And that results:</p>
        </article>
        <article id="article-5772">
            <a href="https://ayende.com/blog/4022/code-from-persistence-net-nhibernate-workshops" target="_blank">
                <h2 class="title mb-6" id="article-5772">Code from Persistence.NET NHibernate Workshops</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The relevant code from the live coding exercise can be found here, and it is probably going to be the basis of most of the demos that I am going to do.  Have fun playing with it&#x2026;</p>
        </article>
        <article id="article-5773">
            <a href="https://ayende.com/blog/4021/who-is-the-responsible-party" target="_blank">
                <h2 class="title mb-6" id="article-5773">Who is the responsible party?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Object Oriented design is all about placing behavior and data together, of making the object responsible for its own operations. The problem then becomes identifying which object is responsible for what. This is usually pretty easy, since the natural owner of an operation is usually clear. Note that I don&#x2019;t much care for the choice people make between things like parent.AddChild(child) vs. child.AddTo(parent). Both are equally good from my point of view. What I don&#x2019;t want to see is this:     parent.Children.Add(child);     child.Parent = parent;   The reason for that is quite simple. This is a serious violation of the Tell, Don&#x2019;t Ask protocol, and it means that someone is missing the pointing between the ownership of a particular operation and the instigator of that operation. The instigator is usually the UI, requesting that something will happen. Bad code will usually put a lot of the logic in the instigator side, rather than on the owner side.   Then we move into issues of cohesiveness and coupling, which guides us further in understanding how to place the appropriate responsibilities. All logic related to a particular aspect of the application should reside in the same location, so it is easy to work with, modify and change.  But by far the most common error I see people make is placing responsibilities on the instigator rather than on other parts of the system. There should be a very clear distinction between the two. Other than that, there is a lot of stuff that is just experience and understanding of the actual system.  In the end, all systems are refactorable, so you shouldn&#x2019;t be afraid to make mistakes.</p>
        </article>
        <article id="article-5774">
            <a href="https://ayende.com/blog/4020/nh-prof-release-candidate-is-out" target="_blank">
                <h2 class="title mb-6" id="article-5774">NH Prof</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well,  After quite a while of developing on a private branch, it is time to make NH Prof RC public. We have worked on several new features, but chief among them was performance. As I outlined in the past, we have to rip apart the internal communication mechanisms inside NH Prof, to allow it to react well under high load.  There are some things that you need to know first, though:     Session factory stats is currently disabled, there is no reason except that some things had to be cut in order to release the RC. It will be back soon.    The RC bits are not compatible with the beta bits. If you want to use RC UI with your application (and you should), you need to use the RC appender.   As usual, you can find it here, build 260 or up.  Have fun, and tell us what you think.</p>
        </article>
        <article id="article-5775">
            <a href="https://ayende.com/blog/4019/mutable-linq-expressions" target="_blank">
                <h2 class="title mb-6" id="article-5775">Mutable Linq Expressions</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">As you probably know, System.Linq.Expression is considered to be immutable. This is a major pain when it comes to working with them, and many Linq providers end up creating a parallel hierarchy of expressions that are mutable.  What I am going to show you now is probably going to get some people in Microsoft pretty angry with me, but hey, if they used ReSharper, they wouldn&#x2019;t have this problem. In a true TDD fashion, let us start with a failing test:          var constant = Expression.Constant(5);&#xA;var captureReference = constant;&#xA;&#xA;// put something here that may not change the captureReference variable&#xA;&#xA;Debug.Assert(ReferenceEquals(constant, captureReference));&#xA;Debug.Assert(constant.Value.Equals(2));&#xA;  &#xA;&#xA;&#xA;We then move on to look at the actual ConstantExpression code:&#xA;&#xA; &#xA;&#xA;Do you see the hook that I am going to plug into?&#xA;&#xA;Coming back to my ReSharper plug, it is pretty easy to see that value is a read only value, but it is not mark as such. This is one of ReSharper&#x2019;s suggestions that came in 4.0, and made me aware of the reasons to do so. Because it is not mark as such, I have a way in&#x2026;&#xA;&#xA;All it requires is a bit of LCG (lightweight code generation), such as this:&#xA;&#xA;&#xA;  &#xA;    public static Action&lt;ConstantExpression, object&gt; CreateSetAccessor()&#xA;{&#xA;    var accessor = new DynamicMethod(&quot;SetValue&quot;, typeof (void), new Type[]&#xA;    {&#xA;        typeof (ConstantExpression),&#xA;        typeof (object)&#xA;    }, true);&#xA;    var generator = accessor.GetILGenerator();&#xA;    generator.Emit(OpCodes.Ldarg_0);&#xA;    generator.Emit(OpCodes.Ldarg_1);&#xA;    generator.Emit(OpCodes.Stfld,typeof(ConstantExpression).GetField(&quot;value&quot;,BindingFlags.Instance|BindingFlags.NonPublic));&#xA;    generator.Emit(OpCodes.Ret);&#xA;    return (Action&lt;ConstantExpression, object&gt;)accessor.CreateDelegate(typeof(Action&lt;ConstantExpression,object&gt;));&#xA;}&#xA;  &#xA;&#xA;&#xA;And now we have a passing test:&#xA;&#xA;&#xA;  &#xA;    var valueSetAccessor = CreateSetAccessor();&#xA;var constant = Expression.Constant(5);&#xA;var captureReference = constant;&#xA;&#xA;valueSetAccessor(constant, 2);&#xA;&#xA;Debug.Assert(ReferenceEquals(constant, captureReference));&#xA;Debug.Assert(constant.Value.Equals(2));&#xA;  &#xA;&#xA;&#xA;Now, I don&#x2019;t really recommend doing this. This is unsupported, etc.&#xA;&#xA;But it is a cool trick, and it applies pretty much generically across all of the Expression classes.</p>
        </article>
        <article id="article-5776">
            <a href="https://ayende.com/blog/4018/nh-prof-for-hibernate-now-in-closed-beta" target="_blank">
                <h2 class="title mb-6" id="article-5776">NH Prof for Hibernate &#x2013; Now in Closed Beta</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, I heard the requirement quite clearly, so let us see how this looks like, given the following code:          public class SelectBlogByIdUsingCriteria extends AbstractScenario {&#xA;&#xA;    @Override&#xA;    protected void doExecute(SessionFactory factory) {&#xA;        doInTransaction(new SessionCallback&lt;Object&gt;() {&#xA;            @Override&#xA;            public Object execute(Session session) {&#xA;                return session.createCriteria(Blog.class)&#xA;                .add(Restrictions.idEq(1))&#xA;                .list();            &#xA;            }&#xA;        });&#xA;&#xA;    }&#xA;}&#xA;  &#xA;&#xA;&#xA;We get the following result:&#xA;&#xA; &#xA;&#xA;I am currently looking for people to actually do field testing of this for me.&#xA;&#xA;If you are interested, please ping me via email.</p>
        </article>
        <article id="article-5777">
            <a href="https://ayende.com/blog/4017/the-things-that-you-have-to-do-to-protect-your-application" target="_blank">
                <h2 class="title mb-6" id="article-5777">The things that you have to do to protect your application</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The following is NHProf&#x2019;s Main method:     Each of the currently existing conditions (and I am pretty sure that they will grow) is there because of bug reports from the field.   It gets&#x2026; interesting, sometimes, the things that user do to my poor app.</p>
        </article>
        <article id="article-5778">
            <a href="https://ayende.com/blog/4016/funny-comments" target="_blank">
                <h2 class="title mb-6" id="article-5778">Funny comments</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 16, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I don&#x2019;t know what the story behind this is, but I really want to:              /**&#xA;     * Determine an identifier for the given transaction appropriate for use in caching/lookup usages.&#xA;     * &lt;p/&gt;&#xA;     * Generally speaking the transaction itself will be returned here.  This method was added specifically&#xA;     * for use in WebSphere and other unfriendly JEE containers (although WebSphere is still the only known&#xA;     * such brain-dead, sales-driven impl).&#xA;     *&#xA;     * @param transaction The transaction to be identified.&#xA;     * @return An appropropriate identifier&#xA;     */&#xA;    public Object getTransactionIdentifier(Transaction transaction);&#xA;  &#xA;&#xA;&#xA;This is part of the Hibernate source code.</p>
        </article>
        <article id="article-5779">
            <a href="https://ayende.com/blog/4015/paypal-it-may-be-your-account-but-you-arent-going-to-use-it" target="_blank">
                <h2 class="title mb-6" id="article-5779">PayPal: It may be your account, but you aren&#x2019;t going to use it</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 15, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In general, I have been very happy with PayPal over the years. Recently, however, I have become quite frustrated with it. I am using it quite often to send and accept money to people I am working with, and for a while now, I have been unable to do so.  Apparently, my actions has been caught by some automated security systems and they decided to ban any transactions on my account. That is actually acceptable from my point of view. I feel better knowing that there are active attempts to protect me from fraud or theft.   What I don&#x2019;t find acceptable is that when I called PayPal to try to resolve that, the response that I got was: It is an act of God, nothing we mere mortals can do about it.  I understand all about false positives, and aside from the annoyance factor, they are acceptable if they aren&#x2019;t happening very often. What I am not able to comprehend is responses such as: No one in PayPal can help you. And that is after I already escalated to a supervisor!  I recorded my conversation with PayPal, you can download it here or just listen:         I find the whole thing utterly infuriating, and totally unacceptable.</p>
        </article>
        <article id="article-5780">
            <a href="https://ayende.com/blog/4014/fixing-test-failures-using-binary-search" target="_blank">
                <h2 class="title mb-6" id="article-5780">Fixing test failures using binary search</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 15, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">With Rhino Queues, I have a very serious problem. While all the tests would run if they were run individually, running them in concrete would cause them to fail. That is a pretty common case of some test affecting the global state of the system (in fact, the problem is one test not releasing resources and all other tests failing because they tried to access a locked resource).  The problem is finding out which. By the way, note that I am making a big assumption here, that there is only one test that does so, but for the purposes of this discussion, it doesn&#x2019;t matter, the technique works for both options.  At the heart of it, we have the following assumption:     If you have tests that cause failure, and you don&#x2019;t know which, start by deleting tests.   In practice, it means:     Run all unit tests    If the unit tests failed:         Delete a unit test file with all its tests      Go to first step       If the unit tests passed:         Revert deletion of a unit test file in reverse order to their deletion      Go to step 1      When you have only a single file, you have pinpointed the problem.   In my case, unit tests started to consistently pass when I deleted all of those ( I took a shortcut and delete entire directories ):     So I re-introduced UsingSubQueues, and&#x2026; the tests passed.  So I re-introduced Storage/CanUseQueue and&#x2026; the tests passed.  This time, I re-introduced Errors, because I have a feeling that QueueIsAsync may cause that, and&#x2026; the tests FAILED.  We have found the problem. Looking at the Errors file, it was clear that it wasn&#x2019;t disposing resources cleanly, and that was a very simple fix.  The problem wasn&#x2019;t the actual fix, the problem was isolating it.  With the fix&#x2026; the tests passed. So I re-introduced all the other tests and run the full build again.  Everything worked, and I was on my way :-)</p>
        </article>
        <div class="button flex justify-between">
            <a href="577.html"><span class="back arrow"></span></a>

            <a href="579.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>