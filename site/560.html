
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 560 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5591">
            <a href="https://ayende.com/blog/4462/entity-framework-profiler-is-released" target="_blank">
                <h2 class="title mb-6" id="article-5591">Entity Framework Profiler is released!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 14, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The release got delayed because I moved apartments (which also explains why I am way behind on email), but it is out now.</p>
        </article>
        <article id="article-5592">
            <a href="https://ayende.com/blog/4461/profiler-subscriptions-are-now-available" target="_blank">
                <h2 class="title mb-6" id="article-5592">Profiler subscriptions are now available</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 12, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the repeated requests for the profiler was to provide some alternative to the full price. After due consideration, I chose to implement an additional licensing model for the profiler, a subscription based one.  The current licensing model is still available and will not change!  What does this mean? Using the subscription model, you pay a monthly fee, and you can keep using the profiler as long as you pay.  The monthly fee is 12 Euro / 16$ US.      Why 12 Euro / 16$? It isn&#x2019;t a &#x201C;normal&#x201D; price point.       When looking at the pricing model for subscriptions, I wanted to choose something low enough that most people wouldn&#x2019;t mind paying. I choose this particular price point because this is how much a business lunch cost at a nearby restaurant. I believe that it should be low enough for everyone in the target audience.   The terms are simple:     Payment is made month to month (that is, you get charged each month for the profiler).    You can cancel the subscription at any point in time, and your copy of the profiler will expire when the time it due.    Upgrading between version will happen automatically. That is, if you are subscribed to version 1.x, you&#x2019;ll get 2.x automatically.   Subscriptions are currently offered for NH Prof only, but we will expand that to the other profilers if this prove successful.  You can buy a subscription here.</p>
        </article>
        <article id="article-5593">
            <a href="https://ayende.com/blog/4460/more-production-problems" target="_blank">
                <h2 class="title mb-6" id="article-5593">More production problems</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 11, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Should I tell you how long it took me to figure this one out?</p>
        </article>
        <article id="article-5594">
            <a href="https://ayende.com/blog/4459/that-no-sql-thing-document-databases" target="_blank">
                <h2 class="title mb-6" id="article-5594">That No SQL Thing &#x2013; Document Databases</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 11, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A document database is, at its core, a key/value store with one major exception. Instead of just storing any blob in it, a document db requires that the data will be store in a format that the database can understand. The format can be XML, JSON, Binary JSON (MongoDB), or just about anything, as long as the database can understand it.  Why is this such a big thing? Because when the database can understand the format of the data that you send it, it can now do server side operations on that data. In most doc dbs, that means that we can now allow queries on the document data.The known format also means that it is much easier to write tooling for the database, since it is possible to show, display and edit the data.  I am going to use Raven as the example for this post. Raven is a JSON based, REST enabled document database. Documents in Raven use the JSON format, and each document contains both the actual data and an additional metadata information that you can use. Here is an example of a document:     {     &#xA0;&#xA0;&#xA0; &quot;name&quot;: &quot;ayende&quot;,      &#xA0;&#xA0;&#xA0; &quot;email&quot;: &quot;ayende@ayende.com&quot;,      &#xA0;&#xA0;&#xA0; &quot;projects&quot;: [      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rhino mocks&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;nhibernate&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rhino service bus&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;raven db&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rhino persistent hash table&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rhino distributed hash table&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rhino etl&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rhino security&quot;,      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;rampaging rhinos&quot;      &#xA0;&#xA0;&#xA0; ]      }   We can PUT this document in the database, under the key &#x2018;ayende&#x2019;. We can also GET the document back by using the key &#x2018;ayende&#x2019;.  A document database is schema free, that is, you don&#x2019;t have to define your schema ahead of time and adhere to that. It also allow us to store arbitrarily complex data. If I want to store trees, or collections, or dictionaries, that is quite easy. In fact, it is so natural that you don&#x2019;t really think about it.  It does not, however, support relations. Each document is standalone. It can refer to other documents by store their key, but there is nothing to enforce relational integrity.  The major benefit of using a document database comes from the fact that while it has all the benefits of a key/value store, you aren&#x2019;t limited to just querying by key. By storing information in a form that the database can understand, we can ask the server to do things for us. Such as defining the following index for us:     from doc in docs&#xA;from prj in doc.projects&#xA;select new { Project = prj, Name = doc.Name }&#xA;  &#xA;&#xA;With that in place, we can now make queries on the stored documents:&#xA;&#xA;&#xA;  GET /indexes/ProjectAndName?query=Project:raven&#xA;&#xA;&#xA;This will give us all the documents that include a project with the name raven.&#xA;&#xA;We can take it a bit further, though, and ask the database to store aggregations for us:&#xA;&#xA;&#xA;  from doc in docs&#xA;from prj in doc.projects&#xA;select new { Count = 1, Project = prj}&#xA;&#xA;from result in results&#xA;group result by result.Project into g&#xA;select new { Project = g.Key, Count = g.Sum(x=&gt;x.Count) };&#xA;  &#xA;&#xA;And now we can query for the number of users involved in the raven project:&#xA;&#xA;&#xA;  GET /indexes/UsersCountByProject?query=Project:raven&#xA;&#xA;&#xA;In general, querying a document database falls into the prepared ahead of time (Raven, CouchDB) or at query time (MongoDB). &#xA;&#xA;In the first case, you define an indexing function (in Raven&#x2019;s case, a Linq query, in CouchDB case, a JavaScript function) and the server will run it to prepare the results, once the results are prepared, they can be served to the client with minimal computation. CouchDB and Raven differs in the method they use to update those indexes, Raven will update the index immediately on document change, and queries to indexes will never wait. The query may return a stale result (and is explicitly marked as such), but it will return immediately. With CouchDB, a view is updated at view query time, which may lead to a long wait time on the first time a view is accessed if there were a lot of changes in the meanwhile. The CouchDB approach avoids doing extra works that may not be needed, but Raven&#x2019;s approach means that you don&#x2019;t have to handle potentially large delays at queyring times. CouchDB allow to pass a parameter at the view querying time to allow it to return stale results, which seems to be the best of all worlds.&#xA;&#xA;Note that in both CouchDB and Raven&#x2019;s cases, indexes do not affect write speed, since in both cases this is done at a background task. &#xA;&#xA;MongoDB, on the other hand, allows ad-hoc querying, and relies on indexes defined on the document values to help it achieve reasonable performance when the data size grows large enough. MongoDB&#x2019;s indexes behave in much the same way RDBMS indexes behave, that is, they are updated as part or the insert process, so large number of indexes is going to affect write performance. &#xA;&#xA;Other document databases: &#xA;&#xA;&#xA;  ThruDB is the closest one that I could find, but it is basically a key/value store with manual Lucene indexing. &#xA;&#xA;  Terrastore seems to be a full fledged document database, but I can&#x2019;t find much information about it. Requires Terracotta to work.&#xA;&#xA;  Riak is another Erlang based Doc DB. It seems to be close to MongoDB in terms of operation, but that is about as much as I know about it. Querying Riak is done by writing a map/reduce query in javascript or erlang. I think it is the originator of this.</p>
        </article>
        <article id="article-5595">
            <a href="https://ayende.com/blog/4458/re-nosql-meh" target="_blank">
                <h2 class="title mb-6" id="article-5595">re</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 10, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I was pointed to this blog post, it is written by the guy who wrote ZODB (a python object database) who isn&#x2019;t excited about NoSQL:     But for me there was a moment of pure joy one morning when an absolutely awesome colleague I worked with at the time said to me something like: &quot;There&#x27;s a problem with this invoice, I traced it down to this table in the database which has errors in these columns. I&#x27;ve written a SQL statement to correct, or should it be done at the model level?&quot;. Not only had he found and analyzed the problem, he was offering to fix it.    Praise the gods. To do similar in Plone, he would have had to learn Python, read up on all the classes. Write a script to get those objects from the ZODB and examine them. Not a small undertaking by any means.    What was going on    The tools for the ZODB just weren&#x27;t there and it wasn&#x27;t transparent enough. If there was a good object browser for the ZODB (and yes a few simple projects showed up that tried to do that) that did all the work and exposed things that would really help. But setting up and configuring such a tool is hard and I never saw one that allowed you to do large scale changes.   I also got the following comment, on an unrelated post:     Not directly related, but I&#x27;m curious why you don&#x27;t use Rhino Queues? The tooling with msmq?     Tooling are incredibly important! In fact, it is the tooling that can make or break a system. Rhino Queues is a really nice queuing system, it offer several benefits over MSMQ, but it has no tooling support, and as such, it has a huge disadvantage in comparison to MSMQ (or other Queuing technologies).  With databases, this is even more important. I can (usually) live without having direct access to queued messages, but for databases and data stores, having the ability to access the data in an easy manner is mandatory. Some data is unimportant (I couldn&#x2019;t care less what the values are in user #12094&#x2019;s session are), but for the most part, you really want the ability to read that data and look at it in a human readable fashion.  The problems that Andy run into with ZODB are related more to the fact that ZODB didn&#x2019;t have any good tooling and that the ZODB storage format was tied directly to Python&#x2019;s pickle.  With Raven, I flat out refuse to release it publically until we have a good tooling story. Raven comes with its own internal UI (accessible via any web browser), which allows you to define indexes, view/create/edit the documents, browse the database, etc.  I consider such abilities crucial, because without those, a database is basically a black hole, which requires special tooling to work with. By providing such tooling out of the box, you reduce the barrier to entry by a huge margin.  This image was sent to me by a lot of people:    This is funny, and true. There is another layer here, you don&#x2019;t query a key/value store, that is like asking how to feed a car, because you are used to riding horses. If you need to perform queries on a key/value store, you are using the wrong tool, or perhaps you are trying to solve the problem in a non idiomatic way.</p>
        </article>
        <article id="article-5596">
            <a href="https://ayende.com/blog/4457/debugging-a-production-problem" target="_blank">
                <h2 class="title mb-6" id="article-5596">Debugging a production problem</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 09, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The backend for NH Prof stopped working all of a sudden. Obviously, that is not a good thing, so I setup to fix it as soon as I could. Unfortunately, I really couldn&#x2019;t see what the problem was.  I am running on my own server, so at least I didn&#x2019;t have to play the usual games with trying to figure out what is wrong by inferring things.   The first thing to look at was the queues, and I saw something very strange there:     There were a lot of messages in the queue, but there weren&#x2019;t being processed. The next step was to try looking at the error queue, but there was nothing really interesting there, restarting the service did nothing.  I setup the system to enable logging, but after the flurry of startup logging messages, the only things in the log where messages telling me about sent messages that are part of scheduled tasks in the system, such as:     DEBUG Rhino.ServiceBus.Msmq.OpenedQueue - Sending message NHProfilerWeb.Backend.InternalMessages.CheckOrders   My initial suspicion was that we had a hung thread handling a message, and that caused the entire thing to stop, but that didn&#x2019;t seem to fit, since I never got a log message about starting to process the message. Time to pull out the big guns, then: WinDbg.  I restarted the process, and attached to it, then issued the following command:     !eestack &#x2013;ee   This gives me the managed stack on all the threads. Using that, I managed to isolate this thread:     Thread&#xA0;&#xA0; 9     Current frame:       ChildEBP RetAddr&#xA0; Caller,Callee      0640ee88 067290dd (MethodDesc 0x5f23470 &#x2B;0x35 System.Messaging.MessageQueue.StaleSafeReceiveMessage(...))      0640eea8 067290dd (MethodDesc 0x5f23470 &#x2B;0x35 System.Messaging.MessageQueue.StaleSafeReceiveMessage(...))      0640eed4 05f0c9d3 (MethodDesc 0x5f23454 &#x2B;0x53 System.Messaging.MessageQueue.StaleSafeReceiveMessage(...))      0640ef00 05f0e46b (MethodDesc 0x5f23340 &#x2B;0x1d3 System.Messaging.MessageQueue.ReceiveCurrent(...))      0640ef64 06178529 (MethodDesc 0x5f2325c &#x2B;0x211 System.Messaging.MessageQueue.ReceiveBy(...))      0640efc8 061782bb (MethodDesc 0x5f23280 &#x2B;0x4b System.Messaging.MessageQueue.ReceiveById(System.String, System.Messaging.MessageQueueTransactionType))      0640eff8 06177a19 (MethodDesc 0x5059458 &#x2B;0x61 Rhino.ServiceBus.Msmq.OpenedQueue.TryGetMessageFromQueue(System.String))      0640f040 06030eeb (MethodDesc 0x50589a8 &#x2B;0x103 Rhino.ServiceBus.Msmq.MsmqTransport.ReceiveMessageInTransaction(Rhino.ServiceBus.Msmq.OpenedQueue, System.String, System.Func`2&lt;Rhino.ServiceBus.Impl.CurrentMessageInformation,Boolean&gt;, System.Action`2&lt;Rhino.ServiceBus.Impl.CurrentMessageInformation,System.Exception&gt;))      0640f0c0 060303b1 (MethodDesc 0x50589f0 &#x2B;0x209 Rhino.ServiceBus.Msmq.MsmqTransport.HandlePeekedMessage(Rhino.ServiceBus.Msmq.OpenedQueue, System.Messaging.Message))      0640f14c 05f0dea2 (MethodDesc 0x5057110 &#x2B;0x30a Rhino.ServiceBus.Msmq.AbstractMsmqListener.PeekMessageOnBackgroundThread(System.Object))      0640f208 6fa816fe (MethodDesc 0x6f2139cc System.Threading.ThreadHelper.ThreadStart_Context(System.Object))      0640f214 6f3601ef (MethodDesc 0x6f18275c &#x2B;0x6f System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object))      0640f228 6f85b5aa (MethodDesc 0x6f2139d8 &#x2B;0x4a System.Threading.ThreadHelper.ThreadStart(System.Object))   As you can see, it appears to be hung on receiving a message by id.  The next action was to switch to that thread using:     ~9s   And ask to see the stack of this thread along with its parameters:     !clrstack &#x2013;p   The interesting tidbit is here:     0640efec 061782bb System.Messaging.MessageQueue.ReceiveById(System.String, System.Messaging.MessageQueueTransactionType)     &#xA0;&#xA0;&#xA0; PARAMETERS:      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; this = &lt;no data&gt;      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; id = &lt;no data&gt;      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; transactionType = &lt;no data&gt;     0640f004 06177a19 Rhino.ServiceBus.Msmq.OpenedQueue.TryGetMessageFromQueue(System.String)     &#xA0;&#xA0;&#xA0; PARAMETERS:      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; this = 0x01ef7910      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; messageId = 0x01efa070   So now we need to look at what this message id is:     !dumpobj 0x01efa070   And the result is:     Name: System.String     MethodTable: 6f3b0a00      EEClass: 6f16d64c      Size: 162(0xa2) bytes       (C:\Windows\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll)g      String: 0730ab9b-eea5-4acd-bc93-7ee594cd2e8f\1551847       Fields:      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; MT&#xA0;&#xA0;&#xA0; Field&#xA0;&#xA0; Offset&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Type VT&#xA0;&#xA0;&#xA0;&#xA0; Attr&#xA0;&#xA0;&#xA0; Value Name      6f3b2c4c&#xA0; 4000096&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; System.Int32&#xA0; 1 instance&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 73 m_arrayLength      6f3b2c4c&#xA0; 4000097&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 8&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; System.Int32&#xA0; 1 instance&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 44 m_stringLength      6f3b16e0&#xA0; 4000098&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; c&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; System.Char&#xA0; 1 instance&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 30 m_firstChar      6f3b0a00&#xA0; 4000099&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 10&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; System.String&#xA0; 0&#xA0;&#xA0; shared&#xA0;&#xA0; static Empty      &#xA0;&#xA0;&#xA0; &gt;&gt; Domain:Value&#xA0; 002eae88:01cc1198 0031b358:01cc1198 &lt;&lt;      6f3b1630&#xA0; 400009a&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 14&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; System.Char[]&#xA0; 0&#xA0;&#xA0; shared&#xA0;&#xA0; static WhitespaceChars      &#xA0;&#xA0;&#xA0; &gt;&gt; Domain:Value&#xA0; 002eae88:01cc1714 0031b358:01cc5aa0 &lt;&lt;   Knowing that, I switched to the queue and looked at the first message:     That is good, now we know what the problem is, we are hung on receive by id. That is not something that I expected.  CheckOrder is a periodical message, so I can afford to consume a few in order to see what is going on. I opened PowerShell and executed:     [System.Reflection.Assembly]::Load(&quot;System.Messaging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot;)     $q = new-object System.Messaging.MessageQueue(&quot;NHProf.BackEnd&quot;)      $q.Peek()      Exception calling &quot;Peek&quot; with &quot;0&quot; argument(s): &quot;Length cannot be less than zero.       Parameter name: length&quot;        At line:1 char:8        &#x2B; $q.Peek &lt;&lt;&lt;&lt; ()        &#xA0;&#xA0;&#xA0; &#x2B; CategoryInfo&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; : NotSpecified: (:) [], MethodInvocationException        &#xA0;&#xA0;&#xA0; &#x2B; FullyQualifiedErrorId : DotNetMethodException   That was the point when I gave up on it, downloaded Boo and started the Boo shell. I didn&#x2019;t get very far:     &gt;&gt;&gt;import System.Messaging     &gt;&gt;&gt;q = MessageQueue(&quot;NHProf.BackEnd&quot;)      System.Messaging.MessageQueue      &gt;&gt;&gt;msg = q.Peek()      System.ArgumentOutOfRangeException: Length cannot be less than zero.       Parameter name: length        &#xA0;&#xA0; at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length,        Boolean fAlwaysCopy)        &#xA0;&#xA0; at System.Messaging.MessageQueue.ResolveFormatNameFromQueuePath(String queueP        ath, Boolean throwException)        &#xA0;&#xA0; at System.Messaging.MessageQueue.get_FormatName()        &#xA0;&#xA0; at System.Messaging.MessageQueue.ReceiveCurrent(TimeSpan timeout, Int32 actio        n, CursorHandle cursor, MessagePropertyFilter filter, MessageQueueTransaction in        ternalTransaction, MessageQueueTransactionType transactionType)        &#xA0;&#xA0; at System.Messaging.MessageQueue.Peek()        &#xA0;&#xA0; at Input3Module.Main(String[] argv) in C:\Users\Administrator\Documents\boo-0        .9.3.3457-bin[1]\bin\input3:line 1   Unlike the PowerShell example, I had the full stack trace, so I knew what is going on. In the PowerShell example, I was certain that there was some issue with calling overloaded methods. Once I saw that, it was perfectly obvious what was wrong, I didn&#x2019;t pass a valid queue name, that was easy to fix.      &gt;&gt;&gt;q.Close()     &gt;&gt;&gt;q = MessageQueue(&quot;&quot;&quot;.\private$\NHProf.BackEnd&quot;&quot;&quot;)      System.Messaging.MessageQueue      &gt;&gt;&gt;q.Peek()      System.Messaging.Message   And now I could start playing around with things:     &gt;&gt;&gt;q.Peek().Id     &#x27;0730ab9b-eea5-4acd-bc93-7ee594cd2e8f\\1551847&#x27;   So this is the right message, now let us try to consume it:     &gt;&gt;&gt;q.ReceiveById(&#x27;0730ab9b-eea5-4acd-bc93-7ee594cd2e8f\\1551847&#x27;)     System.Messaging.Message      &gt;&gt;&gt;q.Peek().Id      &#x27;0730ab9b-eea5-4acd-bc93-7ee594cd2e8f\\1551849&#x27;      &gt;&gt;&gt;q.Peek().Label      &#x27;NHProfilerWeb.Backend.InternalMessages.CheckOrders&#x27;   So that works well enough.  What is the difference, though? Well, it looks like the major difference is that we aren&#x2019;t using DTC here. I restarted the DTC service and the MSMQ service and everything started to work :-)  Now, I am not quite sure why this is the case, to tell you the truth, and I would dearly love to know why, but it at least works now...</p>
        </article>
        <article id="article-5597">
            <a href="https://ayende.com/blog/4456/that-no-sql-thing-key-value-stores-usages" target="_blank">
                <h2 class="title mb-6" id="article-5597">That No SQL Thing &#x2013; Key / Value stores &#x2013; Usages</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 08, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Now that we have a fairly good understanding of what Key / Value stores are, what are they good for? Well, they are really good if you need to lookup things by key :-)  Storing the user&#x2019;s session is a common example, or the user&#x2019;s shopping cart. In fact, per user&#x2019;s data is probably the most common usage for a key value store. The reasons for that are fairly obvious, I would imagine, we have the user&#x2019;s id already, and we need a well known data. That make it very cheap to access, modify and store at the end of a request.  Other usages include storing already processed data for quick retrieval, consider things like: Favorite Products, Best Of &#x2026;, etc. The idea here is to have the application access the key / value store using well known keys for those data items, while background processes will update those periodically. It isn&#x2019;t quite a cache, because there isn&#x2019;t really a scenario where the value doesn&#x2019;t exists, but it is a near thing.  One interesting use case that I run into was to store the product catalog in the key/value store, that allowed pulling a particular product&#x2019;s details in a single call. The key/value store was also used to track how many units were physically in stock, so it was able to tell if the item was available for purchase or not.  Just remember, if you need to do things more complex than just access a bucket of bits using a key, you probably need to look at something else, and the logical next step in the chain in the Document Database.</p>
        </article>
        <article id="article-5598">
            <a href="https://ardalis.com/how-to-move-or-rename-a-file-using-msbuild/" target="_blank">
                <h2 class="title mb-6" id="article-5598">How To Move or Rename a File using MSBuild</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 07, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">MSBuild is a very powerful tool, and it&#x2019;s relatively easy to get started using it. You can run a &#x201C;hello world&#x201D; example of MSBuild in no time&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-5599">
            <a href="https://ayende.com/blog/4455/entity-framework-profiler-goes-out-out-beta" target="_blank">
                <h2 class="title mb-6" id="article-5599">Entity Framework Profiler goes out out beta</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 07, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, it has been there for long enough :-)  In the tradition of finding meaningful dates for pushing things out of beta, I thought about making it the 1st of April, but I though better on it when I consider how it might be taken.  So on the 12th of April, EF Prof goes out of beta.  That means that the 30% beta discount will be over, which means that if you want it, you might want to hurry up :-)</p>
        </article>
        <article id="article-5600">
            <a href="https://ayende.com/blog/4454/that-no-sql-thing-key-value-stores-operations" target="_blank">
                <h2 class="title mb-6" id="article-5600">That No SQL Thing &#x2013; Key / Value stores &#x2013; Operations</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 07, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I mentioned before that the traditional API for Key / Value stores is pretty simplistic, Get/Put/Delete over blob values. That doesn&#x2019;t really give us much options,   I have a long series of posts talking about how to do a whole host of operations using this minimal API.           Distributed in memory cache / storage            Patterns for using distributed hash tables: Groups            Patterns for using distributed hash tables: Locking                Patterns for Distributed Hash Tables: Locality            Patterns for Distributed Hash Tables: Item Groups            Patterns for Distributed Hash Tables: Cheap Cross Item Transactions            Patterns for Distributed Hash Tables: Lookup by property            Patterns for Distributed Hash Tables: Range Queries            Patterns for Distributed Hash Tables: Conclusion      In practice, it is usually much better to have support for such things directly in the Key / Value store implementation. Rhino DHT has intrinsic support for lists, and Redis support plenty of operations over lists, sets and ordered sets. Most Key/Value stores offer at least the option to atomically increment a value.  For the most part, however, you can assume that if you need a lot of operations support from the Key/Value store, you are probably using the wrong backend for your tasks. Key/Value stores are just for that, if you need complex operations on the values stored there, you might be using the wrong tool.</p>
        </article>
        <div class="button flex justify-between">
            <a href="559.html"><span class="back arrow"></span></a>

            <a href="561.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
