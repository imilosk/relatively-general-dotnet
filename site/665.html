
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Home â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<script>
    const lightModePref = window.matchMedia("(prefers-color-scheme: light)");

    function getUserPref() {
        const storedTheme = typeof localStorage !== "undefined" && localStorage.getItem("theme");
        return storedTheme || (lightModePref.matches ? "light" : "dark");
    }

    function setTheme(newTheme) {
        if (newTheme !== "light" && newTheme !== "dark") {
            return console.warn(
                `Invalid theme value '${newTheme}' received. Expected 'light' or 'dark'.`,
            );
        }

        const root = document.documentElement;

        // root already set to newTheme, exit early
        if (newTheme === root.getAttribute("data-theme")) {
            return;
        }

        root.setAttribute("data-theme", newTheme);

        const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");
        const bgColour = getComputedStyle(document.body).getPropertyValue("--theme-bg");
        colorThemeMetaTag.setAttribute("content", `hsl(${bgColour})`);
        if (typeof localStorage !== "undefined") {
            localStorage.setItem("theme", newTheme);
        }
    }

    // initial setup
    setTheme(getUserPref());

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("theme-toggle").addEventListener("click", () => {
            const theme = localStorage.getItem("theme");

            if (theme === "dark") {
                setTheme("light");
            } else {
                setTheme("dark");
            }
        });

        document.getElementById("toggle-navigation-menu").addEventListener("click", (e) => {
            const button = e.target;
            const ariaExpanded = button.getAttribute("aria-expanded");
            const header = document.getElementById("main-header");

            if (ariaExpanded === "true") {
                button.setAttribute("aria-expanded", "false");
                header.classList.remove("menu-open");
            } else {
                button.setAttribute("aria-expanded", "true");
                header.classList.add("menu-open");
            }
        });
    });
</script>

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <theme-toggle class="ms-auto">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main">
    <section aria-label="Blog post list">
        <a href="https://ayende.com/blog/2284/more-on-change-tracking" target="_blank"><h1 class="title mb-6">More on change tracking...</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 03, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Frans Bouma&#xA0;has an excellent post about Why change-tracking has to be part of an entity object. I like the level that he has gotten into, but I don&#x27;t agree with his conclusion.    The main issue is about a disconnected scenario, where you object went somewhere, and then came back, and you don&#x27;t know what hapepned to it in the middle. Frans gives an excellent description about how it works in the infrastructure level using the ASP.Net data source, which I will continue to use.    The main problem here is not change&#xA0;tracking per-se, it is state management. Many of the things that we do are inheritently stateless. The web is stateless, web services are stateless, etc. The entire idea of change tracking has the underlying assumption that I am tracking the state in some manner.    As Frans points out, there are few options to handle this state.             You can put it in the view state, which is what the default GridView over DataSet does, and watch how the page sizes reaches the megabytes levels.                 You can put it in the user session object, in which case you are suffering from increased memory usage and have a lot more headache if you want to scale up.            You can serialize the original state somewhere, to a file or to the database, and load it after ward.    At any rate, this is not a trivial manner, and there are plenty of design decisions that have wide ranging affect on your project. In Frans words:The &#x27;solution&#x27; Microsoft provides for this, which is also a problem of Linq to Sql btw, is the following: you first have to attach to the context/session object an entity object with the original values, then pass the entity object with the new values and then it can perform change tracking. Yes, of course, but where do you get that entity object with the original values from? From the DB? oh no sir, you can&#x27;t do that, as it might be that the entity was changed in between, and if the user would have seen THOSE values, the user might not have altered the entity at all.    And right now we moved from change tracking to concurrency tracking. There are solution for those, optimistic concurrency is probably the best idea here, and that requires some sort of a flag to notify us if the row has changed or not. In SQL Server, this is usually handled by TIMESTAMP column, which is guranteed to change to every time you modify the row.    The process now is to:                        Get the objects from the database                            Set the new values, including the old TIMESTAMP value                            Save to DB                            Handle the concurrency violations                This is still not trivial, but it have moved from having to handle infrastructure issues to having to handle business logic issues (what to do when there is a concurrency violation is a business decision).</p>
        <a href="https://ayende.com/blog/2283/how-often-do-you-refer-to-your-own-blog-for-advice" target="_blank"><h1 class="title mb-6">How often do you refer to your own blog for advice?</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the best reasons for having a blog is the ability to googlize your mind. I find that I keep referring to my own post from the past to do things. From adding performance tuning to an application to complex queries with NHibernate to SQL Syntax to old photos.    One of the most common searches that I do is &quot;site:ayende.com term&quot;, because I can remember the subjects of nearly all my posts, but the content expiry time is very short.</p>
        <a href="https://ayende.com/blog/2282/remote-keys-cross-database-foreign-keys" target="_blank"><h1 class="title mb-6">Remote Keys: Cross Database Foreign Keys</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Here is an interesting product&#xA0;(via Larkware). RemoteKeys Adds cross-database constraints to SQL Server, which is something that is really nice in many scenarios.    Specifically, I am a firm believer that database == application, and that separate applications should use separate databases. (Versioning, deployment, WhoBrokeMyQuery, etc). This product seems to give a nice answer to&#xA0; Referential integrity concerns.    I was interested to know how they did it, and it looks like a good UI on top of Linked Server &#x2B; INSTEAD OF Triggers. I really like the idea, but a couple of things needs to be considered when using it are:            Availability concerns - Does both databases have the same availability? If not, what happens when either database goes down? The way it works, both databases needs to talk to each other for CUD.            Performance concerns - If we are talking about remote databases, then it is something that you really should consider carefully. The example on their site has US Orders and Europe Orders with remote FK to Customers Database. The problem is that this means that the Customers database needs to issue two remote calls (probably per statement). There may be some smarts there about consolidating checks, but I didn&#x27;t check.    Cool idea nonetheless, although if I ever see the need, I will create the trigger via code gen and be done with it.</p>
        <a href="https://ayende.com/blog/2281/testdriven-net-mbunit-gotcha" target="_blank"><h1 class="title mb-6">TestDriven.Net &#x2B; MbUnit Gotcha</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">That caused some issues.    I just run into a hairy issue in using TestDriven.Net and MbUnit. For some reason, none of my [SetUp] methods would run. I have moved machine with a project, and on the desktop, everything was peachy, on my laptop, [SetUp] doesn&#x27;t work.    I am using MbUnit version: 1.0.2614.40165    And here is the test output:MbUnit 1.0.2642.28107 Addin    No tests found        Starting the MbUnit Test Execution    Exploring Tests.Integration, Version=0.1.248.0, Culture=neutral, PublicKeyToken=null    MbUnit 1.0.2642.28107 Addin    No tests found    TestCase &#x27;M:Tests.Integration.Policy.NewPolicy.MakeOrBreak&#x27;    failed: Object reference not set to an instance of an object.    &#xA0;System.NullReferenceException: Object reference not set to an instance of an object.    &#xA0;Tests.Integration\BaseWebTest.cs(117,0): at Extranet.Tests.Integration.BaseWebTest.ClickLink(String partialElementId)    The issue was a version mismatch, yuck! This doesn&#x27;t usually happen on NUnit because NUnit is very version tolerant, and it looks like MbUnit is much less so.</p>
        <a href="https://ayende.com/blog/2280/using-the-power-of-the-press-to-stop-vs-crashes" target="_blank"><h1 class="title mb-6">Using the power of the press to stop VS crashes</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I just hit a reproducable bug in VS that would cause an IDE crash. I also found out how to fix it.     Fire Camtasia and do the exact same operation using Camtasia. Work perfectly.</p>
        <a href="https://ayende.com/blog/2279/nhibernate-search" target="_blank"><h1 class="title mb-6">NHibernate Search</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I have just commited the full implementation of NHibernate Search. No documentation yet, but there is the Hibernate Search documentation, which matches nearly 1:1.    You can get it from NHibernate trunk:svn co https://svn.sourceforge.net/svnroot/nhibernate/trunk/nhibernate/src/NHibernate.Search    It probably won&#x27;t be released with NHiberante 1.2, but it would work with it.</p>
        <a href="https://ayende.com/blog/2278/input-validation-vs-business-rules-validation" target="_blank"><h1 class="title mb-6">Input Validation vs.Business Rules Validation</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am probably going against conventional wisdom here, but I wanted to talk about the difference between input validation and business rules validation.     Input Validation for me is about validating the user input. Some people call &quot;Name must not be empty&quot; a business rule, I think about it as input validation. Business Rules validation is more complex, because a business rule for me is not &quot;Name must not be empty&quot;, it is a definition of a state in the system that requires an action. Here is a definition of a business rule:An order should be payed within 30 days, this duration can be extended, to a maximum of three times.    In this case, invalid business rule is something that exists in the system by definition, and require some sort of an action. Flagging the user, sending a PayUp(tm) letter, etc. It is also usually something that involves more than a single object and its properties. &quot;Paid order&quot; means that there is an accepted transaction for this order within the specified range, and extending the duration of acceptable payment is another object entirely.    Input validation can be as simple as validating required fields or as complex as: &quot;You need to input phone number OR email, if you enter ungency you must put reason description OR reason code&quot;. Business rules validation is beyond that, it is validating that the total sum of the order is less than the allowed credit for this acount.    I tend to use different UI for the different validation schems as well. Input validation is something that needs to be presented near or at the input itself. Business rules validation is something that is generally a different screen all together, and is distinctly different that the input itself.</p>
        <a href="https://ayende.com/blog/2277/limitations-of-declerative-coding" target="_blank"><h1 class="title mb-6">Limitations of Declerative Coding</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 02, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">David Hayden&#xA0;is talking about AOP, and he mentioned Caching declaratively, which sturk a chord, and I had to write a post about it. I want to talk about a completely different aspect of declerative coding, how far you should go with it. Just to be clear, this is fake code, and it has little to do with David&#x27;s post other than using the scenario to make a point.    Let us take the code example that David has:public class NewsController { private INewsService _service; public NewsController(INewsService service) { _service = service; } [CachingCallHandler] public NewsHeadlineCollection GetLatestNewsHeadlines() { return _service.GetLatestNews(); } }            &#xA0;        Now, assume that you want to specify an expiration time? No problem, just put it in the attribute:[CachingCallHandler(Expiration=&quot;10:00&quot;)]    public NewsHeadlineCollection GetLatestNewsHeadlines()    {    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return _service.GetLatestNews();    }    What if I want to add a bit of smarts to the caching and only cache costly calls?[CachingCallHandler(Expiration=&quot;0:15&quot;,&#xA0;CacheIfCallOver=&quot;0:30&quot;)]    public NewsHeadlineCollection GetLatestNewsHeadlines()    {    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return _service.GetLatestNews();    }    Now I want to handle dependencies:[CachingCallHandler(Expiration=&quot;10:00&quot;,&#xA0;CacheIfCallOver=&quot;0:30&quot;,&#xA0;DependencyConnectionStringName=&quot;MyDatabase&quot;,&#xA0;    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DependencyStatement=&quot;SELECT * FROM HeadLines Where datePublished &gt; getdate()-1&quot;)]    public NewsHeadlineCollection GetLatestNewsHeadlines()    {    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return _service.GetLatestNews();    }    But wait, I have a bit of business logic here as well, if there is a developing story, I want to skip caching altogether:[CachingCallHandler(Expiration=&quot;10:00&quot;,&#xA0;CacheIfCallOver=&quot;0:30&quot;,&#xA0;DependencyConnectionStringName=&quot;MyDatabase&quot;,&#xA0;    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DependencyStatement=&quot;SELECT * FROM HeadLines Where datePublished &gt; getdate()-1&quot;)]    public NewsHeadlineCollection GetLatestNewsHeadlines()    {    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if(&#xA0;_service.BigStoryNowDeveloping)    &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CachingCallHandler.Current.SkipCaching();        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return _service.GetLatestNews();    }    And now I have a different case, I want to call the GetLatestNewsHeadlines() and get the uncached results, maybe I am building a ticker, and it really need to be up to date. Now I need:CachingCallHandler.DisableCachingForNextMethodOn(newsController);    return&#xA0;newsController.GetLatestNews();    This is a fake scenario, obviously, but just note how each additional business requirements make declerative more complex. I am not showing the code for the CachingCallHanlder, but you can be that somewhere its developer would be groaning for each such new requirement.     For myself, the minute that I put the connection string name hard coded SQL, that went way over the line. Even if I could skip it and use just the table name directly, that would be too much. And what happens if I need expiration from sources that do not support cache dependecies natively?     In short, I really love declerative coding, and I tend to overuse it at times, but it is really important to understand that you probably shouldn&#x27;t try declerative coding for everything. If the scenario is simple and straightforward, that is a good candidate for ocde reduction and simplification. If it isn&#x27;t, imperative coding (you know, if and else, as well as a while or two) are going to be more intent revealing, and would be easier to maintain.</p>
        <a href="https://ayende.com/blog/2276/microsoft-enterprise-mocking-block" target="_blank"><h1 class="title mb-6">Microsoft Enterprise Mocking Block</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: April 01, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">It has come to my attention that Microsoft will be soon releasing a CTP of a new block in the EntLib series. Following to footsteps of the Policy Injection Block, the Enterprise Mocking Block will allow developers to finally cease to write expectations for mock objects with 70% less code than before.    Based of proven practices from the field, the Microsoft Enterprise Mocking Block is capable of producing a fake implementation of an interface, with hardly any code at all. I am afraid that words would fail to describe what the guys at Redmond have done, so I have better show you what it can do.&#xA0; Here is a simple example of the power:            [TestMethod]                [InterfactionBasedTestMethod(FakeObjectOptions.AllowCreateFakeObjects)]                public void MicrosoftEnterpriseMockingBlockApril1st()                                {                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FakeObjectsFactory fakeObjectFactory =                                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Microsoft.EnterpriseLibrary.Mocking.Framework.FakeObjectsFactory.Create();                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; fakeObjectFactory.Initialize(&quot;emailSender.mock.def.xml&quot;,                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;sendEmail_Success.expectation.def.xml&quot;,                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&quot;sendMail_Failure.expectation.def.xml&quot;);                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FakeObjectCreator emailSender_Send = fakeObjectFactory.FakeObjectCreator(&quot;EmailSender&quot;, &quot;Send&quot;);                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IEmailSender FAKE_EmailSender = fakeObjectCreator.ToFakeObject&lt;IEmailSender&gt;();                                        &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ClassUnderTest cut = new ClassUnderTest(FAKE_EmailSender);                                        &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; cut.SendEmail(&quot;blah&quot;, &quot;bar&quot;);                                        &#xA0;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FakeObjectConsilidator consilidator = fakeObjectFactory.CreateFakeObjectConsilidator(&quot;EmailSender&quot;);                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; consilidator.TryStopTest(FAKE_EmailSender);                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FakeObjectTestVerifier&#xA0; verifier =                 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; fakeObjectFactory.CreateFakeObjectTestVerifier(&quot;sendEmail_Failure.expectation.verification.xml&quot;);                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; verifier.Verify(FAKE_EmailSender);                                }        Some of you noticed the&#xA0;referenecs to various XML files in the tests. Indeed, breaking from the worst practice behavior of placing tests decisions in code, the Microsoft Enterprise Blocking Mock not only enable, but requires that you would be flexible, and specify your intent in an easy to ready, easy to modify set of XML files.    Here is an example of sendEmail_Failure.expectation.def.xml:            &lt;interactionBasedText microsoftEnterpriseMockingBlock:typeToIntercept=&quot;App.Interfaces.IEmailSender&quot;&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;expectations&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;expectation for=&quot;Send&quot;&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;parameters&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;parameter value=&quot;foo@bar.com&quot; /&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;parameter value=&quot;message title&quot; /&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;parameter value=&quot;message content&quot; /&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;/parameters&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;expectationOptions repeatMin=&quot;1&quot; repeatMax=&quot;1&quot;/&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;methodResult&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;exception type=&quot;System.Net.NetException&quot;&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Unable to connect to SMTP Server                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;/exception&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;/methodResult&gt;                                &#xA0;                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;/expectation&gt;                        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &lt;/expectations&gt;                        &lt;/interactionBasedText&gt;        There are couple of caveats to this approach. Since mocking is such an invasive procedure, with potentially dangerous implications, you would need to OptIn by marking the interfaces with special attributes, thus allowing the Microsoft Enterprise Mocking Block to fake them. Here is how such an interface may look:            [Mockable(MockableOptions.I_ReallyDoMeanIt)]                                public interface IEmailSender                        {                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; [MockableOperation(MockableOperationOptions.OnlyWhenTheMoonIsFull)]                                &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; void SendEmail([MockableParameter] string to, string body);                                }        While Microsoft Enterprise Mocking Block is currently not able to mock classes (or&#xA0;interfaces not mark specifically so), there are some distant voices saying that it should support those options. Microsoft is carefully considerring the customer feedback, and the team will evaluate the options to implement these advanced, rarely used or needed, features in a future version.    Naturally, I am excited to see a true Enterprise Mocking Framework arrive on the scene. A little bird has whispered that there may also be a designer in the works, but it is expected to ship only in the post Orcas&#x27; timeframe.</p>
        <a href="https://ayende.com/blog/2275/disconnected-mode-change-tracking" target="_blank"><h1 class="title mb-6">Disconnected Mode Change Tracking</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: March 31, 2007
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">There is some interesting discussion going on right now about dealing with change tracking in disconnected mode. The whole discussion started when Andres&#xA0;complained that this making writing diconnected updates much harder than it should. You can check the links to see the whole discussion, what I am interested at is Udi&#x27;s second reply, in which he suggest doing something like this:            void&#xA0;IBus.Send(params&#xA0;IMessage[]&#xA0;messages);        With the client code looking like this:            myBus.Send(addOrderLineMsg,&#xA0;delOrderLineMsg);        I am not sure that I agree with the choice of names (specifically, IMessage to me in an infrastructure level idea, IOrderMessage is something that would have a meaningful business sense), but I really like the idea. Then I started to think about it. Sending the server a bunch of changes, so it could execute them in a single transaction, thus reducing the chattiness of the conversation, I am pretty sure that I heard it before. Indeed, it is my favoriate pattern, Unit Of Work, expanded to include a multi layered, service based architecture.&#xA0;    I really like this approach.</p>
        <div class="button flex justify-between">
            <a href="664.html"><span class="back arrow"></span></a>

            <a href="666.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
</body>
</html>