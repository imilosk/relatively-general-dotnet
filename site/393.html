
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 393 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-3921">
            <a href="https://ayende.com/blog/166369/the-corax-experiment-api" target="_blank">
                <h2 class="title mb-6" id="article-3921">The Corax Experiment: API</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 17, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I posted before about design practice for how I would approach building a search engine library. I decided to bite the bullet and actually try to do this. Using Voron, that turned out to be a really simple thing to do. Of course, this doesn&#x2019;t do a tenth of what Lucene does, but it actually does quite a lot. The code is available here, and I want to emphasize again, this is purely experimental / research project.&#xA;&#xA;&#x9;The entire thing comes to less than 500 lines of code. And it is pretty functional even at this stage.&#xA;&#xA;&#x9;Corax is composed of:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;Analysis&#xA;&#x9;&#xA;&#x9;&#x9;Indexing&#xA;&#x9;&#xA;&#x9;&#x9;Querying&#xA;&#xA;&#xA;&#x9;Analysis of the documents is handled via analyzers:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: public interface IAnalyzer&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3:     ITokenSource CreateTokenSource(string field, ITokenSource existing);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:     bool Process(string field, ITokenSource source);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   6: }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;An analyzer create a token source, which accept a TextReader and produces token. For each token, the Process method is called, and it is used to do things to the relevant token. For example, here is the default analyzer:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: public class DefaultAnalyzer : IAnalyzer&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3:     readonly IFilter[] _filters =&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:     {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5:         new LowerCaseFilter(), &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   6:         new RemovePossesiveSuffix(), &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   7:         new StopWordsFilter(), &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   8:     };&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   9:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  10:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  11:     public ITokenSource CreateTokenSource(string field, ITokenSource existing)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  12:     {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  13:         return existing ?? new StringTokenizer();&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  14:     }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  15:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  16:     public bool Process(string field, ITokenSource source)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  17:     {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  18:         for (int i = 0; i &lt; _filters.Length; i&#x2B;&#x2B;)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  19:         {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  20:             if (_filters[i].ProcessTerm(source) == false)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  21:                 return false;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  22:         }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  23:         return true;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  24:     }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  25: }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;The idea here is to match, fairly closely, what Lucene is doing, but hopefully with clearer code. This analyzer will text a stream of text, break it up to discrete tokens, lower case them, remove the possessive &#x2018;s suffix and clear stop words. Note that each of the filters are actually modifying the token in place.&#xA0; And the tokenizer is pretty simple, but it does the job for now.&#xA;&#xA;&#x9;Now, let us move to indexing. With Lucene, the recommendation is that you&#x2019;ll reuse your document and field instance, to avoid create garbage for the GC. With Corax, I took it a step further:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: using (var indexer = fullTextIndex.CreateIndexer())&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3:     indexer.NewDocument();&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:     indexer.AddField(&quot;Name&quot;, &quot;Oren Eini&quot;);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   6:     indexer.NewDocument();&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   7:     indexer.AddField(&quot;Name&quot;, &quot;Ayende Rahien&quot;);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   8:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   9:     indexer.Flush();&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  10: }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;There are a couple of things to note here. An index can create indexers, it is intended to have multiple concurrent indexers running at the same time. Note that unlike Lucene, we don&#x2019;t have Document or Field classes. Instead, we call methods on the indexer to create a new document and then add fields to the current document. When you are done with a document, you start a new one, or flush to complete the entire operation. For long running indexing, the indexer will flush itself automatically for you.&#xA;&#xA;&#x9;I think that this API gives us the best approach. It guide you toward using a single instance, with internal optimizations to make it memory efficient. Multiple instances can be used concurrently to speed up indexing time. And it knows when to spill flush itself for you, so you don&#x2019;t have to worry about that.&#xA0; Although you do have to complete the operation by calling Flush() at the end.&#xA;&#xA;&#x9;How about searching? That turned out to be pretty similar as well. All you have to do is create a searcher:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: using (var searcher = fti.CreateSearcher())&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3:     QueryResults queryResults = searcher.QueryTop(new TermQuery(&quot;Name&quot;, &quot;Arava&quot;), 10);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:     Console.WriteLine(queryResults.TotalResults);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5:     foreach (var match in queryResults.Results)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   6:     {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   7:         Console.WriteLine(match.DocumentId &#x2B; &quot; - &quot; &#x2B; match.Score);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   8:     }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   9: }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;We create a searcher, and then we can utilize it to perform queries.&#xA;&#xA;&#x9;So far, this has been all about the API we have, I&#x2019;ll talk about the actual implementation in my next post.</p>
        </article>
        <article id="article-3922">
            <a href="https://ayende.com/blog/166305/finding-a-port-in-a-storm-or-how-to-get-a-consistent-build-experience" target="_blank">
                <h2 class="title mb-6" id="article-3922">Finding a port in a storm: Or how to get a consistent build experience</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 16, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">RavenDB is a server product, as such, we are obvious going to have to talk over the network. That is great, except that it means we need a system wide resource, a TCP port. And that isn&#x2019;t so great, because it turn out that there are a lot of things that can try to grab a port and use it. And I don&#x2019;t speak about things like Skype taking over port 80. I&#x2019;m talking about the use of dynamic or ephemeral ports. That means that during the build, we can have something (for example, Chrome, or DropBox, or anything that uses the web) make a call and suddenly that port is busy and you can&#x2019;t bind to it. The default ports we use for tests are in the 8070 &#x2013; 8090 range, but we have had consistent build failures because something is taking the ports. Finally I took the time to investigate, and I discovered that:      1: C:\Work\ravendb-3.0 [master]&gt; netsh int ipv4 show dynamicport tcp   2:&#xA0;    3: Protocol tcp Dynamic Port Range   4: ---------------------------------   5: Start Port      : 1025   6: Number of Ports : 64510&#xA;So, on the two machines I tested this on, we had the dynamic port range cover everything from port 1025 and up. This sucks. And probably explains the issue. This is how we fixed it (I hope):&#xA;&#xA;&#xA;   1: netsh int ipv4 set dynamicportrange tcp startport=10000 numberofports=55535&#xA;&#xA;Basically, everything below port 10,000 is free for us to use. And yes, this post is here mostly so I&#x2019;ll not have to remember it in the future.</p>
        </article>
        <article id="article-3923">
            <a href="https://ayende.com/blog/166338/design-practice-building-a-search-engine-library" target="_blank">
                <h2 class="title mb-6" id="article-3923">Design practice: Building a search engine library</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 15, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Note: This is done purely as a design practice. We don&#x2019;t have any current plans to implement this, but I find that it is a good exercise in general.&#xA;&#xA;&#x9;How would I go about building a search engine for RavenDB to replace Lucene. Well, we have Voron as the basis for storage, so from the get go, we have several interesting changes. To start with, we inherit the transactional properties of Voron, but more importantly, we don&#x2019;t have to do merges, so we don&#x2019;t have any of those issues. In other words, we can actually generate stable document ids.&#xA;&#xA;&#x9;But I&#x2019;m probably jumping ahead a bit. We&#x2019;ll start with the basics. Analysis / indexing is going to be done in very much the same way. Users will provide an analyzer and a set of documents, like so:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: var index = new Corax.Index(storageOptions, new StandardAnalyzer());&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3: var scope = index.CreateIndexingScope();&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5: long docId = scope.Add(new Document&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   6: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   7:     {&quot;Name&quot;, &quot;Oren Eini&quot;, Analysis.Analyzer},&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   8:     {&quot;Name&quot;, &quot;Ayende Rahien&quot;, Analysis.Analyzer},&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   9:     {&quot;Email&quot;, &quot;ayende@ayende.com&quot;, Analyzed.AsIs, Stored.Yes}&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  10: });&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  11:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  12: docId = scope.Add(new Document&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  13: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  14:     {&quot;Name&quot;, &quot;Arava Eini&quot;, Analysis.Analyzer},&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  15:     {&quot;Email&quot;, &quot;arava@doghouse.com&quot;, Analyzed.AsIs, Stored.Yes}&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  16: });&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  17:&#xA0; &#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  18: index.Sumbit(index);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;Some notes about this API. It is modeled quite closely after the Lucene API, and it would probably need additional work. The idea here is that you are going to need to get an indexing scope, which is single threaded. And you can have multiple indexing scopes running a the same time. You can batch multiple writes into a single scope, and it behaves like a transaction.&#xA;&#xA;&#x9;The idea is to deal with all of the work associated with indexing the document into a single threaded work, so that make it easier for us. Note that we immediately get the generated document id, but that the document will only be available for searching when you have submitted the scope.&#xA;&#xA;&#x9;Under the hood, this does all of the work at the time of calling Add(). The analyzer will run on the relevant fields, and we will create the appropriate entries. How does that work?&#xA;&#xA;&#x9;Every document has a long id associated with it. In Voron, we are going to have a &#x2018;Documents&#x2019; tree, with the long id as the key, and the value is going to be all the data about the document we need to keep. For example, it would have the stored fields for that documents, or the term positions, if required, etc. We&#x2019;ll also have a a Fields tree, which will have a mapping of all the field names to a integer value.&#xA;&#xA;&#x9;Of more interest is how we are going to deal with the terms and the fields. For each field, we are going to have a tree called &#x201C;@Name&#x201D;, &#x201C;@Email&#x201D;, etc. Those are multi trees, with the keys in that tree being the terms, and the multi values being the document ids that has those threes. In other words, the code above is going to generate the following data in Voron.&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;Documents tree:&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;0 &#x2013; { &#x201C;Fields&#x201D;: { 1: &#x201C;ayende@ayende.com&#x201D; } }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;1 &#x2013; { &#x201C;Fields&#x201D;: { 1: &#x201C;arava@doghouse.com&#x201D; } }&#xA;&#x9;&#x9;&#xA;&#x9;&#xA;&#x9;&#xA;&#x9;&#x9;Fields tree&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;0 &#x2013; Name&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;1 &#x2013; Email&#xA;&#x9;&#x9;&#xA;&#x9;&#xA;&#x9;&#xA;&#x9;&#x9;@Name tree&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;ayende &#x2013; [ 0 ]&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;arava &#x2013; [ 1 ]&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;oren &#x2013; [ 0 ]&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;eini &#x2013; [ 0, 1 ]&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;rahien &#x2013; [ 0 ]&#xA;&#x9;&#x9;&#xA;&#x9;&#xA;&#x9;&#xA;&#x9;&#x9;@Email tree&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;ayende@ayende.com &#x2013; [ 0 ]&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;arava@doghouse.com &#x2013; [ 1 ]&#xA;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;Given this model, we can now turn to the actual querying part of the business. Let us assume that we have the following query:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: var queryResults = index.Query(&quot;Name: Oren OR Email: ayende@ayende.com&quot;);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2: foreach(var result in queryResult.Matches)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3: {&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:     Console.WriteLine(&quot;{0}: {1}&quot;, result.Id, result[&quot;Email&quot;] )&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5: }&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;How does querying works? The query above would actually be something like:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   1: new BooleanQuery(&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   2:     Match.Or,&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   3:     new TermQuery(&quot;Name&quot;, &quot;Oren&quot;),&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   4:     new TermQuery(&quot;Email&quot;, &quot;ayende@ayende.com&quot;)&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;   5:     )&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;The actual implementation of this query would just access the relevant field tree and load the values in the particular key. The result is a set of ids for both parts of the query, and since we are using an OR here, we will just union them and return the list of results back.&#xA;&#xA;&#x9;Optimizations here can be to run those queries in parallel, or to just cache the results of particular term query, so we can speed things even more.&#xA0; This looks simple, and it is, because a lot of the work has already been done in Voron. Searching is pretty much complete, we only need to tell it what to search with.</p>
        </article>
        <article id="article-3924">
            <a href="https://ayende.com/blog/166339/the-dark-sides-of-lucene" target="_blank">
                <h2 class="title mb-6" id="article-3924">The dark sides of Lucene</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 14, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I&#x2019;ve been using Lucene for the past six or seven years, and after my last post, I thought it would be a good idea to talk a bit about the kind of things that it isn&#x2019;t doing well. We&#x2019;ve been using it extensively in RavenDB for the past 5 years, and I think that I have a pretty good understanding of it. We used to have one of Lucene.NET committers working at Hibernating Rhinos, so I&#x2019;ve a high level of confidence that I&#x2019;m not just stupidly not using it properly, too. Probably the part that caused us the most pain with Lucene was the fact that it isn&#x2019;t transactional. That is, it is quite easy to get into situations where the indexes are corrupted. That make it&#x2026; challenging to use it in a database that needs to ensure consistency. The problem is that it is really not a use case that Lucene is well suited for. In order to ensure that data is saved, we have to commit often, the problem is that in order to ensure good performance, we want to commit less often, but then we will the changes if we crash. For that matter, Lucene doesn&#x2019;t do any attempt to actually flush the data properly, relying on the OS to do that, a system crash can cause you to lose data even though you &#x201C;committed&#x201D; it.  Fun times, I can tell you that. Next, we have the issue of what Lucene call updates. Updates in Lucene are actually just delete/add, and they don&#x2019;t maintain the same document id (more on that later). Because of that, you usually have to have an additional field in the index that would be your primary key, and you handle updates by first deleting then adding things. That is quite strange, to be fair, and it means that you can&#x2019;t &#x201C;extend&#x201D; an index entry, you have to build it from scratch every time. Speaking of this, let us talk a bit about deletes. Ignoring for the moment the absolutely horrendous decision to do deletes through the reader, let us talk about how they are actually done. Deletes are recorded in a separate file, and that means that the moment you have any deletes (or, as I mentioned, updates), all the internal statistics are wrong.&#xA0; We run into this quite often with RavenDB when we are doing things like facets or suggestions. For example, if you have request a suggestion for a user name, it will happily give you suggestions for deletes users, even though we deleted it in Lucene. It will go away eventually, when it is ready to optimize the index by merging all the files, but in the meantime, it makes&#xA0; for interesting bug reports.&#xA0; Speaking of merging, that is another common issue that you have to deal with. In order to ensure optimal performance, you have to be on top of the merge policy. This results in some interesting issues. For RavenDB&#x2019;s purposes, we do a writer commit after every indexing batch. That means that if you are writing to RavenDB slowly enough, we do a commit after every document write. That result in a lot of segments, and the merge policy would have to do a lot of merges. The problem here is that merges have two distinct costs associated with them. First, and obviously, you are going to need to write (again) all of the documents in all of the segments you are merging. That is very similar to doing merges in LevelDB ( indeed, in general Lucene&#x2019;s file format is remarkably similar to SST ). Next, and arguably more interesting / problematic from our point of view is the fact that it also kills all of the caches. Let me try to explain, Lucene uses a lot of caches to speed things up, in fact, most of the sorting is done by using the caches, for example.&#xA0; That works really well when we are querying normally, because segments are immutable, which makes for great caching. But on a merge, not only have we just invalidate all of our caches, we now need to read, again, all of the data that we just wrote, so we would be able to use it. That can be&#x2026; costly. And both things can introduce stalls into the system. The major problem externally with merges is that the document id changes, and that means that you cannot rely on them. It would be much easier if you could send an id out into the world, and get it back later and do something with it, but that isn&#x2019;t possible with Lucene. Next, and not really an operational issue like the rest, Lucene&#x2019;s multi threaded behavior is&#x2026; a hammer to an egg, in most cases. By that I mean code like this:  I mean, it is certainly functional, but it is pretty ugly.  Now, don&#x2019;t get me wrong, I think that Lucene is pretty neat. But there are some really dark corners there. For example, the actual searching, go ahead and try to find where that is done in Lucene. It is very easy to get lost between all of the different aspects: weights, sorters, queries and various enumerators. For fun, a lot of that runs at hard to figure out times, making the actual query run time interesting to try to figure out. As a good example, let us take the simplest possible query, TermQuery. Go ahead, try to find where it is actually doing the query for matching terms in this code: https://github.com/apache/lucene/blob/LUCENE_2_1/src/java/org/apache/lucene/search/TermQuery.java That actually happens here: https://github.com/apache/lucene/blob/LUCENE_2_1/src/java/org/apache/lucene/search/TermScorer.java#L79, and it is effectively a side effect of calling reader.termDocs(term) that limit the matches only to those with the same term.&#xA0; Trying to track down where exactly things happen can be&#x2026; interesting. Anyway, this post is getting to long, and I want to get back to figuring out how Lucene does its thing without dwelling too much in the dark&#x2026;</p>
        </article>
        <article id="article-3925">
            <a href="https://www.meziantou.net/windows-credential-manager.htm" target="_blank">
                <h2 class="title mb-6" id="article-3925">Windows Credential Manager</h2>
            </a>
            <p class="mb-2">by G&#xE9;rald Barr&#xE9;</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 14, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">J&#x27;ai &#xE9;crit un article sur un autre blog:Encore un article sur le stockage des mots de passe&#xA0;&#x1F603;Dans mon dernier article je conseillais de regarder les m&#xE9;canismes existants avant de tenter de refaire la m&#xEA;me chose (surement en moins bien). Cette fois-ci je vais vous pr&#xE9;senter une fonctionnalit&#xE9; g&#xE9;nia</p>
        </article>
        <article id="article-3926">
            <a href="https://ayende.com/blog/166337/what-lucene-does-a-look-under-the-hood" target="_blank">
                <h2 class="title mb-6" id="article-3926">What Lucene does, a look under the hood</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 11, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Lucene is a search engine library, which is great. But as it turns out, there is a lot going on there. After working with it for several years, I can say with confidence that it is a pretty awesome library. But surprisingly, a lot of the effort that went into it doesn&#x2019;t seem to be talked about / visible to people not trolling through the code. I think that this is a pretty good testament for how successful it is. That, and the fact that it is now the base line against which all other search libraries &amp; engines are compared.  What I wanted to talk about today was the kind of things that Lucene is doing that doesn&#x2019;t seem to get much publicity. I think that Spolsky said it best:  Back to that two page function. Yes, I know, it&#x27;s just a simple function to display a window, but it has grown little hairs and stuff on it and nobody knows why. Well, I&#x27;ll tell you why: those are bug fixes. One of them fixes that bug that Nancy had when she tried to install the thing on a computer that didn&#x27;t have Internet Explorer. Another one fixes that bug that occurs in low memory conditions. Another one fixes that bug that occurred when the file is on a floppy disk and the user yanks out the disk in the middle. That LoadLibrary call is ugly but it makes the code work on old versions of Windows 95. I remember just how much impact that article made on me at the time. And Lucene&#x2019;s codebase bear true for this words. Lucene is a search engine library, which basically means that it does:  Indexing Querying Maintenance One of the major areas of maturity in Lucene is how it optimized indexing. You can see it in the code. For example, Lucene goes to a great deal of trouble to avoid allocating memory willy nilly. Instead, pretty much everything there is done via object pools. This helps reduce the memory pressure when doing a lot of indexing and can save a lot of GC cycles.  Another is the concept of multiple threads for indexing .A lot of Lucene is build around this idea, it has a lot of per thread state that is meant to ensure that you don&#x2019;t have to deal with concurrency yourself. The idea is that you can take an IndexWriter and write to it concurrently, then call commit. A lot of the work to do with indexing is CPU intensive, so that makes a lot of sense, and Lucene nicely isolates you from all of that work. There is DocumentWriterPerThread, so you can see really nice scaling effects as you throw more threads &amp; hardware at the problem. Usually, when people start messing with Lucene, they do that by writing analyzers, and you are sort of exposed to the memory constraints by being encourage to use ReusableTokenStream, etc. It has also a nice pipeline architecture for doing the indexing work with filters. On the querying side, Lucene does a lot of work to ensure that things just works. It has a Boolean Model for searches, and Vector Space Model for ranking. Writing your own Query classes is pretty easy too, once you understand how things work, and again, this is another common place for people to extend Lucene. But there is a lot going on behind the scenes. Lucene does a lot of caching on a segment basis, and it is quite nice, since segments are immutable, it means that you can get pretty good usage out of that.  That give it a lot of its speed, and it means that over time, things are actually going to be faster, because more parts of the segments are in memory and cached.  Finally, we have all of the other work that Lucene does. In practice, it means things like merging segments (hopefully in the background), and keeping the overall system humming along. Unfortunately, that is also one of the places that are usually most common for people to start tinkering with when they run into perf problems. That is anything but trivial, and optimizing it is something that require a lot of expertise and understanding about the specific scenario you have. And on top of that, you have everything else that already works on top of Lucene. Which is quite a lot. As I said earlier, that is a very impressive piece of technology. That doesn&#x2019;t mean that it doesn&#x2019;t have its own set of problems, but that is something that I&#x2019;ll discuss in detail in my next post.</p>
        </article>
        <article id="article-3927">
            <a href="https://ayende.com/blog/166340/sorting-with-lucene" target="_blank">
                <h2 class="title mb-6" id="article-3927">Sorting with Lucene</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 10, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I talked about the Lucene formula and how it calculate things using tf-idf for best matches. Now I want to talk about the actual sorting implementation. As it turned out, the default sorting (by relevancy) is really simple. All you need is to get the relevant score for a query, then you shove the results through a heap with a specified size. The heap will take care of maintain the top results. So far, that is pretty simple to understand. But the question is, how do you do sorting on a field value? The answer is, not easily.  GetStringIndex() does something very interesting. I returns&#xA0; a string index, which gives us:  A string array containing all the distinct (sorted) value for this index. A int array with all the documents in the index, with the position of the value of that field in the string value array Now we can compare fields by their field position on the field, which give us pretty good sorting. Unfortunately, this also require us to load all the values to memory. Let us see another example, which would probably be easier to follow: Sorting by an integer is done like this:  Get an array (whose size match the number of documents),&#xA0; We can then sort things easily because accessing the relevant field value only require us to have the document id to index into the array. The reason Lucene does this is that it uses an inverted index, and it has no easy way of going from the field values to the list documents it has. So it is easier to read all the values into memory and work with them there. I don&#x2019;t like it, but off hand, I can&#x2019;t think of a better way to handle this.</p>
        </article>
        <article id="article-3928">
            <a href="https://ayende.com/blog/166433/ravendb-conf-success" target="_blank">
                <h2 class="title mb-6" id="article-3928">RavenDB Conf: Success!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 09, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Now that the conference is over ,and I am merely doing 3 back to back RavenDB courses in 3 cities and 2 continents, I can sit back and look at that. I was, in a word, a blast. We had eight speakers giving 14 talks, about topics that moved from date and time handling in RavenDB to operational concerns to architectural how to. But, to be honest, I think that I found the attendees to be the main attraction. It was really good to finally meet so many of the people we have been talking with over the past few years. And what people are building with RavenDB is flat out amazing, and just a little bit scary. It is a funny thing when I see people take our tool and put it to uses that we have never even imagined. Another great part was the hackaton. We had, in the space of a few hours, produced a major new feature for RavenDB (distributed counters), with everything wired up: Storage, Wire Protocol and even the UI. We still need to complete the replication bits, but those are coming. We have recorded the sessions, and we hope to have the edited videos soon. I wanted to take the time and thank the speakers and the attendees for such a great conference . We&#x2019;ll be seeing you again soon&#x2026; .</p>
        </article>
        <article id="article-3929">
            <a href="https://ayende.com/blog/166402/my-ravendb-conference-presentations" target="_blank">
                <h2 class="title mb-6" id="article-3929">My RavenDB Conference presentations</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 08, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">RavenDB 3.0 Keynote  from Oren Eini        How Voron works: Insight into the new RavenDB storage engine  from Oren Eini        Tailored database solutions: Building a 100 billion records db in 20 minutes  from Oren Eini</p>
        </article>
        <article id="article-3930">
            <a href="https://ayende.com/blog/166401/ravenconf-day-1" target="_blank">
                <h2 class="title mb-6" id="article-3930">RavenConf, day 1</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: April 08, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I started the day at 5:30 AM, because we had to go to the venue and get everything ready. This is now 01:30 AM for the next day, and I am still stoked.  I took this picture at around 8 AM, when people started to queue up to go into the conference:  For that matter, you can see a few other photos from the conference here. I&#x2019;ll do a retrospect about the conference when I have time to breath. But for now, I can report that the RavenDB Hackaton was quite a success, we have a cool new feature mostly implemented. You can see it here: https://github.com/ayende/ravendb/tree/duco And yes, I&#x2019;ll talk about that in the future as well. But right now, I&#x2019;m going to have a db capable of managing a 100 billion records tomorrow, live on stage, so I probably need to get some sleep done&#x2026;</p>
        </article>
        <div class="button flex justify-between">
            <a href="392.html"><span class="back arrow"></span></a>

            <a href="394.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>