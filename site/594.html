
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 594 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5931">
            <a href="https://ayende.com/blog/4027/can-you-justify-your-actions-with-regards-to-this-pattern" target="_blank">
                <h2 class="title mb-6" id="article-5931">Can you justify your actions with regards to this pattern?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 21, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Probably the most common problem with unintended complexity in software is the unthinking application of patterns. I see a lot more code that has became more complex through that practice than code that has became simpler.  David Wheeler said: &#x201C;All problems in computer science can be solved by another level of indirection;&#x201D; However, we tend to forget the extra bit that Kevlin Henney&#x27;s tacked at the end, &quot;...except for the problem of too many layers of indirection.&quot;  Most patterns templates come with a clearly defined sections for &#x201C;when to use&#x201D; and &#x201C;what are the disadvantages&#x201D;. The problem is that patterns has became hip and cool, so people are actively seeking to use them.  Memento is my favorite pattern.  Do you know why?   I have never had found any need to implement it.   Remember, patterns are just formalized ways to work around limitations in the programming language or environment. Despite all the coolness points associated with them, they represent a non trivial cost in time, complexity and implications on a code base.  When you use a pattern, you have to be able to justify that use. What does it buy you? Have you considered the ramifications? What does it cost you? Is it worth it?&#xA0; I tend to use patterns quite a bit, but in the last year or so I force myself to make a conscious decision whenever I want to apply one. Quite often, there is nothing that really requires it.  If you can get by without patterns, it usually means that you have a simpler solution. If you have a problem that fits a pattern&#x2019;s problem description, and the pattern is applicable for your programming language and environment, you should use it.  Just don&#x2019;t apply patterns all over the place, it end up being an overly engineered codebase that has significant maintenance overhead because of the patterns. I have seen too many apps that could have been simple turn into a multi layer mess of indirect calls that no one could really follow.   When I was in the army, I usually follow the following maxim:     Think, then do. And you have better be able to explain you actions.   It worked for me then and since.</p>
        </article>
        <article id="article-5932">
            <a href="https://ayende.com/blog/4026/the-state-of-open-source-in-the-net-ecosystem-a-five-year-summary" target="_blank">
                <h2 class="title mb-6" id="article-5932">The state of Open Source in the .NET ecosystem: A five year summary</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 20, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I have been forcibly reminded lately that I have been doing this for quite some time. In fact, I have been doing working with Open Source on the .Net platform for over 5 years now. And a few conversations with friends have given me quite a retrospective on the state of OSS.Net.  5 years ago, it was 2004, .Net 1.1 was still a hot thing, and Stored Procedures on top of datasets where still a raging debate. Open source was considered a threat and Steve Balmer was busy blasting at any OSS project that showed up. The very existence or need for OSS on the .NET platform was frequently questioned.  I remember trying to find work in 2005, after over a year of actively working on Open Source projects and with Rhino Mocks making steady but sure progress in the .NET TDD community and not being able to leverage that experience into job interviews. It was only commercial experience that counted for the gate keepers.  The last 5 years have been quite interesting in the .NET ecosystem from the OSS world. It has gotten to the point where the use of OSS tools, frameworks and platforms is no longer a strange exception, but is quite common place.   There are several data points on which I am basing this statement:     Books about OSS projects are commonly published.     Microsoft is doing a lot to encourage OSS on the .Net platform.    NHibernate&#x2019;s download numbers are consistently above ten thousands a month, usually closer or above twenty thousands a month.     I released Windsor 2.0 not even two weeks ago, and it has over 1,200 downloads already.     The number of messages to the NHibernate users mailing list is usually above a thousands per month.    My NHibernate course sold out and I have to do a repeat course to satisfy demand.   And then, there is my own experience, both as a member in the community and as a consultant. I see OSS being used quite often. A lot of my engagements are about OSS tools and framework, and I am rarely the person to introduce them into the company.  I think that there are several factors playing around here, but most of that is around maturity. The OSS players in the .NET world had had some time to work on things, and most established projects have been around for years. NHibernate is 6 years old, Castle is 5, Rhino Mocks 4. It is not the Open Source world that represent stability. With Microsoft replacing their data access strategy every two years, it might be best to use NHibernate, because it has been around for a long time already.  There is also the issue of maturity in the ecosystem itself. It has became quite clear that it is acceptable and even desirable to use OSS projects. And we have companies making explicit decisions to support Open Source projects (iMeta decision to donate 3 dev months is just one example, although the most prominent one). Recently I was working with a client on strategies for Open Sourcing their software, and how to manage a good Open Source project. In another client, a decision has been reached to put all the infrastructure stuff as Open Source, even newly developed one, because they are infrastructure. Infrastructure is seen as a commodity, and as such, there is little value in trying to make it unique.  There is a lot of value, however, in making it Open Source and accepting improvements from others. And I was able to point out to that client how outside contributions to the infrastructure has enabled us to do things that we would have to do ourselves.  Things are changing, I don&#x2019;t think that we are at the balance point yet, but I think that we are seeing a very big shift, happening very very slowly. And from the Open Source perspective, things are looking quite good.</p>
        </article>
        <article id="article-5933">
            <a href="https://ayende.com/blog/4025/dev-teach-vancouver-alt-net-canada" target="_blank">
                <h2 class="title mb-6" id="article-5933">Dev Teach Vancouver &amp; ALT.Net Canada</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 20, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In a very few weeks, I am going to spend some time in my favorite north America conference, DevTeach. It is my favorite for several reason, great attendees, great organization, great speakers line up, and an always interesting occurrences. Thankfully, no one published the real pictures from the last one :-)  This time, in addition to all the nice features that are usually part of DevTeach, we also have the bonus of having ALT.Net Canada happening in the weekend directly after DevTeach. This means that I am going to be having throughout the week.  As an aside, I am going to stay a day or two after the weekend is over, the original plan was to give me some time to recover from all of that, but if you are in Vancouver and would like me to drop in and do some consulting, do ping me.</p>
        </article>
        <article id="article-5934">
            <a href="https://ayende.com/blog/4024/nhibernate-mapping-a-single-domain-model-to-multiple-physical-data-models" target="_blank">
                <h2 class="title mb-6" id="article-5934">NHibernate &#x2013; Mapping a single domain model to multiple physical data models</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 19, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A while ago I sat down and talked with a colleague about the Entity Framework, he raved about how important the separation of the logical model from the physical one is. I don&#x2019;t really buy into that, but that is&#xA0; beside the point.   Last week, on the Progressive.NET NHibernate workshops, I setup, quite accidently, to create a single domain model and map it to several physical data models. I promised to share the code, and I think that this form is as good as any.   Let us start from the following domain model:    I am going to present three things for each physical data model manifestation. The mapping, the database schema and the result of the following query:          s.CreateQuery(&quot;from Owner owner where owner.Name = &#x27;ayende&#x27;&quot;)&#xA;    .List&lt;Owner&gt;();&#xA;  &#xA;&#xA;&#xA;We will start with the classic, table per class, which looks like this:&#xA;&#xA;&#xA;  &#xA;    &lt;class name=&quot;Company&quot;&gt;&#xA;    &lt;id column=&quot;Id&quot;  type=&quot;System.Int32&quot;&gt;&#xA;        &lt;generator class=&quot;hilo&quot;/&gt;&#xA;    &lt;/id&gt;&#xA;    &lt;property name=&quot;Name&quot;/&gt;&#xA;    &lt;property name=&quot;CompanyRegistrationId&quot;/&gt;&#xA;    &lt;set name=&quot;Horses&quot; table=&quot;CompanyHorses&quot;&gt;&#xA;        &lt;key column=&quot;Company&quot;/&gt;&#xA;        &lt;many-to-many class=&quot;Horse&quot; column=&quot;Horse&quot;/&gt;&#xA;    &lt;/set&gt;&#xA;&lt;/class&gt;&#xA;&#xA;&lt;class name=&quot;Individual&quot;&gt;&#xA;    &lt;id column=&quot;Id&quot;  type=&quot;System.Int32&quot;&gt;&#xA;        &lt;generator class=&quot;hilo&quot;/&gt;&#xA;    &lt;/id&gt;&#xA;    &lt;property name=&quot;Name&quot;/&gt;&#xA;    &lt;property name=&quot;Email&quot;/&gt;&#xA;    &lt;set name=&quot;Horses&quot; table=&quot;HorsesBelongToIndividuals&quot;&gt;&#xA;        &lt;key column=&quot;Company&quot;/&gt;&#xA;        &lt;many-to-many class=&quot;Horse&quot; column=&quot;Horse&quot;/&gt;&#xA;    &lt;/set&gt;&#xA;&lt;/class&gt;&#xA;&#xA;&lt;class name=&quot;Consortium&quot;&gt;&#xA;    &lt;id column=&quot;Id&quot;  type=&quot;System.Int32&quot;&gt;&#xA;        &lt;generator class=&quot;hilo&quot;/&gt;&#xA;    &lt;/id&gt;&#xA;    &lt;property name=&quot;Name&quot;/&gt;&#xA;    &lt;set name=&quot;Horses&quot; table=&quot;HorsesBelongToIndividuals&quot;&gt;&#xA;        &lt;key column=&quot;Company&quot;/&gt;&#xA;        &lt;many-to-many class=&quot;Horse&quot; column=&quot;Horse&quot;/&gt;&#xA;    &lt;/set&gt;&#xA;    &lt;set name=&quot;Owners&quot; table=&quot;ConsortiumOwners&quot;&gt;&#xA;        &lt;key column=&quot;Consortium&quot;/&gt;&#xA;        &lt;many-to-any id-type=&quot;System.Int32&quot; meta-type=&quot;System.String&quot;&gt;&#xA;            &lt;meta-value class=&quot;Individual&quot; value=&quot;Individual&quot;/&gt;&#xA;            &lt;meta-value class=&quot;Company&quot; value=&quot;Company&quot;/&gt;&#xA;            &lt;meta-value class=&quot;Consortium&quot; value=&quot;Consortium&quot;/&gt;&#xA;            &lt;column name=&quot;OwnerType&quot;/&gt;&#xA;            &lt;column name=&quot;OwnerId&quot;/&gt;&#xA;        &lt;/many-to-any&gt;&#xA;    &lt;/set&gt;&#xA;&lt;/class&gt;&#xA;  &#xA;&#xA;&#xA;The database schema is:&#xA;&#xA; &#xA;&#xA;You might want to pay some attention to the association between Consortium and its owner, using &lt;many-to-any/&gt;.&#xA;&#xA;Trying to execute the aforementioned query will give us an error, NHibernate is not aware of any persistent class called Owner and HQL queries are not polymorphic over unknown types. Criteria API, however, are. And we can execute the following query successfully:&#xA;&#xA;&#xA;  &#xA;    s.CreateCriteria&lt;Owner&gt;()&#xA;    .Add(Restrictions.Eq(&quot;Name&quot;, &quot;ayende&quot;))&#xA;    .List&lt;Owner&gt;();&#xA;  &#xA;&#xA;&#xA;Which result in:&#xA;&#xA; &#xA;&#xA; &#xA;&#xA; &#xA;&#xA;Let us look at another scenario, which would keep the same data model, but let NHibernate know about the inheritance association between the classes. NHibernate call this type of association union subclasses. Here are the mapping:&#xA;&#xA;&#xA;  &#xA;    &lt;class name=&quot;Owner&quot; abstract=&quot;true&quot;&gt;&#xA;    &lt;id column=&quot;Id&quot;  type=&quot;System.Int32&quot;&gt;&#xA;        &lt;generator class=&quot;hilo&quot;/&gt;&#xA;    &lt;/id&gt;&#xA;    &lt;set name=&quot;Horses&quot; table=&quot;OwnerHorses&quot;&gt;&#xA;        &lt;key column=&quot;Owner&quot;/&gt;&#xA;        &lt;many-to-many class=&quot;Horse&quot; column=&quot;Horse&quot;/&gt;&#xA;    &lt;/set&gt;&#xA;    &lt;property name=&quot;Name&quot;/&gt;&#xA;    &lt;union-subclass name=&quot;Company&quot;&gt;&#xA;        &lt;property name=&quot;CompanyRegistrationId&quot;/&gt;&#xA;    &lt;/union-subclass&gt;&#xA;&#xA;    &lt;union-subclass  name=&quot;Individual&quot;&gt;&#xA;        &lt;property name=&quot;Email&quot;/&gt;&#xA;    &lt;/union-subclass&gt;&#xA;&#xA;    &lt;union-subclass name=&quot;Consortium&quot;&gt;&#xA;        &lt;set name=&quot;Owners&quot; table=&quot;ConsortiumOwners&quot;&gt;&#xA;            &lt;key column=&quot;Consortium&quot;/&gt;&#xA;            &lt;many-to-many class=&quot;Owner&quot; column=&quot;Owner&quot;/&gt;&#xA;        &lt;/set&gt;&#xA;    &lt;/union-subclass&gt;&#xA;&lt;/class&gt;&#xA;  &#xA;&#xA;&#xA;You might notice how simple the mapping looks like. For that matter, look at how we could simplify the mapping between horses and owners.&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA; &#xA;&#xA;The resulting query is&#x2026; interesting:&#xA;&#xA; &#xA;&#xA;And now let us move to the more classic inheritance schemes, first, let us look at table per hierarchy:&#xA;&#xA;&#xA;  &#xA;    &lt;class name=&quot;Owner&quot; abstract=&quot;true&quot;&gt;&#xA;    &lt;id column=&quot;Id&quot;  type=&quot;System.Int32&quot;&gt;&#xA;        &lt;generator class=&quot;hilo&quot;/&gt;&#xA;    &lt;/id&gt;&#xA;    &lt;discriminator column=&quot;Type&quot; type=&quot;System.String&quot;/&gt;&#xA;    &lt;set name=&quot;Horses&quot; table=&quot;OwnerHorses&quot;&gt;&#xA;        &lt;key column=&quot;Owner&quot;/&gt;&#xA;        &lt;many-to-many class=&quot;Horse&quot; column=&quot;Horse&quot;/&gt;&#xA;    &lt;/set&gt;&#xA;    &lt;property name=&quot;Name&quot;/&gt;&#xA;    &lt;subclass discriminator-value=&quot;Company&quot; name=&quot;Company&quot;&gt;&#xA;        &lt;property name=&quot;CompanyRegistrationId&quot;/&gt;&#xA;    &lt;/subclass&gt;&#xA;&#xA;    &lt;subclass discriminator-value=&quot;Individual&quot; name=&quot;Individual&quot;&gt;&#xA;        &lt;property name=&quot;Email&quot;/&gt;&#xA;    &lt;/subclass&gt;&#xA;&#xA;    &lt;subclass discriminator-value=&quot;Consortium&quot; name=&quot;Consortium&quot;&gt;&#xA;        &lt;set name=&quot;Owners&quot; table=&quot;ConsortiumOwners&quot;&gt;&#xA;            &lt;key column=&quot;Consortium&quot;/&gt;&#xA;            &lt;many-to-many class=&quot;Owner&quot; column=&quot;Owner&quot;/&gt;&#xA;        &lt;/set&gt;&#xA;    &lt;/subclass&gt;&#xA;&lt;/class&gt;&#xA;  &#xA;&#xA;&#xA;With the following schema:&#xA;&#xA; &#xA;&#xA;In this case, Owner.Type is the discriminator for the Owner hierarchy. And the query that is generated is:&#xA;&#xA; &#xA;&#xA;And finally, we have table per subclass, which we use the following mapping:&#xA;&#xA;&#xA;  &#xA;    &lt;class name=&quot;Owner&quot; abstract=&quot;true&quot;&gt;&#xA;    &lt;id column=&quot;Id&quot;  type=&quot;System.Int32&quot;&gt;&#xA;        &lt;generator class=&quot;hilo&quot;/&gt;&#xA;    &lt;/id&gt;&#xA;    &lt;set name=&quot;Horses&quot; table=&quot;OwnerHorses&quot;&gt;&#xA;        &lt;key column=&quot;Owner&quot;/&gt;&#xA;        &lt;many-to-many class=&quot;Horse&quot; column=&quot;Horse&quot;/&gt;&#xA;    &lt;/set&gt;&#xA;    &lt;property name=&quot;Name&quot;/&gt;&#xA;    &lt;joined-subclass name=&quot;Company&quot;&gt;&#xA;        &lt;key column=&quot;Id&quot;/&gt;&#xA;        &lt;property name=&quot;CompanyRegistrationId&quot;/&gt;&#xA;    &lt;/joined-subclass&gt;&#xA;&#xA;    &lt;joined-subclass name=&quot;Individual&quot;&gt;&#xA;        &lt;key column=&quot;Id&quot;/&gt;&#xA;        &lt;property name=&quot;Email&quot;/&gt;&#xA;    &lt;/joined-subclass&gt;&#xA;&#xA;    &lt;joined-subclass name=&quot;Consortium&quot;&gt;&#xA;        &lt;key column=&quot;Id&quot;/&gt;&#xA;        &lt;set name=&quot;Owners&quot; table=&quot;ConsortiumOwners&quot;&gt;&#xA;            &lt;key column=&quot;Consortium&quot;/&gt;&#xA;            &lt;many-to-many class=&quot;Owner&quot; column=&quot;Owner&quot;/&gt;&#xA;        &lt;/set&gt;&#xA;    &lt;/joined-subclass&gt;&#xA;&lt;/class&gt;&#xA;  &#xA;&#xA;&#xA;This gives us this schema:&#xA;&#xA; &#xA;&#xA;Using this approach, we query them using:&#xA;&#xA; &#xA;&#xA;I would like to point out that this is just a sample of the type of things that we can do with NHibernate, and that I took the easy path doing so. There are actually more complex inheritance option available (discriminator with joined classes, for example) and it is pretty easy to change things even further.&#xA;&#xA;And, of course, it is entirely possible to take things in the other direction, and have a single physical data model that can map to several domain models.&#xA;&#xA;Have fun&#x2026;</p>
        </article>
        <article id="article-5935">
            <a href="https://ayende.com/blog/4023/nhibernate-queries-examples" target="_blank">
                <h2 class="title mb-6" id="article-5935">NHibernate Queries - Examples</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 19, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Today was the first day of my NHibernate course, and I think that it might be good to point out a few of the samples that we worked with. Those are pretty basic NHibernate queries, but they are probably going to be useful for beginners.&#xA;Let us take my usual Blog model, and see what kind of queries (and results) we can come up with:&#xA; &#xA;Let us find a blog by its identifier:&#xA;&#xA;&#xA;var blog = s.Get&lt;Blog&gt;(1);&#xA;&#xA;&#xA;Which results in:&#xA;&#xA;We can also try:&#xA;&#xA;var blog = s.Load&lt;Blog&gt;(1);&#xA;&#xA;Which would result in&#x2026; absolutely no SQL queries. You can look at a more deep discussion of that here.&#xA;Now, let us try to search by a property:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Restrictions.Eq(&quot;Title&quot;, &quot;Ayende @ Rahien&quot;))    .List&lt;Blog&gt;();&#xA;&#xA;  &#xA;Which results in:&#xA; &#xA;If we try to make the same with HQL, it would look:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.Title = :title&quot;)    .SetParameter(&quot;title&quot;,&quot;Ayende @ Rahien&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which results in slight different SQL than using the criteria:&#xA;&#xA0;&#xA;What about trying a more complex conditional? Let us try to see comparing two properties:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Restrictions.Eq(&quot;Title&quot;,&quot;Ayende @ Rahien&quot;))    .Add(Restrictions.Eq(&quot;Subtitle&quot;, &quot;Send me a patch for that&quot;))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which results in:&#xA; &#xA;Let us do that again, but using two properties using an OR:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Restrictions.Disjunction()             .Add(Restrictions.Eq(&quot;Title&quot;, &quot;Ayende @ Rahien&quot;))             .Add(Restrictions.Eq(&quot;Subtitle&quot;, &quot;Send me a patch for that&quot;)))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which would result in:&#xA; &#xA;We can also execute the same SQL using the following syntax:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(            Restrictions.Eq(&quot;Title&quot;, &quot;Ayende @ Rahien&quot;) ||             Restrictions.Eq(&quot;Subtitle&quot;, &quot;Send me a patch for that&quot;)        )    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Doing the same using HQL would be:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.Title = :title and b.Subtitle = :subtitle&quot;)    .SetParameter(&quot;title&quot;,&quot;Ayende @ Rahien&quot;)    .SetParameter(&quot;subtitle&quot;, &quot;Send me a patch for that&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which results in:&#xA; &#xA;And changing that to an OR is pretty self explanatory :-)&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.Title = :title or b.Subtitle = :subtitle&quot;)    .SetParameter(&quot;title&quot;,&quot;Ayende @ Rahien&quot;)    .SetParameter(&quot;subtitle&quot;, &quot;Send me a patch for that&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Giving us:&#xA; &#xA;Let us try something a bit more complex, finding a blog by a post title:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .CreateCriteria(&quot;Posts&quot;)    .Add(Restrictions.Eq(&quot;Title&quot;,&quot;NHibernate Rocks&quot;))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;That gives us:&#xA; &#xA;You will note that we force a load of the Posts collection. We can try something else, though:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Subqueries.PropertyIn(&quot;id&quot;,        DetachedCriteria.For&lt;Post&gt;()            .Add(Restrictions.Eq(&quot;Title&quot;,&quot;NHibernate Rocks&quot;))            .SetProjection(Projections.Property(&quot;Blog.id&quot;))        ))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which would give us the same result, but without loading the Posts collection:&#xA; &#xA;This is a pretty common example of changing the way that we compute complex conditionals when we want to avoid wide result sets.&#xA;Let us do the same with HQL:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b join b.Posts p where p.Title = :title&quot;)    .SetParameter(&quot;title&quot;, &quot;NHibernate Rocks&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;Which would result:&#xA; &#xA;We have the same issue as with the first Criteria API, and we can resolve it in the same way:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.id in (from Post p where p.Title = :title)&quot;)    .SetParameter(&quot;title&quot;, &quot;NHibernate Rocks&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;And the same result as in the Criteria API show us:&#xA; &#xA;And the final test, let us try to find a blog that has a post posted by a specific user:&#xA;&#xA;&#xA;var blogs = s.CreateCriteria&lt;Blog&gt;()    .Add(Subqueries.PropertyIn(&quot;id&quot;,        DetachedCriteria.For&lt;Post&gt;()            .SetProjection(Projections.Property(&quot;Blog.id&quot;))            .CreateCriteria(&quot;User&quot;)            .Add(Restrictions.Eq(&quot;Username&quot;,&quot;Ayende&quot;))        ))    .List&lt;Blog&gt;();&#xA;&#xA;&#xA;And this give us:&#xA; &#xA;The same thing with HQL will give us:&#xA;&#xA;&#xA;var blogs = s.CreateQuery(&quot;from Blog b where b.id in (from Post p where p.User.Username = :user)&quot;)    .SetParameter(&quot;user&quot;,&quot;Ayende&quot;)    .List&lt;Blog&gt;();&#xA;&#xA;  &#xA;And that results:</p>
        </article>
        <article id="article-5936">
            <a href="https://ayende.com/blog/4022/code-from-persistence-net-nhibernate-workshops" target="_blank">
                <h2 class="title mb-6" id="article-5936">Code from Persistence.NET NHibernate Workshops</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The relevant code from the live coding exercise can be found here, and it is probably going to be the basis of most of the demos that I am going to do.  Have fun playing with it&#x2026;</p>
        </article>
        <article id="article-5937">
            <a href="https://ayende.com/blog/4021/who-is-the-responsible-party" target="_blank">
                <h2 class="title mb-6" id="article-5937">Who is the responsible party?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 18, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Object Oriented design is all about placing behavior and data together, of making the object responsible for its own operations. The problem then becomes identifying which object is responsible for what. This is usually pretty easy, since the natural owner of an operation is usually clear. Note that I don&#x2019;t much care for the choice people make between things like parent.AddChild(child) vs. child.AddTo(parent). Both are equally good from my point of view. What I don&#x2019;t want to see is this:     parent.Children.Add(child);     child.Parent = parent;   The reason for that is quite simple. This is a serious violation of the Tell, Don&#x2019;t Ask protocol, and it means that someone is missing the pointing between the ownership of a particular operation and the instigator of that operation. The instigator is usually the UI, requesting that something will happen. Bad code will usually put a lot of the logic in the instigator side, rather than on the owner side.   Then we move into issues of cohesiveness and coupling, which guides us further in understanding how to place the appropriate responsibilities. All logic related to a particular aspect of the application should reside in the same location, so it is easy to work with, modify and change.  But by far the most common error I see people make is placing responsibilities on the instigator rather than on other parts of the system. There should be a very clear distinction between the two. Other than that, there is a lot of stuff that is just experience and understanding of the actual system.  In the end, all systems are refactorable, so you shouldn&#x2019;t be afraid to make mistakes.</p>
        </article>
        <article id="article-5938">
            <a href="https://ayende.com/blog/4020/nh-prof-release-candidate-is-out" target="_blank">
                <h2 class="title mb-6" id="article-5938">NH Prof</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well,  After quite a while of developing on a private branch, it is time to make NH Prof RC public. We have worked on several new features, but chief among them was performance. As I outlined in the past, we have to rip apart the internal communication mechanisms inside NH Prof, to allow it to react well under high load.  There are some things that you need to know first, though:     Session factory stats is currently disabled, there is no reason except that some things had to be cut in order to release the RC. It will be back soon.    The RC bits are not compatible with the beta bits. If you want to use RC UI with your application (and you should), you need to use the RC appender.   As usual, you can find it here, build 260 or up.  Have fun, and tell us what you think.</p>
        </article>
        <article id="article-5939">
            <a href="https://ayende.com/blog/4019/mutable-linq-expressions" target="_blank">
                <h2 class="title mb-6" id="article-5939">Mutable Linq Expressions</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">As you probably know, System.Linq.Expression is considered to be immutable. This is a major pain when it comes to working with them, and many Linq providers end up creating a parallel hierarchy of expressions that are mutable.  What I am going to show you now is probably going to get some people in Microsoft pretty angry with me, but hey, if they used ReSharper, they wouldn&#x2019;t have this problem. In a true TDD fashion, let us start with a failing test:          var constant = Expression.Constant(5);&#xA;var captureReference = constant;&#xA;&#xA;// put something here that may not change the captureReference variable&#xA;&#xA;Debug.Assert(ReferenceEquals(constant, captureReference));&#xA;Debug.Assert(constant.Value.Equals(2));&#xA;  &#xA;&#xA;&#xA;We then move on to look at the actual ConstantExpression code:&#xA;&#xA; &#xA;&#xA;Do you see the hook that I am going to plug into?&#xA;&#xA;Coming back to my ReSharper plug, it is pretty easy to see that value is a read only value, but it is not mark as such. This is one of ReSharper&#x2019;s suggestions that came in 4.0, and made me aware of the reasons to do so. Because it is not mark as such, I have a way in&#x2026;&#xA;&#xA;All it requires is a bit of LCG (lightweight code generation), such as this:&#xA;&#xA;&#xA;  &#xA;    public static Action&lt;ConstantExpression, object&gt; CreateSetAccessor()&#xA;{&#xA;    var accessor = new DynamicMethod(&quot;SetValue&quot;, typeof (void), new Type[]&#xA;    {&#xA;        typeof (ConstantExpression),&#xA;        typeof (object)&#xA;    }, true);&#xA;    var generator = accessor.GetILGenerator();&#xA;    generator.Emit(OpCodes.Ldarg_0);&#xA;    generator.Emit(OpCodes.Ldarg_1);&#xA;    generator.Emit(OpCodes.Stfld,typeof(ConstantExpression).GetField(&quot;value&quot;,BindingFlags.Instance|BindingFlags.NonPublic));&#xA;    generator.Emit(OpCodes.Ret);&#xA;    return (Action&lt;ConstantExpression, object&gt;)accessor.CreateDelegate(typeof(Action&lt;ConstantExpression,object&gt;));&#xA;}&#xA;  &#xA;&#xA;&#xA;And now we have a passing test:&#xA;&#xA;&#xA;  &#xA;    var valueSetAccessor = CreateSetAccessor();&#xA;var constant = Expression.Constant(5);&#xA;var captureReference = constant;&#xA;&#xA;valueSetAccessor(constant, 2);&#xA;&#xA;Debug.Assert(ReferenceEquals(constant, captureReference));&#xA;Debug.Assert(constant.Value.Equals(2));&#xA;  &#xA;&#xA;&#xA;Now, I don&#x2019;t really recommend doing this. This is unsupported, etc.&#xA;&#xA;But it is a cool trick, and it applies pretty much generically across all of the Expression classes.</p>
        </article>
        <article id="article-5940">
            <a href="https://ayende.com/blog/4018/nh-prof-for-hibernate-now-in-closed-beta" target="_blank">
                <h2 class="title mb-6" id="article-5940">NH Prof for Hibernate &#x2013; Now in Closed Beta</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: May 17, 2009
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, I heard the requirement quite clearly, so let us see how this looks like, given the following code:          public class SelectBlogByIdUsingCriteria extends AbstractScenario {&#xA;&#xA;    @Override&#xA;    protected void doExecute(SessionFactory factory) {&#xA;        doInTransaction(new SessionCallback&lt;Object&gt;() {&#xA;            @Override&#xA;            public Object execute(Session session) {&#xA;                return session.createCriteria(Blog.class)&#xA;                .add(Restrictions.idEq(1))&#xA;                .list();            &#xA;            }&#xA;        });&#xA;&#xA;    }&#xA;}&#xA;  &#xA;&#xA;&#xA;We get the following result:&#xA;&#xA; &#xA;&#xA;I am currently looking for people to actually do field testing of this for me.&#xA;&#xA;If you are interested, please ping me via email.</p>
        </article>
        <div class="button flex justify-between">
            <a href="593.html"><span class="back arrow"></span></a>

            <a href="595.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>