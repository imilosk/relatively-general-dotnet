
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 627 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-6261">
            <a href="https://ayende.com/blog/3633/windsor-ihandlerselector" target="_blank">
                <h2 class="title mb-6" id="article-6261">Windsor - IHandlerSelector</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 05, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In my previous post I introduced the basis of context as an architectural pattern. Now I want to talk about how we can implement that using Windsor and a new extensibility point: IHandlerSelector. The interface is defined as: /// &lt;summary&gt;&#xA;/// Implementors of this interface allow to extend the way the container perform&#xA;/// component resolution based on some application specific business logic.&#xA;/// &lt;/summary&gt;&#xA;/// &lt;remarks&gt;&#xA;/// This is the sibling interface to &lt;seealso cref=&quot;ISubDependencyResolver&quot;/&gt;.&#xA;/// This is dealing strictly with root components, while the &lt;seealso cref=&quot;ISubDependencyResolver&quot;/&gt; is dealing with&#xA;/// dependent components.&#xA;/// &lt;/remarks&gt;&#xA;public interface IHandlerSelector&#xA;{&#xA;    /// &lt;summary&gt;&#xA;    /// Whatever the selector has an opinion about resolving a component with the &#xA;    /// specified service and key.&#xA;    /// &lt;/summary&gt;&#xA;    /// &lt;param name=&quot;key&quot;&gt;The service key - can be null&lt;/param&gt;&#xA;    /// &lt;param name=&quot;service&quot;&gt;The service interface that we want to resolve&lt;/param&gt;&#xA;    bool HasOpinionAbout(string key, Type service);&#xA;&#xA;    /// &lt;summary&gt;&#xA;    /// Select the appropriate handler from the list of defined handlers.&#xA;    /// The returned handler should be a member from the &lt;paramref name=&quot;handlers&quot;/&gt; array.&#xA;    /// &lt;/summary&gt;&#xA;    /// &lt;param name=&quot;key&quot;&gt;The service key - can be null&lt;/param&gt;&#xA;    /// &lt;param name=&quot;service&quot;&gt;The service interface that we want to resolve&lt;/param&gt;&#xA;    /// &lt;param name=&quot;handlers&quot;&gt;The defined handlers&lt;/param&gt;&#xA;    /// &lt;returns&gt;The selected handler, or null&lt;/returns&gt;&#xA;    IHandler SelectHandler(string key, Type service, IHandler[] handlers);&#xA;}&#xA;And registering it in the container is simply:&#xA;&#xA;container.Kernel.AddHandlerSelector(selector);&#xA;A handler selector is asked if it wants to express an opinion on a particular component resolution, based on key (optional) and type. Assuming we say yes, we are called to select the appropriate handler from all the registered handlers that can satisfy that request.&#xA;Let us say that we want to recover from the database being down by serving an implementation that reads from only the cache, we can implement it thusly:&#xA;public class DataAccessHandlerSelector : IHandlerSelector&#xA;{&#xA;&#x9;bool databaseIsDown = false;&#xA;&#xA;&#x9;public DataAccessHandlerSelector()&#xA;&#x9;{&#xA;&#x9;&#x9;DatabaseMonitor.OnChangedState &#x2B;= &#xA;&#x9;&#x9;&#x9;state =&gt; databaseIsDown = state == DatabaseState.Down;&#xA;&#x9;}&#xA;&#xA;&#x9;public bool HasOpinionAbout(string key, Type service)&#xA;&#x9;{&#xA;&#x9;&#x9;return databaseIsDown &amp;&amp; service == typeof(IRepository);&#xA;&#x9;}&#xA;&#xA;&#x9;public IHandler SelectHandler(string key, Type service, IHandler[] handlers)&#xA;&#x9;{&#xA;&#x9;&#x9;return handlers.Where(x=&gt;x.ComponentModel.Implementation == typeof(CacheOnlyRepository)).First();&#xA;   &#x9;}&#xA;&#xA;}&#xA;Now we automatically replace, based on our own logic and the current context what type of component the container should resolve.&#xA;I am giving the example of detecting infrastructure change, but as important, and as interesting, is the ability to easily use this in order to select services in a multi tenant environment. We can use this approach to perform service overrides all over the place in a way that is natural, easy and extremely powerful.&#xA;Have fun...</p>
        </article>
        <article id="article-6262">
            <a href="https://ayende.com/blog/3632/components-implementations-and-contextual-decisions" target="_blank">
                <h2 class="title mb-6" id="article-6262">Components, Implementations and Contextual Decisions</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 05, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am a big believer in using context in order to drive a system. What do I mean by that?   Note, I am going to talk about the problem in general, and its solution implementation using Windsor. The example is fictitious and is here to represent the problem in a way that allow me to talk about it in isolation, it doesn&#x27;t necessarily represent good design. It seems like just about all the applications that I had to deal with recently had to have the notion of system variability. Now, let us make it clear. System variability is a fancy name for the if statement. The problem with the if statement is that when you have a lot of them, it gets pretty tricky to understand what is going on with the system. That is why a common refactoring is replace conditional with polymorphism.  What I am usually talking about is &quot;when we are in this condition, we should do X, otherwise, we should do Y&quot;. Let us take the simple idea of a warehouse service. If we are making a call from the web site, it is okay to return data that may not be accurate to the second. If we are calling from the fulfillment service, we need accurate, up to date results. A simple way of handling this is: public bool ItemIsPhysicallyOnTheShelve(Guid id)&#xA;{&#xA;&#x9;if(Origin == Originators.Website)//can use caching&#xA;&#x9;{&#xA;&#x9;&#x9;var result = Cache.Get&lt;bool?&gt;(&quot;item-on-shelve-&quot; &#x2B; id)&#xA;&#x9;&#x9;if(result.HasValue)&#xA;&#x9;&#x9;&#x9;return result.Value;&#xA;&#x9;}&#xA;&#x9;// actual work and putting in cache&#xA;}&#xA;A more interesting example might be different business rules for making order authorization, based on whatever we have a strategic customer or not. In both cases, we have some context for the operation that modify the way that we deal with this operation.&#xA;public bool IsValid(Order order, ValidationSummary summary)&#xA;{&#xA;&#x9;IRule[] rules = CurrentCustomer.IsStrategic ?&#xA;&#x9;&#x9;strategicCutomerRules : normalCustomerRules;&#xA;&#x9;foreach(IRule rule in rules)&#xA;&#x9;{&#xA;&#x9;&#x9;rule.Validate(order, summary);&#xA;&#x9;}&#xA;&#x9;return summary.HasErrors;&#xA;}&#xA;One way of dealing with that is as you see in the code samples, get the state from somewhere and make decisions based on that. Another, more advance option is to create:&#xA;&#xA;IWarehouseService&#xA;DefaultWarehouseService&#xA;CachingWarehouseServiceDecorator&#xA;And because decorators are really annoying, we will use AOP to deal with it by creating a caching interceptor.&#xA;Now the issue is mere configuration, I can deal with that by flipping bits in the container configuration. The second example can be solved by creating two components with different rule sets and using that. The problem is that this remove the coding issues, but it creates a more subtle and much harder to deal with problems.&#xA;If I rely on the container configuration alone, I suddenly have logic there. Important business logic. That is not a good idea, I think. Especially since this means that at some point my code has to make an explicit decision about what component to use, and that breaks the infrastructure independence rule.&#xA;What this boil down to is that now I have to manage a lot of the complexity in the application using the container configuration and tie the working of the system into it. That works if the number of variables that I have to juggle is small, but if I have a lot of axes (plural: axis)&#xA0; that are orthogonal to one another, it is getting complex very fast.&#xA;My solution for that problem is to define a service and its context as a cohesive unit. That is, the concept of a service contains its interface, all of its implementations and the business logic required to select which implementation (and configuration) to choose for a given context.&#xA;In the warehouse example above, what we will have is:&#xA;&#xA;IWarehouseService&#xA;DefainltWarehouseService&#xA;WarehouseCachingInterceptor&#xA;WarehouseInterceptorsSelector&#xA;Now all of those are part of the same service. The last one is where we isolate the actual decision about what type of implementation we should get. In this case, we use Windsor&#x27;s IModelInterecptorsSelector to add additional, context bound, interceptors to the service.&#xA;But that is just from the interceptors side, what about the selection of the appropriate rules? We can handle that using ISubDependencyResolver, where we can decide how we want to filter the rules that goes into IWarehouseService based on the context. For that matter, we might have a completely different warehouse implementations, VirtualWarehouseService and PhysicalWarehouseService. And we need to select between them based on some business criteria. We handle that using IHanlderSelector, that make the decision which component to create.&#xA;Again, IHandlerSelector, IModelInterceptorsSelector and ISubDependencyResolvers are all implementations of Windsor extensibility mechanisms (my next two posts will cover them in details) that allows us to make it aware of the context that we have in the application.&#xA;The purpose of the explicit notion of context is to allow us to deal with the variability in the application in an explicit manner. And that, in turn means that we get much better separation of concerns.</p>
        </article>
        <article id="article-6263">
            <a href="https://ayende.com/blog/3631/reading-mef-code" target="_blank">
                <h2 class="title mb-6" id="article-6263">Reading MEF code</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 05, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Okay, here is the deal. There is a feature in MEF that I find interesting, the ability to dynamically recompose the imports that an instance have. Well, that is not accurate. that doesn&#x27;t really interest me. What does interest me is some of the implementation details. Let me explain a bit better. As I understand the feature, MEF can load the imports from an assembly, and if I drop another file into the appropriate location, it will be able to update my imports collection. Now, what I am interested in is to know whatever MEF allow me to update file itself and update it on the fly. The reason that I am interested in that is to know how this is done without locking the file (loading an assembly usually locks the file, unless you use shadow copy assemblies, which means that you have to use a separate AppDomain).  As you can imagine, this is a very specific need, and I want to go in, figure out if this is possible, and go away. I started by checking out the MEF code: svn co https://mef.svn.codeplex.com/svn mef I just love the SVN integration that CodePlex has. Now, the only way that MEF can implement this feature is by watching the file system, and that can be done using a FileSystemWatcher. Looking for that, I can see that it appears that DirectoryPartCatalog is using it, which isn&#x27;t really surprising. But, going there and reading the code gives us this:   Note what isn&#x27;t there. there is no registration to Changed. This is likely not something that MEF supports. Okay, one more try. Let us see how it actually load an assembly. We start from Export&lt;T&gt; and GetExportedObject() which calls to GetExportedObjectCore() which shell out to a delegate. Along the way I looked at CompositionException, just to make sure that it doesn&#x27;t have the same problem as TypeLoadException and the hidden information, it doesn&#x27;t. I tried to follow the reference chain, but I quickly got lost, I then tried to figure out how MEF does delayed assembly loading, to see if it is doing anything special there, but I am currently hung at ComposablePartDefinition.Create, which seems promising, but it is accepting a delegate and no one is calling this. So this looks like it for now.</p>
        </article>
        <article id="article-6264">
            <a href="https://ayende.com/blog/3630/rhino-mocks-3-5-rtm" target="_blank">
                <h2 class="title mb-6" id="article-6264">Rhino Mocks 3.5 RTM</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 05, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Today I decided that I had enough time to get bugs for the 3.5 RC, so I fixed all the remaining bugs, updated the Rhino Mocks 3.5 Documentation, and put the binaries out the site.&#xA;For this release, I actually have 4 binary packages. One for .NET 3.5 and one for .NET 2.0, but I have an additional criteria, with the castle assemblies merged (default) and with the castle assemblies included). The reason for having those two options is that people who want to extend Rhino Mocks directly can do it more easily. In general, I suggest using the merged version.&#xA;So, what do we actually have here (feature differences from 3.4)?&#xA;Features:&#xA;&#xA;  &#xA;    Assert Act Arrange syntax for mocking&#xA;&#xA;    &#xA;      Including support for .NET 2.0&#xA;    &#xA;  &#xA;&#xA;  Added a way to access the mocked method at runtime, using WhenCalled (similar to Do(), but without the pain of having to specify a special delegate).&#xA;&#xA;  CreateMock() is deprecated and marked with the [Obsolete] attribute. Use StrictMock() instead.&#xA;&#xA;  Support for mocking interface in C&#x2B;&#x2B; that mix native and managed types. (Note, may require that you install kb957541 to get around bug introduced to the framework on SP1).&#xA;&#xA;  New event raising syntax:&#xA;  eventHolder.Raise(stub =&gt; stub.Blah &#x2B;= null, this, EventArgs.Empty);&#xA;&#xA;  Better support for multi threaded replays.&#xA;&#xA;    &#xA;      Note that access to the mock object is now serialized.&#xA;    &#xA;  &#xA;&#xA;  Support AssertWasCalled on parial mocks.&#xA;&#xA;Patches:&#xA;&#xA;  From Sebastian Jancke, adding support for SetPropertyAndIgnoreArguments() and SetPropertyWithArguments( o );&#xA;&#xA;  From Yann Trevin, adding support for List.Element(&quot;MyKey&quot;, ...), so we are not limited to just integers.&#xA;&#xA;  From David Tchepak, adding support for ctor arguments when creating a mock using static method.&#xA;&#xA;  From Stefan Steinegger - much better support for creating inline constraints.&#xA;&#xA;Improvements:&#xA;&#xA;  Better handling of exception in raising events from mock objects&#xA;&#xA;  Better error message when trying to set expectation on properties of a stub.&#xA;&#xA;  Better error handling for AAA syntax abuse&#xA;&#xA;  Will give better errors if you call Verify on a mock that is in record mode.&#xA;&#xA;  Allowing to return to record mode without losing expectations.&#xA;&#xA;  BackToRecord extension method.&#xA;&#xA;  AAA syntax now works with Ordering&#xA;&#xA;  Better error message if trying to use SetupResult on stubbed mock properties.&#xA;&#xA;  Better error message when trying to mock null instance.&#xA;&#xA;Bug fixes:&#xA;&#xA;  Fixing an issue with mock objects that expose methods with output parameter of type System.IntPtr.&#xA;&#xA;  Fixed an issue with merging, would cause issues if you are also using Castle Dynamic Proxy.&#xA;&#xA;  Fixed various typos&#xA;&#xA;  Fixed issue with mocking internal classes and interfaces.&#xA;&#xA;  OutRef params was not copied when creating new expectation from an existing one.&#xA;&#xA;  Fixing an issue with leaking expectationReplaced in mocks.</p>
        </article>
        <article id="article-6265">
            <a href="https://ayende.com/blog/3629/the-nhibernate-profiler" target="_blank">
                <h2 class="title mb-6" id="article-6265">The NHibernate Profiler</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 04, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is speculative at the moment, just to be clear.&#xA;I am thinking about creating a profiler for NHibernate. This came out of the common need to actually get a good view about what is going on with NHibernate.&#xA;This is intended to be a commercial project.&#xA;I have a feature set in mind, but I would rather hear from you if you think that it is a tool that you would use (and buy) and what kind of features do you expect such a tool to have?&#xA;And, to forestall the nitpickers, I am well aware of SQL Profiler.</p>
        </article>
        <article id="article-6266">
            <a href="https://ayende.com/blog/3628/erlang-reading-couchdb-digging-down-to-disk" target="_blank">
                <h2 class="title mb-6" id="article-6266">Erlang Reading: CouchDB - Digging Down to Disk</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 04, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Jan has corrected a misconception that I had here, where I assumed that PUT was create and POST was update. Apparently this is not quite correct. A PUT request will update/create a new document with a user supplied name, while a POST request will create a new document with a server generated name.&#xA;That narrows down my search for &quot;create new document&quot; code path again. Here is the method in couch_httpd_db that handles a POST request on a document.&#xA;&#xA;It parse the form, get the revision of the document, and then it calls to open_doc_revs, which we haven&#x27;t explored so far. I feel confident that I understand what this is doing, however:&#xA;&#xA;I&#x27;ll not show the open_doc_revs_int, because it is too big, but it contains some references that so far I haven&#x27;t encountered. Specifically, couch_key_tree, which I don&#x27;t think that I seen before, and to get_full_doc_infos, which looks like this:&#xA;&#xA;Oh, now we are on a more familiar territory. Lookup performs a search on a binary tree, and we have gone over it in depth before. However, we can now see that the we pass to it a fulldocinfo_by_id_tree... I don&#x27;t think we have explored how CouchDB make use of the btree, so let us head to the db structure and see what else we have there.&#xA;&#xA;Here is what I know about this structure at the moment. db_header container the data that is actually written to the file, while db is the in memory structure. Not sure what write_version is all about, update_seq looks like the the internal sequence number for CouchDB. I don&#x27;t think that I have even seen the concept of stream before, but it is there, and look like most stream implementations that I am already familiar with.&#xA;get_state on that returns a {Position, BytesRemaining}, since I don&#x27;t understand how this is used at the moment, I don&#x27;t understand why this is important. fulldocsinfo_by_id_btree_state contains the root of the btree, and the same holds for docinfo_by_seq_btree_state, I assume that local_docs_btree_state is also the same.&#xA;purge_seq is a counter for the last purge (physical delete), and it is used in conjunction with the views in order to ensure that there are no purged documents in the view. purged_docs keeps track of the documents that were last purged.&#xA;db, the runtime structure, is considerably more interesting. It took me a while to figure out where it is created, but I finally found the init_db function in couch_db_updater:&#xA;&#xA;The first part is to open the summary_state stream, still not sure what this is about, though. We then define a comparison function for use when opening the fulldocsinfo btree, and we pass several additional functions when we create the btree. Reduce is usually used when we compact the tree, and to get information about the btree (such as count of documents). The join and split also prepare the data to be written to disk in a consistent fashion.&#xA;I don&#x27;t like the name join/split. The internal names, assemble and extract seems to be much more accurate.&#xA;Finally, we get to the actual creation of the db structure itself. An interesting thing to note is that only the update_pid is filled. Since CouchDB implements the many readers / single writer, I assume that this is how we ensure the single reader, because only a single process ever handle writes to the DB. I am assuming for now that main_pid is for readers, and compactor_pid if for compacting (obviously). I&#x27;ll track them next.&#xA;Well, that took some doing, the main_pid is set in the couch_db_updater:init (the same function that calls the init_db function):&#xA;&#xA;&#xA;I had hard time tracking this because I couldn&#x27;t figure out what who was calling couch_db_updater:init (and what is the MainPid). Usually, in gen_server processes, there is a start_link function that you call, but in this case, there wasn&#x27;t. Some digging revealed that the couch_db process is the one that actually call start_link on the couch_db_updater. I wonder if this is a common pattern in erlang, because it sure did caught me by surprise.&#xA;So main_pid is the couch_db process, and update_pid is the couch_db_updater. It actually goes a lot further than that. couch_db_updater doesn&#x27;t actually have a public interface. It looks like couch_db is the one that exposes the interface, and send synchronous messages to the couch_db_updater process:&#xA;&#xA;That is the way in which CouchDB ensures that we have only a single write, I presume. Compaction is handled in couch_db_updater as well, the implementation is interesting:&#xA;&#xA;We create a new process and return before we finish compacting. It is interesting because it is the first example of explicit concurrency that I saw. Let us dig a bit better into start_copy_compact_int, which is pretty straight forward:&#xA;&#xA;This just create a new file, init a database and call_compact_docs, finishing by notifying the updater that it finished compacting. copy_compact_docs is interesting in itself:&#xA;&#xA;We start by defining the EnumBySeqFun, which batches documents to write to disk until should_flush returns true. should_flush is funny, it check memory thresholds and flush to disk whenever there is about 10 MB of data ready to be flushed.&#xA;The usage of foldl here is a good reason to go back and examine it in more details:&#xA;&#xA;And fold is defined as:&#xA;&#xA;So we have this stream_node, whatever that is, let us take an additional look.&#xA;&#xA;We are already familiar with get_node(), but adjust_dir and stream_kp_node and stream_kv_node are new. The first is easy:&#xA;&#xA;Let us explore stream_kv_node, which is likely to be easier than stream_kp_node.&#xA;&#xA;This is slightly complex. We start by defining the drop off point (smaller / greater from the current key). The important bit is in the last function, the call to our function and the recursion back into the function. As a reminder, here is the function that we pass:&#xA;&#xA;I hope that this make it clear how this works. We simply stream all the items to the function, and it copies it. Note that an important subtlety is that we have several btree over the same data (we will touch down in a bit) and in this case we are only copying the items that are greater than the update_seq in the current DB. Still not sure what this update_seq is all about. We will go all the way back to copy_compact_docs_int&#x27;s last line, where it notify the updater that it finished the current compaction. This message arrive to this method:&#xA;&#xA;This looks complex, but it really isn&#x27;t. It is simply opening the new database, and checking if the current update_seq equal to the latest in the new database. If it isn&#x27;t, we restart the process. If it is, then we copy the local documents (not sure why they get special treatment, and it looks like it is expected to have very few of them), move the files and move on with our lives.&#xA;Now, it looks like update_seq is updated whenever someone make a change to the database, but let us verify this, shall we?&#xA;Looking at couch_db_updater:update_docs_int, we can see that the update_seq is updated for each new document that is modified (see merge_rev_trees).&#xA;Okay, that was interesting. But I still don&#x27;t know how we save a document to disk. Let us go back to couch_db:update_docs, and see what is going on here. This is pretty complex, so we will break it apart to discrete pieces.&#xA;&#xA;We start by generating a new revision for the documents. Note that in the case local revisions, we just increment the revision, if it is a standard document, we generate a random revision number. I think that this is done in order to support farm wide revisions, so if I update document #1 in server A and in server B, I get two different revisions, which would be detected as conflicts.&#xA;We extract all the new revisions, group all the documents by id and extract all the ids. So far, so good. Let us see the rest of the function:&#xA;&#xA;We get the current existing documents, and then we merge the existing with the new bucket. That requires some explanation.&#xA;The first function clause uses list comprehensions in order to ensure that if we couldn&#x27;t find a document in the DB, we didn&#x27;t specify a previous version. The second is more complex and require us to understand about key trees. CouchDB defines them as:&#xA;&#xA;Based on that and the dict:from_list arguments, we can deduct what the structure of a revision is. It should be noted that it looks like there is an expectation that the number of revisions wouldn&#x27;t be too big. This make sense, CouchDB does keep previous versions, but it make no guarantees about their life spans. Also, we should note that we have both revs and rev_tree, I am not quite sure why.&#xA;The last line in the zipwith function is prepare_doc_for_new_edit, which is called for each document, let us take a look at it.&#xA;&#xA;This is an example of how condense functional code can get. Let us see what it does:&#xA;&#xA;  Get the new revisions and all the previous revisions&#xA;&#xA;  If the previous revisions has a value, it perform a lookup based on the revision to the revision tree, to get the revision information. (Which answers the question of why we need both revs and rev_tree. revs is an ordered list of revision keys. rev_tree is apparently the metadata).&#xA;&#xA;  Now, the LeafRevsDict contains only the most recent one, so failing to find it in the dictionary means that we trying to update a non current version, so we error.&#xA;&#xA;  I am not sure what a stub is, but the rest of it seems pretty simple.&#xA;&#xA;The last part is interesting, however, we check that we aren&#x27;t trying to create a new document with the same id as existing one (although we allow it if that document is deleted).&#xA;After the call to zipwith(), we have a call to doc_flush_binaries, which we totally ignored so far. It flushes all the documents to disk, it is not really interesting, it is dealing with writing the attachments to disk. I am not quite sure what is going on (it is complex), mostly because I don&#x27;t follow to which file it is writing. Or, to be rather more exact, I am not following how the attachment can be written to a different file, which is what the code seems to imply.&#xA;Anyway, the code there is pretty clear about what is going on, we append to the current file (except if we write to a different file, again, not following that) and update the in memory structure of the document to point to the range of data that each attachment contains.&#xA;Let us look at the last part of the couch_db:update_docs:&#xA;&#xA;And is looks like we have hit the place where it is actually happening. We call to the couch_db_updater in order to do the actual update, and we make be asked to retry (this will require more study), in which case we do try.&#xA;Let us look at update_docs at the couch_db_updater.&#xA;&#xA;Sigh, I can feel it in my waters, update_docs_int is going to be complex... once more, we will try to divide and conquer.&#xA;&#xA;We start by extracting variable from the Db, then we split the list based on whatever this is local or not. NonRep documents (local) are not replicated, have only a single version and are expected to have very few of them. I still don&#x27;t know what is the use case for those, however. It looks like DocsList is a list of lists of docs, probably this is the buckets that we had to deal with earlier.&#xA;We finish the snipper by extracting the ids from the documents, what comes next?&#xA;&#xA;We lookup the existing documents, and then we merge them into a file info (note that we create a new full_doc_info with just the id if this is a new file). We then create the new doc infos by calling merge_rev_trees. We will ignore the implementation for now.&#xA;Finally, we gather all the sequences that we would like to remove. Moving on, we see that we start by updating the local docs and then flushing the trees. Both of which looks promising for my quest to understand how the data is stored on the disk:&#xA;&#xA;update_local_docs just modify the in memory btree, so I am not going to show it, flush_trees should be more interesting, based on just the comment.&#xA;&#xA;This is interesting. What we see here is that we write the attachment references and the document body to the summary stream. That is interesting, because I am still not sure what the summary stream is. Note that here we have the issue of writing to a file during compaction, so we ask the higher level code to retry that again.&#xA;We still have to see how the indexes are maintained, but that just update the in memory structure, the real bit happens next:&#xA;&#xA;Here we see our good old friend the btree, and we add/remove the new index to the file. We have seen how this works here. We finish by updating the Db structure with the new values and committing the data.&#xA;I now feel that I have a much better understanding on how CouchDB file handling works. Except that I still don&#x27;t know what this summary stream is. That is a topic for later, though.</p>
        </article>
        <article id="article-6267">
            <a href="https://ayende.com/blog/3627/reading-erlang-couchdb-from-rest-to-disk-in-a-few-function-calls" target="_blank">
                <h2 class="title mb-6" id="article-6267">Reading Erlang</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 04, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">As you can probably figure out from the title, the purpose of this post is to track how CouchDB is saving a document on the disk. We have already tracked how much of CouchDB works, including some fascinating pieces such as btree:lookup and btree:query_modify. Now it is time to dig ourselves from the trenches and have a slightly higher level view of what is going on.&#xA;We start with the recently refactored couch_httpd_db module. The fun starts with handle_request.&#xA;&#xA;It took me a few seconds to realize what is going on here. Again, some of the problem is that I am not used to the function declaration being such an important role in the function behavior. In this case, the function declaration decompose the request into several parameters. The case statement is used to dispatch based on the arguments. If we have a PUT or DELETE requests with just the DB name, we know that we need to create/delete a database. Otherwise, we assume we have some other operation on the database directly, and we send a function for it to execute. The reason for that becomes clear when you check the rest of the code.&#xA;&#xA;&#xA;As we can see, the create_db_req and delete_db_req have different disposal semantics than do_db_req. do_db_req will just open/close the database and then execute the function in the cotext of this database handle.&#xA;This is quite a common pattern in functional programming, and it used frequently in Ruby. I am using it as much as I can in C# as well, since it is a very natural syntax to use with anonymous delegates and lambdas.&#xA;Anyway, what we are interested in today is the actual process of getting data from the request and putting it on the disk, so let us move along and see what is going on here. The next place of interest, of course, is db_req itself, which we pass into do_db_req. This is fairly interesting in its own, since it deals with all the commands that the server can support (from bulk_docs to compactions to purging). That isn&#x27;t really interesting to me at this time, so we will move to the first code sample and look at the last clause.&#xA;This is where we are handling with a request for a specific document. couch_util:dict_find is where we need to look now...&#xA;&#xA;This is simply a way to do a lookup into a dictionary with a default value. So what does this code do?&#xA;&#xA;Well, it lookup in the DbUrlHandlers (which we got passed to the method) and defaults to the db_req if it isn&#x27;t found there. But what is this DbUrlHandlers? I&#x27;ll save you the trouble of finding out on your own and guide us directly to the location that we care about. Here is a section from the couchdb.ini configuration:&#xA;&#xA;  [httpd_global_handlers]&#xA;  / = {couch_httpd_misc_handlers, handle_welcome_req, &lt;&lt;&quot;Welcome&quot;&gt;&gt;}&#xA;  _utils = {couch_httpd_misc_handlers, handle_utils_dir_req, &quot;%localdatadir%/www&quot;}&#xA;  _all_dbs = {couch_httpd_misc_handlers, handle_all_dbs_req}&#xA;  _config = {couch_httpd_misc_handlers, handle_config_req}&#xA;  _replicate = {couch_httpd_misc_handlers, handle_replicate_req}&#xA;  _uuids = {couch_httpd_misc_handlers, handle_uuids_req}&#xA;&#xA;  [httpd_db_handlers]&#xA;  _view = {couch_httpd_view, handle_view_req}&#xA;  _temp_view = {couch_httpd_view, handle_temp_view_req}&#xA;&#xA;If this looks like erlang code, you are almost right. This is actually just an .ini file, but it is format like erlang on purpose, since this is a simple mapping of a url to its handler in the code. This is a new extension mechanism to CouchDB that was added just yesterday.&#xA;This is a really nice way of handling extensibility, but enough beating around the bush, where is the save document code path? It starts with this function clause:&#xA;&#xA;So we need to go to the do_doc_req to see what else is going on here. And in the db_doc_req, we just need to find the PUT handler, which will create a new document. And here it is:&#xA;&#xA;Let us examine this in depth. couch_httpd:json_body(Req) just takes the request body and decode the JSON information there. I&#x27;ll save you the way JSON is parsed using erlang. Suffice to say that I don&#x27;t think it is pretty.&#xA;couch_doc:from_json_doc is interesting, though. First, take a look at this code:&#xA;&#xA;This is the equivalent of this code:&#xA;&#xA;  var allowedSpecialMembers = new[]{ /* see list above */ };&#xA;&#xA;  foreach(var prop in Props)&#xA;  {&#xA;  if( allowedSpecialMembers.Contains(prop)) continue;&#xA;  throw new DocValidationexception(&#x27;Bad special document member &quot; &#x2B; prop);&#xA;&#xA;  }&#xA;&#xA;The method is doing a few extra things that aren&#x27;t really interesting to us at the moment, basically taking the JSON object that we got and turning that into this object:&#xA;&#xA;Going back to db_doc_req, we can see that next we just get the appropriate revisions and then we extract the header revision, whatever that may be...&#xA;&#xA;This is merely dealing with ensuring that if we specified the etag header, it will match the current revision. Not sure why this is important for PUT request, however. This make sense for POST (update) request, however. Taking that as a given, we then call update_doc (which seems to serve double duty as create_doc) and send as JSON response back to the user.&#xA;This means that we finally have a lead, and can move from couch_httpd_db to couch_db :-)&#xA;&#xA;update_doc just forward the call to update_docs (plural). That should be interesting, but it wouldn&#x27;t be today.</p>
        </article>
        <article id="article-6268">
            <a href="https://ardalis.com/installing-visualsvn-subversion/" target="_blank">
                <h2 class="title mb-6" id="article-6268">Installing VisualSVN Subversion</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 02, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Wrapping up HeadSpring&#x27;s Agile Boot Camp class this week, we&#x27;re installing VisualSVN Server locally. Running the setup is just a matter of&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-6269">
            <a href="https://ayende.com/blog/3626/new-version-of-the-book-is-out" target="_blank">
                <h2 class="title mb-6" id="article-6269">New version of the book is out</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 02, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">You can head to the Book Site and get a new version, because Chapters 1 - 11 (and appendix B) are available.&#xA;The only remaining chapters are #12 (DSL implementation patterns) and #13 Implementing a Real World DSL. Chapter 12 goes really well, so far, and I hope to have it ready by the end of the weekend.</p>
        </article>
        <article id="article-6270">
            <a href="https://ayende.com/blog/3625/rambling-2nd-october" target="_blank">
                <h2 class="title mb-6" id="article-6270">Rambling, 2nd October</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: October 02, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is a post that I am going to post just to clear my head. &#xA;&#xA;&#xA;The Mac sucks. There is no good blog client for the Mac. The blog client situation on the Mac is about as bad as the difference between Lotus 1-2-3 circa 1990 and Excel 2007. I am writing this post in MarsEdit, and I have to do HTML by hand. Yuck! &#xA;&#xA;&#xA;I also used Blogo and Ecto, and none of them really come close to what I need. I don&#x27;t think that I am too demanding. I need to ability to write the posts using WYSIWYG, being able to paste images to the post and the ability to post code and have the tool do the highlighting for me.&#xA;&#xA;&#xA;I used to use WBEditor, before WLW caught my eye. Those are real blog clients. I have yet to find anything on the mac that come close. Yes, this is intentionally inflammatory in order to get more responses so I wouldn&#x27;t have to leave the Mac to post to the blog.&#xA;&#xA;&#xA;Next topic, Amazon came out with Windows on EC2, which is amazing. It means a much easier time to anyone who wants to handle cloud computing based on Windows. Yes, there are alternative, but Amazon seems to be the main one.&#xA;&#xA;&#xA;Oh, I was chosen as MVP for 2009 as well, yeah :-)&#xA;&#xA;&#xA;I would have posted the MVP logo here, but I can&#x27;t be bothered to write down the HTML code for that, because this blog client is so annoying.&#xA;&#xA;People actually notice that I am not answering to email for a period of 24 hours or less. Amazing.</p>
        </article>
        <div class="button flex justify-between">
            <a href="626.html"><span class="back arrow"></span></a>

            <a href="628.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>