
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Home â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<script>
    const lightModePref = window.matchMedia("(prefers-color-scheme: light)");

    function getUserPref() {
        const storedTheme = typeof localStorage !== "undefined" && localStorage.getItem("theme");
        return storedTheme || (lightModePref.matches ? "light" : "dark");
    }

    function setTheme(newTheme) {
        if (newTheme !== "light" && newTheme !== "dark") {
            return console.warn(
                `Invalid theme value '${newTheme}' received. Expected 'light' or 'dark'.`,
            );
        }

        const root = document.documentElement;

        // root already set to newTheme, exit early
        if (newTheme === root.getAttribute("data-theme")) {
            return;
        }

        root.setAttribute("data-theme", newTheme);

        const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");
        const bgColour = getComputedStyle(document.body).getPropertyValue("--theme-bg");
        colorThemeMetaTag.setAttribute("content", `hsl(${bgColour})`);
        if (typeof localStorage !== "undefined") {
            localStorage.setItem("theme", newTheme);
        }
    }

    // initial setup
    setTheme(getUserPref());

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("theme-toggle").addEventListener("click", () => {
            const theme = localStorage.getItem("theme");

            if (theme === "dark") {
                setTheme("light");
            } else {
                setTheme("dark");
            }
        });

        document.getElementById("toggle-navigation-menu").addEventListener("click", (e) => {
            const button = e.target;
            const ariaExpanded = button.getAttribute("aria-expanded");
            const header = document.getElementById("main-header");

            if (ariaExpanded === "true") {
                button.setAttribute("aria-expanded", "false");
                header.classList.remove("menu-open");
            } else {
                button.setAttribute("aria-expanded", "true");
                header.classList.add("menu-open");
            }
        });
    });
</script>

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <theme-toggle class="ms-auto">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main">
    <section aria-label="Blog post list">
        <a href="https://ayende.com/blog/176483/electric-fenced-memory-results" target="_blank"><h1 class="title mb-6">Electric fenced memory results</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: January 02, 2017
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A few days ago I posted about electric fence memory and its usages. Here is one problem that if found for us.  Do you see the bug? And can you imagine how hard it would be for us to figure this out if we didn&#x2019;t hotwire the memory?</p>
        <a href="https://ayende.com/blog/176482/searching-shouldnt-be-so-hard" target="_blank"><h1 class="title mb-6">Searching shouldn&#x2019;t be so hard</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 30, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The trigger for this post is a StackOverflow question that caught my eye.  Let us imagine that you have the following UI, and you need to implement the search function: &#xA0; For simplicity&#x2019;s sake, I&#x2019;ll assume that you have the following class: &#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          public class Restaurant&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              public int Id { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string Name { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string Cuisine { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string PhoneNumber { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string Email { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public Address Address { get; set; }&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;          public class Address&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              public string Line1 { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string Street { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string City { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string State { get; set; }&#xA;        &#xA;        &#xA;          &#xA;              public string Postcode { get; set; }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          Restaurant-Details.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA; And we need to implement this search, we want users to be able to search by the restaurant name, or its location or its cuisine, or all of the above, for that matter. A query such as&#x201D;Rama Thai&#x201D; or &#x201C;coffee 48th st&#x201D; should all give us results.  One way of doing that is to do something like this:  &#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          session.Query&lt;Restaurant&gt;()&#xA;        &#xA;        &#xA;          &#xA;          &#x9;.Where(x=&gt;&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Name == userSearchString ||&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Cuisine == userSearchString ||&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Address.Street == userSearchString ||&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Address.City == userSearchString &#xA;        &#xA;        &#xA;          &#xA;          &#x9;)&#xA;        &#xA;        &#xA;          &#xA;          &#x9;.ToList();&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          simple-searching.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA; Of course, that would only find stuff that matches directly. It will find &#x201C;Rama&#x201D; or &#x201C;Thai&#x201D;, but &#x201C;Rama Thai&#x201D; would confuse it. We can make it better, somewhat, but doing a bit of work on the client side and changing the query, like so:  &#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          var parts =  userSearchString.Split();&#xA;        &#xA;        &#xA;          &#xA;          session.Query&lt;Restaurant&gt;()&#xA;        &#xA;        &#xA;          &#xA;          &#x9;.Where(x=&gt;&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Name.In(userSearchString) ||&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Cuisine.In(userSearchString) ||&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Address.Street.In(userSearchString) ||&#xA;        &#xA;        &#xA;          &#xA;          &#x9;&#x9;x.Address.City.In(userSearchString)&#xA;        &#xA;        &#xA;          &#xA;          &#x9;)&#xA;        &#xA;        &#xA;          &#xA;          &#x9;.ToList();&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          slightly-smarter-search.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA; That would now find results for &#x201C;Rama Thai&#x201D;, right? But what about &#x201C;Mr Korean&#x201D; ? Consider a user who have no clue about the restaurant name, let alone how to spell it, but just remember enough pertinent information &#x201C;it was Korean food and had a Mr in its name, on Fancy Ave&#x201D;. You can spend a lot of time trying to cater for those needs. Or you can stop thinking about the data you search as the same shape of your results and use this index:  &#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          public class Restaurant_Search : AbstractIndexCreationTask&lt;Restaurant, Restaurant_Search.Result&gt;&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;                public class Result&#xA;        &#xA;        &#xA;          &#xA;                {&#xA;        &#xA;        &#xA;          &#xA;                   public string Query;&#xA;        &#xA;        &#xA;          &#xA;                }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                public Restaurant_Search()&#xA;        &#xA;        &#xA;          &#xA;                {&#xA;        &#xA;        &#xA;          &#xA;                    Map = restaurants =&gt; from restaurant in restaurants&#xA;        &#xA;        &#xA;          &#xA;                                         select new&#xA;        &#xA;        &#xA;          &#xA;                                         {&#xA;        &#xA;        &#xA;          &#xA;                                             Query = new []&#xA;        &#xA;        &#xA;          &#xA;                                             {&#xA;        &#xA;        &#xA;          &#xA;                                               restaurant.Cuisine, &#xA;        &#xA;        &#xA;          &#xA;                                               restaurant.Address.Street,   &#xA;        &#xA;        &#xA;          &#xA;                                               restaurant.Address.City,  &#xA;        &#xA;        &#xA;          &#xA;                                               restaurant.Name&#xA;        &#xA;        &#xA;          &#xA;                                             }&#xA;        &#xA;        &#xA;          &#xA;                                         };&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                    Indexes.Add(x =&gt; x.Query, FieldIndexing.Analyzed); &#xA;        &#xA;        &#xA;          &#xA;                }&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          Restaurant-Search-Index.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA; Note that what we are doing here is picking from the restaurant document all the fields that we want to search on and plucking them into a single location, which we then mark as analyzed. This let RavenDB know that it is time to start cranking. It merge all of those details together and arrange them in such a way that the following query can be done:  &#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;           var matches = session.Query&lt;Restaurant_Search.Result, Restaurant_Search&gt;()&#xA;        &#xA;        &#xA;          &#xA;                .Search(x =&gt; x.Query, &quot;Fancy Mr Korean&quot;)&#xA;        &#xA;        &#xA;          &#xA;                .OfType&lt;Restaurant&gt;()&#xA;        &#xA;        &#xA;          &#xA;                .ToList();&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          Query-Restaurant.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA; And now we don&#x2019;t do a field by field comparison, instead, we&#x2019;ll apply the same analysis rules that we applied at indexing time to the query, after which we&#x2019;ll be able to search the index. And now we have sufficient information not just to find this a restaurant named &#x201C;Fancy Mr Korean&#x201D; (which to my knowledge doesn&#x2019;t exist), but to find the appropriate Korean restaurant in the appropriate street, pretty much for free. Those kind of features can dramatically uplift your applications&#x2019; usability and attractiveness to users. &#x201C;This sites gets me&#x201D;.</p>
        <a href="https://ayende.com/blog/176481/tricks-of-working-with-native-memory" target="_blank"><h1 class="title mb-6">Tricks of working with native memory</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 29, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I want to start by saying that this isn&#x2019;t my idea, I read about it a few times, and I recently encountered it with sodium_malloc, so I decided to write my own implementation of the world&#x2019;s most expensive memory allocator. &#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          public static unsafe class ElectricFencedMemory&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              [DllImport(&quot;kernel32.dll&quot;, SetLastError = true)]&#xA;        &#xA;        &#xA;          &#xA;              private static extern byte* VirtualAlloc(byte* lpAddress, UIntPtr dwSize,&#xA;        &#xA;        &#xA;          &#xA;                  AllocationType flAllocationType, MemoryProtection flProtect);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              [DllImport(&quot;kernel32.dll&quot;, SetLastError = true)]&#xA;        &#xA;        &#xA;          &#xA;              private static extern bool VirtualProtect(byte* lpAddress, UIntPtr dwSize,&#xA;        &#xA;        &#xA;          &#xA;                  MemoryProtection flNewProtect, out MemoryProtection lpflOldProtect);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              [DllImport(&quot;kernel32.dll&quot;, SetLastError = true)]&#xA;        &#xA;        &#xA;          &#xA;              private static extern bool VirtualFree(byte* lpAddress, UIntPtr dwSize,&#xA;        &#xA;        &#xA;          &#xA;                  FreeType dwFreeType);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              [DllImport(&quot;msvcrt.dll&quot;, EntryPoint = &quot;memset&quot;, CallingConvention = CallingConvention.Cdecl, SetLastError = false)]&#xA;        &#xA;        &#xA;          &#xA;              [SecurityCritical]&#xA;        &#xA;        &#xA;          &#xA;              private static extern IntPtr memset(byte* dest, int c, long count);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              [Flags]&#xA;        &#xA;        &#xA;          &#xA;              private enum AllocationType : uint&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  COMMIT = 0x1000,&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              [Flags]&#xA;        &#xA;        &#xA;          &#xA;              private enum MemoryProtection : uint&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  NOACCESS = 0x01,&#xA;        &#xA;        &#xA;          &#xA;                  READWRITE = 0x04,&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              [Flags]&#xA;        &#xA;        &#xA;          &#xA;              private enum FreeType : uint&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  MEM_DECOMMIT = 0x4000,&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              public static byte* Allocate(int size)&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  var remaining = size % 4096;&#xA;        &#xA;        &#xA;          &#xA;                  var sizeInPages = (size / 4096) &#x2B; (remaining == 0 ? 0 : 1);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  var allocatedSize = ((sizeInPages &#x2B; 2) * 4096);&#xA;        &#xA;        &#xA;          &#xA;                  var virtualAlloc = VirtualAlloc(null, (UIntPtr)allocatedSize, AllocationType.COMMIT,&#xA;        &#xA;        &#xA;          &#xA;                      MemoryProtection.READWRITE);&#xA;        &#xA;        &#xA;          &#xA;                  if (virtualAlloc == null)&#xA;        &#xA;        &#xA;          &#xA;                      throw new Win32Exception();&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  *(int*)virtualAlloc = allocatedSize;&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  MemoryProtection protect;&#xA;        &#xA;        &#xA;          &#xA;                  if (VirtualProtect(virtualAlloc, (UIntPtr)(4096), MemoryProtection.NOACCESS,&#xA;        &#xA;        &#xA;          &#xA;                          out protect) == false)&#xA;        &#xA;        &#xA;          &#xA;                      throw new Win32Exception();&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  if (VirtualProtect(virtualAlloc &#x2B; (sizeInPages &#x2B; 1) * 4096, (UIntPtr)(4096), MemoryProtection.NOACCESS,&#xA;        &#xA;        &#xA;          &#xA;                          out protect) == false)&#xA;        &#xA;        &#xA;          &#xA;                      throw new Win32Exception();&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  var firstWritablePage = virtualAlloc &#x2B; 4096;&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  memset(firstWritablePage, 0xED, 4096 * sizeInPages); // don&#x27;t assume zero&#x27;ed mem&#xA;        &#xA;        &#xA;          &#xA;                  if (remaining == 0)&#xA;        &#xA;        &#xA;          &#xA;                      return firstWritablePage;&#xA;        &#xA;        &#xA;          &#xA;                  // give the memory out so its end would be at the 2nd guard page&#xA;        &#xA;        &#xA;          &#xA;                  return firstWritablePage &#x2B; (4096 - remaining);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;              public static void Free(byte* p)&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  var remaining = (int)((long)p % 4096);&#xA;        &#xA;        &#xA;          &#xA;                  var firstWritablePage = p - remaining;&#xA;        &#xA;        &#xA;          &#xA;                  for (int i = 0; i &lt; remaining; i&#x2B;&#x2B;)&#xA;        &#xA;        &#xA;          &#xA;                  {&#xA;        &#xA;        &#xA;          &#xA;                      if (firstWritablePage[i] != 0xED)&#xA;        &#xA;        &#xA;          &#xA;                          throw new InvalidOperationException(&quot;Invalid memory usage, you killed Ed!&quot;);&#xA;        &#xA;        &#xA;          &#xA;                  }&#xA;        &#xA;        &#xA;          &#xA;                  MemoryProtection protect;&#xA;        &#xA;        &#xA;          &#xA;                  var address = firstWritablePage - 4096;&#xA;        &#xA;        &#xA;          &#xA;                  // this will access the memory, which will error if this was already freed&#xA;        &#xA;        &#xA;          &#xA;                  if (VirtualProtect(address, (UIntPtr)4096, MemoryProtection.READWRITE, out protect) ==&#xA;        &#xA;        &#xA;          &#xA;                      false)&#xA;        &#xA;        &#xA;          &#xA;                      throw new Win32Exception();&#xA;        &#xA;        &#xA;          &#xA;                  var dwSize = *(int*)address;&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;                  // decommit, not release, they are not available for reuse again, any &#xA;        &#xA;        &#xA;          &#xA;                  // future access will throw&#xA;        &#xA;        &#xA;          &#xA;                  if (VirtualFree(address, (UIntPtr)dwSize, FreeType.MEM_DECOMMIT) == false)&#xA;        &#xA;        &#xA;          &#xA;                      throw new Win32Exception();&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          ElectricFencedMemory.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA; What this code does is pretty simple, and quite brutal. It allocates memory in such a fashion that absolutely guarantee that you can&#x2019;t get away with a whole host of memory problems. For example, if you try overwrite a buffer allocated by this method, you&#x2019;ll immediately hit the guard page and die horribly (and predictably, in the place where the error actually happened, not a long way off). If you somehow write before the buffer, that will be detected on free if this is a small under write (which tend to be much rarer, by the way), or immediately if this is a big change.  What is more, once the memory is freed, it is poisoned, and can never be used again. This pretty much rely on us running on 64 bits with effectively unlimited virtual memory, and has the nasty side effect of turning a 50 bytes allocation to something requiring 12 KB. Having said that, as a debugging tool, this is invaluable.  And yes, I&#x2019;m aware that windows already have that with the heap verifier. But as I&#x2019;m using this in .NET code, I needed to write my own (this also pretty much work the same way with Linux, you just need to switch the API, but the functionality is the same).  This was built because we were chasing a memory corruption error, and I run this, but it pointed me to a totally different location than suspected. So it is either doing a very good job, or it found me another issue. &#x2026; investigating &#x2026; Or, as the case may be, we found a bug in the actual memory guard (we didn&#x2019;t handle allocations of exact page size correctly, and they broke), but at least it broke consistently and was pretty easy to find once I looked in the right place .</p>
        <a href="https://ayende.com/blog/176449/strong-data-encryption-questions" target="_blank"><h1 class="title mb-6">Strong data encryption questions</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 27, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">With RavenDB 4.0, we are looking to strengthen our encryption capabilities. Right now RavenDB is capable of encrypting document data and the contents of indexes at rest. That is, if you look at the disk, the data is securely encrypted. However, in memory, we keep quite a bit of information in plain text (mostly in caches of various kinds), and the document metadata isn&#x2019;t encrypted, so documents keys are visible.&#xA;With RavenDB 4.0 we are looking into making some stronger guarantees. That means that we want to keep all data encrypted on disk, and only decrypt it during transaction, after which it will immediately be encrypted back.&#xA;Now, encryption and security in general are pretty big fields, and I&#x2019;m by no means an expert, so I thought that I would outline the initial goals of our research and see if you have anything to add.&#xA;&#xA;All encryption / decryption operations are done on data that is aligned on 4KB boundary and is always in multiples of 4 KB. It would be extremely helpful if the encryption would not change the size of the data. Given that the data is always in 4KB increments, I don&#x2019;t think that this is going to be an issue.&#xA;We can&#x2019;t use managed API to do so. Out data is actually residing in unmanaged memory, so ideally we would need something like this:&#xA;&#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          void Encrypt(Context* ctx, byte* plainSrc, byte* encryptedDest, int size);&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;           void Decrypt(Context* ctx, byte* encryptedSrc, byte* decryptedDest, int size);&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          encription-api.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA;&#xA;&#xA;I also need to do this be able to call this from C#, and it needs to run on Windows, Linux and hopefully Mac OS.&#xA;I&#x2019;ve been looking at stuff like this page, trying to understand what it means and hoping that this is actually using best practices for safety.&#xA;&#xA;Another problem is that just getting the encryption code right doesn&#x2019;t help without managing all the rest of it properly. Selecting the appropriate algorithm and mode, making sure that the library we use is both well known and respected, etc. How do we distributed / deploy / update it over multiple platforms?&#xA;Any recommendations?&#xA;You can see some sample code that I have made here:&#xA0;https://gist.github.com/ayende/13b206b9d83e7aa126df77d6b12711f3&#xA;This is basically the sample OpenSSL translated to C# with a bit of P/Invoke. Note that this is meant for our own use, so we don&#x27;t need padding since we always pass a buffer that is a multiple of 4KB.&#xA0;&#xA;I&#x27;m&#xA0;assuming that since this is based on the example on the OpenSSL wiki, it is also a best practice sample. There is a chance that I am mistaken, however, which is why we have this post.</p>
        <a href="https://www.meziantou.net/page-redirection-and-url-rewriting-with-asp-net-core.htm" target="_blank"><h1 class="title mb-6">Page redirection and URL Rewriting with ASP.NET Core</h1></a>
        <p class="mb-2">by G&#xE9;rald Barr&#xE9;</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 27, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">When you develop a web application, you often need to add some redirection rules. The most common redirection rules are: redirect from &quot;http&quot; to &quot;https&quot;, add &quot;www&quot;, or move a website to another domain. URL rewriting is often used to provide user-friendly URL.Before we start, I want to explain the d</p>
        <a href="https://www.meziantou.net/generate-an-ico-file-from-a-list-of-images.htm" target="_blank"><h1 class="title mb-6">Generate an ico file from a list of images</h1></a>
        <p class="mb-2">by G&#xE9;rald Barr&#xE9;</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 27, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">.ico files can contain multiple images with different resolutions. This allows the program that displays it to choose the most appropriate image depending on the context. For example, the Windows Explorer can display icons of 16, 32, 48 or 256 pixels (more info). There are several ways to generate</p>
        <a href="https://ayende.com/blog/176417/ravendb-4-0-indexing-benchmark" target="_blank"><h1 class="title mb-6">RavenDB 4.0 Indexing Benchmark</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 26, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I run into this post, which was pretty interesting to read. It compares a bunch of ways to index inside CouchDB, so I decided to see how RavenDB 4.0 compares.&#xA;I wrote the following code to generate the data inside RavenDB:&#xA;&#xA;&#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          public class User&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              public int Score;&#xA;        &#xA;        &#xA;          &#xA;              public string Name;&#xA;        &#xA;        &#xA;          &#xA;              public DateTime CreatedAt;&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;        &#xA;          &#xA;          &#xA;&#xA;        &#xA;        &#xA;          &#xA;          private static char[] _buffer = new char[6];&#xA;        &#xA;        &#xA;          &#xA;          private static string RandomName(Random rand)&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              _buffer[0] = (char)rand.Next(65,91);&#xA;        &#xA;        &#xA;          &#xA;              for (int i = 1; i &lt; 6; i&#x2B;&#x2B;)&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  _buffer[i] = (char) rand.Next(97, 123);&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;              return new string(_buffer);&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;        &#xA;          &#xA;          static void Main(string[] args)&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              using (var store = new DocumentStore&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  Url = &quot;http://localhost:8080&quot;,&#xA;        &#xA;        &#xA;          &#xA;                  DefaultDatabase = &quot;bench&quot;&#xA;        &#xA;        &#xA;          &#xA;              }.Initialize())&#xA;        &#xA;        &#xA;          &#xA;              {&#xA;        &#xA;        &#xA;          &#xA;                  var sp = Stopwatch.StartNew();&#xA;        &#xA;        &#xA;          &#xA;                  using (var bulk = store.BulkInsert())&#xA;        &#xA;        &#xA;          &#xA;                  {&#xA;        &#xA;        &#xA;          &#xA;                      var rand = new Random();&#xA;        &#xA;        &#xA;          &#xA;                      for (int i = 0; i &lt; 100*1000; i&#x2B;&#x2B;)&#xA;        &#xA;        &#xA;          &#xA;                      {&#xA;        &#xA;        &#xA;          &#xA;                          bulk.Store(new User&#xA;        &#xA;        &#xA;          &#xA;                          {&#xA;        &#xA;        &#xA;          &#xA;                              CreatedAt = DateTime.Today.AddDays(rand.Next(356)),&#xA;        &#xA;        &#xA;          &#xA;                              Score = rand.Next(0, 5000),&#xA;        &#xA;        &#xA;          &#xA;                              Name = RandomName(rand)&#xA;        &#xA;        &#xA;          &#xA;                          });&#xA;        &#xA;        &#xA;          &#xA;                      }&#xA;        &#xA;        &#xA;          &#xA;                  }&#xA;        &#xA;        &#xA;          &#xA;                  Console.WriteLine(sp.Elapsed);&#xA;        &#xA;        &#xA;          &#xA;              }&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          Generate-Sample-Data.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA;&#xA;&#xA;In the CouchDB post, this took&#x2026; a while. With RavenDB, this took 7.7 seconds and the database size at the end was 48.06 MB. This is my laptop, 6th gen i7 with 16 GB RAM and SSD drive. The CouchDB tests were run over a similar machine, but with 8 GB RAM, but RavenDB didn&#x2019;t get to use much memory at all throughout the benchmark.&#xA;It is currently sitting on around 205MB working set, and allocated a total of 70 MB managed memory and 19 MB of native memory.&#xA;I then created the following index:&#xA;&#xA;This does pretty much the same as the indexes created in CouchDB. Note that in this case, this is running in process, so the nearest equivalent would be to Erlang native views.&#xA;This took 1.281 seconds to index 100,000 documents, giving us a total of 78,064 indexed documents per second.&#xA;The working during the indexing process grew to 312 MB.&#xA;But those were small documents, what about larger ones? In the linked post, there was another test done, this time with each index also having a 300KB text property. Note that this is a single property.&#xA;The math goes like this: 300KB * 100,000 documents = 30,000,000 KB = 29,296 MB = 28.6 GB.&#xA;Inserting those took 1 minute and 40 seconds. However, the working set for RavenDB peaked at around 500 MB, and the total size of the database at the end was&#xA0; 512.06 MB. It took me a while to figure out what was going on.&#xA;One of the features that we have with the blittable format is the fact that we can compress large string values. The large string property was basically lorem ipsum repeated 700 times, so it compressed real well. And the beauty of this is that unless we actually need to touch that property and do something to it, it can remain compressed.&#xA;Indexing that amount of data took 1.45 seconds, for 68,965 indexes documents per second.&#xA;My next test was to avoid creating a single large property and go with a lot of smaller properties.&#xA;&#xA;&#xA;    &#xA;      &#xA;        &#xA;  &#xA;    &#xA;    &#xA;&#xA;        &#xA;&#xA;&#xA;  &#xA;  &#xA;  &#xA;    &#xA;&#xA;    &#xA;      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.&#xA;      Learn more about bidirectional Unicode characters&#xA;    &#xA;&#xA;&#xA;              Show hidden characters&#xA;&#xA;&#xA;&#xA;&#xA;  &#xA;    &#xA;    &#xA;&#xA;&#xA;&#xA;  &#xA;        &#xA;          &#xA;          var entity = new User&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              CreatedAt = DateTime.Today.AddDays(rand.Next(356)),&#xA;        &#xA;        &#xA;          &#xA;              Score = rand.Next(0, 5000),&#xA;        &#xA;        &#xA;          &#xA;              Name = RandomName(rand),&#xA;        &#xA;        &#xA;          &#xA;          };&#xA;        &#xA;        &#xA;          &#xA;          for (int j = 0; j &lt; rand.Next(150,1500); j&#x2B;&#x2B;)&#xA;        &#xA;        &#xA;          &#xA;          {&#xA;        &#xA;        &#xA;          &#xA;              entity.CustomProperties[RandomName(rand)] = Random600CharString(rand);&#xA;        &#xA;        &#xA;          &#xA;          }&#xA;        &#xA;        &#xA;          &#xA;          bulk.Store(entity);&#xA;        &#xA;  &#xA;&#xA;&#xA;&#xA;    &#xA;&#xA;  &#xA;&#xA;&#xA;      &#xA;      &#xA;        view raw&#xA;        &#xA;          Create-Large-Entities.cs&#xA;        &#xA;        hosted with &#x2764; by GitHub&#xA;      &#xA;    &#xA;&#xA;&#xA;&#xA;This generates 100,000 documents in the 90KB &#x2013; 900 KB range. Inserting this amount of data took a while longer. This is mostly because of the amount of data that we write in this scenario which is in the many GB range. In fact, this is what my machine looked like while the insert was going on:&#xA;&#xA;Overall, the insert process took 8:01 minutes to complete. And the final DB size was around 12 GB.&#xA;Indexing that amount of information took a lot longer, and consume a few resources:&#xA;&#xA;Time to index? Well, it was about twice as much as before, with RavenDB taking a total of 2.58 seconds to index 100,000 documents totaling 12 GB in size.&#xA;That comes to 38,759 indexes documents per second.&#xA;A large part of that is related to the way we are storing information in blittable format. We don&#x2019;t need to do any processing to it, so we are drastically faster.&#xA;Comparing to the CouchDB results in the linked post, we have:&#xA;&#xA;&#xA;&#xA;&#xA0;&#xA;RavenDB&#xA;CouchDB&#xA;&#xA;&#xA;Small documents&#xA;78,064&#xA;19,821&#xA;&#xA;&#xA;Large documents&#xA;38,759&#xA;&#xA0; 9,363&#xA;&#xA;&#xA;&#xA;In other words, we are talking about being 4 times faster than the faster CouchDB option.</p>
        <a href="https://enterprisecraftsmanship.com/posts/2016-retrospective/" target="_blank"><h1 class="title mb-6">2016 retrospective</h1></a>
        <p class="mb-2">by Vladimir Khorikov</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 23, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I already did this thing last year, so I thought I would do it again. Below is an overview of the articles I posted this year and a little bit of reflection on them.&#xA; Retrospective It&#x2019;s interesting to look at the progression of blogging topics throughout the whole year. They mostly followed the Pluralsight courses I was working on at the time. While writing a course, I remember finding lots of ideas that were worth extracting into a separate self-contained blog post.</p>
        <a href="https://www.meziantou.net/tester-les-webhooks-avec-ngrok.htm" target="_blank"><h1 class="title mb-6">Test Webhooks with ngrok</h1></a>
        <p class="mb-2">by G&#xE9;rald Barr&#xE9;</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 21, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Webhooks are an inter-application notification mechanism. For example, GitHub can notify an application via an HTTP request after each commit on a repository. The notified application can thus operate immediately after the commit. Here is the GitHub screen to add a webhook:The problem of webhooks i</p>
        <a href="https://www.stevejgordon.co.uk/aspnet-core-update-december-2016-lts-release" target="_blank"><h1 class="title mb-6">Updating an ASP.NET Core Site to the December 2016 Release</h1></a>
        <p class="mb-2">by Steve Gordon</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: December 20, 2016
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I&#xA0;run into an issue this week during what should have been a simple ASP.NET Core application update. I wanted to share my experience in case others run into similar problems. Also, I&#x2019;m sure to be back here myself to remember this in the future! On December 13th Microsoft released their second minor patch release for [&#x2026;]</p>
        <div class="button flex justify-between">
            <a href="278.html"><span class="back arrow"></span></a>

            <a href="280.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
</body>
</html>