
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 392 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-3911">
            <a href="https://ayende.com/blog/168193/ravendb-days-in-stockholm-malmo" target="_blank">
                <h2 class="title mb-6" id="article-3911">RavenDB Days in Stockholm &amp; Malmo</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: September 02, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is a reminder that we are going to be doing two full day events in Sweden in a few weeks.&#xA;&#xA;&#x9;So far, we have enough people registering that we actually had to move the event to a bigger venue! So we have more room for you to come and hear all about RavenDB 3.0 and the cool stuff that we are bringing with it.&#xA;&#xA;&#x9;You can register here.</p>
        </article>
        <article id="article-3912">
            <a href="https://ayende.com/blog/168225/ravendb-3-0-production-dog-fooding" target="_blank">
                <h2 class="title mb-6" id="article-3912">RavenDB 3.0&#x2013;Production dog fooding</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: September 02, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The following screen shot is from our production RavenDB instance, which is now running RavenDB 3.0 build 3466. This is part of our dog fooding strategy, and it pays heavy dividends (see the next posts) .</p>
        </article>
        <article id="article-3913">
            <a href="https://ayende.com/blog/168097/playing-with-roslyn" target="_blank">
                <h2 class="title mb-6" id="article-3913">Playing with Roslyn</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: September 01, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">We do a lot of compiler work in RavenDB. Indexes are one such core example, where we take the C# language and beat both it and our heads against the wall until it agrees to do what we want it to. A lot of that is happening using the excellent NRefactory library as well as the not so excellent CodeDOM API. Basically, we take a source string, convert it into something that can run, then compile it on the fly and execute it. I decided to check the implications of using this using a very trivial benchmark:private static void CompileCodeDome(int i)&#xA;{&#xA;    var src = @&quot;&#xA;class Greeter&#xA;{&#xA;static void Greet()&#xA;{&#xA;System.Console.WriteLine(&quot;&quot;Hello, World&quot;&quot; &#x2B; &quot; &#x2B; i &#x2B; @&quot;);&#xA;}&#xA;}&quot;;&#xA;    CodeDomProvider codeDomProvider = new CSharpCodeProvider();&#xA;    var compilerParameters = new CompilerParameters&#xA;    {&#xA;        OutputAssembly= &quot;Greeter.dll&quot;,&#xA;        GenerateExecutable = false,&#xA;        GenerateInMemory = true,&#xA;        IncludeDebugInformation = false,&#xA;        ReferencedAssemblies =&#xA;        {&#xA;            typeof (object).Assembly.Location,&#xA;            typeof (Enumerable).Assembly.Location&#xA;        }&#xA;    };&#xA;    CompilerResults compileAssemblyFromSource = codeDomProvider.CompileAssemblyFromSource(compilerParameters, src);&#xA;    Assembly compiledAssembly = compileAssemblyFromSource.CompiledAssembly;&#xA;}&#xA;&#xA;private static void CompileRoslyn(int i)&#xA;{&#xA;    var syntaxTree = CSharpSyntaxTree.ParseText(@&quot;&#xA;class Greeter&#xA;{&#xA;static void Greet()&#xA;{&#xA;System.Console.WriteLine(&quot;&quot;Hello, World&quot;&quot; &#x2B; &quot; &#x2B;i &#x2B;@&quot;);&#xA;}&#xA;}&quot;);&#xA;&#xA;    var compilation = CSharpCompilation.Create(&quot;Greeter.dll&quot;,&#xA;        syntaxTrees: new[] {syntaxTree},&#xA;        references: new MetadataReference[]&#xA;        {&#xA;            new MetadataFileReference(typeof (object).Assembly.Location),&#xA;            new MetadataFileReference(typeof (Enumerable).Assembly.Location),&#xA;        });&#xA;&#xA;    Assembly assembly;&#xA;    using (var file = new MemoryStream())&#xA;    {&#xA;        var result = compilation.Emit(file);&#xA;    }&#xA;}&#xA;&#xA;&#xA;&#xA;&#xA0;&#xA;I run it several times, and I got (run # on the X axis, milliseconds on the Y axis):&#xA;&#xA;The very first Roslyn invocation is very costly. The next are pretty much nothing. Granted, this is a trivial example, but the CodeDOM (which invokes csc) is both much more consistent but much more expensive in general.</p>
        </article>
        <article id="article-3914">
            <a href="https://ayende.com/blog/168129/inside-ravendb-3-0-chapter-6-is-done" target="_blank">
                <h2 class="title mb-6" id="article-3914">Inside RavenDB 3.0&#x2013;Chapter 6 is done</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 31, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Chapter 6 isn&#x2019;t something that I actually planned to write. I thought that I would be writing a high level guide into how to use and utilize RavenDB indexes. What came out was a detailed discussion on the actual RavenDB indexing process, including a deep look into the kind of environment that we have to deal with, the type of design decisions that we had to make and the balancing act between competing demands. I don&#x2019;t know if anyone would be interested in actually reading it, since it is quite low level, and it wasn&#x2019;t a lot of fun to write. It is really hard to summarize six years of operational experience into a few words. It is even harder to show you the final result and discussing that without the full history of &#x201C;we tried this, and that, and that as well&#x201D;. But I think it ended up okay. You can get it in the following URL.</p>
        </article>
        <article id="article-3915">
            <a href="https://ayende.com/blog/168066/interview-questions-large-text-viewer" target="_blank">
                <h2 class="title mb-6" id="article-3915">Interview questions: Large text viewer</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 29, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I mentioned that we are looking for more people to work for us. This time, we are looking for WPF people for working on the profiler, as well another hush hush project that we&#x2019;ll hopefully be able to reveal in December. Because we are now looking for mostly UI people, that gives us a different set of challenges to deal with. How do I get a good candidate when my own WPF knowledge is limited to &#x201C;Um.. dependency properties, man, that the bomb, man, yeah!&#x201D;. Add that to the fact that by the time people got an interview here, we want to be sure that they can code, that present an interesting problem. So we come up with questions like this one. Another question we have is the large text viewer. We need a tool that can work with text file (logs) of huge size (1GB &#x2013; 10 GB). We want to be able to open and search through such a file.  Nitpicker corner: I usually use this tool for that, the purpose of the question isn&#x2019;t to actually to get such a tool, it is to see what kind of code the candidate writes. We are looking for someone with a lot of skill in the UI side of things, so the large text file stuff is somewhat of a red herring, except that we want to see what they can do beyond just slap a few text boxes around.</p>
        </article>
        <article id="article-3916">
            <a href="https://ayende.com/blog/168065/ravendb-3-0-release-plans" target="_blank">
                <h2 class="title mb-6" id="article-3916">RavenDB 3.0&#x2013;Release Plans</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 28, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Well, I just committed the last feature for RavenDB 3.0, and all the tests are passing. What we are doing now is just working through the studio and running verification tests. Tomorrow or Sunday we are going to go live on our own systems with RavenDB 3.0. And shortly after that we&#x2019;ll do an release candidate, followed by the actual release.</p>
        </article>
        <article id="article-3917">
            <a href="https://ayende.com/blog/167969/interview-question-that-annoying-3rd-party-service" target="_blank">
                <h2 class="title mb-6" id="article-3917">Interview question</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 27, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">We are still in a hiring mode. And today we have completed a new question for the candidates. The task itself is pretty simple, create a form for logging in or creating a new user. Seems simple enough, I think. But there is a small catch. We&#x2019;ll provide you the &#x201C;backend&#x201D; for this task, which you have to work with. The interface looks like this: public interface IUserService&#xA;{&#xA;        void CreateNewUser(User u);&#xA; &#xA;        User GetUser(string userId);&#xA;}&#xA;&#xA;public class User&#xA;{&#xA;   public string Name {get;set;}&#xA;   public string Email {get;set;}&#xA;   public byte[] Sha1HashedPassword {get;set;}&#xA;}&#xA;&#xA;&#xA;The catch here is that we provide that as a dll that include the implementation for this, and as this is supposed to represent a 3rd party service, we made it behave like that. Sometimes the service will take a long time to run. Sometimes it will throw an error (ThisIsTuesdayException), sometime it will take a long time to run and throw an error, etc.&#xA;Now, the question is, what is it that I&#x2019;m looking to learn from the candidate&#x2019;s code?</p>
        </article>
        <article id="article-3918">
            <a href="https://ayende.com/blog/168033/hanselminutes-podcast-inside-ravendb-with-michael-yarichuk" target="_blank">
                <h2 class="title mb-6" id="article-3918">Hanselminutes Podcast: Inside RavenDB with Michael Yarichuk</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 26, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Go and listen to this podcast:  Scott chats with Michael Yarichuk about RavenDB. Michael works with Ayende and the RavenDB team on their document database. Scott is trying to learn about document databases and Michael helps him along the path, exploring those computer science concepts that make document databases unique.</p>
        </article>
        <article id="article-3919">
            <a href="https://ayende.com/blog/168034/azure-documentdb" target="_blank">
                <h2 class="title mb-6" id="article-3919">Azure DocumentDB</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 25, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">On Friday, Microsoft came up with Azure DocumentDB. You might say that I have a small interest in such things, so I headed over there to see what I can learn about this project.&#xA;&#xA;&#x9;Aside from being somewhat annoyed with the name, this seems to be a very different animal from RavenDB, and something that was built to serve a different niche. One of the things that we put first with RavenDB is ease of use, development and deployment for business applications. The ADB design appears to be built around a different goal, around very big datasets.&#xA;&#xA;&#x9;Nitpicker corner: Yes, I know this is a preview, and I know that they are going to be changes. And I repeat, I have no knowledge about this project beyond the documentation and several hours of playing with it.&#xA;&#xA;&#x9;That said, I do have a fair bit of experience in this area. So I feel that I can speak with confidence about the topic.&#xA;&#xA;&#x9;ADB is supposed to be an highly scalable system that store documents. So far, so good, I can certainly understand that need. But it has made drastically different design choices, some of which I feel very strongly about. I&#x27;ll try to explore the issues that I have issues with, and contrast that with what you can do with RavenDB.&#xA;&#xA;&#x9;This post has two parts, the first talks about conceptual issues. The second talk about the currently published limits, and their implications for general use for ADB.&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;TLDR;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;No sorting option, or a good paging story&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;SQL Injection, without any other alternative&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Hard to deploy and to keep current with your codebase&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Poor development story &amp; no testing story&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Poor client API&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Lots of table scans&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Limited queries and few optimization options&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Single document transactions (from the client)&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;No cross collection transactions&#xA0;at all&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;Very small document sizes allowed&#xA;&#x9;&#xA;&#x9;&#xA;&#x9;&#x9;Also see the &#x201C;What is this for?&#x201D; section below.&#xA;&#x9;&#xA;&#x9;&#x9;For a document database platform that doesn&#x2019;t have any of those issues, and run in Azure, see RavenHQ on Azure.&#xA;&#xA;&#xA;&#x9;Transactions &#x2013; ADB say that it has transactions, and for a very limited meaning of the word, I believe it means it. Transactions in ADB means a single document only can be saved with a guarantee it will either be saved or not. That is great, in the sense that at least you won&#x2019;t have data corruption, but that isn&#x2019;t really something that mean much. Even MongoDB can satisfy that bar.&#xA;&#xA;&#x9;Oh, sure, you can get actual transactions if you write JS code that run as a &#x201C;stored procedure&#x201D; inside ADB. This means that you can send data to the server and have your JS Stored Procedure make multiple operations in a single transaction. Which is just slightly better (although see my comments on those stored procedures later), but that is still limited to only operations inside the same collections.&#xA;&#xA;&#x9;A trivial example for transactions in a document database would be to add a new comment, and update the comment count. You cannot do that in ADB. Not in a single transaction. I don&#x2019;t know about you, but most of the interesting use cases happen when you are working with multiple document types. Sure, you can put all your documents inside the same collection, but have fun trying to work with that in the long term.&#xA;&#xA;&#x9;In contrast, RavenDB fully support actual transactions that can span multiple documents (even on different collections, which I would never believe would be an accomplishment). RavenDB can even support DTC and transactions that spans multiple interactions with the server. You know, the kind of transactions you actually want to use. For more, see the documentation on RavenDB transactions.&#xA;&#xA;&#x9;Management &#x2013; it honestly feels like someone missed all the points that made people want to ditch SQL in the first place. ADB has the concepts of triggers, user defined functions (more on that travesty later, when I discuss queries) and stored procedures. You can define them in JS, and you create something that looks like this:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#xA;&#xA;&#x9;Let me count the ways that this is going to cause problems for you.&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;Business logic in the database, because we haven&#x2019;t learned anything about that in the past.&#xA;&#x9;&#xA;&#x9;&#x9;Code that you cannot run or test independently. Just debugging something like that is going to be hard.&#xA;&#x9;&#xA;&#x9;&#x9;No way to actually manage deployment or make sure that this code is in sync with the rest of your codebase.&#xA;&#x9;&#xA;&#x9;&#x9;Didn&#x2019;t we already learn that triggers are a source for a lot of pain? Are they really necessary for you to do things?&#xA;&#xA;&#xA;&#x9;Yes, you have a DB that is schema less, but those kind of things are actually important. They define what you can do with the database, and not having a good way to move those around, and most importantly, not having a way to tie them to the source control system you are using is going to be a giant PITA.&#xA;&#xA;&#x9;Sorry, that isn&#x2019;t actually something that you can delay doing for later. You need a good development story, and as I see it, the entire development story all around here is just going to be hard. You would have to manually schlep things around between development and production. And that isn&#x2019;t just about the SP or UDFs. There are a lot of settings that you&#x2019;re going to have to deal with. For example, the configuration per collection, which you&#x2019;ll want to make sure is the same (otherwise you get some very subtle and hard to understand bugs).&#xA;&#xA;&#x9;For that matter, there doesn&#x2019;t seem to be a development story. You are probably expected to just run another ADB instance on Azure and use that. This means a lot of latency in development, and that also means that you can&#x2019;t have separate databases per developer, which is a standard practice. This means having to write a lot of code just to manage those things, and you are right back again at the good old days of &#x201C;who didn&#x2019;t update the schema script&#x201D; and failed deployments.&#xA;&#xA;&#x9;In contrast, RavenDB make is very easy to handle your indexes &amp; transformers in your code and deploying them as a single step. That also means that they are versioned in the same place as your code, so you don&#x2019;t have to worry about moving between dev &amp; prod. We spent a lot of time thinking and working around this specific area, because this is a common pain point in relational databases, and we weren&#x2019;t willing to accept that being the case in our database. For more information, please see the documentation about index management in RavenDB.&#xA;&#xA;&#x9;Indexing &#x2013; there are several things here that bother me. By default, everything is indexed, and in the same transaction. This is a great decision, for a demo system. But in a real world system, the overhead of indexing everything is prohibitive, especially in a high write system. So ADB is allowing to specify the paths that you will include or exclude from indexing, as well as whatever indexing should be within the same transaction or lazy.&#xA;&#xA;&#x9;The problem with that is that those are per collection settings and there doesn&#x2019;t appear to be any way to modify them after the fact. So you start running your system in production, realize that the cost of indexing is high, so you need to change the indexing strategy for a collection. The only way to do that is to create a new collection, with a new indexing strategy, move all the data there, then delete the old one. For even more fun, consider the case where you have a production and development environments. In production, you have a different indexing strategy then in development (where the &#x2018;index everything&#x2019; mode is still on). That means that when you push things to production, your system will fail silently, because you won&#x2019;t be indexing the fields you though were indexed.&#xA;&#xA;&#x9;This need re-iteration, the way this currently work, you start running with the default indexing option, which is expensive. As long as you don&#x2019;t have any performance requirements (for example, during development), that is just fine. But when you actually have a lot of data there, or have a lot of writes, that is when you&#x2019;ll figure out that those things need to be changed. At that point, you are are pretty much screwed, because you need to pull all the data out, create a new collection with the new indexing options, and write it all back. That is a horrible experience, especially because you&#x2019;ll likely need to do that under pressure with users breathing down your necks and management complaining about the performance.&#xA;&#xA;&#x9;For that matter, indexing in general scares me. Again, I don&#x2019;t actually have any knowledge of the internal operations, but there are a lot of stuff there that just doesn&#x2019;t make sense. It looks like the precision of the indexes used are up to 3 characters (by default) per value. I&#x2019;m guessing that this is done to reduce the amount of space used by the indexing, at least that is what the docs says. The problem is that when you do that, you do a lookup by the first 3 characters, then you have to do a flat search over all the other values. That is going to be causing problems.&#xA;&#xA;&#x9;It is also indicated that you cannot do any range searches except on numeric values. Which has interesting implications if you want to do searches on something like a date range, or time spans, an incredibly common operation.&#xA;&#xA;&#x9;In contrast, RavenDB indexes are always using the full value, so you are getting an O(logN) search behavior, and not a fallback to O(N) behavior. Range searches are possible on any value, numeric, date time, time span, string, etc. For more information, see the RavenDB documentation about searching with RavenDB.&#xA;&#xA;&#x9;Queries &#x2013; Speaking of problems. Let me talk for a moment on ADB SQL. It looks nice on the surface, it is certainly would be familiar to most people. It is also contain a lot of hidden traps.&#xA;&#xA;&#x9;For example, the docs talk about being able to do joins, but you are only actually able to do &#x201C;joins&#x201D; into the sub documents, not into other collections, or even documents in the same collection. A query such as:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA0;&#xA;&#x9;&#xA;&#x9;&#x9;SELECT c.Name as CustomerName, o.Total, o.Date&#xA;FROM Orders o&#xA;JOIN Customers c ON c.Id = o.CustomerId&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;Can&#x2019;t be executed on ADB. So the whole notion of &#x201C;joins&#x201D; is actually limited to what you can do in a single document and the sub documents it contains. That make it very limited.&#xA;&#xA;&#x9;The options for filtering (where clause) is also interesting. Mostly because of the wide range they allow. It is very easy to create queries that cannot be computed using indexes. That means that your query is now running table scans. Lots &amp; lots of table scans. Sure, you don&#x2019;t have tables, but O(N) is still O(N), and when N is large, as it is apparently the expected case here, you are going to be pretty much dead in the water.&#xA;&#xA;&#x9;Another thing that I can&#x2019;t wrap my head around is the queries shown. There is no way to pass parameters to the query. None.&#xA0; This appears to be the case because 30&#x2B; years of working with SQL has shown that there is absolutely no issue with putting user&#x2019;s input directly into the query. And since complex queries require you to use the raw ADB SQL, you are pretty much have guaranteed that you&#x2019;ll have SQL Injection attacks.&#xA;&#xA;&#x9;Sure, you might no get caught by Little Bobby Tables (you can&#x2019;t modify data via SQL), but you are still exposed and can leak important data. This query works just fine, and will return all products:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;SELECT * FROM Products p WHERE p.Name = &quot;testing&quot; OR 1 = 1 -- &quot;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;I&#x2019;ll assume that you understand how I got there. This is a brand new database engine, but ADB is bringing very old issues back into the future. Not only that, we don&#x2019;t have anyway around that. I guess you are going to have to write your on parameter scrubbing code, and make sure to use it everywhere.&#xA;&#xA;&#x9;In general, queries are limited. Severely limited, actually. Take a look at the following query:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;SELECT * FROM Products p &#xA;WHERE p.Type = &quot;Beer&quot;&#xA;AND p.Maker = &quot;Guinness&quot;&#xA;AND p.Discontinued = false &#xA;AND p.Price &gt; 10 AND p.Price &lt; 100&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;You can&#x2019;t run it in ADB. It is too complex to run. Note that this is about as trivial a query as you can get, in pretty much any reasonable business system.&#xA;&#xA;&#x9;Continuing on with the problems for business apps theme, there doesn&#x2019;t appear to any good way to do things like paging. When you issue a query, you can specify the number of items to take and you can repeat a query by passing a continuation. But that doesn&#x2019;t really help when you need to actually page with the user. So you show the data to the user, then want to go to the next page&#x2026; you have to pass the continuation token all the way around, and hope that it will remain valid for the duration. For that matter, the current client API does paging at the server level, but it will fetch all the results for a query, even if it take it hours to do so.&#xA;&#xA;&#x9;There is no way to actually get the total number of items that match the query. So you can&#x2019;t show the user something like: &#x201C;You have 250 new emails&#x201D;, nor can you show them &#x201C;Page 1 &#x2026; 50&#x201D;.&#xA;&#xA;&#x9;Another troubling omission is the total lack of anything that would allow you to actually query your documents in a particular order. If I want to get the latest orders in descending order (or in fact, in any well defined order), I am out of luck. There is no way of doing that. This is a huge deal, because this isn&#x2019;t just something that you can try papering over. This is a core functionality that you need in pretty much any application. And it is just not there. There is some indication that this is being worked on, but I&#x2019;m surprised that this isn&#x2019;t here already. Distributed sorting is a non trivial problem, of course, so I&#x2019;ll reserve further judgment until I see what they have.&#xA;&#xA;&#x9;ADB&#x2019;s queries are highly limited, so I expect a workaround for that is going to be to push functionality into the UDF. Note that UDF don&#x2019;t have access to any context, so it can&#x2019;t load additional documents. What it can do it utterly destroy any chance you&#x2019;ll ever have for optimizing a query. The moment that a UDF is involved, you don&#x2019;t really have a choice about how to execute a query, you pretty much have to go to a table scan. Maybe filtering some stuff based on the other filters in the query, but in many cases, that means that you&#x2019;ll have to run your UDF over millions of records. Because UDFs are permitted to perform non pure operations (like the current time), you can&#x2019;t even cache its values, or do anything smart around that. You&#x2019;ll always have to execute the UDF, regardless of the amount of data you have to go through. I don&#x2019;t expect that to perform very well.&#xA;&#xA;&#x9;In contrast, RavenDB was explicitly designed to give you both flexibility and performance in queries. There are no table scans in RavenDB, and complex queries are expected, encouraged and are handled properly. Queries across multiple documents (and in other collections) are possible, and quite easy to do. Common operations, like paging or sorting are part of the core functionality, and are both very easy to use and come with no additional costs. Complex things like full text search, spatial queries, facets and many more are right there for you to use.&#xA0; For more information, see the RavenDB documentation about querying in RavenDB, spatial searches in RavenDB and how RavenDB actually index the data to allow complex operations.&#xA;&#xA;&#x9;Data types &#x2013; ADB data types are the ones defined in the JSON spec. In particular, it doesn&#x2019;t have native support for date times. The ADB documentation suggest that you&#x2019;ll do custom serialization to handle that. Rendering things like asking: &#x201C;Give me all the orders for this customer for 2014&#x201D; very hard, leaving aside the issues of querying for orders in a particular month, which is not possible either, since you can only do range searches on numeric data. Dates, in particular, are a very complex topic, and not actually handling this in the database is going to open you up for a lot of issues down the road. And dates are kinda important type to have.&#xA;&#xA;&#x9;In contrast, RavenDB handles complex (including user defined) types in a well defined manner. And has full support for dates, operations on dates, etc. It seems silly to mention, to be fair, because it seems so basic to have that. For more information, you can read the documentation about dates in RavenDB.&#xA;&#xA;&#x9;Aggregation &#x2013; this one is simple, you don&#x2019;t have any. That means that you cannot get the total number of unread emails, or the total sum of orders per customer, or the maximum order per this month . This whole functionality just isn&#x2019;t there.&#xA;&#xA;&#x9;In contrast, RavenDB has explicit support for counting the number of results for a query as well as map/reduce indexes. Those give you powerful aggregation framework, which execute the work in the background. When you query, you get the pre-computed results very quickly, without having to do any work at query time. For more information, you can read about Map/Reduce in RavenDB and dynamic aggregation queries.&#xA;&#xA;&#x9;Set operations &#x2013; another easy one, it is just not there. You can do some operations in a stored procedure, but you have 5 seconds to run, and that is it. If you need to do something like: Split FullName to FirstName and LastName, get ready to write a lot of code, and wait for a long time for this to complete. For that matter, something as simple as &#x201C;delete all inactive users&#x201D; is very hard to do as well.&#xA;&#xA;&#x9;In contrast, RavenDB has explicit support for set based updates and deletes. You can specify a query that match a set of results that would either be deleted or patched using a JS script. For more operations, read the documentations about Set Based Operations.&#xA;&#xA;&#x9;Client API &#x2013; this is still a preview, so that is somewhat unfair, but the client API is very primitive. Basically, it is a very thin wrapper around the REST API, and it does a poor job at that. The REST API support paging, but the C# client API does not, for example. There is no concept of unit of work, change tracking, client side behavior or anything at all that would actually make this work nicely. There is also an interesting design decision to go async for all operations except queries.&#xA;&#xA;&#x9;With queries, you actually issue an async REST call, but you are going to be waiting on that query synchronously. This is probably because of the IQueryable interface and its assumption that the query is sync. But that is a very bad thing to do in terms of mixing sync and async work. It is easy to get into problems such as deadlocks, self lock and just plain weirdness.&#xA;&#xA;&#x9;In contrast, RavenDB has a carefully designed client APIs (for .NET, JVM, etc), which fully expose the power of RavenDB. They have been designed to be intuitive, easy to use and guide you into the pit of success, RavenDB also have separate sync and async API, including fully async queries. For more information, read the documentation about the client API.&#xA;&#xA;&#x9;Self links &#x2013; when issuing any operation whatsoever to the database, you have to use something call the object link, or self link. For example, in my test database, the Products collection link is: dbs/frETAA==/colls/frETANSmEAA=/&#xA;&#xA;&#x9;You have to use links like that whenever you make any operation what so ever. For fun, those are going to be unique per database, so creating a Products collection in another database would result in a different collection link. That means that I can&#x2019;t just store them in configuration. So you&#x2019;ll probably have to read them from the database every time you need to use them (maybe with some caching?). This is just silly. This is making it very hard to look at what is going on and see what the system is doing (for example, by watching what is going on in Fiddler).&#xA;&#xA;&#x9;In contrast, RavenDB applies human readable names whenever possible. For more information, see the documentation about the efforts to make sure that everything in RavenDB in human readable and easily debuggable. One such place is the id generation strategy.&#xA;&#xA;&#x9;Development and testing &#x2013; in this day and age, people are connected to the internet through most of their day to day life. That doesn&#x2019;t mean that they are always connected, or that you can actually rely on the network, or that the latency is acceptable. There is no current development story for ADB. No way to run your own database and develop while you are offline (on the train or at 30,000 feet in the air). That means that every call to ADB has to go over the internet, and that means, in turn, that there is no local development story at all. It means a lot more waiting from the point of view of the developer (also see next point), it means that there is just no testing story.&#xA;&#xA;&#x9;If you want to run code to test your ADB usage, you have to setup (and pay) a whole new ADB instance, have to make sure that it is setup exactly the same way as your production instance, and run it against that. It means that test not only have to go outside your process, but across the internet to a remote server. This pretty much kills the notion of fast tests.&#xA;&#xA;&#x9;In contrast, RavenDB has an excellent development and testing story. You don&#x2019;t pay for development or CI instances, and you can run tests against RavenDB using an in memory mode embedded inside your process. This has been heavily optimize to allow fast running tests. We are developers, and we care to make other developers&#x2019; life easy. It shows. For more information, see the documentation about unit testing RavenDB.&#xA;&#xA;&#x9;Joins are for your code &#x2013; because ADB doesn&#x2019;t actually support joins beyond the document scope, or any other option like that, it means that if you want to do something trivial, like show a customer a list of their orders, you are actually going to have to do the join in your own code, not in the database. In fact, let us take a silly scenario, let us say that we want to show a list of new employees as well as their managers, so we can have a chat with them about how they are settling in.&#xA;&#xA;&#x9;If we were using SQL, we would be using something like this:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;SELECT emp.Id as EmpId, emp.Name as EmpName, mngr.Id as ManagerId, mngr.Name as ManagerName&#xA;FROM Employees emp&#xA;JOIN Managers mngr where emp.ManagerId = mngr.Id&#xA;WHERE emp.JoinedAt &gt; &#x27;2014-06-01&#x27;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;That is pretty easy, right? How do you do something like that in ADB? Well, you start with the first query:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;SELECT emp.Id as EmpId, emp.Name as EmpName, emp.ManagerId as ManagerId&#xA;FROM Employees emp&#xA;WHERE emp.JoinedAt &gt; &#x27;2014-06-01&#x27;&#xA;&#x9;&#xA;&#xA;&#xA;&#x9;And then, for each of the returned managers&#x2019; ids, we have to issue a separate query (ADB doesn&#x2019;t have support for IN). This pattern of usage is called SELECT N&#x2B;1, and it is a very well known anti pattern, even leaving aside the fact that you have to manually do the join in your own code, with all that this implies. This sort of operations will effectively kill the performance of any application, because you are very chatty with the database.&#xA;&#xA;&#x9;In contrast, RavenDB contains several ways to load related items. From including a related document to projecting it via a transformer, you can very easily and efficiently get all the data you need, in a single query to RavenDB. In fact, RavenDB applies a Safe By Default approach and limit the number of times you can call the server (configurable) to prevent just this case. We&#x2019;ll error if you go over the budget of remote calls you are allowed to make. This gives you an early chance to catch performance problems. For more information, see the documentation about includes, transformers and&#xA0; the Safe By Default approach practiced by RavenDB.&#xA;&#xA;&#x9;Limits - reading the limits for ADB makes for some head scratching. Yes, I know that we are talking about the preview mode only. I&#x2019;m aware that you can ask to increase those limits. Nevertheless, those limits likely reflect real trade offs made in the system. So increasing those limits for a particular use case means that you&#x2019;ll have to pay the price for that elsewhere.&#xA;&#xA;&#x9;For example, let us take this blog post as an example. It is over 22KB in size. But I can&#x2019;t store this blog post in ADB. That is because documents are limited to 16KB in size. This is utterly ridiculous. I just checked a few of our databases, an common size for documents is 4 &#x2013; 8 KB, this is true. But larger documents appear all the time. Even if you exclude blog posts as BLOB of text, we have order documents that have with&#xA0; multiple order lines that are easily past that size. In our users, we see every document size possible, from hundreds of KB to several MB.&#xA;&#xA;&#x9;I reached out to Codealike, one of our customers, who were also featured in one of Azure&#x2019;s case studies, to hear from them what their situation was. Out of 1.6 million documents in one of their databases, about 90% are in the 500Kb range.&#xA;&#xA;&#x9;I&#x2019;m assuming that a large part of this limitation is the fact that by default, everything is indexed. You can&#x2019;t index everything and have large documents and have reasonable performance. So this limit was introduced. I&#x2019;m also assuming that there are other issues here (to be able to fit into pages? low level technical stuff?). Regardless, this is just utterly ridiculous low limit. The problem is that even raising this limit by x5 or x10, that is still not enough. And I&#x2019;m assuming that they didn&#x2019;t chose this limit out of thin air, that there is a technical reason for it.&#xA;&#xA;&#x9;Other issues is the number of stored procedure and UDF that you have available. You get 5 of each, and that is it. So you don&#x2019;t get to actually express anything complex there. You also get to use only a single UDF per query, and to use a maximum of 3 AND / OR clauses in a query. I&#x2019;m assuming that the reasoning here is that the more clauses you have, the more complex it is to run the query, especially in a distributed environment. So they put a hard limit on that.&#xA;&#xA;&#x9;Those limits together, along with not supporting sorting basically render ADB into an interesting curiosity, but not a real contender for a generally applicable database.&#xA;&#xA;&#x9;What is this for?&#xA;&#xA;&#x9;After going over the documentation, there is one thing that I couldn&#x2019;t find. What is the primary use case for ADB?&#xA0;&#xA;&#xA;&#x9;It looks more like a solution in search of a problem than the other way around. It appears that this is used by several MS systems to store 100s of TB of data, and process millions of queries. Sheer data size isn&#x2019;t really interesting, we have customers that have multiple TB data. And millions of queries per day isn&#x2019;t really something to brag about (10 million queries per day translate to about 115 queries per second, or about 20 &#x2013; 30 queries per second per node).&#xA;&#xA;&#x9;What interests me is what sort of data do you put there? The small size limitation make it pretty much unsuitable for storing actual complex documents. You have to always be aware of the size you are storing, and that put a serious crimp in how you can work with this. The limited queries and the inability to sort also lead me to believe that this is a very purpose built tool.&#xA;&#xA;&#x9;OneNote&#x2019;s server side is apparently one such use case, but from the look of things, I would expect that this is the other way around. That ADB is actually the backend of OneNote that Microsoft has decided to make public (like Dynamo&#x2019;s in Amazon&#x2019;s case).&#xA;&#xA;&#x9;Some of those limitations are probably going to be alleviated by using additional Microsoft tools. So the new Search Server (presumably that one has complex searching &amp; sorting available) would allow you to do some proper queries, and HDInsight might be used for doing aggregation.&#xA;&#xA;&#x9;You aren&#x2019;t going to be able to get the &#x201C;show me the count of unread emails for this user&#x201D; from Hadoop, not when the data is constantly changing. And using a secondary search server will introduce high latencies for the indexing. That is leaving aside the additional operational complexity of having to manage multiple systems (and the communication between them) just to get things done.&#xA;&#xA;&#x9;Here are a few things that would be hard to build in ADB, as it stands today:&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;This blog &#x2013; the posts are too big, can&#x2019;t sort posts by date, can&#x2019;t do &#x201C;complex&#x201D; queries (tag &amp; date &amp; published &amp; not deleted)&#xA;&#x9;&#xA;&#x9;&#x9;Logging &#x2013; I actually thought that this would be a great use case, but we actually need to show logs by date. As well as be able to search using multiple fields (more than 3) or do contains queries.&#xA;&#x9;&#xA;&#x9;&#x9;Orders system &#x2013;&#xA0; important orders with a lot of line items will be rejected because of the size limitation.&#xA;&#xA;&#xA;&#x9;In fact, I don&#x2019;t know what would work there. What kind of data are you putting there? This isn&#x2019;t good for bulk data work, because the ingest rate is really small (~500 writes / second? The debug version RavenDB does 2,500 writes per sec that on my dev laptop without even using the bulk insert API) and there isn&#x2019;t a good way to work with large amount of data at once. It isn&#x2019;t good for business applications, for the reasons outlined above.&#xA;&#xA;&#x9;I guess that if you patched this and the search server and Hadoop together you would get something that might be able to serve. But I think that the complexity involved is going to be very high, and I just don&#x2019;t see where this would be a great solution.&#xA;&#xA;&#x9;In short, what is the problem that this is trying to solve? What application would be a perfect fit for this?&#xA;&#xA;&#x9;With RavenDB, the answer is simple, it is a general purpose database focused on OTLP applications. Until you have an answer, you can use RavenDB on Azure today using RavenHQ on Azure.</p>
        </article>
        <article id="article-3920">
            <a href="https://ayende.com/blog/168002/inside-ravendb-3-0" target="_blank">
                <h2 class="title mb-6" id="article-3920">Inside RavenDB 3.0</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 22, 2014
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I&#x2019;ve been working for a while on seeing where we can improve RavenDB, and one of the things that I wanted to address is having an authoritative source to teach people about RavenDB. Not just documentation, those are very good for reference, but not so good to give you a guided tour and actually impart knowledge. That is what I wanted to do, to take the last five years or so of working on and with RavenDB and distill them. The result is about a hundred pages or so (and likely to be three or four hundred pages). In other words, I slipped up and started churning out a book .  You can download the alpha version using the following link (which will be valid for the next two weeks). I want to emphasis that this is absolutely unedited, and there are likely to be error for zpelling in grammar*. Those will be fixed down the line, currently I&#x2019;m mostly focused on getting the content out. Here is also the temporary cover.   Comments are welcome. And yes, this will be an actual book, in the end, which you can hold in your hand and hopefully beat someone over the head if they need to smarten up. * The errors in that particular sentence were intentional.</p>
        </article>
        <div class="button flex justify-between">
            <a href="391.html"><span class="back arrow"></span></a>

            <a href="393.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;🚀&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
