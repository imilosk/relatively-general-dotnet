
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Home â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<script>
    const lightModePref = window.matchMedia("(prefers-color-scheme: light)");

    function getUserPref() {
        const storedTheme = typeof localStorage !== "undefined" && localStorage.getItem("theme");
        return storedTheme || (lightModePref.matches ? "light" : "dark");
    }

    function setTheme(newTheme) {
        if (newTheme !== "light" && newTheme !== "dark") {
            return console.warn(
                `Invalid theme value '${newTheme}' received. Expected 'light' or 'dark'.`,
            );
        }

        const root = document.documentElement;

        // root already set to newTheme, exit early
        if (newTheme === root.getAttribute("data-theme")) {
            return;
        }

        root.setAttribute("data-theme", newTheme);

        const colorThemeMetaTag = document.querySelector("meta[name='theme-color']");
        const bgColour = getComputedStyle(document.body).getPropertyValue("--theme-bg");
        colorThemeMetaTag.setAttribute("content", `hsl(${bgColour})`);
        if (typeof localStorage !== "undefined") {
            localStorage.setItem("theme", newTheme);
        }
    }

    // initial setup
    setTheme(getUserPref());

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("theme-toggle").addEventListener("click", () => {
            const theme = localStorage.getItem("theme");

            if (theme === "dark") {
                setTheme("light");
            } else {
                setTheme("dark");
            }
        });

        document.getElementById("toggle-navigation-menu").addEventListener("click", (e) => {
            const button = e.target;
            const ariaExpanded = button.getAttribute("aria-expanded");
            const header = document.getElementById("main-header");

            if (ariaExpanded === "true") {
                button.setAttribute("aria-expanded", "false");
                header.classList.remove("menu-open");
            } else {
                button.setAttribute("aria-expanded", "true");
                header.classList.add("menu-open");
            }
        });
    });
</script>

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <theme-toggle class="ms-auto">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main">
    <section aria-label="Blog post list">
        <a href="https://devblogs.microsoft.com/dotnet/dotnet-and-dotnet-framework-july-2024-servicing-updates/" target="_blank"><h1 class="title mb-6">.NET and .NET Framework July 2024 servicing releases updates</h1></a>
        <p class="mb-2">by Tara Overfield</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: July 09, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A recap of the latest servicing updates for .NET and .NET Framework for July 2024.</p>
        <a href="https://ayende.com/blog/201345-B/failing-to-map-a-tale-of-false-hopes-in-mmap-land" target="_blank"><h1 class="title mb-6">Failing to map: a tale of false hopes in mmap land</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: July 08, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I usually talk about the things that I do that were successful. Today I want to discuss something that I tried but failed at. Documenting failed approaches is just as important, though less enjoyable, as documenting what we excel at.In order to explain the failure, I need to get a bit deeper into how computers handle memory. There is physical memory, the RAM sticks that you have in your machine, and then there is how the OS and CPU present that memory to your code. Usually, the abstraction is quite seamless, and we don&#x2019;t need to pay attention to it. Occasionally, we can take advantage of this model. Consider the following memory setup, showing a single physical memory page that was mapped in two different locations:In this case, it means that you can do things like this:*page1 = &#x27;*&#x27;;&#xA;printf(&quot;Same: %d - Val: %c\n&quot;, (page1 == page2), *page2); &#xA;// output is:&#xA;// Same: 0 - Val: *In other words, because the two virtual pages point to the same physical page in memory, we can modify memory in one location and see the changes in another. This isn&#x2019;t spooky action at a distance, it is simply the fact that the memory addresses we use are virtual and they point to the same place. Note that in the image above, I modified the data using the pointer to Page 1 and then read it from Page 2. The Memory Management Unit (MMU) in the CPU can do a bunch of really interesting things because of this. You&#x2019;ll note that each virtual page is annotated with an access permission. In this case, the second page is marked as Copy on Write. That means that when we read from this page, the MMU will happily read the data from the physical page it is pointed to. But when we write, the situation is different. The MMU will raise an exception to the operating system, telling it that a write was attempted on this page, which is forbidden. At this point, the OS will allocate a new&#xA0;physical page, copy the data to it, and then update the virtual address to point to the new page. Here is what this looks like:Now we have two distinct mappings. A write to either one of them will not&#xA0;be reflected on the other. Here is what this looks like in code:*page1 = &#x27;1&#x27;; // now &#xA;printf(&quot;Page1: %c, Page2: %c\n&quot;, *page1, *page2); &#xA;// output: Page1: 1, Page2: 1&#xA;*page2 = &#x27;2&#x27;; // force the copy on write to occur&#xA;printf(&quot;Page1: %c, Page2: %c\n&quot;, *page1, *page2); &#xA;// output: Page1: 1, Page2: 2As long as the modifications happened through the first page address (the orange one in the image), there was no issue and any change would be reflected in both pages. When we make a modification to the second page (the green one in the image), the OS will create a new physical page and effectively split them forever. Changes made to either page will only be reflected in that page, not both, since they aren&#x2019;t sharing the same page.Note that this behavior applies at a page&#xA0;boundary. What happens if I have a buffer, 1GB in size, and I use this technique on it? Let&#x2019;s assume that we have a buffer that is 1GB in size and I created a copy-on-write mapping on top of it. The amount of physical memory that I would consume is still just 1GB. In fact, I would effectively memcpy()very&#xA0;quickly, since I&#x2019;m not actually&#xA0;copying anything. And for all intents and purposes, it works. I can change the data through the second buffer, and it would not show up in the first buffer. Of particular note is that when I modify the data on the second buffer, only a single&#xA0;page is changed. Here is what this looks like:So instead of having to copy 1GB all at once, we map the buffer again as copy on write, and we can get a new page whenever we actually modify our &#x201C;copy&#x201D; of the data.So far, this is great, and it is heavily used for many optimizations. It is also something that I want to use to implement cheap snapshots of a potentially large data structure. The idea that I have is that I can use this technique to implement it. Here is the kind of code that I want to write:var list = new CopyOnWriteList();&#xA;list.Put(1);&#xA;list.Put(2);&#xA;&#xA;&#xA;var snapshot1 = list.CreateSnapshot();&#xA;&#xA;&#xA;list.Put(3)&#xA;&#xA;&#xA;&#xA;&#xA;var snapshot2 = list.CreateSnapshot();&#xA;&#xA;&#xA;list.Put(4);And the idea is that I&#x2019;ll have (at the same&#xA0;time) the following:listsnapshot1snapshot21,2,3,41,21,2,3I want to have effectively unlimited snapshots, and the map may contain a large&#xA0;amount of data. In graphical form, you can see it here:We started with Page 1, created a Copy of Write for Page 2, modified&#xA0;Page 2 (breaking the Copy on Write), and then attempted to create a Copy on Write for Page 2. That turns out to be a problem.Let&#x2019;s see the code that we need in order to create a copy using copy-on-write mapping on Linux:int shm_fd = shm_open(&quot;/third&quot;, O_CREAT | O_RDWR, 0666);&#xA;ftruncate(shm_fd, 4096);&#xA;char *page1 = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);&#xA;page1[0] = &#x27;A&#x27;; page1[1] = &#x27;B&#x27;;&#xA;// pages1 = &#x27;AB&#x27;&#xA;char *page2 = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_PRIVATE, shm_fd, 0);&#xA;// pages2 = &#x27;AB&#x27;&#xA;page1[0]= &#x27;a&#x27;;&#xA;// pages1 = &#x27;aB&#x27;&#xA;// pages2 = &#x27;aB&#x27; (same pagee)&#xA;page2[2] = &#x27;C&#x27;; // force a private copy creation&#xA;// pages1 = &#x27;aB&#x27;&#xA;// pages2 = &#x27;aBC&#x27;&#xA;page1[1] = &#x27;b&#x27;;&#xA;// pages1 = &#x27;ab&#x27;&#xA;// pages2 = &#x27;aBC&#x27; (no change here)The code in Windows is pretty similar and behaves in the same manner:HANDLE hMapFile = CreateFileMapping(INVALID_HANDLE_VALUE,&#xA;    NULL,PAGE_READWRITE,0,4096, TEXT(&quot;Local\\MySharedMemory&quot;));&#xA;char* page1 = MapViewOfFile(hMapFile,&#xA;    FILE_MAP_READ | FILE_MAP_WRITE, 0, 0, 4096);&#xA;page1[0] = &#x27;A&#x27;; page1[1] = &#x27;B&#x27;;&#xA;// pages1 = &#x27;AB&#x27;&#xA;char* page2 = MapViewOfFile(hMapFile,&#xA;    FILE_MAP_COPY, 0, 0, 4096);&#xA;// pages2 = &#x27;AB&#x27;&#xA;page1[0] = &#x27;a&#x27;;&#xA;// pages1 = &#x27;aB&#x27;&#xA;// pages2 = &#x27;aB&#x27; (same pagee)&#xA;page2[2] = &#x27;C&#x27;; // force a copy on write &#xA;// pages1 = &#x27;aB&#x27;&#xA;// pages2 = &#x27;aBC&#x27;&#xA;page1[1] = &#x27;b&#x27;;&#xA;// pages1 = &#x27;ab&#x27;&#xA;// pages2 = &#x27;aBC&#x27; (no change here)Take a look at the API we have for creating a copy-on-write:MapViewOfFile(hMapFile, FILE_MAP_COPY, 0, 0, 4096); // windows&#xA;mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_PRIVATE, shm_fd, 0); // linuxA key aspect of the API is that we need to provide a source&#xA0;for the Copy-on-Write operation. That means that we can only create a Copy-on-Write from a single&#xA0;source. We cannot perform a Copy-on-Write on top of a page that was marked as copy-on-write. This is because we cannot refer&#xA0;to it. Basically, I don&#x2019;t have a source&#xA0;that I can use for this sort of mapping.I tried being clever and wrote the following code on Linux:int selfmem = open(&quot;/proc/self/mem&quot;, O_RDWR);&#xA;char *page2 = mmap(NULL, 4096, PROT_READ | PROT_WRITE, &#xA;                   MAP_PRIVATE, selfmem, (off_t)page1);On Linux, you can use the special file /proc/self/mem&#xA0;to refer to your memory using file I/O. That means that I can get a file descriptor for my own memory, which provides a source for my copy-on-write operation. I was really excited when I realized that this was a possibility. I spent a lot&#xA0;of time trying to figure out how I could do the same on Windows. However, when I actually ran the code on Linux, I realized that this doesn&#x2019;t work. The mmap()&#xA0;call will return ENODEV when I try that. It looks like this isn&#x2019;t a supported action.Linux has another call that looks almost&#xA0;right, which is mremap(), but that either zeros out or sets up a userfaulfdhandler for the region. So it can&#x2019;t serve my needs.Looking around, I&#x2019;m not the first person to try this, but it doesn&#x2019;t seem like there is an actual solution.This is quite annoying since we are almost&#xA0;there. All the relevant pieces are available, if we had a way to tell the kernel to create the mapping, everything else should just work from there.Anyway, this is my tale of woe, trying (and failing) to create a snapshot-based system using the Memory Manager Unit. Hopefully, you&#x2019;ll either learn something from my failure or let me know that there&#xA0;is a way to do this&#x2026;</p>
        <a href="https://ayende.com/blog/201313-B/reading-unfamiliar-codebases-quickly-lmdb" target="_blank"><h1 class="title mb-6">Reading unfamiliar codebases quickly: LMDB</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: July 05, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Reading code is a Skill (with a capital letter, yes) that is really important for developers. You cannot be a good developer without it.Today I want to talk about one aspect of this. The ability to go into an unfamiliar codebase and extract one&#xA0;piece of information out. The idea is that we don&#x2019;t need to understand the entire system, grok the architecture, etc. I want to understand one thing about it and get away as soon as I can.For example, you know that project Xyz is doing some operation, and you want to figure out how this is done. So you need to look at the code and figure that out, then you can go your merry way.Today, I&#x2019;m interested in understanding how the LMDB project writes data to the disk on Windows. This is because LMDB is based around a memory-mapped model, and Windows doesn&#x2019;t keep the data between file I/O and mmap I/O coherent.LMDB is an embedded database engine (similar to Voron, and in fact, Voron is based on some ideas from LMDB) written in C. If you are interested in it, I wrote 11 posts going through every line of code&#xA0;in the project. So I&#x2019;m familiar with the project, but the last time I read the code was over a decade ago. From what I recall, the code is dense. There are about 11.5K lines of code in a single file, implementing the entire thing.I&#x2019;m using the code from here.The first thing to do is find the relevant section in the code. I started by searching for the WriteFile()&#xA0;function, the Win32 API to write. The first occurrence of a call to this method is in the mdb_page_flush function.I look at this code, and&#x2026; there isn&#x2019;t really anything there. It is fairly obvious and straightforward code (to be clear, that is a compliment). I was expecting to see a trick there. I couldn&#x2019;t find it.That meant either the code had a gaping hole and potential data corruption (highly unlikely) or I was missing something. That led me to a long trip of trying to distinguish between documented guarantees&#xA0;and actual behavior. The documentation for MapViewOfFile&#xA0;is pretty clear:A mapped view of a file is not guaranteed to be coherent with a file that is being accessed by the ReadFile&#xA0;or WriteFile&#xA0;function.I have my own run-ins with this behavior, which was super confusing. This means that I had experimental evidence to say that this is broken. But it didn&#x2019;t make sense, there was no code in LMDB to handle it, and this is pretty easy to trigger. It turns out that while the documentation is pretty broad about not&#xA0;guaranteeing the behavior, the actual issue only occurs if you are working with remote files or using unbuffered I/O.If you are working with local files and buffered I/O (which is 99.99% of the cases), then you can rely on this behavior. I found some vaguereferences to this, but that wasn&#x2019;t enough. There is this post that is really interesting, though.I pinged Howard Chu, the author of LMDB, for clarification, and he was quick enough to assure me that yes, my understanding was (now) correct. On Windows, you can mix memory map operations with file I/O and get the right results.The documentation appears to be a holdover from Windows 9x, with the NT line always being able to ensure coherency for local files. This is a guess about the history of documentation, to be honest. Not something that I can verify.I had the wrong information in my head for over a decade. I did not&#xA0;expect this result when I started this post, I was sure I would be discussing navigating complex codebases. I&#x2019;m going to stand in the corner and feel upset about this for a while now.</p>
        <a href="https://ayende.com/blog/201314-B/cloned-dictionary-vs-immutable-dictionary-vs-frozen-dictionary-in-high-traffic-systems" target="_blank"><h1 class="title mb-6">Cloned Dictionary vs. Immutable Dictionary vs. Frozen Dictionary in high traffic systems</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: July 03, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In my previous post, I explained what we are trying to do. Create a way to carry a dictionary between transactions in RavenDB, allowing one write transaction to modify it while all other read transactions only observe the state of the dictionary as it was at the publication time.I want to show a couple of ways I tried solving this problem using the built-in tools in the Base Class Library. Here is roughly what I&#x2019;m trying to do:IEnumerable&lt;object&gt; SingleDictionary()&#xA;{&#xA;    var dic = new Dictionary&lt;long, object&gt;();&#xA;    var random = new Random(932);&#xA;    var v = new object();&#xA;    // number of transactions&#xA;    for (var txCount = 0; txCount &lt; 1000; txCount&#x2B;&#x2B;)&#xA;    {&#xA;        // operations in transaction&#xA;        for (int opCount = 0; opCount &lt; 10_000; opCount&#x2B;&#x2B;)&#xA;        {&#xA;            dic[random.NextInt64(0, 1024 * 1024 * 1024)] = v;&#xA;        }&#xA;        yield return dic;// publish the dictionary&#xA;    }&#xA;}As you can see, we are running a thousand transactions, each of which performs 10,000 operations. We &#x201C;publish&#x201D; the state of the transaction after each time. This is just to set up a baseline for what I&#x2019;m trying to do. I&#x2019;m focusing solely on this one aspect of the table that is published. Note that I cannot actually use this particular code. The issue is that the dictionary is both mutable and shared (across threads), I cannot do that. The easiest way to go about this is to just clone the dictionary. Here is what this would look like:IEnumerable&lt;object&gt; ClonedDictionary()&#xA;{&#xA;    var dic = new Dictionary&lt;long, object&gt;();&#xA;    var random = new Random(932);&#xA;    var v = new object();&#xA;    // number of transactions&#xA;    for (var txCount = 0; txCount &lt; 1000; txCount&#x2B;&#x2B;)&#xA;    {&#xA;        // operations in transaction&#xA;        for (int opCount = 0; opCount &lt; 10_000; opCount&#x2B;&#x2B;)&#xA;        {&#xA;            dic[random.NextInt64(0, 1024 * 1024 * 1024)] = v;&#xA;        }&#xA;       // publish the dictionary&#xA;        yield return new Dictionary&lt;long, object&gt;(dic);&#xA;    }&#xA;}This is basically the same code, but when I publish the dictionary, I&#x2019;m going to create a new instance (which will be read-only). This is exactly&#xA0;what I want: to have a cloned, read-only copy that the read transactions can use while I get to keep on modifying the write copy.The downside of this approach is twofold. First, there are a lot of allocations because of this, and the more items in the table, the more expensive it is to copy.I can try using the ImmutableDictionary in the Base Class Library, however. Here is what this would look like:IEnumerable&lt;object&gt; ClonedImmutableDictionary()&#xA;{&#xA;    var dic = ImmutableDictionary.Create&lt;long, object&gt;();&#xA;&#xA;&#xA;    var random = new Random(932);&#xA;    var v = new object();&#xA;    // number of transactions&#xA;    for (var txCount = 0; txCount &lt; 1000; txCount&#x2B;&#x2B;) &#xA;    {&#xA;        // operations in transaction&#xA;        for (int opCount = 0; opCount &lt; 10_000; opCount&#x2B;&#x2B;) &#xA;        {&#xA;            dic = dic.Add(random.NextInt64(0, 1024 * 1024 * 1024), v);&#xA;        }&#xA;        // publish the dictionary&#xA;        yield return dic;&#xA;    }&#xA;}The benefit here is that the act of publishing is effectively a no-op. Just send the immutable value out to the world. The downside of using immutable dictionaries is that each operation involves an allocation, and the actual underlying implementation is far less efficient as a hash table than the regular dictionary.I can try to optimize this a bit by using the builder pattern, as shown here:IEnumerable&lt;object&gt; BuilderImmutableDictionary()&#xA;{&#xA;    var builder = ImmutableDictionary.CreateBuilder&lt;long, object&gt;();&#xA;&#xA;&#xA;    var random = new Random(932);&#xA;    var v = new object(); ;&#xA;    // number of transactions&#xA;    for (var txCount = 0; txCount &lt; 1000; txCount&#x2B;&#x2B;)&#xA;    {&#xA;        // operations in transaction&#xA;        for (int opCount = 0; opCount &lt; 10_000; opCount&#x2B;&#x2B;)&#xA;        {&#xA;            builder[random.NextInt64(0, 1024 * 1024 * 1024)] = v;&#xA;        }&#xA;        // publish the dictionary&#xA;        yield return builder.ToImmutable();&#xA;    }&#xA;}Now we only pay the immutable cost one per transaction, right? However,&#xA0;the underlying implementation is still an AVL tree, not a proper hash table. This means that not only is it more expensive for publishing the state, but we are now slower for reads&#xA0;as well. That is not&#xA0;something that we want.The BCL recently introduced a FrozenDictionary, which is meant to be super efficient for a really common case of dictionaries that are accessed a lot&#xA0;but rarely written to. I delved into its implementation and was impressed by the amount of work invested into ensuring that this will be really fast.Let&#x2019;s see how that would look like for our scenario, shall we?IEnumerable&lt;object&gt; FrozenDictionary()&#xA;{&#xA;    var dic = new Dictionary&lt;long, object&gt;();&#xA;    var random = new Random(932);&#xA;    var v = new object();&#xA;    // number of transactions&#xA;    for (var txCount = 0; txCount &lt; 1000; txCount&#x2B;&#x2B;)&#xA;    {&#xA;        // operations in transaction&#xA;        for (int opCount = 0; opCount &lt; 10_000; opCount&#x2B;&#x2B;)&#xA;        {&#xA;            dic[random.NextInt64(0, 1024 * 1024 * 1024)] = v;&#xA;        }&#xA;        // publish the dictionary&#xA;        yield return dic.ToFrozenDictionary();&#xA;    }&#xA;}The good thing is that we are using a standard dictionary on the write side and publishing it once per transaction. The downside is that we need to pay a cost to create the frozen dictionary that is proportional to the number of items in the dictionary. That can get expensive fast.After seeing all of those options, let&#x2019;s check the numbers. The full code is in this gist.I executed all of those using Benchmark.NET, let&#x2019;s see the results. MethodMeanRatioSingleDictionaryBench7.768 ms1.00BuilderImmutableDictionaryBench122.508 ms15.82ClonedImmutableDictionaryBench176.041 ms21.95ClonedDictionaryBench1,489.614 ms195.04FrozenDictionaryBench6,279.542 ms807.36ImmutableDictionaryFromDicBench46,906.047 ms6,029.69Note that the difference in speed is absolutely staggering. The SingleDictionaryBench&#xA0;is a bad example. It is just filling a dictionary directly, with no additional cost. The cost for the BuilderImmutableDictionaryBench is more reasonable, given what it has to do. Just looking at the benchmark result isn&#x2019;t sufficient. I implemented every one of those options in RavenDB and ran them under a profiler. The results are quite interesting.Here is the version I started with, using a frozen dictionary. That is the right&#xA0;data structure for what I want. I have one thread that is mutating data, then publish the frozen results for others to use.However, take a look at the profiler results! Don&#x2019;t focus on the duration values, look at the percentage of time spent creating the frozen dictionary. That is 60%(!) of the total transaction time. That is&#x2026; an absolutely insane number.Note that it is clear that the frozen dictionary isn&#x2019;t suitable for our needs here. The ratio between reading and writing isn&#x2019;t sufficient to justify the cost. One of the benefits of FrozenDictionary is that it is more&#xA0;expensive to create than normal since it is trying hard to optimize for reading performance.What about the ImmutableDictionary? Well, that is a complete&#xA0;non-starter. It is taking close to 90%(!!) of the total transaction runtime. I know that I called the frozen numbers insane, I should have chosen something else, because now I have no words to describe this. Remember that one problem here is that we cannot just use the regular dictionary or a concurrent dictionary. We need to have a fixed&#xA0;state of the dictionary when we publish it. What if we use a normal dictionary, cloned?This is far better, at about 40%, instead of 60% or 90%.You have to understand, better doesn&#x2019;t mean good. Spending those numbers on just publishing the state of the transaction is beyond ridiculous. We need to find another way to do this. Remember where we started? The PageTable in RavenDB that currently handles this is really complex. I looked into my records and found this blog post from over a decade ago, discussing this exact problem. It certainly looks like this complexity is at least semi-justified. I still want to be able to fix this&#x2026; but it won&#x2019;t be as easy as reaching out to a built-in type in the BCL, it seems.</p>
        <a href="https://ayende.com/blog/201281-B/challenge-efficient-snapshotable-state" target="_blank"><h1 class="title mb-6">Challenge</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: July 01, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">At the heart of RavenDB, there is a data structure that we call the Page Translation Table. It is one of the&#xA0;most important pieces inside RavenDB.The page translation table is basically a Dictionary&lt;long, Page&gt;, mapping between a page number and the actual page. The critical aspect of this data structure is that it is both concurrent and multi-version. That is, at a single point, there may be multiple versions of the table, representing different versions of the table at given points in time.The way it works, a transaction in RavenDB generates a page translation table as part of its execution and publishes the table on commit. However, each subsequent table builds upon the previous one, so things become more complex. Here is a usage example (in Python pseudo-code):table = {}&#xA;&#xA;&#xA;with wtx1 = write_tx(table):&#xA;  wtx1.put(2, &#x27;v1&#x27;)&#xA;  wtx1.put(3, &#x27;v1&#x27;)&#xA;  wtx1.publish(table)&#xA;&#xA;&#xA;# table has (2 =&gt; v1, 3 =&gt; v1)&#xA;&#xA;&#xA;with wtx2 = write_tx(table):&#xA;  wtx2.put(2, &#x27;v2&#x27;)&#xA;  wtx2.put(4, &#x27;v2&#x27;)&#xA;  wtx2.publish(table)&#xA;&#xA;&#xA;# table has (2 =&gt; v2, 3 =&gt; v1, 4 =&gt; v2)This is pretty easy to follow, I think. The table is a simple hash table at this point in time.The catch is when we mix read transactions as well, like so:# table has (2 =&gt; v2, 3 =&gt; v1, 4 =&gt; v2)&#xA;&#xA;&#xA;with rtx1 = read_tx(table):&#xA;&#xA;&#xA;        with wtx3 = write_tx(table):&#xA;                wtx3.put(2, &#x27;v3&#x27;)&#xA;                wtx3.put(3, &#x27;v3&#x27;)&#xA;                wtx3.put(5, &#x27;v3&#x27;)&#xA;&#xA;&#xA;                with rtx2 = read_tx(table):&#xA;                        rtx2.read(2) # =&gt; gives, v2&#xA;                        rtx2.read(3) # =&gt; gives, v1&#xA;                        rtx2.read(5) # =&gt; gives, None&#xA;&#xA;&#xA;                wtx3.publish(table)&#xA;&#xA;&#xA;# table has (2 =&gt; v3, 3 =&gt; v3, 4 =&gt; v2, 5 =&gt; v3)&#xA;# but rtx2 still observe the value as they were when&#xA;# rtx2 was created&#xA;&#xA;&#xA;        rtx2.read(2) # =&gt; gives, v2&#xA;        rtx2.read(3) # =&gt; gives, v1&#xA;        rtx2.read(5) # =&gt; gives, NoneIn other words, until we publish a transaction, its changes don&#x2019;t take effect. And any read&#xA0;translation that was already started isn&#x2019;t impacted. We also need this to be concurrent, so we can use the table in multiple threads (a single write transaction at a time, but potentially many&#xA0;read transactions). Each transaction may modify hundreds or thousands of pages, and we&#x2019;ll only clear the table of old values once in a while (so it isn&#x2019;t infinite&#xA0;growth, but may certainly reach respectable numbers of items).The implementation we have inside of RavenDB for this is complex! I tried drawing that on the whiteboard to explain what was going on, and I needed both the third and fourth dimensions to illustrate the concept. Given these requirements, how would you implement this sort of data structure?</p>
        <a href="https://ayende.com/blog/201250-A/ravendb-news-june-2024" target="_blank"><h1 class="title mb-6">RavenDB News: June, 2024</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: June 28, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">We recently published an article on Getting started with GraphQL and RavenDB, it will walk you through setting up Hot Chocolate&#xA0;to create a RavenDB-based GraphQL endpoint in your system.Here is what this looks like:Another new feature is the New Database Wizard, which was completely redesigned and made much simpler. We have a great number of features &amp; options, and the idea is that we want to give you better insight into what you can do with your system. Here is a quick peek, but take a look at the link. I&#x2019;m biased, of course, but I think the team did a really great job in exposing a really complex set of options in a very clear manner.The About Page&#xA0;of RavenDB Studio has undergone major updates. In particular, we have made it easier to see that new versions are available, what changes are included in each version, and check for updates. Additionally, you can now review your license details and compare features available in different editions. Furthermore, we pushed an update to the About Page of RavenDBitself. Here we try to tell the story of RavenDB and how it came about. Beyond the narrative, our goal is to explain the design philosophy of RavenDB.The idea is quite simple, we aim to be the database that you don&#x2019;t&#xA0;have to think about. The one component in your system that you don&#x2019;t need to worry about, the cog that just keeps on working. If we do our job right, we are a very boring database. Amusingly enough, the actual story behind it is quite interesting, and I would love to get your feedback on it.We also published our new roadmap, which has a bunch of new goodies for you. I&#x2019;m quite excited about this, and I hope you&#x2019;ll too (in a boring manner &#x1F642;). Upcoming features include data governance features, Open Telemetry integration, extremely large clusters, and more.One of our stated goals in the roadmap is better performance, with a focus on ARM hardware, which is taking the server / cloud world by storm. To that end, we are performing many &#x201C;crimes against code&#x201D; to squeeze every last erg of performance from the system. Initial results are promising, but we still have some way to go before we can publicly disclose numbers. As usual, I would appreciate your feedback about the roadmap and the new features in general.</p>
        <a href="https://ayende.com/blog/201249-A/implementing-suggested-destinations-in-a-few-lines-of-code" target="_blank"><h1 class="title mb-6">Implementing &quot;Suggested Destinations&quot; in a few lines of code</h1></a>
        <p class="mb-2">by Oren Eini</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: June 26, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Today I got in my car to drive to work and realized that Waze suggested &#x201C;Work&#x201D; as the primary destination to select. I had noticed that before, and it is a really nice feature. Today, I got to thinking about how I would implement something like that. That was a nice drive since I kept thinking about algorithms and data flow. When I got to the office, I decided to write about how we can implement something like that. Based on historical information, let&#x2019;s suggest the likely destinations. Here is the information we have:The Lat &amp; Lng coordinates represent the start location, the time is the start time for the trip, and the destination is obvious. In the data set above, we have trips to and from work, to the gym once a week, and to our parents over the weekends.Based on this data, I would like to build recommendations for destinations. I could try to analyze the data and figure out all sorts of details. The prediction that I want to make is, given a location &amp; time, to find where my likely destination is going to be.I could try to analyze the data on a deep level, drawings on patterns, etc. Or I can take a very different approach and just throw some computing power at the problem. Let&#x2019;s talk in code since this is easier. I have a list of trips that look like this:public record Trip(double Lat, double Lng, string Destination, DateTime Time);&#xA;Trip[] trips = RecentTrips(TimeSpan.FromDays(90));Given that, I want to be able to write this function:string[] SuggestDestination((double Lat, double Lng) location, DateTime now)I&#x2019;m going to start by processing the trips data, to extract the relevant information:var historyByDest = new Dictionary&lt;string, List&lt;double[]&gt;&gt;();&#xA;foreach (var trip in trips)&#xA;{&#xA;    if (historyByDest.TryGetValue(trip.Destination, out var list) is false)&#xA;    {&#xA;        historyByDest[trip.Destination] = list = new();&#xA;    }&#xA;    list.Add([&#xA;        trip.Lat,&#xA;        trip.Lng,&#xA;        trip.Time.Hour * 100 &#x2B; trip.Time.Minute, // minutes after midnight&#xA;        trip.Time.DayOfYear,&#xA;        (int)trip.Time.DayOfWeek&#xA;    ]);&#xA;}What this code does is extract details (location, day of the week, time of day, etc.) from the trip information and store them in an array. For each trip, we basically break apart the trip across multiple dimensions. The next step is to make the actual prediction we want, which will begin by extracting the same dimensions from the inputs we get, like so:double[] compare = [&#xA;    location.Lat, &#xA;    location.Lng, &#xA;    now.Hour * 100 &#x2B; now.Minute, &#xA;    now.DayOfYear, &#xA;    (int)now.DayOfWeek&#xA;];Now we basically have an array of values from which we want to predict, and for each destination, an array that represents the same dimensions of historical trips. Here is the actual computation:List&lt;(string Dest, double Score)&gt; scores = new();&#xA;&#xA;&#xA;foreach (var (dest, items) in historyByDest)&#xA;{&#xA;    double score = 0;&#xA;    foreach (var cur in items)&#xA;    {&#xA;        for (var i = 0; i &lt; cur.Length; i&#x2B;&#x2B;)&#xA;        {&#xA;            score &#x2B;= Math.Abs(cur[i] - compare[i]);&#xA;        }&#xA;    }&#xA;    score /= items.Count;&#xA;    scores.Add((dest, score));&#xA;}&#xA;&#xA;&#xA;scores.Sort((x, y) =&gt; x.Score.CompareTo(y.Score));What we do here is compute the difference between the two arrays: the current start location &amp; time compared to the start location &amp; time of historical trips. We do that not only on the raw data but also extract additional features from the information.For example, one dimension is the day of the week, and the other is the time of day. It is not sufficient to compare just the date itself. The end result is the distance between the current trip start and previous trips for each of the destinations I have. Then I can return the destinations that most closely match my current location &amp; time.Running this over a few tests shows that this is remarkably effective. For example, if I&#x2019;m at home on a Saturday, I&#x2019;m very likely to visit either set of grandparents. On Sunday morning, I head to the Gym or Work, but on Monday morning, it is more likely to be Work.All of those were mostly fixed, with the day of the week and the time being different. But If I&#x2019;m at my parents&#x2019; house on a weekday (which is unusual), the location would have a far greater weight on the decision, etc. Note that the code is really trivial (I spent more time generating the actual data), but we can extract some nice information from this. The entire code is here, admittedly it&#x2019;s pretty dirty code since I wanted to test how this would actually work. At this point, I&#x2019;m going to update my Curriculum Vitae and call myself a senior AI developer. Joking aside, this approach provides a good (although highly simplified) overview of how modern AI systems work. Given a data item (image, text, etc.), you run that through the engine that outputs the embedding (those arrays we saw earlier, with values for each dimension) and then try to find its nearest neighbors across multiple dimensions. In the example above, I explicitly defined the dimensions to use, whereas LLMs would have their&#x201C;secret sauce&#x201D; for this. The concept, at a sufficiently high level, is the same.</p>
        <a href="https://devblogs.microsoft.com/dotnet/join-us-for-dotnet-aspire-developers-day/" target="_blank"><h1 class="title mb-6">Join Us for .NET Aspire Developers Day &#x2013; Elevate Your Cloud Native Skills!</h1></a>
        <p class="mb-2">by Mehul Harry</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: June 26, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Join us on July 23, 2024, for .NET Aspire Developers Day, a livestream event to elevate your .NET skills with keynotes, deep dives, and interactive sessions. Connect with experts and the community.</p>
        <a href="https://devblogs.microsoft.com/dotnet/lets-learn-dotnet-aspire/" target="_blank"><h1 class="title mb-6">Let&#x2019;s Learn .NET Aspire &#x2013; Start your cloud-native journey live!</h1></a>
        <p class="mb-2">by James Montemagno</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: June 24, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Join us for Let&#x27;s Learn .NET Aspire, a global live stream workshop where you can learn all about what .NET Aspire is, why you would use it, and see how to integrate .NET Aspire into your apps with a hands on workshop.</p>
        <a href="https://devblogs.microsoft.com/dotnet/announcing-api-map-support-for-ua/" target="_blank"><h1 class="title mb-6">Announcing Third Party API and Package Map Support for .NET Upgrade Assistant</h1></a>
        <p class="mb-2">by Marco Goertz</p>
        <p class="mb-6 flex gap-1.5">
                    <span>
                                    <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                                         xmlns="http://www.w3.org/2000/svg"><path
                                            xmlns="http://www.w3.org/2000/svg"
                                            d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
            posted on: June 20, 2024
        </p>
        <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Learn how to extend the .NET Upgrade Assistant by providing mappings for your own libraries and packages.</p>
        <div class="button flex justify-between">
            <a href="4.html"><span class="back arrow"></span></a>

            <a href="6.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2024<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
</body>
</html>