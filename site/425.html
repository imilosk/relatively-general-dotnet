
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 425 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-4241">
            <a href="https://ardalis.com/when-should-you-arrive-for-an-interview/" target="_blank">
                <h2 class="title mb-6" id="article-4241">When Should You Arrive for an Interview</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 20, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">We&#x2019;ve been doing a lot of interviewing as we grow our team in Hudson, Ohio for Telerik Services. We have a fairly small office in a suburban&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-4242">
            <a href="https://ayende.com/blog/161410/reviewing-leveldb-part-i-what-is-this-all-about" target="_blank">
                <h2 class="title mb-6" id="article-4242">Reviewing LevelDB</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 20, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">LevelDB is&#x2026;  a fast key-value storage library written at Google that provides an ordered mapping from string keys to string values. That is the project&#x2019;s own definition. Basically, it is a way for users to store data in an efficient manner. It isn&#x2019;t a SQL database. It isn&#x2019;t even a real database in any sense of the word. What it is is a building block for building databases. It handles writing and reading to disk, and it supports atomicity. But anything else is on you (from transaction management to more complex items). As such, it appears perfect for the kind of things that we need to do. I decided that I wanted to get to know the codebase, especially since at this time, I can&#x2019;t even get it to compile . The fact that this is a C&#x2B;&#x2B; codebase, written by people who eat &amp; breath C&#x2B;&#x2B; for a living is another reason why. I expect that this would be a good codebase, so I might as well sharpen my C&#x2B;&#x2B;-foo at the same time that I grok what this is doing. The first thing to do is to look at the interface that the database provides us with:   That is a very small surface area, and as you can imagine, this is something that I highly approve of. It make it much easier to understand and reason about. And there is some pretty complex behavior behind this, which I&#x2019;ll be exploring soon.</p>
        </article>
        <article id="article-4243">
            <a href="https://ayende.com/blog/161378/ravendb-vnext-just-the-same-a-little-bit-better-all-over-the-place" target="_blank">
                <h2 class="title mb-6" id="article-4243">RavenDB vNext? Just the same, a little bit better, all over the place</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 19, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">We pretty much completed all of the major work that was going to get into the next major RavenDB release. There is the indexing stuff that I already talked about in this blog, but most of the rest are a lot of seemingly minor things. Nothing that would blow you head in isolation. Things like better aggressive caching invalidation, faster error in network timeout scenarios, better bucket selection algorithm for map/reduce, providing you with auto resolving conflicts, or even more improvements to the studio. Hell, it is even things like this:  We output a lot of information that can help you figure out what is going on in your system. But now we are actually starting to take it up a notch and also provide good UX for handling that.</p>
        </article>
        <article id="article-4244">
            <a href="https://ayende.com/blog/161377/aggressive-caching-pacified" target="_blank">
                <h2 class="title mb-6" id="article-4244">Aggressive caching: Pacified</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 18, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">RavenDB&#x2019;s aggressive caching allows RavenDB Clients to skip going to the server and&#xA0; serve requests directly off the client cache. That means that you can answer queries very&#xA0; quickly, because you never even have to leave your process memory space. The downside to that was, of course, that you might be showing information that have changed behind your back. That is why we usually wrote aggressive caching code like this: using (session.Advanced.DocumentStore.AggressivelyCacheFor(TimeSpan.FromMinutes(5)))&#xA;{&#xA;   var user =  session.Load&lt;User&gt;(&quot;users/1&quot;);&#xA;   Console.WriteLine(user.Name);&#xA;}&#xA;&#xA;&#xA;We gave it some duration in which it was okay to skip going to the server. So we had a maximum of 5 minutes when we had the cached information in place.&#xA;That was nice, but it was awkward. And not really nice thing to do in general. In particular, it meant that you had to wait 5 minutes for things to actually show up in the application. That can be... frustrating, because it looks like the system isn&#x2019;t really doing something. On the other hand, it also means that you still have to query the server when the duration is over, and by necessity, the durations are relatively short.&#xA;We decided to change that. Now, when you are using aggressive caching, RavenDB will automatically subscribe to changes from the server. When that happens, we will be able to use the notifications to know when we need to re-check on the server.&#xA;That means that you can set an aggressive cache duration of much longer period, and that we will know, automatically and without you needing to do anything.&#xA;It is a small touch, but an important one. Things just get better .</p>
        </article>
        <article id="article-4245">
            <a href="https://ayende.com/blog/161250/ravendb-and-storing-large-number-of-entities-types-in-a-single-database" target="_blank">
                <h2 class="title mb-6" id="article-4245">RavenDB and storing large number of entities types in a single database</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 15, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">By default, we expect to have a rather smaller number of entities types in a database. Unlike relational databases, where you typically see hundreds or thousands of tables, because everything gets dumped into a single database (and because a single document in RavenDB typically reside in many relational tables). That said, we got a few complaints about this story, because the studio UI becomes hard to use when this happens. We decided to support it in an interesting fashion. This is what your documents will look like when you have ~60 entities types in a single database:  And here is where you go if you have hundreds of them. Psychedelic days are here again!</p>
        </article>
        <article id="article-4246">
            <a href="https://ayende.com/blog/161314/reviewing-ravenburgerco-what-could-be-improved" target="_blank">
                <h2 class="title mb-6" id="article-4246">Reviewing RavenBurgerCo: What could be improved?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 14, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">There are two things that I would change in the RavenBurgerCo sample app. The first would be session management, I dislike code like this:   I would much rather do that in a base controller and avoid manual session management. But that is most a design choice, and it ain&#x2019;t really that important. But what is important is the number of indexes that the application uses. We have:  LocationIndex DeliveryIndex DriveThruIndex And I am not really sure that we need all three. In fact, I am pretty sure that we don&#x2019;t. What we can do is merge them all into a single index. I am pretty sure that the reason that there were three of them was because there there was a bug in RavenDB that made it error if you gave it a null WKT (vs. just recognize this an a valid opt out). I fixed that bug, but even with that issue in place, we can get things working:      1: public class SpatialIndex : AbstractIndexCreationTask&lt;Restaurant&gt;   2: {   3:     public SpatialIndex()   4:     {   5:         Map = restaurants =&gt;   6:               from restaurant in restaurants   7:               select new   8:                   {   9:                       _ = SpatialGenerate(restaurant.Latitude, restaurant.Longitude),  10:                       __ = restaurant.DriveThruArea == null ?   11:                                     new object[0] :   12:                                     SpatialGenerate(&quot;drivethru&quot;, restaurant.DriveThruArea),  13:                       ___ = restaurant.DeliveryArea == null ?   14:                                     new object[0] :   15:                                     SpatialGenerate(&quot;delivery&quot;, restaurant.DeliveryArea)  16:                   };  17:     }  18: }&#xA;And from then, it is just a matter of updating the queries, which now looks like the following:&#xA;Getting the restaurants near my location (for Eat In page):&#xA;&#xA;&#xA;   1: return session.Query&lt;Restaurant, SpatialIndex&gt;()   2:     .Customize(x =&gt;   3:                    {   4:                        x.WithinRadiusOf(25, latitude, longitude);   5:                        x.SortByDistance();   6:                    })   7:     .Take(250)   8:     .Select( ... );&#xA;Getting the restaurants that deliver to my location (Delivery page):&#xA;&#xA;&#xA;   1: return session.Query&lt;Restaurant, SpatialIndex&gt;()   2:     .Customize(x =&gt; x.RelatesToShape(&quot;delivery&quot;, point, SpatialRelation.Intersects))   3:     // SpatialRelation.Contains is not supported   4:     // SpatialRelation.Intersects is OK because we are using a point as the query parameter   5:     .Take(250)   6:     .Select( ... ) ;&#xA;Getting the restaurants inside a particular rectangle (Map page):&#xA;&#xA;&#xA;   1: return session.Query&lt;Restaurant, SpatialIndex&gt;()   2:     .Customize(x =&gt; x.RelatesToShape(Constants.DefaultSpatialFieldName, rectangle, SpatialRelation.Within))   3:     .Take(512)   4:     .Select( ... );&#xA;Note that we use DefaultSpatialFieldName, instead of indexing the location twice.&#xA;And finally, getting the restaurants that are applicable for drive through for my route (Drive Thru page):&#xA;&#xA;&#xA;   1: return session.Query&lt;Restaurant, SpatialIndex&gt;()   2:     .Customize(x =&gt; x.RelatesToShape(&quot;drivethru&quot;, lineString, SpatialRelation.Intersects))   3:     .Take(512)   4:     .Select( ... );&#xA;And that is that. &#xA;Really great project, and quite amazing, both client &amp; server code. It is simple, it is elegant and it is effective. Well done Simon!</p>
        </article>
        <article id="article-4247">
            <a href="https://ayende.com/blog/161313/reviewing-ravenburgerco" target="_blank">
                <h2 class="title mb-6" id="article-4247">Reviewing RavenBurgerCo</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 13, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is a review of RavenBurgerCo, created as a sample app for RavenDB spatial support by Simon Bartlett. This is by no means an unbiased review, if only because I had laughed out load and crazily when I saw the first page:  What is this about?  Raven Burger Co is a chain of fast food restaurants, based in the United Kingdom. Their speciality is burgers made with raven meat. All their restaurants offer eat-in/take-out service, while some offer home delivery, and others offer a drive thru service. This sample application is their online restaurant locator. Good things about this project? Here is how you get started:  Clone this repository  Open the solution in Visual Studio 2012  Press F5  Play! And it actually works! It uses embeddable RavenDB to make it super easy and stupid to run it, right out of the box.  We will start this review by looking at the infrastructure for this project, starting, as usual, from Global.asax:  Let us see how RavenDB is setup:      1: public static void ConfigureRaven(MvcApplication application)   2: {   3:     var store = new EmbeddableDocumentStore   4:                         {   5:                             DataDirectory = &quot;~/App_Data/Database&quot;,   6:                             UseEmbeddedHttpServer = true   7:                         };   8:&#xA0;    9:     store.Initialize();  10:     MvcApplication.DocumentStore = store;  11:&#xA0;   12:     IndexCreation.CreateIndexes(typeof(MvcApplication).Assembly, store);  13:&#xA0;   14:     var statistics = store.DatabaseCommands.GetStatistics();  15:&#xA0;   16:     if (statistics.CountOfDocuments &lt; 5)  17:         using (var bulkInsert = store.BulkInsert())  18:             LoadRestaurants(application.Server.MapPath(&quot;~/App_Data/Restaurants.csv&quot;), bulkInsert);  19: }&#xA;So use embedded RavenDB, and if there isn&#x2019;t enough data in the db, load the default data set using RavenDB&#x2019;s new Bulk Insert feature.&#xA;Note that we set MvcApplication.DocumentStore property, let us see how this is used. &#xA;Simon did a really nice thing here. Note that UseEmbeddedHttpServer is set to true, which means that RavenDB will find an open port and use it, this is then exposed in the UI:&#xA;&#xA;So you can click on the link and land right in the studio for your embedded database, which gives you the ability to view, debug &amp; modify how things are actually going. This is a really nice way to expose it.&#xA;Now, let us move to the actual project code itself. Exploring the options in this project, we have map browsing:&#xA;&#xA;And here I have to admit ignorance. I have no idea on how to use maps, so this is quite nice for me, something new to learn. The core of this page is this script:&#xA;&#xA;&#xA;   1: $(function () {   2:&#xA0;    3:     var gmapLayer = new L.Google(&#x27;ROADMAP&#x27;);   4:     var resultsLayer = L.layerGroup();   5:&#xA0;    6:     var map = L.map(&#x27;map&#x27;, {   7:         layers: [gmapLayer, resultsLayer],   8:         center: [51.4775, -0.461389],   9:         zoom: 12,  10:         maxBounds: L.latLngBounds([49, 15], [60, -25])  11:     });  12:&#xA0;   13:     var loadMarkers = function() {  14:         if (map.getZoom() &gt; 9) {  15:             var bounds = map.getBounds();  16:             $.get(&#x27;/api/restaurants&#x27;, {  17:                 north: bounds.getNorthWest().lat,  18:                 east: bounds.getSouthEast().lng,  19:                 south: bounds.getSouthEast().lat,  20:                 west: bounds.getNorthWest().lng,  21:             }).done(function(restaurants) {  22:                 resultsLayer.clearLayers();  23:                 $.each(restaurants, function(index, value) {  24:                     var marker = L.marker([value.Latitude, value.Longitude])  25:                         .bindPopup(  26:                             &#x27;&lt;p&gt;&lt;strong&gt;&#x27; &#x2B; value.Name &#x2B; &#x27;&lt;/strong&gt;&lt;br /&gt;&#x27; &#x2B;  27:                                 value.Street &#x2B; &#x27;&lt;br /&gt;&#x27; &#x2B;  28:                                 value.City &#x2B; &#x27;&lt;br /&gt;&#x27; &#x2B;  29:                                 value.PostCode &#x2B; &#x27;&lt;br /&gt;&#x27; &#x2B;  30:                                 value.Phone &#x2B; &#x27;&lt;/p&gt;&#x27;  31:                         );  32:                     resultsLayer.addLayer(marker);  33:                 });  34:             });  35:         } else {  36:             resultsLayer.clearLayers();  37:         }  38:     };  39:&#xA0;   40:     loadMarkers();  41:     map.on(&#x27;moveend&#x27;, loadMarkers);  42: });&#xA;You can see that loadMarkers method, which is getting called whenever the map is moved, and on startup. This end up calling this method with the boundaries of the visible UI on the server:&#xA;&#xA;&#xA;   1: public IEnumerable&lt;object&gt; Get(double north, double east, double west, double south)   2: {   3:     var rectangle = string.Format(CultureInfo.InvariantCulture, &quot;{0:F6} {1:F6} {2:F6} {3:F6}&quot;, west, south, east, north);   4:&#xA0;    5:     using (var session = MvcApplication.DocumentStore.OpenSession())   6:     {   7:         return session.Query&lt;Restaurant, LocationIndex&gt;()   8:             .Customize(x =&gt; x.RelatesToShape(&quot;location&quot;, rectangle, SpatialRelation.Within))   9:             .Take(512)  10:             .Select(x =&gt; new  11:                             {  12:                                 x.Name,  13:                                 x.Street,  14:                                 x.City,  15:                                 x.PostCode,  16:                                 x.Phone,  17:                                 x.Delivery,  18:                                 x.DriveThru,  19:                                 x.Latitude,  20:                                 x.Longitude  21:                             })  22:             .ToList();  23:     }  24: }&#xA;Note that in this case, we are doing a search for items inside the rectangle. But the search options are a bit funky. You have to send the data in WKT format.&#xA0; Luckily, Simon already create a better solution (in this case, he is using the long hand method to make sure that we all understand what he is doing). The better method would be to use his Geo library, in which case the code would look like:&#xA;&#xA;&#xA;   1: .Geo(&quot;location&quot;, x =&gt; x.RelatesToShape(new Rectangle(west, south, east, north), SpatialRelation.Within))&#xA;So that was the map, now let us look at another example, the Eat In example. In that case, we are looking for restaurants near our location to be figure out where to eat. This looks like this:&#xA;&#xA;&#xA;Right in the bull&#x2019;s eye! &#xA;Here is the server side code:&#xA;&#xA;&#xA;   1: public IEnumerable&lt;object&gt; Get(double latitude, double longitude)   2: {   3:     using (var session = MvcApplication.DocumentStore.OpenSession())   4:     {   5:         return session.Query&lt;Restaurant, LocationIndex&gt;()   6:             .Customize(x =&gt;   7:                            {   8:                                x.WithinRadiusOf(25, latitude, longitude);   9:                                x.SortByDistance();  10:                            })  11:             .Take(250)  12:             .Select(x =&gt; new  13:                             {  14:                                 x.Name,  15:                                 x.Street,  16:                                 x.City,  17:                                 x.PostCode,  18:                                 x.Phone,  19:                                 x.Delivery,  20:                                 x.DriveThru,  21:                                 x.Latitude,  22:                                 x.Longitude  23:                             })  24:             .ToList();  25:     }  26: }&#xA;And on the client side, we just do the following:&#xA;&#xA;&#xA;   1: $(&#x27;#location&#x27;).change(function () {   2:     var latlng = $(&#x27;#location&#x27;).locationSelector(&#x27;val&#x27;);   3:&#xA0;    4:     var outerCircle = L.circle(latlng, 25000, { color: &#x27;#ff0000&#x27;, fillOpacity: 0 });   5:     map.fitBounds(outerCircle.getBounds());   6:&#xA0;    7:     resultsLayer.clearLayers();   8:     resultsLayer.addLayer(outerCircle);   9:     resultsLayer.addLayer(L.circle(latlng, 15000, { color: &#x27;#ff0000&#x27;, fillOpacity: 0.1 }));  10:     resultsLayer.addLayer(L.circle(latlng, 10000, { color: &#x27;#ff0000&#x27;, fillOpacity: 0.3 }));  11:     resultsLayer.addLayer(L.circle(latlng, 5000, { color: &#x27;#ff0000&#x27;, fillOpacity: 0.5 }));  12:     resultsLayer.addLayer(L.circleMarker(latlng, { color: &#x27;#ff0000&#x27;, fillOpacity: 1, opacity: 1 }));  13:&#xA0;   14:&#xA0;   15:     $.get(&#x27;/api/restaurants&#x27;, {  16:         latitude: latlng[0],  17:         longitude: latlng[1]  18:     }).done(function (restaurants) {  19:         $.each(restaurants, function (index, value) {  20:             var marker = L.marker([value.Latitude, value.Longitude])  21:                 .bindPopup(  22:                     &#x27;&lt;p&gt;&lt;strong&gt;&#x27; &#x2B; value.Name &#x2B; &#x27;&lt;/strong&gt;&lt;br /&gt;&#x27; &#x2B;  23:                     value.Street &#x2B; &#x27;&lt;br /&gt;&#x27; &#x2B;  24:                     value.City &#x2B; &#x27;&lt;br /&gt;&#x27; &#x2B;  25:                     value.PostCode &#x2B; &#x27;&lt;br /&gt;&#x27; &#x2B;  26:                     value.Phone &#x2B; &#x27;&lt;/p&gt;&#x27;  27:                 );  28:             resultsLayer.addLayer(marker);  29:         });  30:     });  31: });&#xA;We define several circles of different opacities, and then show up the returned markers.&#xA;It is all pretty simple code, but the result it quite stunning. I am getting really excited by this thing. It is simple, beautiful and quite powerful. Wow! &#xA;The delivery tab does pretty much the same thing as the eat-in mode, but it does so in a different way. First, you might have noticed the LocationIndex in the previous two examples, this looks like this:&#xA;&#xA;&#xA;   1: public class LocationIndex : AbstractIndexCreationTask&lt;Restaurant&gt;   2: {   3:     public LocationIndex()   4:     {   5:         Map = restaurants =&gt; from restaurant in restaurants   6:                              select new   7:                                         {   8:                                             restaurant.Name,   9:                                             _ = SpatialGenerate(restaurant.Latitude, restaurant.Longitude),  10:                                             __ = SpatialGenerate(&quot;location&quot;, restaurant.LocationWkt)  11:                                         };  12:     }  13: }&#xA;Before we look at this, we need to look at a sample document:&#xA;&#xA;I am note quite sure why we have in LocationIndex both SpatialGenerate() and SpatialGenerate(&#x201C;location&#x201D;). I think that this is just a part of the demo. Because the data is the same, and both lines should produce the same results.&#xA;However, for deliveries, the situation is quite different. We don&#x2019;t just deliver to a certain distance, as you can see, we have a polygon that determines where do we actually delivers to. On the map, this looks like this:&#xA;&#xA;&#xA;The red circle is where I am located, the blue markers are the restaurants that delivers to my location and the blue polygon is the delivery area for the selected burger joint. Let us see how this works, okay? We will start from the index:&#xA;&#xA;&#xA;   1: public class DeliveryIndex : AbstractIndexCreationTask&lt;Restaurant&gt;   2: {   3:     public DeliveryIndex()   4:     {   5:         Map = restaurants =&gt; from restaurant in restaurants   6:                              where restaurant.DeliveryArea != null   7:                              select new   8:                                         {   9:                                             restaurant.Name,  10:                                             _ = SpatialGenerate(&quot;delivery&quot;, restaurant.DeliveryArea, SpatialSearchStrategy.GeohashPrefixTree, 7)  11:                                         };  12:     }  13: }&#xA;So we are indexing just restaurants that have a drive through polygon, and then we query it like this:&#xA;&#xA;&#xA;   1: public IEnumerable&lt;object&gt; Get(double latitude, double longitude, bool delivery)   2: {   3:     if (!delivery)   4:         return Get(latitude, longitude);   5:&#xA0;    6:     var point = string.Format(CultureInfo.InvariantCulture, &quot;POINT ({0} {1})&quot;, longitude, latitude);   7:&#xA0;    8:     using (var session = MvcApplication.DocumentStore.OpenSession())   9:     {  10:         return session.Query&lt;Restaurant, DeliveryIndex&gt;()  11:             .Customize(x =&gt; x.RelatesToShape(&quot;delivery&quot;, point, SpatialRelation.Intersects))  12:             // SpatialRelation.Contains is not supported  13:             // SpatialRelation.Intersects is OK because we are using a point as the query parameter  14:             .Take(250)  15:             .Select(x =&gt; new  16:                             {  17:                                 x.Name,  18:                                 x.Street,  19:                                 x.City,  20:                                 x.PostCode,  21:                                 x.Phone,  22:                                 x.Delivery,  23:                                 x.DriveThru,  24:                                 x.Latitude,  25:                                 x.Longitude,  26:                                 x.DeliveryArea  27:                             })  28:             .ToList();  29:     }  30: }&#xA;This basically says, give me all the Restaurants who delivers to a locations that includes me. And then the rest all happens on the client side.&#xA;Quite cool.&#xA;The final example is the drive thru mode, which looks like this:&#xA;&#xA;&#xA;Given that I am driving from the green dot to the red dot, what restaurants can I stop at?&#xA;Here is the index:&#xA;&#xA;&#xA;   1: public class DriveThruIndex : AbstractIndexCreationTask&lt;Restaurant&gt;   2: {   3:     public DriveThruIndex()   4:     {   5:         Map = restaurants =&gt; from restaurant in restaurants   6:                              where restaurant.DriveThruArea != null   7:                              select new   8:                                         {   9:                                             restaurant.Name,  10:                                             _ = SpatialGenerate(&quot;drivethru&quot;, restaurant.DriveThruArea)  11:                                         };  12:     }  13: }&#xA;And now the code for this:&#xA;&#xA;&#xA;   1: public IEnumerable&lt;object&gt; Get(string polyline)   2: {   3:     var lineString = PolylineHelper.ConvertGooglePolylineToWkt(polyline);   4:&#xA0;    5:     using (var session = MvcApplication.DocumentStore.OpenSession())   6:     {   7:         return session.Query&lt;Restaurant, DriveThruIndex&gt;()   8:             .Customize(x =&gt; x.RelatesToShape(&quot;drivethru&quot;, lineString, SpatialRelation.Intersects))   9:             .Take(512)  10:             .Select(x =&gt; new  11:                             {  12:                                 x.Name,  13:                                 x.Street,  14:                                 x.City,  15:                                 x.PostCode,  16:                                 x.Phone,  17:                                 x.Delivery,  18:                                 x.DriveThru,  19:                                 x.Latitude,  20:                                 x.Longitude  21:                             })  22:             .ToList();  23:     }  24: }&#xA;We get the driving direction from the map, convert it to a line string, and then just check if our path intersects with the drive thru area for the restaurants.&#xA;Pretty cool application, and some really nice UI.&#xA;Okay, enough with the accolades, next time, I&#x2019;ll talk about the things that can be better.</p>
        </article>
        <article id="article-4248">
            <a href="https://ayende.com/blog/161249/ravendbs-querying-streaming-unbounded-results" target="_blank">
                <h2 class="title mb-6" id="article-4248">RavenDB&#x2019;s Querying Streaming: Unbounded results</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 12, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">By default, RavenDB make it pretty hard to shoot yourself in the foot with unbounded result sets. Pretty much every single feature has rate limits on it, and that is a good thing. However, there are times where you actually do want to get all where all actually means everything damn you, really all of them. That has been somewhat tough to do, because it requires you to do paging, and if you are trying to do that on a running system, it is possible that incoming data will impact the way you are exporting, causing you to get duplicates or miss items. We got several suggestions about how to handle that, but most of those were pretty complex. Instead, we decided to go with the following approach:  We will utilize our existing infrastructure to handle exports. We don&#x2019;t want to do that in multiple requests, because that means that state has to be kept on both client &amp; server. The model has to be a streaming based model, because otherwise we might get memory errors if you are trying to load millions of records out. The stream you get out is frozen, that means that what you read (both indexes and data) is a snapshot of the data as it was when you started reading it. And now, let me show you the API for that:      1: using (var session = store.OpenSession())   2: {   3:     var query = session.Query&lt;User&gt;(&quot;Users/ByActive&quot;)   4:                        .Where(x =&gt; x.Active);   5:     var enumerator = session.Advanced.Stream(query);   6:     int count = 0;   7:     while (enumerator.MoveNext())   8:     {   9:         Assert.IsType&lt;User&gt;(enumerator.Current.Document);  10:         count&#x2B;&#x2B;;  11:     }  12:&#xA0;   13:     Assert.Equal(1500, count);  14: }&#xA;As you can see, we use standard Linq to limit our search, and the new method we have is Stream(), which allows us to get an IEnumerator, which will scan through the data.&#xA;You can see that we are able to get more than the default 1,024 limit of items from RavenDB. There are overloads there for getting additional information about the query as well (total results, timestamps, etags, etc).&#xA;Note that the values returning from the Stream() are not tracked by the session. And that if we had a users #1231 that was deleted 2 ms after the export began, you would still get it, since the data is frozen at the time of the export start.&#xA;If you want, mind, you can specify paging, by the way, and all the other indexing options are also available for you as well (transform results, for example).</p>
        </article>
        <article id="article-4249">
            <a href="https://ayende.com/blog/161505/ravendb-spatial-webinar-is-up" target="_blank">
                <h2 class="title mb-6" id="article-4249">RavenDB Spatial Webinar is up</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 11, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20"></p>
        </article>
        <article id="article-4250">
            <a href="https://ayende.com/blog/161251/ravendb-feature-request-analysis-filtered-replication-aint-what-you-looking-for" target="_blank">
                <h2 class="title mb-6" id="article-4250">RavenDB Feature Request Analysis: Filtered Replication ain&#x2019;t what you looking for</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: March 11, 2013
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Every so often we get a request for filtered replication. &#x201C;I want to replicate to this node, but only those documents.&#x201D; We explain that replication is a whole database kind of thing, you can&#x2019;t just pick &amp; choose what you want. That isn&#x2019;t actually true, we have facilities to do filtering, and it would be fairly easy to expose them. We don&#x2019;t intend to do so. And the reason why is that the customer asking the question is usually starting asking us question from midway. He read about replication, thought that it would be a good fit for a particular scenario, if only it had that feature. Except that this is completely the wrong feature to use for the scenario at hand. And usually it takes a little back &amp; forth to figure out what the scenario actually is. For the most part, the scenarios for this feature are all about synchronizing data between two nodes*. In particular, that is often a use case for: &#x201C;I have a mobile client and I want to replicate some of the data to that laptop&#x201D;, or some such. And this is where things gets complex. To start with, you say, let us just filtered the data where CustomerId = &#x201C;customers/5&#x201D;. Except that you need to apply this logic for each entity type in the database, and they usually have different rules about them. For example, you may have common reference data that you would want to replication, even though they don&#x2019;t belong to customers/5. And invoices may have CustomerId property, but customers does not, so you need to define that for customers, it is the Id that you want to filter by, etc. To make things even more interesting, you need to consider the case where the sync filter have changed, (this user now have access to &#x201C;customers/5&#x201D; and &#x201C;customers/6&#x201D;). At which point, you pretty much have to go and go through the entire data set again. Then we move to the question of updates, how are those handled? What about conflicts? How do you handle disconnected clients that may move between addresses and ips all the time? Who maintains this operation? The client? The server? How about disconnected updates? In short, it is a very different discussion that you need to have, and just exposing the replication filters won&#x2019;t be that. * Nitpicker corner: yes, I know about MS Sync.</p>
        </article>
        <div class="button flex justify-between">
            <a href="424.html"><span class="back arrow"></span></a>

            <a href="426.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>