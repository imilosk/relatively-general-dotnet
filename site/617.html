
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 617 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-6161">
            <a href="https://ayende.com/blog/3773/nh-prof-deep-dive-implemented-the-unbounded-result-set-warning" target="_blank">
                <h2 class="title mb-6" id="article-6161">NH Prof Deep Dive</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 24, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">So, I talked a bit about the architecture and the actual feature, but let us see how I have actually build &amp; implemented this feature.  This is the actual code that goes into the actual product, I want to point out. And this is actually one of the more complex ones, because of the possible state changes. public class UnboundedResultSetStatementProcessor : IStatementProcessor&#xA;{&#xA;&#x9;public void BeforeAttachingToSession(SessionInformation sessionInformation, &#xA;&#x9;&#x9;FormattedStatement statement)&#xA;&#x9;{&#xA;&#x9;}&#xA;&#xA;&#x9;public void AfterAttachingToSession(SessionInformation sessionInformation, &#xA;&#x9;&#x9;FormattedStatement statement, OnNewAction newAction)&#xA;&#x9;{&#xA;&#x9;&#x9;if(statement.CountOfRows!=null)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;CheckStatementForUnboundedResultSet(statement, newAction);&#xA;&#x9;&#x9;&#x9;return;&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;bool addedAction = false;&#xA;&#x9;&#x9;statement.ValuesRefreshed &#x2B;= () =&gt;&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;if(addedAction)&#xA;&#x9;&#x9;&#x9;&#x9;return;&#xA;&#x9;&#x9;&#x9;addedAction = CheckStatementForUnboundedResultSet(statement, newAction);&#xA;&#x9;&#x9;};&#xA;&#x9;}&#xA;&#xA;&#x9;public bool CheckStatementForUnboundedResultSet(FormattedStatement statement,&#xA;&#x9;&#x9; OnNewAction newAction)&#xA;&#x9;{&#xA;&#x9;&#x9;if (statement.CountOfRows == null)&#xA;&#x9;&#x9;&#x9;return false;&#xA;&#xA;&#x9;&#x9;// we are discounting statements returning 1 or 0 results because&#xA;&#x9;&#x9;// those are likely to be queries on either PK or unique values&#xA;&#x9;&#x9;if (statement.CountOfRows &lt; 2)&#xA;&#x9;&#x9;&#x9;return false;&#xA;&#xA;&#x9;&#x9;// we don&#x27;t check for select statement here, because only selects have row count&#xA;&#x9;&#x9;var limitKeywords = new[] { &quot;top&quot;, &quot;limit&quot;, &quot;offset&quot; };&#xA;&#x9;&#x9;foreach (var limitKeyword in limitKeywords)&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;//why doesn&#x27;t the CLR have Contains() that takes StringComparison ??&#xA;&#x9;&#x9;&#x9;if (statement.RawSql.IndexOf(limitKeyword, StringComparison.InvariantCultureIgnoreCase) != -1)&#xA;&#x9;&#x9;&#x9;&#x9;return true;&#xA;&#x9;&#x9;}&#xA;&#xA;&#x9;&#x9;newAction(new ActionInformation&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;Severity = Severity.Suggestion,&#xA;&#x9;&#x9;&#x9;Title = &quot;Unbounded result set&quot;&#xA;&#x9;&#x9;});&#xA;&#x9;&#x9;return true;&#xA;&#x9;}&#xA;&#xA;&#x9;public void ProcessTransactionStatement(TransactionMessageBase tx)&#xA;&#x9;{&#xA;&#x9;}&#xA;}&#xA;And now the test:&#xA;[TestFixture]&#xA;public class Ticket_51_UnboundedResultSet : IntegrationTestBase&#xA;{&#xA;&#x9;[Test]&#xA;&#x9;public void Will_issue_alert_for_unbounded_result_sets()&#xA;&#x9;{&#xA;&#x9;&#x9;ExecuteScenarioInDifferentAppDomain&lt;LoadPostsUsingCriteriaQuery&gt;();&#xA;&#xA;&#x9;&#x9;var statement = observer.Model.RecentStatements.Statements&#xA;&#x9;&#x9;&#x9;.OfType&lt;StatementModel&gt;()&#xA;&#x9;&#x9;&#x9;.First();&#xA;&#x9;&#x9;Assert.AreEqual(1, statement.Actions.Count);&#xA;&#x9;&#x9;Assert.AreEqual(&quot;Unbounded result set&quot;, statement.Actions[0].Title);&#xA;&#x9;}&#xA;}&#xA;&#xA;And, just for fun, the scenario that we are testing:&#xA;public class LoadPostsUsingCriteriaQuery : IScenario&#xA;{&#xA;    public void Execute(ISessionFactory factory)&#xA;    {&#xA;        using (var session = factory.OpenSession())&#xA;        using (var tx = session.BeginTransaction())&#xA;        {&#xA;            session.CreateCriteria(typeof(Post))&#xA;                .List();&#xA;&#xA;            tx.Commit();&#xA;        }&#xA;    }&#xA;}&#xA;&#xA;And this is it. All you have to do to implement a new feature. This make building the application much easier, because at each point in time, we have to deal with only one thing. It is the aggregation of everything put together that is actually of value.&#xA;Also, notice that I heavily optimized my workflow for tests and scenarios. I can write just what I want to happen, not caring about how this is actually happening. Optimizing the ease of test is another architectural concern that I consider very important. If we don&#x27;t deal with that, the tests would be a PITA to write, so they would either wouldn&#x27;t get written, or we would get tests that are hard to read.&#xA;Also, notice that this is a full integration tests, we execute the entire backend, and we test the actual view model that the UI is going to display. I could have tested this using standard unit testing, but in this case, I chose to see how everything works from start to finish.</p>
        </article>
        <article id="article-6162">
            <a href="https://ayende.com/blog/3772/nh-prof-deep-dive-applying-the-open-close-principle-at-the-architecture-level" target="_blank">
                <h2 class="title mb-6" id="article-6162">NH Prof Deep Dive</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 24, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The back end in NH Prof is responsible for intercepting NHibernate&#x27;s events, making sense of all the mess, applying best practices suggestions and forwarding to the front end for display. Second, it is also a good example of how I apply the Open Close Principle at the architecture level. With NH Prof, there are multiple extension points that I can use to add new features. Here is a schematic of how things works:   Not shown here is the NHibernate Listener (of which, of course, I have several), which is publishing events to the bus. Those events are first handled by the low level message handlers, which publish new events on the bus. Those are interesting only in the sense that they translate the low level details into events with semantics that we can use in the app itself. Most of those events, as you probably guessed, end up in the Model Building part. This is responsible of taking a set of unstructured events into a coherent structure. Along with the model building, we have another extension point here, best practices analysis. Those are implemented as a set of classes that we plug into the model building part. If we want to add a new best practice, we need to create a new class, register it, and we are done. Here is the checkin for implementing the unbounded row set (which is ticket #51):   We add a new class (and a test for the class), register it in the BusFacility and in this case I actually had to fix a bug in the tested scenario, which loaded the wrong item. I&#x27;ll post more details about the actual implementation of Unbounded Result Set soon, but I wanted to talk about the architecture that enable this. Because we structured the whole thing around a common core that we can use, anything that fit the core (and most things does) doesn&#x27;t require any special effort. Apply a new behavior, done.</p>
        </article>
        <article id="article-6163">
            <a href="https://ayende.com/blog/3771/nh-prof-new-feature-unbounded-result-sets" target="_blank">
                <h2 class="title mb-6" id="article-6163">NH Prof new feature</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 24, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">One of the things that I am doing with NH Prof is not only giving you visibility into what NHibernate is doing, but also trying to automate my own experience in analyzing best practices and problematic usages of NHibernate. NH Prof will detect usage patterns and warn against bad practices and suggest how to deal with them. The first one that I implemented was detecting Select N&#x2B;1, and the feedback from the beta group was &quot;Wow! I didn&#x27;t even know that we had this problem, but casual use with the profiler immediately showed it.&quot; Here is the newest feature, detecting &amp; warning about unbounded result sets:   And the actual warning:</p>
        </article>
        <article id="article-6164">
            <a href="https://ayende.com/blog/3770/nh-prof-new-feature-row-counts" target="_blank">
                <h2 class="title mb-6" id="article-6164">NH Prof new feature</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 24, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">That was actually a hard to implement feature, since this is not something that NHibernate just give out. Nevertheless, by trawling through the codebase long enough, I was able to figure out how to do this.   As an aside, one of the requested features for NH Prof was to be able to get DB level stats. I am not going to do this for v1.0, but I now have a pretty firm idea about how to implement this. We will have to see how many people request this information.</p>
        </article>
        <article id="article-6165">
            <a href="https://ayende.com/blog/3769/hidden-windows-gems-extensible-storage-engine" target="_blank">
                <h2 class="title mb-6" id="article-6165">Hidden Windows Gems: Extensible Storage Engine</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Did you know that Windows came with an embedded database?  Did you know that this embedded database is the power behind Active Directory &amp; Exchange? Did you know that this is actually part of Windows&#x27; API and is exposed to developers?  Did you know that it requires no installation and has zero administration overhead? Did you know there is a .Net API? Well, the answer for all of that is that you probably didn&#x27;t know that, but it is true! The embedded database is called Esent, and the managed library for this API was just released. This is an implementation of ISAM DB, and I have been playing around with it for the last few days. It isn&#x27;t as nice for .Net developers as I would like it to be (but Laurion is working on that). I think making this public is a great thing, and the options that this opens up are quite interesting. I took that for a spin and came up with this tiny bit of code that allow me to store JSON documents: https://rhino-tools.svn.sourceforge.net/svnroot/rhino-tools/branches/rhino-divandb It is not done, not nearly done, but the fact that I could rely on the embedded DB to do so made my life so much easier. I wish I knew about that when I played with Rhino Queues, it would have made my life so much simpler.</p>
        </article>
        <article id="article-6166">
            <a href="https://ayende.com/blog/3768/longest-time-to-first-test-pass-but-it-now-works" target="_blank">
                <h2 class="title mb-6" id="article-6166">Longest time to first test pass, but it now works</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">public class DivanDatabaseTest&#xA;{&#xA;&#x9;[Fact]&#xA;&#x9;public void Can_add_document_to_database()&#xA;&#x9;{&#xA;&#x9;&#x9;using (var instance = new Instance(&quot;test&quot;))&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;instance.Init();&#xA;&#xA;&#x9;&#x9;&#x9;using (var sesion = new Session(instance.JetInstance))&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;var database = new DivanDatabase(instance, sesion, &quot;test.divan&quot;);&#xA;&#x9;&#x9;&#x9;&#x9;DocumentId[] add = database.Add(&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;JObject.Parse(&quot;{&#x27;name&#x27;: &#x27;oren&#x27;, &#x27;email&#x27;: &#x27;ayende@ayende.com&#x27;&quot;)&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;);&#xA;&#xA;&#x9;&#x9;&#x9;&#x9;using (var view = database.OpenDocumentsView())&#xA;&#x9;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;var doc = view.FindById(add[0].Id);&#xA;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;Assert.Equal(&quot;oren&quot;, (string) doc[&quot;name&quot;]);&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;Assert.Equal(&quot;ayende@ayende.com&quot;, (string) doc[&quot;email&quot;]);&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;}&#xA;}</p>
        </article>
        <article id="article-6167">
            <a href="https://ayende.com/blog/3767/the-data-access-challenge-implement-rhino-security" target="_blank">
                <h2 class="title mb-6" id="article-6167">The data access challenge: Implement Rhino Security</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Rhino Security is an awesome little framework that provide security infrastructure for applications. I created that after having to rebuild a security infrastructure five times, due to changing requirements. It is implemented on top of NHibernate.  I would like to challenge you to implement Rhino Security in your data access strategy of choice. Here is the design, intro and implementation notes. And of course that the code itself is accessible here. If you think that your data access strategy is awesome, show me the code. Rhino Security is a non trivial example, but it is still quite small, about 1,700 lines of code. So that is quite doable.  Oh, and I would love to see implementations on non RDBMS platforms.  I don&#x27;t expect anyone to step up and do this, by the way. For the simple reason that I don&#x27;t think that this is possible. And yes, that is said in the vain hope that someone will actually show me one.</p>
        </article>
        <article id="article-6168">
            <a href="https://ayende.com/blog/3766/when-your-extensibility-strategy-is-ood" target="_blank">
                <h2 class="title mb-6" id="article-6168">When your extensibility strategy is OOD...</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">You get to have really simple solutions. One of the reasons that I like NHibernate so much is that is allow me to use Object Oriented solutions to my problems. Case in point, we have the Rhino Security library, which provide a facility for asking security questions about your domain. Bart had an issue with Rhino Security, he wanted to extend the library to also contain a type. The original idea was to add a int field called AppSpecific, which will let each app define additional information on top of the existing domain model. That made me feel so Win32 that I had to go and sleep for a while. I suggested the following OO solution: public class BartOperation : Operation&#xA;{&#xA;      OperationType OperationIsStronglyTyped {get;set;}&#xA;&#xA;} &#xA;I mean, if you want to extend Operation, why not... extend operation?&#xA;The problem is, I think, that most people have been so brain washed by the impendence mismatch that this wouldn&#x27;t occur to them. Bart went away and implemented that suggestion, the whole exchange took less than a day.&#xA;Chose your tools carefully, and use them well, for they will reward you aplenty.</p>
        </article>
        <article id="article-6169">
            <a href="https://ayende.com/blog/3765/accessibility-concerns" target="_blank">
                <h2 class="title mb-6" id="article-6169">Accessibility Concerns</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Kelly Stuard called me out with regards to the NH Prof user interface:  I&#x27;d just like to weigh in and say that I am completely against the WPF-murder of this application&#x27;s UI.&#xA0; There are several hundred reasons to go away from the OS&#x27;s colors and standard dialogs; I do not see a single one here. In choosing to shove your choices upon your users you are potentially alienating people who may need a particular color contrast or text size(color blind / low vision) or need to only use the keyboard (blind with reader). It looks very sexy, I will admit.&#xA0; However, it is a piece of software I want to *function* very sexy; that is its only job, in my mind.&#xA0; I want it to look just like every other application and respond to my OS changes just like every other application. There are a few reasons that we chose this particular look &amp; feel for the application. One was branding, I wanted the application to remind people of my blog*. The second was that this UI allows us to express a lot of things in a concise fashion while keeping it pretty. The third was that it allows us to create pretty UI. That may seem like an inconsequential point, but it is actually very important. UI sells, period. And good UI sells more than black on gray that is what going with the OS scheme would give us. I am building this application to sell it, and as such, anything that increase the sales count is a huge plus for me.  Now, am I alienating people that would prefer to have a different color scheme? Am I alienating people with screen readers?  Probably so, I am afraid to say. But that is, again, a conscious decision on my part.  There are ways that we can improve the situation for that scenario, such as providing an alternative color scheme or one that pick up the user&#x27;s system colors. WPF also contains the hooks to make applications friendly to screen readers, so that is possible as well. But that isn&#x27;t going to be in version 1.0. I am not sure that it will be in the product at all, for that matter. It is a very simple matter of considering the ROI. Doing something like that is going to take resources that I can invest in other features. In order to justify doing this, I need a big enough user base that require this functionality. At the end of the day, I need to be able to pay the bills. And considering the target audience of the NHibernate Profiler, I don&#x27;t think that this is a Must Have feature for v1.0, and it is a feature that will be triaged along with the others for vNext. * Funny how what seemed like a trivial decision four or five years ago, choosing color scheme for the site, turned out to have such huge implications for the rest of my software.</p>
        </article>
        <article id="article-6170">
            <a href="https://ayende.com/blog/3764/should-you-be-able-to-define-new-abstractions-in-a-domain-specific-language" target="_blank">
                <h2 class="title mb-6" id="article-6170">Should you be able to define new abstractions in a Domain Specific Language?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2008
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Fowler has a post about DSL, which contain the following:  The first is in language design. I was talking with a language designer who I have a lot of respect for, and he stressed that a key feature of languages was the ability to define new abstractions. With DSLs I don&#x27;t think this is the case. In most DSLs the DSL chooses the abstraction you work with, if you want different abstractions you use a different DSL (or maybe extend the DSL you&#x27;re using). Sometimes there&#x27;s a role for new abstractions, but those cases are the minority and when they do happen the abstractions are limited. Indeed I think the lack of ability to define new abstractions is one of the things that distinguishes DSLs from general purpose languages. I disagree with the statement that this is an exception. This is something that come up again and again in a DSL. You start with a given concept of what you want to do, and you give it to the users. Rinse &amp; repeat a couple of time and you have a language that the users can start play with. The main problem is that not giving the users that facilities for abstraction usually mean that they will work around your system, or that the DSL scripts that you will have will suffer from copy &amp; paste, unnecessary complexity, etc. A trivial example would be how to define customer roles. You want to be able to process orders based on customer role, and as such, it is important to be able to define how you choose a customer. Not only that, but even the customer selection criteria should be abstracted. Here are a few examples:  Bad customer:  Bad credit rating OR More than 5 returns last year OR More than 5 helpdesk calls last 6 months Silver Customer  More than 5 purchases Gold Customer  Total purchases over 5,000$ Preferred customer:  Not a bad customer Gold customer We want to define roles using other roles. Because that is how the business thinks about it. We naturally create abstractions for ourselves, because this is how we think. If we need to go back to the development team for each new abstraction, we have a heavy weight process that the users will work around. Most of my DSL contains some form of user define abstractions, usually in the form of: define bad_customer:&#xA;&#x9;customer.HasBadCredit or &#xA;&#x9;&#x9;customer.TotalReturnsIn(1.year) &gt; 5 or&#xA;&#x9;&#x9;customer.TotalHelpdeskCallsin(6.months) &gt; 5&#xA;&#xA;define silver_customer:&#xA;&#x9;customer.TotalPurchases &gt; 5&#xA;&#xA;define gold_customer:&#xA;&#x9;customer.TotalPurchasesAmount &gt; 5000&#xA;&#xA;define preferred_customer:&#xA;&#x9;gold_customer and not bad_customer&#xA;&#xA;This is usually user editable, and we plug this into the intellisense of the system. In one project, I even provided a refactoring support, Extract Business Term (bound to CTRL&#x2B;ALT&#x2B;V, go R#!)&#xA;Abstractions are important, and building them into the language is just as important. You want to empower the users to extend your language, even if it a language that is very limited in scope. Because you give them the option to take the language to realms that you never dreamed on.</p>
        </article>
        <div class="button flex justify-between">
            <a href="616.html"><span class="back arrow"></span></a>

            <a href="618.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>