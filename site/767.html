
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 767 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7661">
            <a href="https://ayende.com/blog/2494/repository-t-syntactic-sugar-and-ddd" target="_blank">
                <h2 class="title mb-6" id="article-7661">Repository&lt;T&gt;, Syntactic Sugar and DDD</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am toying around with several ideas about the use of Repository&lt;T&gt; in DDD context. Right now it is theoretical because my current project has little need for DDD. At the moment, I am using the static access for Repository&lt;T&gt; as my gateway for the repositories.       1:  public class OrdersController : BaseController   2:  {   3:      public void CalculateTaxes(int customerId)   4:      {   5:          Customer customer = Repository &lt;Customer&gt;.Load(customerId);   6:          ICollection&lt;Order&gt; orders = Repository&lt;Order&gt;.FindAll(Where.Order.Customer == customer &amp;&amp;   7:                         Where.Order.Status == OrderStatus.ReadyToShip &amp;&amp;   8:                         Where.Order.Date &gt;= DateTime.Today);   9:  &#xA0;  10:          Employee lowestEmployeeResponsibleForCustomer =   11:              Repository&lt;Employee&gt;.FindFirst(Where.Employees.Customers.Contains(customer),   12:                  OrderBy.Employee.Level.Asc);  13:  &#xA0;  14:          foreach (Order order in orders)  15:          {  16:              customer.ApplyDiscount(order);  17:              lowestEmployeeResponsibleForCustomer.Dispatch(order);  18:          }  19:      }  20:  }&#xA;Another style may utilize a base controller as the place to put the repositories, like this:&#xA; &#xA;The resulting code looks like this:&#xA;&#xA;&#xA;&#xA;   1:  public class OrdersController : BaseController   2:  {   3:      public void CalculateTaxes(int customerId)   4:      {   5:          Customer customer = Customers.Load(customerId);   6:          ICollection&lt;Order&gt; orders = Orders.FindAll(Where.Order.Customer == customer &amp;&amp;   7:                         Where.Order.Status == OrderStatus.ReadyToShip &amp;&amp;   8:                         Where.Order.Date &gt;= DateTime.Today);   9:  &#xA0;  10:          Employee lowestEmployeeResponsibleForCustomer =   11:              Employees.FindFirst(Where.Employees.Customers.Contains(customer),   12:                  OrderBy.Employee.Level.Asc);  13:  &#xA0;  14:          foreach (Order order in orders)  15:          {  16:              customer.ApplyDiscount(order);  17:              lowestEmployeeResponsibleForCustomer.Dispatch(order);  18:          }  19:      }  20:  }&#xA0;&#xA0;&#xA;I really like the Repository&lt;T&gt; static accessor for stuff like tests that requires data setup, but I think that using it in the controllers may be over doing it. I like the second approach better, because the syntax doesn&#x27;t have &lt;T&gt; all over the place, as well. It is also nicer from the point of view of syntax and it allows to replace the current IRepository&lt;User&gt; with IUserRepository very easily. &#xA;Thoughts?</p>
        </article>
        <article id="article-7662">
            <a href="https://ayende.com/blog/2493/performance-and-explicit-domain-models" target="_blank">
                <h2 class="title mb-6" id="article-7662">Performance and Explicit Domain Models</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 05, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Udi talks about limitations for DDD as a result of performance constraints. He says:  Ayende and I had an email conversation that started with me asking what would happen if I added an Order to a Customer&#x2019;s &#x201C;Orders&#x201D; collection, when that collection was lazy loaded. My question was whether the addition of an element would result in NHibernate hitting the database to fill that collection. His answer was a simple &#x201C;yes&#x201D;. In the case where a customer can have many (millions) of Orders, that&#x2019;s just not a feasible solution. He then goes on to describe several solutions for the issue, including [ThreadStatic] events, something I have never consider but has some interesting possibilities. I wanted to add another option to the mix. You can extend NHibernate so calling customer.Orders.Add( new Order() ) will not force a load of the collection if the collection is not loaded, but would still add the new order to the unit of work. What is the caveat? It violates the principal of least surprise. My NHibernate.Generics collection used to do just that, I did it on the belief that it would save performance in un-needed trips to the database. I paid for that performance in grief when I found bugs where this failed:       1:  customer.Orders.Add(new Order())   2:  // sometime later, still in the same Unit of Work   3:  if(customer.Orders.Contains(theOrder)==false)   4:  {   5:    //do something bad   6:  }&#xA0;&#xA;Basically, the&#xA0;order was not persisted yet, and when the collection was loaded from the database, it&#xA0;didn&#x27;t include the newly added instance, which&#xA0;caused quite a bit of confusion. We have run into it several times, and&#xA0;it convinced me that I really shouldn&#x27;t do things that would surprise the naive developer, since&#xA0;that&#xA0;tends to be me.&#xA;&#xA0;&#xA;I wanted to mention this, since it is&#xA0;a viable alternative for this scenario, since you aren&#x27;t likely to load the Orders collection any time soon anyway.</p>
        </article>
        <article id="article-7663">
            <a href="https://ayende.com/blog/2492/debugging-nhibernate" target="_blank">
                <h2 class="title mb-6" id="article-7663">Debugging NHibernate</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Today we had a problem with an NHibernate query that was failing which had quite stumped. Pulling the usual tricks didn&#x27;t work, debugging NHibernate was problematic, since the failing query was damn complex, and I had no clear idea why this was failing. After a while, I decided that trying the top down approach will not work, and that I need more structure in finding out the issue.    Did I mentioned that the query was complex? The object model is big as well, and the query managed to touch just about all of it. Getting it slimmed down to a reproducable version was hard, because I wasn&#x27;t sure what caused the issue, but eventually I managed to get it to fail the way I wanted it. (In the process I walked through parts of NHibernate that I haven&#x27;t met before, interesting.    The end result are these tests (there is a reason that I know that C# has a 512 characters limits on identifiers):            CanMakeCriteriaQueryAcrossBothAssociationsWhenBothAssoicationsHasSameColumnKeyNameAndUsingPagingInSqlServer2005            CanLoadCollectionUsingLeftOuterJoinWhenBothCollectionsHasTheSameColumnKeyNameAndOneIsNull    I still don&#x27;t have an answer, but now I have much harder questions...This post is dedicated to Rinat, who says that she doesn&#x27;t knows NHibernate, but can make queries so complex both NHibernate and SQL Server begs for mercy.</p>
        </article>
        <article id="article-7664">
            <a href="https://ayende.com/blog/2491/resharper-wishlist" target="_blank">
                <h2 class="title mb-6" id="article-7664">ReSharper Wishlist</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 04, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">My main pain point with R# is very simple, when it generates properties or methods, it doesn&#x27;t generate virtual ones. Since I tend to generate quite a few properties at one go, it is a pain to have to go and add it to all of them.    Currently the issue is marked as &quot;Not for 3.0&quot;, which is something that I would like to change, please visit the issue and vote for it: http://www.jetbrains.net/jira/browse/RSRP-26697</p>
        </article>
        <article id="article-7665">
            <a href="https://ardalis.com/tech-ed/" target="_blank">
                <h2 class="title mb-6" id="article-7665">Tech Ed</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I arrived in Orlando last night. I&#x2019;m staying at the Disney Swan (and Dolphin). I&#x2019;m planning on making it to Palermo&#x2019;s Party this evening&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-7666">
            <a href="https://ayende.com/blog/2490/web-forms-are-killing-me" target="_blank">
                <h2 class="title mb-6" id="article-7666">Web Forms are killing me</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I would preface by saying that I am using Web Forms at my current project because the client insisted. They are paying, they get to make the decisions, end of story. This is a rant, plain and simple. I don&#x27;t do those often, but I have too much annoyances lately to not do it. I have several years of working with Web Forms, in projects of various sizes, I have committed my Sins Against the GridView, and have memorized the page lifecycle, I have walked the path of Page.ProcessRequest, and learnt at a distant monastery about the mysteries of the ViewState, I have studied the intricate play of control&#x27;s events and the secrets of Data Binding. I get Web Forms. I know how they work.  I have detailed elsewhere what I don&#x27;t like about WebForms (trying to be stateful, complex, lying, etc). Today it had gotten to the point when I have given up on trying anymore.&#xA0;This was after we have been hitting, repeatedly, obstacle after obstacle with using Web Forms. Today we had no less than three such incidents, all of them related to various intricate ways that the whole messy pipeline is working together to create a results that is more complex than the sum of all its parts and the legacy systems on the next door. Today was far from being an exception. We didn&#x27;t even try to do anything complex. Take a bunch of objects, bind them to a GridView, rinse-repeat.&#xA0;There was a set of pages that were almost literally forms over data, exactly the use case for WebForms, or so I have thought. In a set of about a dozen pages, with really minor differences between one another, we had at least one serious problem at each page. Invariably it was related to some weird way WebForms expected me to work.  In order to get the data from the request, I need to bind the data again in page load, and in a later event, I need to process it, after the Web Forms engine had magically filled the values from the request. And woe upon you if you dare to mix a data source with a call to this.DataBind(); for you are heretic and deserve to lose the user&#x27;s input without warning, and only by the grace of the good lord will you be saved. At one point today I resorted to an http handler and a set of calls to Response.Writer(), because that was easier than trying to get the functionality from the WebForms engine. At this point, I feel like I am trying to build on top of a house of cards, with the slightest movement will send everything crumbling down. I found a bug that was totally my fault today, and we had about five minutes of hilarity about finally finding something that we could easily fix. While this is a very instructive in terms of knowing how the internals of the WebForms engine works, it is a complete waste of time otherwise. When I need to be absolutely aware, at all times, about all the implications of what is going on all around me, I can&#x27;t really do anything at all. I have learned my lessons from past projects, thou shall not try to be smart with the WebForms framework, it will be smart right back at you and bit you in the ass. I am not trying to do anything smart here. I am literally scaling down everything that I do on the UI layer to the set of what is wholly approved and blessed by Microsoft. I am not even trying to workaround technical limitation, I am just trying to build working software. At this point, I am more willing to debug Dynamic Proxy&#x27;s IL generation engine than my pages, because at least with Dynamic Proxy, I have some control over what is going on, hard as it may be. The WebForms engine gives the illusion of control, but it does things in completely arbitrary ways, contrary to the principal of least surprised and common sense.  I am sick of it.</p>
        </article>
        <article id="article-7667">
            <a href="https://ayende.com/blog/2489/persistence-ignorance-in-the-entity-framework" target="_blank">
                <h2 class="title mb-6" id="article-7667">Persistence Ignorance in the Entity Framework</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Dan Simmons&#xA0;is talking about persistence ignorance in the Entity Framework. It looks like Microsoft is going to make an effort to make the EF support at least some level of PI in V1, and pure PI in following versions. This is a Good Thing. I would like to talk about some of the details in his post:  There&#x27;s no question, though, that complete persistence ignorance comes at a price--both in the performance of applications built with &quot;pure POCO&quot;, persistence ignorant domain models and as a result in the complexity of the entity framework which enables them. There is a question, actually. I can&#x27;t speak of the complexity of the EF, but I can speak about the framework requirements from OR/M solution that wants to support persistence ignorance.&#xA0;From the rest of the post, it looks like trying to do PI in the EF is going to have some issues with the existing infrastructure. Dan is bringing up two issues:  They must store a copy of an EntityKey. Proposed solution: Choosing not to store EntityKeys on the entities, for instance, means that navigating from an entity to the ObjectStateEntry&#xA0;which matches it either requires a brute-force search of the ObjectStateManager or for the ObjectStateManager to maintain a dictionary mapping from CLR reference to ObjectStateEntry which is a significnat expense.My reaction: You are going to need to keep track of loaded objects anyway, because you need to do identity resolution, this almost guarantees that you are already keeping track of this somewhere, why not utilize it for the same purpose?Also, what is the significant expense in keeping a dictionary of &lt;EntityKey, Entity&gt; ?  They must provide change tracking notifications through a prescriptive interface.Proposed solution: Not supporting the change tracking mechanism means that the ObjectStateManager must cache a copy of the original values for each entity (all original values and they must be cache whether or not the entity is modified).My reaction: The way you do it now is basically the same, only they are not in the state manager, but in the entity itself, what is the big difference? There is a case here because of value types copy semantics (entities are usually composed of values types and strings), but I don&#x27;t think that it is a big issue, in most cases, the lifetime of both entities and the session cache is short.If it bothers you, you can implement change tracking by interception, and add only the modified values to the ObjectStateManager. One thing that is really encouraging is the suggestion that users of the EF will be able to use custom collections. They are extremely helpful in a number of scenarios. I already mentioned the temporal aware collections that hooked into NHibernate in order to give us much better domain model. The last I have heard, it was not supported in the EF. So it is good to hear that they are thinking about it. One thing that I haven&#x27;t heard anything about is the extensibility mechanisms that are exposed. Specifically, custom types, persistence&#xA0;approaches, etc.</p>
        </article>
        <article id="article-7668">
            <a href="https://ayende.com/blog/2488/funny-stats" target="_blank">
                <h2 class="title mb-6" id="article-7668">Funny Stats</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I like the numbers, although I am not sure how they got to this point: Downloads:  Rhino Mocks - 40,591 downloads  NHibernate Query Generator - 31,143 downloads  Hibernating Rhinos episodes - 16,894 downloads   Rhino Mocks - 7,109  Mono Rail - 9,785  Event Broker - 2,111 NHibernate Query Analyzer - 14,999 downloads Web stats: 1,042,998 page views on May 2007 To Dos: 21 remained of of original 64 Posts this weekend: 25 (including this one) Max posts over a weekend period ever: 25</p>
        </article>
        <article id="article-7669">
            <a href="https://ayende.com/blog/2487/domain-driven-on-naked-clr" target="_blank">
                <h2 class="title mb-6" id="article-7669">Domain Driven on Naked CLR?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Again, a story from class. We are currently building a sample app together, and I get to see just how painful it is to try to build domain driven applications on the naked CLR. A lot of the stuff that makes DDD possible (rich object graphs, for instance) is entirely too hard to do without tool support. The end result is a transaction script pattern, where there is a chain of method calls that ends up with a call to the DB, usually to a stored procedure. I thought about keeping the SQL in the application layer, but to do it correctly, I would need a real data layer, and that basically means that I crack opens Fowler&#x27;s Patterns Of Enterprise Applications and start implementing Unit Of Work and Identity Map, etc. Horrendous amount of work, frankly. Assuming that you have no access to tooling, and you don&#x27;t have the resources to built NHibernate-sque framework, how would you approach building a Domain Driven application on the naked CLR? Is it even possible?</p>
        </article>
        <article id="article-7670">
            <a href="https://ayende.com/blog/2486/on-subsonic-nhibernate" target="_blank">
                <h2 class="title mb-6" id="article-7670">On SubSonic &amp; NHibernate</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 03, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I recently got this email, and the author has kindly given me permission to post the email and my response to it:  At this moment, I&#xA0;will be&#xA0;suggesting to&#xA0;my project team in my company to use ORM, hopefully to make our software development faster especially on the data layer side. We use LLBLGen (the old one), and we really have plenty of stored procedures which were hard to maintain.  I also noticed about subsonic today. I watched&#xA0;the videos and were impressed about it.  1)&#xA0; However I am not too clear about the difference between subsonic and nhibernate. It looks so alike, furthermore both of them have so much similarities with LINQ. What is your view on this? Most people mentioned that nhibernate was bloated.. something like that which I wasn&#x27;t clear about it.  2)&#xA0;&#xA0;When LINQ release, I should scrap off either subsonic or nhibernate for this platform. As LINQ is built into the language itself, it is easier to extend. I am aware that there is something like LINQ for NHibernate. Are these 2 the same technology or ???  3) Is nhibernate ready to be used in real enterprise commercial projects? Will there be any payment to it? Or it is completely free?  4)&#xA0;Last but not least, I am not too sure whether nhibernate does code generation like subsonic. But I did heard that nhibernate relied on codesmith, which you needed to purchase codesmith. Well, obviously I prefer NHibernate, that has absolutely nothing to do with anything about SubSonic, I am simply strongly biased toward NHibernate. That said, let me try to summarize what I think the difference between the two are. NHibernate and SubSonic takes two different approaches toward OR/M, NHibernate has the &quot;objects is all you see&quot; approach, while SubSonic is much closer to the way that the database view of the world. You still deals with some of the stuff from ADO.Net directly, but SubSonic takes most (all?) of the pain from that. From going over the docs, it looks like SubSonic has a fairly complete support for object view of the world. Both are valid approaches, and choosing between them is a matter of what you are more comfortable with, and what do you want to accomplish. If you are trying to build a Domain Driven application, NHibernate is the preferred approach, if you are building on an existing database, with existing stored procedures, you should probably see if SubSonic would be right for you.  I would probably not choose that, but I am biased, as I said. I should mention that NHibernate is supplying the OR/M bits only, SubSonic seems to do more than that, code generation, integration with EntLib, WebForms controls, etc. Now let me try to answer the questions themselves.  1/ There is a difference between Linq and the OR/M that are built on Linq (Microsoft &amp; Naming again). Linq is a set of extensions to the language, which opens up interesting approaches for set based logic in imperative language. In other words, it is wonderful syntactic sugar, and I am looking forward to be able to making use of that in creative ways. Linq for Sql is an OR/M whose query language is Linq queries, as far as I can see, this is a good approach from Microsoft, but it is limited to SQL Server only, and lacks some of the essentials features that I, as an advance user of OR/M needs. For most basic scenarios, I believe it should suffice. NHibernate bloated... I haven&#x27;t heard this before, and I would be interested to know by what criteria. 2/ No, you certainly should not. As I explained, Linq and the Linq for Sql product are two different things. From the way Microsoft is positioning Linq for Sql, I would assume that it would be harder to extend. Linq for NHibernate is a way to query NHibernate using Linq, that is all. You get the nice Linq syntax and the power from NHibernate. I would assume that SubSonic would have similar features (if it doesn&#x27;t have it already). 3/ NHibernate is more than ready. It is the backbone for quite a lot of enterprise commercial projects right now. It is completely free, and require no payment. Commercial support can be had from JBoss or my company. 4/ NHibernate doesn&#x27;t do code generation, that is outside the scope of the OR/M. There are several code generators that will output NHibernate mapping and classes, including free ones. CodeSmith certainly has some good templates for NHibernate, but it is not the only one by far. At the end, it comes done to evaluating whatever you can be effective with the tool in the approach that you prefer. You mentioned that you are currently suffering from pain as a result of hard to maintain stored procedures. Take NHibernate for a spin on your database, see if you are productive, then take SubSonic and do the same. That are numerous sources of information about both, so it shouldn&#x27;t be a problem to get started. Either way, have fun, and remember to choose by what will make your life easier, both now and in the long run.</p>
        </article>
        <div class="button flex justify-between">
            <a href="766.html"><span class="back arrow"></span></a>

            <a href="768.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>
</body>
</html>