
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 747 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7461">
            <a href="https://ayende.com/blog/2736/plain-old-code" target="_blank">
                <h2 class="title mb-6" id="article-7461">Plain Old Code</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 25, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">When J2EE came around, the notion of a container and managed objects / entities&#xA0;came into the fray, but those had such a high cost associated with them, that the Java community rebelled and now mainly advocates the Plain Old Java Objects. The .NET community has taken the same approach recently, with POCO or PONO being the term used. This post is driven by my experiences with several of Microsoft&#x27;s tools that tend to focus on &quot;No Code Required&quot;. WebForms&#x27; 2.0 had a huge marketing focus on that, and MS CRM is being sold with the premise that you can extend it with just a GUI, so does many others tools from Microsoft (SSIS comes to mind). I outlined the problems that I see with this model here, so I will not repeat it here, but I want to focus on code vs. GUI right now. I am aware of only a single such tool that provide a really good service, and that is the WinForms designer, and even that fails occasionally. But what really gets me is the CRM&#x27;s style of designers, where the customization is locked tight somewhere, where I cannot access it in any meaningful way. Given the chance, I would define customization with code, probably a DSL, and probably something like this:  entity MyCustomerCustomer:&#xA;&#x9;CustomerNumber as int&#xA;&#x9;[Length(255)]&#xA;&#x9;Name as string&#xA;&#x9;Email as Email&#xA;&#xA;screen MainView, for: MyCustomerCustomer:&#xA;&#x9;tab &quot;Customer Properties&quot;:&#xA;&#x9;&#x9;Display Name&#xA;&#x9;&#x9;Display Email&#xA;&#x9;&#x9;Display CustomerNumber, readonly&#xA;Hm, I seem to getting back to DSL no matter which way I go recently.</p>
        </article>
        <article id="article-7462">
            <a href="https://ayende.com/blog/2735/ergonomic-hardware" target="_blank">
                <h2 class="title mb-6" id="article-7462">Ergonomic Hardware</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 25, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Like many people who work with computers a lot, I suffer from wrist pain. I recently switched to using a Microsoft Natural Keyboard 4000, and it reduced those issues very quickly. The main benefit of the keyboard, aside from the ergonomic, split, design, is that it is&#xA0; raised, which mean that my wrists doesn&#x27;t have to bend in order to use the keyboard. I have found that this to be a great product, with the single complaint that the wrist rest hand doesn&#x27;t stretch enough to the left, so I have no easy way to access the left most keys column of the keyboard. I literally need an extra inch or two and it would be perfect. Now I am looking for a mouse that I can use that will not reduce the effort even more. I would like to be able to go totally mouse free, and while I can do it, the problem is that this is simply not possible in many applications. In Windows Live Writer, for instance, I don&#x27;t have any way to access the right option bar without the mouse (at least non that I could find), and that is the case in many applications / sites. Selecting categories or setting publish date requires the use of the mouse as well. I have tried using a trackball for a while, and that didn&#x27;t reduce any wrist pain, if anything, it simply moved them from one place to another.  Any recommendation on a good mouse to use? I have heard about data-hands, and I am interesting in taking them for a spin, but the cost is really prohibitive, and I am not going to even try that without seeing clear benefits out of this.</p>
        </article>
        <article id="article-7463">
            <a href="https://ayende.com/blog/2734/prioritization-the-dilbert-way" target="_blank">
                <h2 class="title mb-6" id="article-7463">Prioritization, the Dilbert way</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 24, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This strip&#xA0;had me LOL, because it is such a true description of the way most customers want to think. I am dealing with this issue by telling the customer that if they don&#x27;t give me a priority scale that I can work with, I am going to implement the system using my own prioritization method, which is based on the technical fun factor of a particular feature, and that I don&#x27;t consider UI to be fun, ever. That tends to get me a list of features for the next week or two :-) More seriously, though, I am posting this mostly as a way to remember to send this to the next customer that tries to take this approach. My last customer was a pleasure to work with, because he was the rare combination of a technical guy with a good sense of the business, so we could discuss anything from implementation strategy to feature prioritization based on internal dependencies and the business need. I think I need the non PHB award.</p>
        </article>
        <article id="article-7464">
            <a href="https://ayende.com/blog/2733/developing-on-microsoft-crm" target="_blank">
                <h2 class="title mb-6" id="article-7464">Developing on Microsoft CRM</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 24, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am currently in the process of leading a team in a project that is built around Microsoft CRM. A while ago I posted what I consider essential requirements for working effectively with business platforms. Since then, I had had&#xA0;a lot of time to play with MS CRM and see what the development story is.  Please remember, this is an evaluation of Microsoft CRM from a developer perspective. I don&#x27;t touch on any of the other aspects that it may have. I have already started to dislike it, and I have a feeling that it would only grow more acute in the future. The executive summary of this post is here:  Developing on MS CRM is building on a CRUD platform where all your business logic reside inside triggers. Let me go over the points that I have outlined in my earlier post, again, those points are brought up without any particular order. Source Control MS CRM supports the creation of new entities and customizing existing ones. Those customizations are kept in a dark cave, to be let out at irregular interval for a slow walk around the block. The source control story on MS CRM is similar to the source control story of the average DB, except that you need to imagine that any DDL operation takes between one to thirty minutes to complete. And there is not textual representation that you can keep on the side. Further extension points are available as plugins (callouts), which are&#xA0;triggers for CRUD operations on the CRM, and JavaScript customizations which you are supposed to write in a small text area inside the browser and allows you to respond to such events as changed / load. The SCM story for the plugins is a standard plugin issue, but for the JS customization there is literally no option except full import / export of the changes made from the CRM baseline image. See the previous paragraph about the performance implications of this, unacceptable. Let me make it simple, if you want me to develop on your platform, source control is not a negotiable attribute. It should be as natural as breathing. If I have to do extra work to get it working, this is a critical&#xA0;issue. Ease of deployment  You deploy a CRM installation by export your changes from the dev machine and importing to the staging/production installation. This is a lengthy process, and it doesn&#x27;t capture all the changes that were made, you need to make several others (moving callouts, configuration, etc) from one environment to another. Oh, and get ready to be intimately familiar with IISReset, and apparently resetting three other services is mandatory as well. And you need to do those on a regular basis just to get it deployed. Debuggable Well, you can attach to the CRM process, if you really feel like it, but that is frustrating, because you get to control only a small part of what is going on. It also looks like the CRM is throwing a lot of exceptions in normal operation, since I am unable to keep debugging in a &quot;stop on all thrown exception&quot;, because it keeps throwing a lot of those. Testable There isn&#x27;t any real way to do testing on the CRM without resorting to UI level testing, which is painful, to say the least. A lot of the methods in the extension API available expose such things as &quot;string preEntityXml&quot;, which make writing the code hard, and testing harder. Automation of deployment  As far as I can see, that is not doable easily, and it is a painful process (see deployment above) that really should be done with a click of a button. Separation of Concerns&#xA0;&amp; Don&#x27;t Repeat Yourself  One of the issues that I have run into so far is that the entire development model for the CRM is reactive, and that doesn&#x27;t really lend itself to keeping concerns separated and duplication minimized. The main problem is that the exposed API is primitive in the extreme and doesn&#x27;t really lend itself to good practices (see extension options below). In particular, the decision to base the extension options on non-portable Web Services and XML is a big mistake in this regard. Doesn&#x27;t shoot me in the foot  No comment on that so far, I haven&#x27;t dug into it enough to know whatever this is an issue yet. Make sense This refers to what goes under the covers, and how I need to interact with it. So far, I had been told countless times &quot;That is the way the CRM does it&quot; in response to &quot;WTF is this doing?!&quot; Possible to extend  Hacks are not something that I enjoy doing, and the more I dig into MS CRM, the more I feel like I need to resort to black magic hacks just to get things working. Let us go over some of the issues that I have run into so far.  Programming Model If I were to suggest building a platform where users will have direct access to the DB tables&#x27; and all the logic for the system would be implemented using triggers, I would be called a madman. Nevertheless, this is the programming model that you have when you work in the CRM. Responding to actions in the CRM using plugins (called callouts). Those callouts have signatures such as this one:public override PreCalloutReturnValue PreCreate(&#xA;&#x9;CalloutUserContext userContext, &#xA;&#x9;CalloutEntityContext entityContext, &#xA;&#x9;ref string entityXml, &#xA;&#x9;ref string errorMessage)&#xA;Then, you need to configure them in a config file, which lets you limit what this function will get. In that function, you can use the provided information to do something, but there is a lot of boiler plate code that you need to handle just to get out of the ugliness of this. &#xA;Configuration&#xA;Let us assume that you had the unmitigated goal to actually do try to develop a non trivial plugin to the CRM. You now need to supply it with some configuration, but the standard app.config / web.config approach will not work for you. The plugins are loaded into IIS&#x27;s process, and I am not about to change w3wp.exe.config, that is taking it too far, and it violate the configuration / code should be a single unit issue.&#xA;Public Interface &amp; API&#xA;The decision to base the entire extensibility model on web services and XML was a big mistake. It is mistake because the API that you get into the CRM is about the worst you can think of. Procedural, generated code, with very little flexibility or any way to supply layers on top of it that would allow you to present a nicer interface.&#xA;The generated code from the web service reference suffers from the usual awkwardness of WS code everywhere. Let us take this example, I want to change the customer preferred restaurant type and whatever he has a discount in it.&#xA0;Un order to do that, I need to write something like://preparing to call to the CRM&#xA;CrmService svc = new CrmService();&#xA;svc.Credentials = CredentialsHelper.GetCredentials();&#xA;svc.CallerIdValue = new CallerId();&#xA;svc.CallerIdValue.CallerGuid  = currentUserId;&#xA;ColumnSet columnsNeeded = new ColumnSet();&#xA;columnsNeeded.Attributes = new string[] {&quot;name&quot;,&quot;new_customerpreferredresturanttype&quot;};&#xA;&#xA;//calling to the CRM&#xA;customer customer = (customer)svc.Retrieve(&quot;customer&quot;, customerGuid, columnsNeeded);&#xA;&#xA;//updating customer value&#xA;customer.new_customerpreferredrestauranttype = new Picklist();&#xA;customer.new_customerpreferredrestauranttype.Value = 13;// Japanese &#xA;customer.new_customerhasrestaurantdiscount = new CrmBoolean();&#xA;customer.new_customerhasrestaurantdiscount.Value = true;&#xA;&#xA;svc.Update(customer);&#xA;Let us count the number of issues in this example:&#xA;&#xA;It take 15 lines to do something as simple of that, and only two of those lines are actually doing anything useful, the rest are just there to make the API happy. &#xA;customer as a type name. .Net follows the PascalCase convention, and it is annoying in the extreme to see this in the middle of my code.&#xA;Magic strings all over the place. You don&#x27;t have any way to avoid that.&#xA;Awkward API - CrmBoolean, anyone? Yes, they needed that to support nullable value types in 1.1, but it goes back to the problems with relying on the Web Service generated API to handle this scenario.&#xA;Magic values. Do you see the restaurant type constant there, it is a magic number that was defined in the CRM and it has no textual representation. You have the ID and the display value, and nothing else.&#xA;I couldn&#x27;t get Microsoft&#x27;s flagship web services&#x27; product to talk to the CRM successfully, so I am going to assume that the CRM is only accessible to ASMX platform (feel free to tell me if you can get Axis to successfully interact with MS CRM). That being the case, and since .Net is the obviously technology to work with the CRM, it would have been much better if MS would have simply supplied us with the ability to generate a DLL from the CRM with all the entities definitions and useful approach for interfacing with it. CodeDOM make it about as easy as providing a web service, so I have no idea why they choose not to do it.&#xA;Being able to ship an actual development platform, rather than anemic set of Web Service would have significantly improve the possibilities of improvements.&#xA;This shows itself in many other places, where the API hands me a string of XML and expect me to do something with it. Well, what am I supposed to do with it? Why not give me an object instance that I can actually work with?&#xA;The problem is that it can&#x27;t do that, because there is no way for me to get the type that it is using for the entity. The best I can do is use the generated class from the generated proxy, and obviously the CRM has no way to give me that type, since it exists in my plugin assembly alone.&#xA;Subverting Intent&#xA;You may have noticed that the field names are stuff like &quot;new_customerpreferredrestauranttype&quot;, that is because the CRM, in its wisdom, has decided that you don&#x27;t really need to have readable (PascalCase) names, even if you took the care to put them into the CRM in this manner, it will lower case them and make your life harder.&#xA;Team Development Story&#xA;This is something that is at least as big as the source control issues, and for the same reason. The CRM doesn&#x27;t support any sort of team development on a project. The main issue is that you don&#x27;t have a way to work locally on a CRM instance, and then commit those changes to the trunk. The entire is forced to work on the same instance, with all the associated problems that this entails.&#xA;This has&#xA0;a lot of scary implications, some of which are:&#xA;&#xA;I have no control over what goes into the system, no way to review changes, no way to revert or selectively modify what goes in.&#xA;I can&#x27;t just pull out a debugger and try to find an issue in an errant plugin, because doing so will send the entire team into a screeching halt.&#xA;&#xA0;&#xA;Performance&#xA;So far I had issue with it from a developer perspective, it moves from a simple request causing the DB to take 100% for minutes to stuttering under the load of a single user. I understand that there are several fixes for those issues, but that is on a clean machine, just trying to get to grips with the way that the CRM works.&#xA;Conclusion &#xA;As you can imagine, that is not a situation that sits very well with me, and I am actively working to overcome as much of those limitations as I can. I am making good inroads, but I can&#x27;t believe how bloody hard the platform make it to use it.</p>
        </article>
        <article id="article-7465">
            <a href="https://ayende.com/blog/2732/dependency-injection-in-a-dynamic-environment" target="_blank">
                <h2 class="title mb-6" id="article-7465">Dependency Injection in a Dynamic Environment</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 23, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Scott Bellware&#xA0;joins the DI discussion from a completely different angel, the dynamic language point of view:  The level of abstraction that we work at in .NET is appropriate to explicit inversion of control and thus dependency injection.&#xA0; To make type mocking your main method of achieving testability in .NET development will drive your designs increasingly sap the maintainability of your code.&#xA0; Maintainability and agility in a static environment are mostly the effect of applying appropriate static design patterns for static development.&#xA0; [...snip...] The difference in my comfort level in doing this has a lot to do with the fact that I&#x27;m usually coding (and thus mocking) at the abstraction level of the Rails framework&#x2019;s DSLs rather than lower down at the level of an API or a static Domain Model. I think that the key here is the level in which you are working at a given moment. It is fairly easy to add cross cutting support for DI in my domain entities, but that is something that I wouldn&#x27;t want to do. I am using DI mainly in controllers, services and commands, because injecting services to entities is something that looks... strange to me. I like my entities to be able to stand up on their own.  Minor note: I have something that I don&#x27;t know how to call, which bridge the entities business logic and the required services. It is usually expressed in the terms of the domain, and is directly exposed to the entities, but usually as a parameter for methods, and the like. I have written a few DSL and my share of fluent interfaces, and I think that while there is a lot of value in having a DSL (and a dynamic environment), a good API can cover a lot of ground.  As a side note, he also mentions this:  Beneath the DSL is an API and a framework that has all kinds of OO design goodness, but unlike working with a Rails clone in .NET, I don&#x27;t often have to have to see the vestiges of the framework&#x27;s uses of dependency injection in my application code. I usually divide my applications to several layers: infrastructure, entities, services, controllers, etc. Of those, the layer that is most likely to be exposed to the messy details of real world coding is the infrastructure layer. The rest of those are expressed in terms of the current context, and that works fairly well. The main use of DI in those layers is for constructor injection (I am not fond of setters injection in general) and not much more. In fact, as someone who is part of a Rails-inspired project, I disagree with this statement. I find that I often can write the code in a way that make sense for the layer and context that I find myself in. Here is a small example for your critique: public virtual bool AddNewPolicy()&#xA;{&#xA;&#x9;using (RhinoTransaction transaction = UnitOfWork.Current.BeginTransaction())&#xA;&#x9;{&#xA;&#x9;&#x9;Policy policy = BuildPolicy();&#xA;&#xA;&#x9;&#x9;if (ValidatorRunner.IsValid(Policy))&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;if (!ValidateThatUserIsAuthorizedToSavePolicy(policy))&#xA;&#x9;&#x9;&#x9;&#x9;return false;&#xA;&#x9;&#x9;&#x9;if (AddValidPolicy(policy))&#xA;&#x9;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;&#x9;transaction.Commit();&#xA;&#x9;&#x9;&#x9;&#x9;SetupRedirect(Policy);&#xA;&#x9;&#x9;&#x9;&#x9;return true;&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;else&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;Scope.ErrorSummary = ValidatorRunner.GetErrorSummary(policy);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;return false;&#xA;&#x9;}&#xA;}&#xA;&#xA;private bool AddValidPolicy(Policy policy)&#xA;{&#xA;&#x9;Repository&lt;Policy&gt;.Save(policy);&#xA;&#x9;UnitOfWork.Current.Flush(); //ensure that it will have an id&#xA;&#x9;try&#xA;&#x9;{&#xA;&#x9;&#x9;CallWebServiceInsert(policy);&#xA;&#x9;}&#xA;&#x9;catch (Exception e)&#xA;&#x9;{&#xA;&#x9;&#x9;Log.Error(&quot;Failed to insert policy using web service&quot;, e);&#xA;&#x9;&#x9;Scope.ErrorMessage = string.Format(&#xA;&#x9;&#x9;&#x9;Resources.CouldNotInsertPolicyToBackEndService,&#xA;&#x9;&#x9;&#x9;e.Message&#xA;&#x9;&#x9;&#x9;);&#xA;&#x9;&#x9;return false;&#xA;&#x9;}&#xA;&#x9;Usage.NewPolicyCreated(policy);&#xA;&#x9;return true;&#xA;}&#xA;I don&#x27;t like the explicit transaction management here, but I had a special case of needing to coordinate an explicit (and expected) failure case, and that was the simplest solution to that. This is a controller&#x27;s method, and the reason that it is returning a bool is for a check in the UI layer that would show the error message if necessary. Exception semantics usually stops at the controller, as far as I am concerned. &#xA;&#xA;By the way, there is a line here that I didn&#x27;t written, can you spot it?&#xA;I know that CRUD based example is not the best I could give, but I don&#x27;t think that even this is encumbered by infrastructure concerns. Then again, I never did more than a sample app in rails, so it is entirely possible that I missing things (and I would like to hear about that).&#xA;He then goes on to say:&#xA;&#xA;As for dependency injection, I&#x27;m simply bloody sick of it.&#xA0; The vestiges of dependency wiring have no business in application code.&#xA;I would agree, except that my term for application code are the entities and controllers (maybe services). Like threading, DI is something that I would like to keep to infrastructure code only.&#xA;I would like to offer some educated guesses that may turn to be completely wrong, but I am guessing that while the need for DI is lessened in dynamic environments (I want method missing too, damn it!), you still need some sort of dependencies management, if only to provide a way to handle this as applications grow.&#xA;The main problem is that when you have several ways to tackle the same problem in different ways (handling logins for dev, staging, production is a good sample), or need to handle life cycle.</p>
        </article>
        <article id="article-7466">
            <a href="https://ayende.com/blog/2731/dependency-injection-separating-the-container" target="_blank">
                <h2 class="title mb-6" id="article-7466">Dependency Injection</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 23, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">In a previous post, I made the statement that I believe that using an IoC container should be transparent to the application code, and that a good IoC can and should be invisible to anything but the Main() method. I would like to expand a bit on this topic, cover the sample problem that Tobias had brought up:  I never could achieve this and I&#x27;m wondering, what you mean by this statement. There a are always a lot of references to the DI/IoC container throughout the application. E.g. each IView that needs to be created to show a WinForm requires to ask the Container to give me the instances:  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ObjectFactory.GetInstance&lt;IMyView&gt;()  It might be an IController as well and IView is automatically resolved by the container, but as long as I need to instantiate new objects dynamically, I need to reference the IoC container at serveral places outside Main(). Maybe in very simple cases, the whole object tree required during the lifecycle of the application can be set up in Main().  Tobias has indeed hit the nail on the head, lifecycle issues are the one thing that can cause a lot of issues there. I would preface this by saying that I do not always follow this advice fully, and I have no compunctions about using the IoC as a service locator where appropriate, but I would try to limit it to the infrastructure part of the application only. In this scenario, what I would generally do is define something like this: // infrastructure service&#xA;public interface IRedirectionService&#xA;{&#xA;&#x9;IRedirectionOperation To&lt;TController&gt;();&#xA;}&#xA;And then use it like this:&#xA;Redirection&#xA;  .To&lt;OrderController&gt;()&#xA;  .ActivateAndWait();&#xA;It depends on the given scenario, but in this case, I am handing control from one controller to the other, and waiting until the second controller is done doing its job (think about it like modal dialog).&#xA;The Redirection Service is responsible for creating the controller / view (or find them if they are already active), and activate them.&#xA;IoC &amp; DI are under the cover, but I don&#x27;t have it in my face, and I have nice API against which I can work.</p>
        </article>
        <article id="article-7467">
            <a href="https://ayende.com/blog/2730/shattered-aspects" target="_blank">
                <h2 class="title mb-6" id="article-7467">Shattered Aspects</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 22, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Aspect Orientation is a way to structure your application so that some concerns (usually cross cutting, mostly infrastructure) are handled transparently by the framework you are running on. The classic examples are logging &amp; auditing, but I am using it for transactions, thread safety, mocking, resource cleanup, validation and more. It is a good tool to have, and it can make some things very easy to handle.* I am writing this post because I have dealt with AoP and derivatives quite often in the recent past, and I&#xA0;had some minor part in building some tools which are key for &#xA0;Aspect Orientation in .Net (Dynamic Proxy). The problem with AOP on the CLR is that it requires extra steps on the part of the developer to get to it.  The CLR doesn&#x27;t support AOP, and considering the need ** for that, it is fairly surprising that it isn&#x27;t there. Furthermore, it seems like there is no intention to add that to the CLR. This is especially problematic in light of the non-virtual by default that we have in most CLR languages. Since the platform doesn&#x27;t give us AOP out of the box, we are left with hacks &amp; half measures. Dynamic Proxy, the Policy Injection Block, partial methods and the like are all things that have been built because AOP is the correct answer to a certain class of problems. Considering that two of those are coming from Microsoft, I would like to see this being turned into giving us true AOP capabilities baked into the platforms. There are 7 overall approaches to AOP in .Net, all of them has some serious limitations, and the ones that do give me what I would consider true AOP require that I would use the profiling / debugging API (special launcher, COM API, complex) or do IL re-weaving, which is simply hard &amp; unproductive.&#xA0; I am doing some work on Dynamic Proxy, and I can tell you up front that trying to workaround some of the issues there is very hard. That should be a service offered by the platform, not something that I would need to supply. Nitpicker corner: * Nevertheless, Aspect Orientation is not a Silver Bullet. ** You might not feel the need in your application, but I do. Rhino Mocks is entirely built on the idea of method interception, which is a core part of what AOP needs.</p>
        </article>
        <article id="article-7468">
            <a href="https://ayende.com/blog/2729/useful-lies-about-javascript-prototype-model" target="_blank">
                <h2 class="title mb-6" id="article-7468">Useful lies about JavaScript Prototype Model</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 22, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Note: This is not how it works, but it is close enough that it is a valid mental model for most scenarios. When I think about JavaScript and its type system, I usually envision objects as hash tables that can carry values or functions. The prototype idea is just an associated hash table, and so on. The moment that I settled on this mental model, it was much easier to grok javascript. Now, that is a vague explanation if I ever heard one, so let us speak in code: public class Object&#xA;{&#xA;&#x9;private readonly Dictionary&lt;string, Procedure&gt; functions &#xA;&#x9;&#x9;= new Dictionary&lt;string, Procedure&gt;();&#xA;&#x9;private Object prototype;&#xA;&#xA;&#x9;public Object Prototype&#xA;&#x9;{&#xA;&#x9;&#x9;get&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;if(prototype==null)&#xA;&#x9;&#x9;&#x9;&#x9;prototype = new Object();&#xA;&#x9;&#x9;&#x9;return prototype;&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;set { prototype = value; }&#xA;&#x9;}&#xA;&#xA;&#x9;public Procedure this[string name]&#xA;&#x9;{&#xA;&#x9;&#x9;get&#xA;&#x9;&#x9;{&#xA;&#x9;&#x9;&#x9;if (functions.ContainsKey(name))&#xA;&#x9;&#x9;&#x9;&#x9;return functions[name];&#xA;&#x9;&#x9;&#x9;if (prototype != null &amp;&amp; prototype.functions.ContainsKey(name))&#xA;&#x9;&#x9;&#x9;&#x9;return prototype[name];&#xA;&#x9;&#x9;&#x9;throw new InvalidOperationException(&quot;No function called &quot; &#x2B; name);&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;set { functions[name] = value; }&#xA;&#x9;}&#xA;}&#xA;&#xA;This is a simple example of the matter, and here is how you can use it, if you ignore the fact that C# doesn&#x27;t have any useful duck typing, then this code looks very much like the one that you would write in JavaScript:&#xA;Object obj = new Object();&#xA;obj[&quot;on_change&quot;] = delegate { Console.WriteLine(&quot;changed&quot;); };&#xA;&#xA;obj.Prototype[&quot;on_load&quot;] = delegate { Console.WriteLine(&quot;loaded from prototype&quot;); };&#xA;&#xA;&#xA;obj[&quot;on_change&quot;]();&#xA;obj[&quot;on_load&quot;]();&#xA;&#xA;//&quot;overriding&quot; the prototype method&#xA;obj[&quot;on_load&quot;] = delegate{ Console.WriteLine(&quot;loaded from object&quot;); };&#xA;&#xA;obj[&quot;on_load&quot;]();&#xA;&#xA;obj[&quot;missing_method&quot;]();//will throw</p>
        </article>
        <article id="article-7469">
            <a href="https://ayende.com/blog/2728/ayende-vs-microsoft-crm-round-3-goes-to-ayende" target="_blank">
                <h2 class="title mb-6" id="article-7469">Ayende vs. Microsoft CRM: Round 3 goes to Ayende!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 22, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">After a heoric struggle, I managed to get the local development story against MS CRM working. This means that I can use the normal semantics of develop locally and then deploy, instead of centralized development. That said, there is something very wrong in a solution that requires me to take action in the TCP stack level to get a normal development story going.</p>
        </article>
        <article id="article-7470">
            <a href="https://ayende.com/blog/2727/searching-for-ddd-code-for-reading" target="_blank">
                <h2 class="title mb-6" id="article-7470">Searching for DDD code for reading</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 22, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This may sound strange, but I want to read some DDD code, and I am sure where I can find some. There frameworks code is available all over the place, but DDD is often practiced inside a business app, which rarely has the source available. Preferably, it is something more than an example application.Any suggestions?</p>
        </article>
        <div class="button flex justify-between">
            <a href="746.html"><span class="back arrow"></span></a>

            <a href="748.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>