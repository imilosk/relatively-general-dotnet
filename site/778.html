
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 778 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7771">
            <a href="https://ayende.com/blog/2580/efficently-loading-deep-object-graphs" target="_blank">
                <h2 class="title mb-6" id="article-7771">Efficently loading deep object graphs</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Here is an interesting approach to get deep object graphs effectively.&#xA0; This will ensure that you will get all the relevant collections without having to lazy load them and without a huge cartesian product. Especially useful if you want to load a collection of items with the associated deep object graph.public Policy GetPolicyEagerly(int policyId)&#xA;{&#xA;&#x9;IList list = ActiveRecordUnitOfWorkFactory.CurrentSession.CreateMultiQuery()&#xA;&#x9;&#x9;.Add(@&quot;from Policy policy left join fetch policy.PolicyLeadAssociations                                  where policy.Id = :policyId&quot;)&#xA;&#x9;&#x9;.Add(@&quot;from Policy policy left join fetch policy.PolicyEmployeeAssociations                                  where policy.Id = :policyId&quot;)&#xA;&#x9;&#x9;.Add(@&quot;from Policy policy left join fetch policy.PolicyManagerAssociations                                  where policy.Id = :policyId&quot;)&#xA;&#x9;&#x9;.Add(@&quot;from Policy policy left join fetch policy.PolicyDepartmentAssociations                                  where policy.Id = :policyId&quot;)&#xA;&#x9;&#x9;.Add(@&quot;from Policy policy left join fetch policy.PolicyCustomerAssociations                                  where policy.Id = :policyId&quot;)&#xA;&#x9;&#x9;.SetEntity(&quot;policy&quot;, Policy)&#xA;&#x9;&#x9;.List();&#xA;&#x9;IList firstResultList = (IList) list[0];&#xA;&#x9;if(firstResultList.Count==0)&#xA;&#x9;&#x9;return null;&#xA;&#x9;return = (Policy) firstResultList [0];&#xA;}&#xA;The domain above is a fake one, by the way, don&#x27;t try to make any sense of it.</p>
        </article>
        <article id="article-7772">
            <a href="https://ayende.com/blog/2579/shocking-rob" target="_blank">
                <h2 class="title mb-6" id="article-7772">Shocking Rob</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am posting this mainly because I want to see how far I can shock Rob Conery   The exception is raised by the EnsureMaxNumberOfQueriesPerRequestModule, and it is currently set on the development level, for QA/Staging, I would probably reduce it further, although I have some pages where I  Oh, and to Rob, that was a classic error of doing query per node (instead of doing a single query) (added an eager load instead of a query and was done). I am doing some performance tuning right now, and all in all, it is very boring. Find a hot spot, consolidate data access, use MultiCriteria or MultiQuery, move on.</p>
        </article>
        <article id="article-7773">
            <a href="https://ayende.com/blog/2578/imprisoning-mort" target="_blank">
                <h2 class="title mb-6" id="article-7773">Imprisoning Mort</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Nick Malik responded to the discussion around his Tools for Mort post. He has a very unique point of view.  If you cannot make sure that Mort will write maintainable code, make him write less code.&#xA0;&#xA0;&#xA0; Then when it comes time for you (not Mort) to maintain it (he can&#x27;t), you don&#x27;t.&#xA0; You write it again. Okay, so you have a tool that makes sure that Mort doesn&#x27;t write a lot of code with it. Now Mort has left and I need to maintain the code. How do I do it? I can&#x27;t do it with the tools that Mort has used, because there are intentionally crippled. You guessed it, time to rewrite, and it is not just a rewrite of Mort&#x27;s code, it is a rewrite that would need to add functionality that existed in Mort&#x27;s framework, but crippled so Mort wouldn&#x27;t damage himself with it. Sorry, that is the wrong approach to take.   Someone &#x27;smart&#x27; has written the &#x27;hard&#x27; stuff for Mort, and made it available as cross cutting concerns and framework code that he doesn&#x27;t have to spend any time worrying about.&#xA0; Mort&#x27;s code is completely discardable. I thought that Pie-In-The-Sky frameworks were already widely acknowledged as a Bad Thing.   Does Mort put process first or people first?&#xA0; He puts people first, of course.&#xA0; He writes the code that a customer wants and gets it to the customer right away.&#xA0; The customer changes the requirements and Mort responds.&#xA0; If it sounds like a quick iteration, that is because it is. Agile doesn&#x27;t mean iterations, agile means working software and enabling change. You says that Mort can respond quickly to changes in the application, but is only during the first few iterations, after that, Mort is too busy fighting with the code to be able to significantly add any value to the application.  Possible Answer: We can have Mort consume a service.&#xA0; He can&#x27;t change it.&#xA0; He can&#x27;t screw it up.&#xA0; But he can still deliver value I really don&#x27;t have your faith in Mort&#x27;s inability to screw things up. What do you do when Mort decide to &quot;improve&quot; performance by making the service calls in an endless loop on another thread? After getting those points across, I would like to protest most strongly about the general tone of Nick&#x27;s post. It is extremely derogatory toward Mort, and it preclude&#xA0;in advance the ability to improve. I am a Mort on&#xA0;quite&#xA0;a few levels (the entire WinFX stack comes to mind), does&#xA0;this mean that I&#xA0;am bound to write unmaintainable code and should be locked down to&#xA0;a very small set of &quot;safe&quot; choices, which&#xA0;were chosen for me by those Above Me ? Sorry, I really can&#x27;t accept this approach, and while it explains some of the stuff that Microsoft puts out, the only thing that it helps is to stifle innovation and development on the platform. If this is Nick&#x27;s idea about how things should be, it is very sad. I seriously hope that this isn&#x27;t the accepted position at Microsoft.</p>
        </article>
        <article id="article-7774">
            <a href="https://ayende.com/blog/2577/did-you-know-find-out-if-an-exception-was-thrown-from-a-finally-block" target="_blank">
                <h2 class="title mb-6" id="article-7774">Did you know: Find out if an exception was thrown from a finally block!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is a big biggie for me, because it enables a much nicer syntax for a lot of stuff. But first, let us show this:using(new ExceptionDetector())&#xA;{&#xA;&#x9;if(new Random().Next(1,10)%2 == 0)&#xA;          throw new Exception();&#xA;}&#xA;How can you tell, from the ExceptionDetector, if an exception was thrown or not? Well, conventional wisdom, and what I thought about until 15 minutes ago, says that you can&#x27;t. I want to thank Daniel Fortunov, for teaching me this trick:public class ExceptionDetector : IDisposable&#xA;{&#xA;    public void Dispose()&#xA;    {&#xA;        if (Marshal.GetExceptionCode()==0)&#xA;            Console.WriteLine(&quot;Completed Successfully!&quot;);&#xA;        else&#xA;            Console.WriteLine(&quot;Exception!&quot;);&#xA;    }&#xA;}&#xA;Amazing!</p>
        </article>
        <article id="article-7775">
            <a href="https://ayende.com/blog/2576/having-a-good-foundation" target="_blank">
                <h2 class="title mb-6" id="article-7775">Having a good foundation</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 19, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I talked about the tree problem that I had to create, we need to create something very similar (but for another object graph) today. It took me roughly three days to get it all working correctly, it took Rinat about two and a half hours to get it to work on the next set.</p>
        </article>
        <article id="article-7776">
            <a href="https://ayende.com/blog/2575/documentation-can-be-ambiguous-in-the-most-insidious-ways" target="_blank">
                <h2 class="title mb-6" id="article-7776">Documentation can be ambiguous in the most insidious ways</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 19, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Frans had a long comment to my last post, I started to reply in a comment, but it grew too big for that. &#xA0;Let&#x27;s use ObjectBuilder from the entlib as an example. Anyone who hasn&#x27;t read the code or its non-existing dev docs, go read the code and the unittests, then come back here and explain in detail how it works inside and proof you&#x27;re right. xJust to answer that, I have read the OB source, and I have never bothered to look at whatever documentation that exists for it.After reading the code and the tests, I was able to extend OB to support generic inferencing capabilities. (Given IRepository&lt;T&gt; whose implementor is NHibernateRepository&lt;T&gt;, when asked for IRepository&lt;Customer&gt;, return NHibernateRepository&lt;Customer&gt;). That is an advanced feature of IoC, added to a container that I wasn&#x27;t familiar with, without affecting the rest of the functionality. Oh, and while I can probably give a short description of how OB&#xA0; works, I am by no means an expert, nor can I really explain how OB works, but I was able to go in, understand the area that I wanted to modify, make a change that greatly benefit me, without breaking anything else. That is the value in maintainable code. And this is for the people that thinks that I bash the P&amp;P code. I made similar changes to ObjectBuilder and to Windsor, at around the same time frame. I had harder time dealing with the ObjectBuilder, but that is probably due to unfamilariarity with the project. The simple fact that I was able to do a significant change without having to grok the entire ObjectBuilder says quite a but the quality of the code. &#xA0; If you can reverse engineer that from unit-test code, well, good for you and I&#x27;m sure your boss will be very happy to hear that you won&#x27;t create a single bug ever again This is something that you have repeated several times, and I want to explicitly disagree with this statement: understanding the code doesn&#x27;t mean no bugs, it means less bugs, for sure, but no zero bugs. Most bugs occur not because you misunderstand what the code does, but because of simple mistake (if instead of if not, for instance) or not considering this particular scenario (who would ever try to paste 2Mb of text here?). Understanding helps reduce it, but it can&#x27;t eliminate it. I&#xA0;doubt&#xA0;you can make the claim that LLBLGen has no bugs. What I find a little funny is that you apparently forget which kind of comments were placed inside the nhibernate sourcecode before it went v1.0: things like &quot;// I have no idea what this does&quot; or &quot;// why is this done here?&quot; or similar comments. Apparently, the people who ported the hibernate code over to .NET didn&#x27;t understand how it worked by simply looking at the code AND with all the unittests in mind. There are similar comments there right now, and they exists in the original Hibernate source code as well. I will freely admit that there are parts of NHibernate that I have no idea how they work. What I do know is that this lack of knowledge about the way some parts work has not hinder my ability to work with NHibernate or extend it. By digging into sourcecode and understanding what it precisely does already takes a lot of time as you have to parse and interpret every line in the code and REMEMBER the state of the variables it touches! Can you do that in your head? I can&#x27;t. That is not something that I can do, due to this limitation, I am working in a way that ensures that I do not need to understand the entire system and the implications of each and every decision at any given one point. I consider this approach a best practice, because this means that I can work on a piece of code without having to deal with the implications of dozens other components being affected.&#xA0;Documentation wouldn&#x27;t help here, unless I would have a paragraph per line of code, and keep them in sync at all times, and remember to read it at all times. Add to that the wide range of decisions one has to make to build a system like that and with just the end-result in your hand it&#x27;s a hell of a job to come to the level where you understand why things are done that way. I disagree, I can determain intent from code and from tests, and I can change the code and see tests breaks if necessary. That is much faster way then trying to analyze the flow of each instruction in the application.  Typical example: saving an entity graph recursively in the right order. That&#x27;s a heck of a complex pipeline, with several algorithms processing the data after eachother, and the code branches out to a lot of different subsystems.  If one can determine by JUST LOOKING AT THE CODE why it is designed the way it is, more power to him/her, but I definitely won&#x27;t be able to do so. What I find surprising is that some people apparently think they can, with no more info than the end result of the code.  You wouldn&#x27;t be able to understand that from the end result of the code, but having a test in place will allow you to walk through that in isolation, if needed, and understand what is going on. Here is a secret, I can usually understand what NHibernate is doing in such scenarios without looking at the code. Because the logic is fairly straight-forward to understand (but not to implement). I taught myself NHibernate by building the NHibernate Query Analyzer, no documentation, very little help from other people at the time, but a lot of going through the code and grokking the way it works.  What I find even more surprising is that it apparently is a GOOD thing that there&#x27;s no documentation. No, what I am saying is that I would rather have a good code with unit tests than code that has extensive documentation. Again, I am not documentation at the right level, high level architecture, broad implementation notes, build scripts documentation. To go further from that seems to be to get to the point of diminishing returns. It apparently is EASIER to read code, interpret every line, remember every variable&#x27;s state it touches, follow call graphs all over the place, write down pre-/post- conditions along the way That is the part that I think we disagree about, I don&#x27;t need to do that.  Perhaps they&#x27;re payed by the hour Around 90% of the time that I spent on NHibernate is time that goes out of my own free time, not paid for anyone. You can rest assure that I care a lot about not wasting my own time. This is the real world, and good, unit tested, code is maintainable, proved by the fact that people goes in and make safe changes to it, without having to load all the premutations of the system to your head.</p>
        </article>
        <article id="article-7777">
            <a href="https://ayende.com/blog/2574/navigating-large-code-bases" target="_blank">
                <h2 class="title mb-6" id="article-7777">Navigating large code bases</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 19, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I just needed to find an answer to a question in MonoRail. MonoRail code base is over 75,000 lines of code, including all the supporting projects and tests. Castle.MonoRail.Framework has about 37,700 lines of code. The question was something that I never really thought about, and had no idea where to start looking at. I opened the solution and started hunting. It took about five or six minutes to find the correct spot, another two to verify my assumption and be shocked that there is a private method there :-) and then I was done. Under ten minutes, to find a question that I never thought about in a significant code base. ReSharper helps, of course, but nothing beats well structured code for maintainability.  Oh, and MonoRail has very little implementation documentation.</p>
        </article>
        <article id="article-7778">
            <a href="https://ayende.com/blog/2573/working-software-over-comprehensive-documentation" target="_blank">
                <h2 class="title mb-6" id="article-7778">Working software over comprehensive documentation</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 19, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Frans has a long post about how important is documentation for the maintainability of a project. I disagree.  Update: I have another post in this subject here. Before we go on, I want to make sure that we have a clear understanding of what we are talking about, I am not thinking about documentation as the end user documentation, or the API documentation (in the case of reusable library), but implementation documentation about the project itself. I think that some documentation (high level architecture, coding approach, etc) are important, but the level to which Frans is taking it seems excessive to me.  The thing is though: a team of good software engineers which works like a nicely oiled machinery will very likely create proper code which is easy to understand, despite the methodology used. So, good people, good team, good interactions. That sounds like the ideal scenario to me. I can think of at least five different ways in which a methodology can break apart and poison such a team (assigning blame, stiff hierarchy, overtime, lack of recognition, isolate responsibilities and create bottlenecks). Not really a good scenario.  The why is of up-most importancy. The reason is that because you have to make a change to a piece code, you might be tempted to refactor the code a bit to a form which was rejected earlier because for example of bad side-effects for other parts. And then I would run the tests and they would show that this causes failure in another part, or it would be caught in QA, or I would do the responsible thing and actually get a sense of the system before I start messing with it.  If you don&#x27;t know the why of a given routine, class or structure, you will sooner or later make the mistake to refactor the code so it reflects what wasn&#x27;t the best option and you&#x27;ll find that out the hard way, losing precious time you could have avoided. This really has nothing to do with the subject at hand. I can do the same with brand new code, to go on in a tangent somewhere, it is something that you have to deal with in any profession.  That&#x27;s why the why documentation is so important: the documented design decisions: &quot;what were the alternatives? why were these rejected?&quot; This is essential information for maintainability as a maintainer needs that info to properly refactor the code to a form which doesn&#x27;t fall into a form which was rejected. Documentation is important, yes, but I like it for the high level overview. &quot;We use MVC with the following characteristics, points of interest in the architecture include X,Y,Z, points of interest in the code include D,B,C, etc&quot;. But I stop there, and rarely updates the documents beyond that. We have the overall spec, we have the architectural overview and the code tourist guide, but not much more. Beyond that, you are suppose to go and read the code. The build script usually get special treatment, by the way. This also assumes that the original builders of the systems was omniscient. Why shouldn&#x27;t I follow a form that was rejected? Just because the original author of an application thought that Xyz was the end-all-be-all of software, doesn&#x27;t means that Brg isn&#x27;t a valid approach and should be considered. It should not surprise you that I reject the idea out of hand.  Code isn&#x27;t documentation, it&#x27;s code. Code is the purest form of the executable functionality you have to provide as it is the form of the functionality that actually gets executed, however it&#x27;s not the best form to illustrate why the functionality is constructed in the way it is constructed. Code can be cumbersome to express the true intent with, that is why I am investing a lot of time coming up with intent revealing names and pushing all the infrastructure concerns down. The best way to illustrate why certain functionality exists in such a way is to cover it with tests, that was you can see intended usage and can follow the train of thoughts of the previous guy. I routinely head off to the unit tests of various projects to get an insight about such things can work.  I&#x27;ve seen technical documents which did make a lot of sense and were essential to understanding what was going on at such a level that making changes was easy. Frans, at what level where they? Earlier you were talking about routine level, but I want to know what you think is the appropriate documentation coverage for a system?  If your project consists of say 400,000 lines of code, it&#x27;s not a walk in the park to even get a slightest overview where what is located without reading all of those lines if there&#x27;s no documentation which is of any value. The problem here is that you make no assumption about the state of the code. I would take undocumented 400,000 LOC code base that has (passing) unit tests over one that had extensive documentation but little to no tests any time. The reasoning is simple, if it is testable, it is maintainable, period. Yes, it would take time to wrap my head around a system this size, but I can most certainly do it, and unit tests allows me to do a lot of things safely. Assume that you have extensive documentation, what happens when the code diverge from the Documentation?  You see, documentation isn&#x27;t a separate entity of the code written: it describes in a certain DSL (i.e human readable and understandable language) what the functionality is all about; the code will do so in another DSL (e.g. C#). hats the essential part: you have to provide functionality in an executable form. Code is such a form, but it&#x27;s arcane to read and understand for a human (or is your code always 100% bugfree when you&#x27;ve written a routine? I seriously doubt it, no-one is that good), however proper documentation which describes what the code realizes is another. Documentation is not a DSL, and it is most certainly not understandable in many cases. Documentation can be ambiguous in the most insidious ways.&#xA0;The code is not another DSL, this assumes that the code and the documentation are somehow related, but the code is what actually run, so that is the authoritive &#xA0;on any system. Documentation can help understanding, but it doesn&#x27;t replace code, and I seriously doubt that you can call it a DSL. The part that bothers me here is that the documentation is viewed as executable form, unless you are talking about something like FIT, that is not the case. I can&#x27;t do documentation.VerifyMatch(code);  When I need to make a change and need to know why a routine is the way it is, I look up the design document element for that part and check why it is the way it is and which alternatives are rejected and why. After 5 years, your own code also becomes legacy code. Do you still maintain code you&#x27;ve written 2-3 years ago? If so, do you still know why you designed it the way it is designed and also will always avoid to re-consider alternatives you rejected back then because they wouldn&#x27;t lead to the right solution? I still maintain code that I wrote two years ago (Rhino Mocks come to mind), and I kept very little documentation about why I did some things. But I have near 100% test coverage, and the ability to verify that I still have working software. Speaking on the paid side of the fence, a system that I have started written two years ago has gone two major revisions in the mean time, and is currently being maintained by another team. I am confident in my ability to go there, sit with the code, and understand what is going on. And of course, &quot;I have no idea why I did this bit&quot; are fairly common, but checking the flow of the code, it is usually clear that A) I was an idiot, B) I had this and that good reason for that. Sometimes it is both at the same time. It needs pointing out again, what was true 5 years ago is something that you really need to reconsider today.  What&#x27;s missing is that a unit test isn&#x27;t documenting anything And here I flat out disagree. Unit tests are a great way to document a system in a&#xA0;form that keeps it current. Reading the tests for&#xA0;a class can give you a lot of insight about how&#xA0;it is supposed to be used, and what the original author thought about when&#xA0;he built it.  It describes the same functionality but in such a different DSL that a human isn&#x27;t helped by wading through thousands and thousands of unit tests to understand what the api does and why. Not really any different than wading through thousands of pages of documentation, which you can&#x27;t even be sure to be valid.  Using unit tests for learning purposes or documentation is similar to learning how databases work, what relational theory is, what set theory is etc. by looking at a lot of SQL queries. The only comment that I have for this: That is how I did it.  Wouldn&#x27;t you agree that learning how databases work is better done by reading a book about the theory behind databases, relational theory, set theory and why SQL is a set-oriented language? Maybe, but I believe that the best way to learn something is to use it in anger and there is absolutely nothing that can beat having something to play with and explore.</p>
        </article>
        <article id="article-7779">
            <a href="https://ayende.com/blog/2572/understanding-bad-code" target="_blank">
                <h2 class="title mb-6" id="article-7779">Understanding Bad Code</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 18, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Frans&#x27; contribution to the conversation about maintainable code deserve its own post, but I would like to mention this part in particular:  you will not [understand the code]. Not now, not ever. And not only you, but everyone out there who writes code, thus that includes me as well, will not be able to read code and understand it immediately. You know what? That is not limited to bad code. I had hard time grokking good code bases, simply because of their size and complexity (NHibernate and Windsor comes to mind). Other code bases are as large, but they have easier approachability, probably because they are dealing with less complex domain an tend to have a wide coverage rather than deep (MonoRail comes to mind). A while ago I was involved with&#xA0;an effort to migrate an ancient system to SQL Server 2005. The system compromised of over 100,000 lines of code, spread over some thousands of files scattered randomly in a case sensitive file system (you can guess why this is significant). The code base was about 85% SQL and 15% bash shell scripts. The database in question was a core system and contained slightly over 4,000 tables. One of the core tables was called tmp1_PlcyDma and was used to do business critical processing. That code base took data driven code generation to a level I have never seen before. I gave up trying to track down 7(!) levels of code-&gt;generating code-&gt;execute code-&gt;generating code-&gt;rinse-&gt;repeat To say that the code base was bad is quite an understatement. To mention that the only place where I could run the code was by using a telnet console into a test environment that was not identical to production is only the start. I could mention no debugging, runtime of ~5 hours, test time of ~3 hours, etc. The code grew organically over a ten years period and you could track the developer progress from merely annoying to criminally insane (he invented his own group by construct, using triple nested cursors and syntax so obscure that even the DBA that worked with the system for the last 5 years had no idea what was going on). Perhaps the thing that I remember most from this project that we had a bug that kept two people hunting after it for three weeks. The issue was a missing &#x27;;&#x27;. Oh, and the criteria for success in this project was successful migration, with bug-per-bug compatibility, and no one really knew what it did, including the authors(!). But, you know what, after a month or so of looking at the code, it got to the point where I could look at something like pc_cl_mn.sql and know that it would contains the monthly policy calculation, and that this piece of code was doing joins manually via cursors again, that plcy_tr_tmp.sql was the &quot;indexes priming&quot; script, etc, etc. The code was still a horror, but once you understood that the authors of this code had a... &quot;special&quot; way of looking at databases, you got to the point where you could get the point of the code in an hour instead of a day, and then move that to a saner approach. So, what does this horrifying story has to do with Frans&#x27; point above? The premise that you can read and understand code immediately is highly dependant on what you are familiar with. I know of no one that can just sit in front of an unfamiliar &#xA0;code base and start producing value within the first ten minutes. But on a good code base, you should be able to be able to start producing value very quickly.</p>
        </article>
        <article id="article-7780">
            <a href="https://ayende.com/blog/2571/people-over-code" target="_blank">
                <h2 class="title mb-6" id="article-7780">People over Code</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: June 18, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">While there is value in the item on the right, I value the item on the left more.  &#xA;This is in response to a comment by Jdn, I started to comment in reply, and then I reconsidered, this is much more important. A bit of background. Karthik has commented that &quot;Unfortunately too often many software managers fall into the trap of thinking that developers are &quot;plug and play&quot; in a project and assume they can be added/removed as needed.&quot; and proceeded with some discussion on why this is and how it can be avoided. &#xA;I responded to that by saying that I wouldn&#x27;t really wish to work with or for such a place, to be precise, here is what I said: &#xA;&#xA;I would assert that any place that treats their employee in such a fashion is not a place that I would like to work for or with.&#xA;When I was in the army, the _ultimate_ place for plug &amp; play mentality, there was a significant emphasis on making soldiers happy, and a true understanding of what it was to have a good soldier serving with you. Those are rare, and people fight over them.&#xA;To suggest that you can replace one person with another, even given they have the same training is ludicrous&#xA;&#xA;From personal experience, when I was the Executive Officer of the prison, the prison Commander has shamelessly stole my best man when I was away at a course, causing quite a problem for me (unfortunately not something that you can just plug &amp; play). That hurt, and it took about six months to get someone to do the job right, and even then, the guy wasn&#x27;t on the same level. (And yes, this had nothing to do with computers, programming, or the like.) &#xA;Now, to Jdn&#x27;s comment: &#xA;&#xA;In a perverse way, I can see, from the perspective of a business, why having good/great developers, who bring in advanced programming techniques, can be a business risk.&#xA;[...snip...] you have to view all employees as being replaceable, because the good/great ones will always have better opportunities (even if they are not actively looking), and turnover for whatever reason is the norm not the exception.&#xA;Suppose you are a business with an established software &#x27;inventory&#x27;, and suppose it isn&#x27;t the greatest in the world. But it gets the job done, more or less. Suppose an Ayende-level developer comes in and wants to change things. &#xA0;We already know he is a risk because he says things like:&#xA;&quot;not a place that I would like to work for or with.&quot;&#xA;&#xA;If you view me as replaceable, I will certainly have an incentive to moving to somewhere where I wouldn&#x27;t be just another code monkey. Bad code bothers me, I try to fix that, but that is rarely a reason to change a workplace. I like challenges. And there are few things more interesting than a colleague&#x27;s face after a masterfully done shift&#x2B;delete combination. &#xA;What I meant with that is that I wouldn&#x27;t want to work for a place that thought of me and my co-workers as cogs in a machine, to be purchased by the dozen and treated as expendable.  &#xA;You know what the most effective way to get good people? Treating them well, appreciating their work and making them happy. If a person like what they are doing, and they like where they are doing it, there would need to be a serious incentive to moving away. A good manager will ensure that they are getting good people, and they will ensure that they will keep them. That is their job.  &#xA;&#xA;Mediocre code that can be maintained by a wider pool of developers is in a certain respect more valuable to a business than having great code that can only be maintained by a significantly smaller subset of developers.&#xA;&#xA;At a greater cost over the life time of the project. If you want to speak in numbers the MBAs will understand, you are going to have far higher TCO because you refuse to make the initial investment. &#xA;To quote Mark Miller, you can get more done, faster, if you have good initial architecture and overall better approach to software.  &#xA;Jdn&#x27;s concludes with a good approach: &#xA;&#xA;I&#x27;m offering services for clients. &#xA0;I can&#x27;t disrupt their business because I don&#x27;t think their code is pretty enough.&#xA;What I can do better, going forward, is learn to make the incremental changes that gets them on their way to prettier code. &#xA0;My attitude is *not* &quot;well, I can&#x27;t do anything so I won&#x27;t even try.&quot;&#xA;But at the end of the day, I have to do what is best for the *client*. &#xA0;If that means typed datasets (picking on them, but include anything you personally cringe over), then I can partial class and override to make them better, but typed datasets it will be.&#xA;&#xA;I would probably be more radical about the way that I would go about it, but the general approach is very similar, especially when you have an existing code base or architecture in place.</p>
        </article>
        <div class="button flex justify-between">
            <a href="777.html"><span class="back arrow"></span></a>

            <a href="779.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	"> Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
