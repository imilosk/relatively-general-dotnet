
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 711 â€¢ Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">

<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
               href="index.html"> Home </a><a
                class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline" href="/about/">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>
<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-7101">
            <a href="https://ayende.com/blog/3070/code-base-size-complexity-and-language-choice" target="_blank">
                <h2 class="title mb-6" id="article-7101">Code base size, complexity and language choice</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 25, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Via Frans, I got into these two blog posts:  Steve Yegge -&#xA0;&#xA0;Code&#x27;s Worst Enemy Jeff Atwwok&#xA0;- Size Is The Enemy In both posts, Steve &amp; Jeff attack code size as the #1 issue that they have with projects. I read the posts with more or less disbelieving eyes. Some choice quotes from them are:  Steve: If you have a million lines of code, at 50 lines per &quot;page&quot;, that&#x27;s 20,000 pages of code. How long would it take you to read a 20,000-page instruction manual? Steve: We know this because twenty-million line code bases are already moving beyond the grasp of modern IDEs on modern machines.  Jeff: If you personally write 500,000 lines of code in any language, you are so totally screwed. I strongly suggest that you&#x27;ll go over them (Steve&#x27;s posts is long, mind you), and then return here to my conclusions.&#xA0; Frans did a good job discussing why he doesn&#x27;t believe this to be the case, he takes a different tack than mine, however, but that is mostly business in usual between us. I think that the difference is more a matter of semantics and overall approach than&#xA0;the big gulf it appears at time. I want to focus on Steve&#x27;s assertion that at some point, code size makes project exponentially harder. 500,000 LOC is the number he quotes for the sample project that he is talking about. Jeff took that number and asserted that at that point you are &quot;totally screwed&quot;. Here are a few numbers to go around:   Castle: 386,754 NHibernate: 245,749 Boo: 212,425 Rhino Tools: 142,679 Total LOC: 987,607 I think that this is close enough to&#xA0;one million lines of code to make no difference. This is the stack on top of which I am building my projects. I am often in &amp; out of those projects. 1 million lines of code. I am often jumping into those projects to add a feature or fix a bug. 1 million lines of code. I somehow manage to avoid getting &quot;totally screwed&quot;, interesting, that. Having said that, let us take a look at the details of Steve&#x27;s post. As it turn out, I fully agree with a lot of the underlying principals that he base his conclusion on.&#xA0; Duplication patterns - Java/C# doesn&#x27;t have the facilities to avoid duplication that other languages do. Let us take the following trivial example. I run into it a few days ago, I couldn&#x27;t find a way to remove the duplication without significantly complicating the code. DateTime start = DateTime.Now;&#xA;// Do some lengthy operation&#xA;DateTime duration = DateTime.Now - start;&#xA;if (duration &gt; MaxAllowedDuration)&#xA;{&#xA;    SlaViolations.Add(duration, MaxAllowedDuration, &quot;When performing XYZ with A,B,C as parameters&quot;);&#xA;}&#xA;I took this example to Boo and extended the language to understand what SLA violation means. Then I could just put the semantics of the operations, without having to copy/paste this code. &#xA;Design patterns are a sign of language weakness - Indeed, a design pattern is, most of the time,&#xA0;just a structured way to handle duplication. Boo&#x27;s [Singleton] attribute demonstrate well how I would like to treat such needs. Write it once and apply it everywhere. Do not force me to write it over and over again, then call it a best practice.&#xA;There is value in design patterns, most assuredly. Communication is a big deal, and having a structured way to go about solving a problem is important. That doesn&#x27;t excuse code duplication, however.&#xA;Cyclomatic complexity is not a good measure of the complexity of a system - I agree with this as well. I have seen unmaintainable systems with very low CC scores. It was just that changing anything in the system require a bulldozer to move the mountains of code required. I have seen very maintainable systems that had a high degree of complexity at parts. CC is not a good indication.&#xA;&#xA0;Let us go back to Steve&#x27;s quotes above. It takes too long to read a million lines of code. IDE breaks down at 20 millions lines of code.&#xA;Well, of the code bases above, I can clearly and readily point outs many sections that I have never read, have no idea about how they are written or what they are doing. I never read those million lines of code. &#xA;As for putting 20 millions lines of code in the IDE...&#xA;Why would I want to do that?&#xA;The secret art of having to deal with large code bases is...&#xA;To avoid dealing with large code bases.&#xA;Wait, did I just agree with Steve? No, I still strongly disagree with his conclusions. It is just that I have a very different approach than he seems to have for this.&#xA;Let us look at a typical project structure that I would have:&#xA; &#xA;Now, I don&#x27;t have the patience (or the space) to do it in a true recursive manner, but imagine that each of those items is also composed of smaller pieces, and each of those are composed of smaller parts, etc.&#xA;The key hole is that you only need to understand a single part of the system at a time. You will probably need to know some of the infrastructure, obviously, but you don&#x27;t have to deal with it.&#xA;Separation of concerns is the only way to create maintainable software. If your code base doesn&#x27;t have SoC, it is not going to scale. What I think that Steve has found was simply the scaling limit of his approach in a particular scenario. That approach, in another language, may increase the amount of time it takes to hit that limit, but it is there nevertheless.&#xA;Consider it the inverse of the usual &quot;switch the language for performance&quot; scenario, you move languages to reduce the amount of things you need to handle, but that scalability limit is there, waiting. And a language choice is only going to matter about when you&#x27;ll hit it.&#xA;I am not even sure that the assertion that 150,000 lines of dynamic language code would be that much better than the 500,000 lines of Java code. I think that this is utterly the wrong way to look at it.&#xA;Features means code, no way around it. If you state that code size is your problem, you also state that you cannot meet the features that the customer will eventually want.&#xA;My current project is ~170,000 LOC, and it keeps growing as we add more features. We haven&#x27;t even had a hitch in our stride so far in terms of the project complexity. I can go in and figure out what each part of the system does in isolation. If I can&#x27;t see this in isolation, it is time to refactor it out.&#xA;On another project, we have about 30,000 LOC, and I don&#x27;t want to ever touch it again.&#xA;Both projects, to be clear, uses NHiberante, IoC, DDD (to a point). The smaller project has much higher test coverage as well and much higher degree of reuse.&#xA;The bigger project is much more maintainable (as a direct result of learning what made the previous one hard to maintain).&#xA;To conclude, I agree with many of the assertions that Steve makes. I agree that C#/Java encourage duplication, because there is no way around it. I even agree that having to deal with a large amount of code at a time is bad. What I don&#x27;t agree is saying that the problem is with the code. The problem is not with the code, the problem is with the architecture. That much code has no business being in your face.&#xA;Break it up to manageable pieces and work from there. Hm... I think I have heard that one before...</p>
        </article>
        <article id="article-7102">
            <a href="https://ayende.com/blog/3069/nhiberante-querying-many-to-many-associations-using-the-criteria-api" target="_blank">
                <h2 class="title mb-6" id="article-7102">NHiberante: Querying Many To Many associations using the Criteria API</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Over a year ago I was asked how we can query a many to many association with NHibernate using the criteria API. At the time, that was not possible, but the question came up again recently, and I decided to give it another try. First, let us recall the sample domain model: Blog&#xA0;&#xA0;&#xA0; m:n&#xA0;Users&#xA0;&#xA0;&#xA0; 1:m Posts&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;n:m Categories&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;1:m Comments And what we want to do, which is to find all Posts where this condition is met:  Blog.Users include &#x27;josh&#x27; and Categories includes &#x27;Nhibernate&#x27;&#xA0; and a Comment.Author = &#x27;ayende&#x27;.  At the time, it wasn&#x27;t possible to express this query using the criteria API, although you could do this with HQL. Doing this with HQL, however, meant that you were back to string concat for queries, which I consider a bad form. I did mention that a year have passed, right?  Now it is possible, and easy, to do this using the criteria API. Here is the solution: DetachedCriteria blogAuthorIsJosh = DetachedCriteria.For&lt;User&gt;()&#xA;&#x9;.Add(Expression.Eq(&quot;Username&quot;, &quot;josh&quot;)&#xA;&#x9;.CreateCriteria(&quot;Blogs&quot;, &quot;userBlog&quot;)&#xA;&#x9;.SetProjection( Projections.Id())&#xA;&#x9;.Add(Property.ForName(&quot;userBlog.id&quot;).EqProperty(&quot;blog.id&quot;));&#xA;&#xA;DetachedCriteria categoryIsNh = DetachedCriteria.For(typeof(Category),&quot;category&quot;)&#xA;    .SetProjection(Projections.Id())&#xA;    .Add(Expression.Eq(&quot;Name&quot;, &quot;NHibernate&quot;))&#xA;    .Add(Property.ForName(&quot;category.id&quot;).EqProperty(&quot;postCategory.id &quot;));&#xA;&#xA;session.CreateCriteria(typeof (Post),&quot;post&quot;)&#xA;    .CreateAlias(&quot;Categories&quot;, &quot;postCategory&quot;)&#xA;    .Add(Subqueries.Exists(categoryIsNh))&#xA;    .CreateAlias(&quot;Comments&quot;, &quot;comment&quot;)&#xA;    .Add(Expression.Eq(&quot;comment.Name&quot;, &quot;ayende&quot;))&#xA;    .CreateAlias(&quot;Blog&quot;, &quot;blog&quot;)&#xA;    .Add(Subqueries.Exists(blogAuthorIsJosh))&#xA;    .List();&#xA;And this produces the following SQL:&#xA;SELECT This_.Id              AS Id1_3_,&#xA;       This_.Title           AS Title1_3_,&#xA;       This_.TEXT            AS Text1_3_,&#xA;       This_.Postedat        AS Postedat1_3_,&#xA;       This_.Blogid          AS Blogid1_3_,&#xA;       This_.Userid          AS Userid1_3_,&#xA;       Blog3_.Id             AS Id7_0_,&#xA;       Blog3_.Title          AS Title7_0_,&#xA;       Blog3_.Subtitle       AS Subtitle7_0_,&#xA;       Blog3_.Allowscomments AS Allowsco4_7_0_,&#xA;       Blog3_.Createdat      AS Createdat7_0_,&#xA;       Comment2_.Id          AS Id4_1_,&#xA;       Comment2_.Name        AS Name4_1_,&#xA;       Comment2_.Email       AS Email4_1_,&#xA;       Comment2_.Homepage    AS Homepage4_1_,&#xA;       Comment2_.Ip          AS Ip4_1_,&#xA;       Comment2_.TEXT        AS Text4_1_,&#xA;       Comment2_.Postid      AS Postid4_1_,&#xA;       Categories7_.Postid   AS Postid__,&#xA;       Postcatego1_.Id       AS Categoryid,&#xA;       Postcatego1_.Id       AS Id3_2_,&#xA;       Postcatego1_.Name     AS Name3_2_&#xA;FROM   Posts This_&#xA;       INNER JOIN Blogs Blog3_&#xA;         ON This_.Blogid = Blog3_.Id&#xA;       INNER JOIN Comments Comment2_&#xA;         ON This_.Id = Comment2_.Postid&#xA;       INNER JOIN Categoriesposts Categories7_&#xA;         ON This_.Id = Categories7_.Postid&#xA;       INNER JOIN Categories Postcatego1_&#xA;         ON Categories7_.Categoryid = Postcatego1_.Id&#xA;WHERE  EXISTS (SELECT This_0_.Id AS Y0_&#xA;               FROM   Categories This_0_&#xA;               WHERE  This_0_.Name = @p0&#xA;                      AND This_0_.Id = Postcatego1_.Id)&#xA;       AND Comment2_.Name = @p1&#xA;       AND EXISTS (SELECT This_0_.Id AS Y0_&#xA;                   FROM   Users This_0_&#xA;                          INNER JOIN Usersblogs Blogs3_&#xA;                            ON This_0_.Id = Blogs3_.Userid&#xA;                          INNER JOIN Blogs Userblog1_&#xA;                            ON Blogs3_.Blogid = Userblog1_.Id&#xA;                   WHERE  This_0_.Username = @p2&#xA;                          AND Userblog1_.Id = Blog3_.Id);&#xA;I am pretty sure that this is already in 1.2, but I don&#x27;t have that handy to check.</p>
        </article>
        <article id="article-7103">
            <a href="https://ayende.com/blog/3068/looking-for-a-dsl-idea" target="_blank">
                <h2 class="title mb-6" id="article-7103">Looking for a DSL idea</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I need to start writing the second part of the book soon. This one is supposed to take a DSL implementation through all the interesting stages that I would like to cover. However, I am not sure yet what the subject of the DSL will be. I need something that has enough scope to last for about a hundred pages, complex enough to expose usual problem when writing DSL and not tied to a specific domain so strongly that it would be hard to outsiders to grasp.  I am also interested in knowing what kinds of patterns and problems you would like me to cover. My current line of thinking is to build several DSL around the backend of an online store. That domain should be fairly familiar to all, and it is rich enough to offer a lot of things to discuss. It is also a good place to discuss several types of DSL. I was thinking of the following DSL:  Message routing / dispatch DSL Order processing DSL Then we will extend that&#xA0;to be a generic rule engine DSL Perhaps creating a testing DSL for those DSL or for the domain itself The main problem that I have now is that building those DSL is very simple, I don&#x27;t think that it would be enough to cover everything the we need to build DSL. In that light, I am looking for either more ideas or challenges on the use of the above mentioned DSL.</p>
        </article>
        <article id="article-7104">
            <a href="https://ayende.com/blog/3067/deploying-from-source-control" target="_blank">
                <h2 class="title mb-6" id="article-7104">Deploying from source control</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 23, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This is just a quick note for public review, you are probably aware that I am doing deployments by doing a &quot;svn up &amp;&amp; build&quot;. I am now thinking about how we can apply the same idea to deploying DSL. This ensures, at the very least, that our DSL are under source control. But that has led me to another thought, if we are enforcing SCM for the DSL, why not enforce unit testing as well? Part of the loading process of a DSL can be loading the DSL and its unit tests, executing the unit tests and only accepting them if they all passed. Failure in the unit tests or lack of unit tests would cause the DSL load process to fail. Thoughts?</p>
        </article>
        <article id="article-7105">
            <a href="https://ayende.com/blog/3066/boo-design-by-contract-in-20-lines-of-code" target="_blank">
                <h2 class="title mb-6" id="article-7105">Boo: Design By Contract in 20 lines of code</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 22, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Now, before Greg hurls a modopt on me, I want to be clear that this isn&#x27;t the same thing that Spec# is doing. But it is a very cool way to specify constraints that must always be valid when a method exists. Here is the code: [AttributeUsage(AttributeTargets.Class)]&#xA;class EnsureAttribute(AbstractAstAttribute):&#xA;&#x9;&#xA;&#x9;expr as Expression&#xA;&#x9;&#xA;&#x9;def constructor(expr as Expression):&#xA;&#x9;&#x9;self.expr = expr&#xA;&#x9;&#x9;&#xA;&#x9;def Apply(target as Node):&#xA;&#x9;&#x9;type as ClassDefinition = target&#xA;&#x9;&#x9;for member in type.Members:&#xA;&#x9;&#x9;&#x9;method = member as Method&#xA;&#x9;&#x9;&#x9;continue if method is null&#xA;&#x9;&#x9;&#x9;block = method.Body&#xA;&#x9;&#x9;&#x9;method.Body = [|&#xA;&#x9;&#x9;&#x9;&#x9;block:&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;try:&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;$block&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;ensure:&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;assert $expr&#xA;&#x9;&#x9;&#x9;|].Block&#xA;And the usage:&#xA;[ensure(name is not null)]&#xA;class Customer:&#xA;&#x9;name as string&#xA;&#x9;&#x9;&#xA;&#x9;def constructor(name as string):&#xA;&#x9;&#x9;self.name = name&#xA;&#x9;&#xA;&#x9;def SetName(newName as string):&#xA;&#x9;&#x9;name = newName&#xA;Now, any attempt to set the name to null will cause an assertion exception. This technique is quite powerful, and very easy to use. A few years ago I wrote a design by contract implementation for boo that was far more ambitious (handling inheritance, etc). I remember it being much more complicated, and while things like quasi quotation do make it easier, it is not that big a change.&#xA;I think that mostly it is the way I write code now, striving to simplicity is something that I am trying to apply recently, and I think it works.</p>
        </article>
        <article id="article-7106">
            <a href="https://ayende.com/blog/3065/meta-methods" target="_blank">
                <h2 class="title mb-6" id="article-7106">Meta Methods</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 21, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">A meta-method is a shortcut into the compiler; it is a method that accepts AST nodes[1] and returns an AST node.  Let us implement this very simple scenario, the assert statement. Now, because Boo already has that, we will use &#x201C;verify&#x201D; as the method name. Here is the full method implementation:[Meta]&#xA;static def verify(expr as Expression):&#xA;&#x9;return [|&#xA;&#x9;&#x9;unless $expr:&#xA;&#x9;&#x9;&#x9;raise $(expr.ToCodeString())&#xA;&#x9;|]&#xA;&#xA;We are using quasi quotation to save us typing. This is a static method decorated with the [Meta] attribute, and accepting an AST expression. This is all you need in order to create a meta-method. When you have a meta-method, you can call it, like this:&#xA;verify 1 == 2&#xA;Now the interesting tidbit happens. When the compiler sees a call to a meta-method, it doesn&#x2019;t emit the code to call this method at runtime. Instead, during compilation, the meta-method is executed. We pass it the AST of the arguments of the method code (including anonymous blocks), and then we replace this method call with the result of calling the meta-method.&#xA;It is important that you&#x2019;ll understand that after compilation, where in the code we had this:verify 1 == 2&#xA;&#xA;The actual compiled bits will have this:unless 1 == 2:&#xA;&#x9;raise &#x201C;1 == 2&#x201D;&#xA;&#xA;Please go over it again, to make sure that you understand how it works. It is similar to text substitution macros in C and C&#x2B;&#x2B;, but this is actual code that is running during compilation that gets to output any code that it wants back into the compilation process, not mere text preprocessing. In addition to that, we are dealing directly with the compiler&#x2019;s AST, not just copying lines of text.&#xA;This seems to be something that a lot of people have a hard time grasping. The compiler will ask you, at compilation time, what kind of transformation you want to do on the code. It will then take the result of the transformation (the method return value) and put it where the method call used to be.&#xA;The Boo code above can also be translated to the following C#, which is a bit more explicit about what is going on:[Meta]&#xA;public static UnlessStatement verify(Expression expr)&#xA;{&#xA;&#x9;UnlessStatement unlessS = new UnlessStatement();&#xA;&#x9;unless.Condition = Expression.Lift(expr);&#xA;&#x9;RaiseStatement raise = new RaiseStatement();&#xA;&#x9;raise.Exception = Expression.Lift(expr.ToCodeString());&#xA;&#x9;unless.Statements.Add(raise);&#xA;&#x9;return unless;&#xA;}&#xA;&#xA;Both have the same exact semantics. &#xA;We have actually used meta-methods before, when we implemented the &#x201C;when&#x201D; keyword for the scheduling DSL. Meta-methods are used in DSL quite often. They are usually the first step that we need to take into the compiler when we run into the limits of what the compiler gives us out of the box.&#xA;&#xA;&#xA;[1] An ast node is generic term to all the types that compose the abstract syntax tree of the language.</p>
        </article>
        <article id="article-7107">
            <a href="https://ayende.com/blog/3064/if-it-walks-like-a-duck-and-it-quacks-like-a-duck" target="_blank">
                <h2 class="title mb-6" id="article-7107">If it walks like a duck and it quacks like a duck</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 21, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Then it must be an IQuackFu. &#xA; &#xA;IQuackFu is Boo&#x2019;s answer to the Method Missing / Message Not Understood from dynamic languages. Since Boo is a statically typed language[1], and since method missing is such a nice concept to have, we use this special interface to introduce this capability. &#xA;You are probably confused, because I didn&#x2019;t even explain what method missing is. Let us go back and look at an example, shall we? We want to look at the following xml:&#xA;&lt;People&gt; &#x9;&lt;Person&gt; &#x9;&#x9;&lt;FirstName&gt;John&lt;/FirstName&gt; &#x9;&lt;/Person&gt; &#x9;&lt;Person&gt; &#x9;&#x9;&lt;FirstName&gt;Jane&lt;/FirstName&gt; &#x9;&lt;/Person&gt; &lt;/People&gt; &#xA;Now we want to display the first names in the xml. We can do it using XPath, but the amount of code required makes this awkward. We can also generate some sort of strongly typed wrapper around it, assuming that we have a schema for this, we can use a tool to generate the schema, if we don&#x2019;t have it already&#x2026; &#xA;Doesn&#x2019;t it look like a lot of work? We can also do this:&#xA;doc = XmlObject(xmlDocument.DocumentElement)for person as XmlObject in doc.Person:&#x9;print person.FirstName&#xA;But we are using a generic object here, how can this work? This works because we intercept the calls to the object and decide how to answer them at runtime. This is the meaning of the term &#x201C;method missing&#x201D;. We &#x201C;catch&#x201D; the method missing and decide to do something smart about it (like returning the data from the xml document). &#xA;At least, this is how it works in dynamic languages. For a statically typed language, the situation is a bit different; all method calls must be known at compile time. That is why Boo introduced the idea of IQuackFu. Let us check the implementation of XmlObject first, and then we will discuss how it works:&#xA;class XmlObject(IQuackFu):&#x9;_element as XmlElement &#x9;def constructor(element as XmlElement):&#x9;&#x9;_element = element &#x9;def QuackInvoke(name as string, args as (object)) as object:&#x9;&#x9;pass # ignored &#x9;def QuackSet(name as string, parameters as (object), value) as object:&#x9;&#x9;pass # ignored &#x9;def QuackGet(name as string, parameters as (object)) as object:&#x9;&#x9;elements = _element.SelectNodes(name)&#x9;&#x9;if elements is not null:&#x9;&#x9;&#x9;return XmlObject(elements[0]) if elements.Count == 1&#x9;&#x9;&#x9;return XmlObject(e) for e as XmlElement in elements &#x9;override def ToString():&#x9;&#x9;return _element.InnerText&#xA;We didn&#x2019;t implement the QuackInvoke and QuackSet, because they are not relevant to the example at hand, I think that QuackGet will make the point. Now, just to complete the picture, we will write the first code sample, the use of XmlObject, as the compiler will output it.&#xA;doc = XmlObject(xmlDocument)for person as XmlObject in doc.QuackGet(&#x201C;Person&#x201D;):&#x9;print person.QuackGet(&#x201C;FirstName&#x201D;)&#xA;The way it works, when the compiler finds that it can&#x2019;t resolve a method (or a property) in the usual way, it then check if the type implements the IQuackFu interface. If it does implement IQuackFu, it translates the method call into the equivalent method call.  &#xA;The example of the Xml Object is a really tiny one of the possibilities. Convention based methods are an interesting idea[2] that is widely used in Ruby. Here is an example that should be immediately familiar to anyone who dabbled in Rails&#x2019; ActiveRecord:&#xA;user as User = Users.FindByNameAndPassword(&#x201C;foo&#x201D;, &#x201C;bar&#x201D;)&#xA;Which will be translated by the compiler to:&#xA;&#xA;user as User = Users.QuackInvoke(&#x201C;FindByNameAndPassword&#x201D;, &#x201C;foo&#x201D;, &#x201C;bar&#x201D;)&#xA;The Users&#x2019; QuackInvoke method will parse the &#x201C;method name&#x201D; and issue a query by name and password. &#xA;You can do some very interesting things with IQuackFu... &#xA; &#xA;&#xA;[1] Well, it is statically typed unless you explicitly tell the compiler that you want late bound semantics. Aside from working against IDispatch COM interfaces, I have rarely found that ability useful. One case I did find it useful, however, was when I wanted to introduce Context Parameters, which we will discuss in a few pages. &#xA;[2] For the adventurous sorts, you can also do something called Lazy Methods, in which you generate a method if and only if it is being called. This is an interesting exercise in extending the compiler, but for all intents and purposes, IQuackFu answers this need very well.</p>
        </article>
        <article id="article-7108">
            <a href="https://ayende.com/blog/3063/web-development-with-training-wheels" target="_blank">
                <h2 class="title mb-6" id="article-7108">Web development with training wheels?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This quote has me floored:  Well, I&#x27;m an asp.net developer, not really a web developer. It is like web development with training wheels, only the training wheels are really heavy, uneven, and make riding the bike harder</p>
        </article>
        <article id="article-7109">
            <a href="https://ayende.com/blog/3062/statically-typed-compiler-checked-ha" target="_blank">
                <h2 class="title mb-6" id="article-7109">Statically typed? Compiler checked? Ha!</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Just a nod toward the people that cling to static typing with both hands, their teeth and the tail:RouteTable.Routes.Add(new Route&#xA;{&#xA; Url = &#x201C;admin/[controller]/[action]&#x201C;,&#xA; Defaults = new&#xA; {&#xA;  Controller = &#x201C;Admin&#x201C;,&#xA;  Acton = &#x201C;Index&#x201D;&#xA; },&#xA; Validation = new&#xA; {&#xA;  Conrtoller = &#x201C;Admin|Users|Categories&#x201D;&#xA; },&#xA; RouteHandler = typeof(MvcRouteHandler)&#xA;});&#xA;Now, instead of abusing the language to get this, can we get first class support for this things?</p>
        </article>
        <article id="article-7110">
            <a href="https://ayende.com/blog/3061/cross-site-scripting-and-letting-the-framework-deal-with-it" target="_blank">
                <h2 class="title mb-6" id="article-7110">Cross Site Scripting and letting the framework deal with it</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: December 20, 2007
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Rob Conery&#xA0;asks how the MS MVC platform should handle XSS attacks. In general, I feel that frameworks should do their best&#xA0;to ensure that&#xA0;to be secure by default. This means that I feel that by default, you should encode everything that comes from the user to the app. People seems to think that encoding inbound data will litter your DB with encoded text that isn&#x2019;t searchable and consumable by other applications. &#xA;That may be the case, but consider, what exactly is getting encoded? Assuming that this is not a field that require rich text editing, what are we likely to have there? &#xA;Text, normal text, text that can roundtrip through HTML encoding without modifications.&#xA;HTML style text in most of those form fields are actually rare. And if you need to have some form of control over it, you can always handle the decoding yourself. Safe by default is a good approach. In fact, I have a project that uses just this approach, and it is working wonderfully well.&#xA;Another approach for that would be to make outputting HTML encoded strings very easy. In fact, it should be so easy that it would be the default approach for output strings.&#xA;Here, the &lt;%= %&gt; syntax fails. It translate directly to Response.Write(), which means that you have to take an extra step to get secured output. I would suggest changing, for MS MVC, the output of &lt;%= %&gt; to output HTML encoded strings, and provide a secondary way to output raw text to the user.&#xA;In MonoRail, Damien Guard&#xA0;has been responsible for pushing us in this direction. He had pointed out several places where MonoRail was not secure by default. As a direct result of Damien&#x27;s suggestions, Brail has gotten the !{post.Author} syntax, which does HTML encoding. This is now considered the best practice for output data, as well as my own default approach.&#xA;Due to backward comparability reasons, I kept the following syntax valid: ${post.Author}, mainly because it is useful for doing things like output HTML directly, such as in: ${Form.HiddenField(&quot;user.id&quot;)}. For the same reason, we cannot automatically encode everything by default, which is controversial, but very useful.&#xA;Regardless, having a very easy way ( !{post.Author} ) to do things in a secure fashion is a plus. I would strongly suggest that the MS MVC team would do the same. Not a &quot;best practice&quot;, not &quot;suggested usage&quot;, simply force it by default (and allow easy way out when needed).</p>
        </article>
        <div class="button flex justify-between">
            <a href="710.html"><span class="back arrow"></span></a>

            <a href="712.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>
<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="/about/"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>