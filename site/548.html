
<!DOCTYPE html>
<html class="scroll-smooth" lang="en-US" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Page 548 &#x2022; Relatively General .NET</title>
    <link href="favicon.ico" rel="icon" sizes="any">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <meta content="hsl()" name="theme-color">
    <meta content="website" property="og:type">
    <meta content="Home" property="og:title">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
    <!-- Google Analytics -->
    <script>
        // Only load GA if consent is given
        function loadGA() {
            const script = document.createElement('script');
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-MDFXJY3FCY';
            script.async = true;
            document.head.appendChild(script);

            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-MDFXJY3FCY');
        }

        // Check if consent was previously given
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGA();
        }
    </script>
    <!-- End Google Analytics -->
</head>
<body class="mx-auto flex min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 font-mono text-sm font-normal text-textColor antialiased sm:px-8">
<a class="sr-only focus:not-sr-only focus:fixed focus:start-1 focus:top-1.5" href="#main">
    skip to content
</a>
<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
    <div class="flex sm:flex-col">
        <a aria-current="page" class="inline-flex items-center hover:filter-none sm:relative sm:inline-block"
           href="index.html">
            <img class="me-3 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-16 sm:w-16 w-16" src="images/giphy.gif"
                 alt=""/>
            <span class="text-xl font-bold sm:text-2xl">Relatively General .NET</span>
        </a>
        <nav aria-label="Main menu"
             class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
             id="navigation-menu">
            <a aria-current="page" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline underline"
               href="index.html"> Home </a><a
                aria-current="" class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline " href="about.html">
                About </a>
        </nav>
    </div>
    <site-search class="ms-auto" id="search">
        <button id="open-search"
                class="flex h-9 w-9 items-center justify-center rounded-md ring-zinc-400 transition-all hover:ring-2"
                data-open-modal="">
            <svg aria-label="search" class="h-7 w-7" fill="none" height="16" stroke="currentColor"
                 stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="16"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" stroke="none"></path>
                <path d="M3 10a7 7 0 1 0 14 0 7 7 0 1 0-14 0M21 21l-6-6"></path>
            </svg>
        </button>
        <dialog aria-label="search"
                class="h-full max-h-full w-full max-w-full border border-zinc-400 bg-bgColor shadow backdrop:backdrop-blur sm:mx-auto sm:mb-auto sm:mt-16 sm:h-max sm:max-h-[calc(100%-8rem)] sm:min-h-[15rem] sm:w-5/6 sm:max-w-[48rem] sm:rounded-md">
            <div class="dialog-frame flex flex-col gap-4 p-6 pt-12 sm:pt-6">
                <button id="close-search"
                        class="ms-auto cursor-pointer rounded-md bg-zinc-200 p-2 font-semibold dark:bg-zinc-700"
                        data-close-modal="">Close
                </button>
                <div class="search-container">
                    <div id="cactus__search"/>
                </div>
            </div>
        </dialog>
    </site-search>
    <theme-toggle class="ms-2 sm:ms-4">
        <button id="theme-toggle" class="relative h-9 w-9 rounded-md p-2 ring-zinc-400 transition-all hover:ring-2"
                type="button">
            <span class="sr-only">Dark Theme</span>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-100 opacity-100 transition-all dark:scale-0 dark:opacity-0"
                 fill="none" focusable="false" id="sun-svg" stroke-width="1.5" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M22 12L23 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 2V1" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M12 23V22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 20L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M20 4L19 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 20L5 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M4 4L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M1 12L2 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 scale-0 opacity-0 transition-all dark:scale-100 dark:opacity-100"
                 fill="none" focusable="false" id="moon-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
                <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
                <path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path>
                <path d="M19 11h2m-1 -1v2"></path>
            </svg>
        </button>
    </theme-toggle>
    <mobile-button>
        <button aria-expanded="false" aria-haspopup="menu" aria-label="Open main menu"
                class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden" id="toggle-navigation-menu" type="button">
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
                 fill="none" focusable="false" id="line-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <svg aria-hidden="true"
                 class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
                 fill="none" focusable="false" id="cross-svg" stroke="currentColor" stroke-width="1.5"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
    </mobile-button>
</header>


<main id="main" data-pagefind-body>
    <section aria-label="Blog post list">
        <article id="article-5471">
            <a href="https://ayende.com/blog/4592/jaoo-2010" target="_blank">
                <h2 class="title mb-6" id="article-5471">JAOO 2010</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 17, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I&#x2019;ll be speaking in JAOO 2010, giving an Introduction to RavenDB in the NoSQL track. This is going to be the first time that I am going to show RavenDB in a major conference, and I am just a tiny bit nervous. This is going to be interesting, because I am going to present to people who are experienced in NoSQL solutions.  In addition to my talk (obviously the highlight of the entire conference :-) ), there are other sessions that I really want to be at:          Rx: curing your asynchronous programming blues - Erik Meijer. This is something that have been popping into my sights for a while, but never long enough to sit down and really study it. So I think I&#x2019;ll take a shortcut through this session :-)            Lessons Learned in Large HTTP-Centric Systems &#x2013; Jim Webber. There are two reasons to go to one of Jim&#x2019;s talks. The first is the content, the second is the actual presentation style. Take a look at some of his talks to see what I means.            Building a Pet Store that will Survive Cyber - Cameron Purdy. This presentation interests me mostly because I don&#x2019;t believe that what is suggest can be delivered (virtually unlimited scaling in a generic fashion), so it would be very interesting to see what is going on there.            Where to put data - Michael T. Nygard. I usually learn new things from Michael, so I&#x2019;m looking forward to seeing what he has to say about this.            And the conference gods have actually managed to set things up so I&#x2019;ll be able to be in all of those sessions, and not be busy giving a parallel session.</p>
        </article>
        <article id="article-5472">
            <a href="https://ayende.com/blog/4591/abolishing-guids" target="_blank">
                <h2 class="title mb-6" id="article-5472">Abolishing guids</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This seems like a minor thing, but it was raised during the design phase of SilverQueues/AgQueues/LuminQ (can someone spot the jokes?).   How does a client identify itself to the server? Consider the fact that there are likely to be clients popping up all the time, so we can&#x2019;t pre-assign them with meaningful names. The suggestion was brought up to use GUIDs to identify the client. That has the benefit of simplicity. It is easy to write, easy to implement and easy to understand from a conceptual level.  It got shot it down quickly, because while it is easy, I have never met the GUID that I could honestly say I have seen before. Recognizing clients by GUIDs is going to make it much harder to work with the system, however, because GUIDs are so opaque.   Instead of doing that, we will probably go with &#x201C;clients/329392&#x201D; or something similar, because that one is human readable. In the end, if you can make it easier to work with, it pays off, big time.</p>
        </article>
        <article id="article-5473">
            <a href="https://ayende.com/blog/4590/frustration-thy-name-is-apple" target="_blank">
                <h2 class="title mb-6" id="article-5473">Frustration, thy name is Apple</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 16, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">Anyone who raves about Apple products has never seen what happens when you leave the straight &amp; narrow:     Yes, I uninstalled &amp; installed it (multiple times).  No idea what is going on, but pretty annoyed.</p>
        </article>
        <article id="article-5474">
            <a href="https://ayende.com/blog/4589/on-fluent-nhibernate" target="_blank">
                <h2 class="title mb-6" id="article-5474">On Fluent NHibernate</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 15, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I noticed some jokes in twitters going around, people saying stuff like &#x201C;Using Fluent NHibernate, better not let @ayende find out about it&#x201D;.  I think that I better clarify a few things in this regard. When FNH initially came out, what I really wanted was auto mapping, and it didn&#x2019;t have that at the time (almost two years ago), but it does now. I also have some disagreement with the API choices (specifically, the decision to rename things from the NH mapping names).  But I am generally grouchy about code (whatever I wrote it or not), so that isn&#x2019;t unusual. I have used FNH in the past in a few of my projects, but it always came to a point where I needed more from NHibernate and FNH was limiting to me. Please note, I am explicitly referring to myself here, not the general public. I have been working with NHibernate for over 6 years now, and working with NHibernate at NHibernate&#x2019;s level is place that I am most conformable.  That isn&#x2019;t the case for a wide variety of other users. Today I had an interesting experience, of guiding a customer from no application to a full blown app using FNH. The entire process (with someone to whom it was the first introduction to NHibernate) took less than an hour, was remarkably pleasant and was focused on exactly the right things.  The Fluent NHibernate team has managed to create a truly remarkable project, well done.</p>
        </article>
        <article id="article-5475">
            <a href="https://ardalis.com/screencast-and-podcast-recording-gear/" target="_blank">
                <h2 class="title mb-6" id="article-5475">Screencast and Podcast Recording Gear</h2>
            </a>
            <p class="mb-2">by Ardalis</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 14, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I&#x2019;m working on some screencasts and have had some gear recommended to me that I&#x2019;m ordering now.&#xA0; I&#x2019;ll post back later with an update on how&#x2026;Keep Reading &#x2192;</p>
        </article>
        <article id="article-5476">
            <a href="https://ayende.com/blog/4588/where-is-the-bug" target="_blank">
                <h2 class="title mb-6" id="article-5476">Where is the bug?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 14, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">This cost me two hours of debugging, do you see&#xA0; why the test will always fail?</p>
        </article>
        <article id="article-5477">
            <a href="https://ayende.com/blog/4587/how-to-pay-3-times-for-the-same-flight-ticket" target="_blank">
                <h2 class="title mb-6" id="article-5477">How to pay 3 times for the same flight ticket</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 13, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">My current mood is somewhere between mad, pissed off, frustrated and exhausted.  All I want to do it arrive home, but dark forces has conspired against me. It works like this:     I got a ticket both ways to London, and I left to London quite happily, taking the train to the airport. At that point things started going horribly wrong. An idiot has suicided on the train trucks, leading to about 2 hours of delays, which, naturally, caused me to miss my flight. We will leave that aside and just point out that I somehow managed to get to London without being late to my course the next morning.     That is when I heard that since I was a no show for the outgoing flight, the airline cancelled my flight back.&#xA0; I had to order a new one, but because I was busy actually doing the course, I asked the company to order that for me.    They did, and I went to the airport quite satisfied, except that on arrival, the stupid machine told me that my booking is invalid, which is the point that I discovered that the ticket was ordered on Ayende Rahien. Unfortunately, legally speaking, that guy doesn&#x2019;t exists. The airline was quite insistent that they can&#x2019;t put me on board with the different name. And they made me buy a new ticket.   That was the point (after I paid for the same bloody seat for the third time) that they told me that they oversold the flight, and that they put me on waiting list.   I tried to explain that they could use the second ticket that I bought, and just give me the same seat, but they told me that they already sold that to someone else.   I am currently waiting to hear whatever I&#x2019;ll get to go home tonight or not.   Your truly,  Pissed off,  Oren Eini (because being Ayende is currently dangerous, given my mood)</p>
        </article>
        <article id="article-5478">
            <a href="https://ayende.com/blog/4586/find-the-bug-ravendb-hilo-implementation" target="_blank">
                <h2 class="title mb-6" id="article-5478">Find the bug</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 13, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">The follow code is part of RavenDB HiLo implementation:             private long NextId()&#xA;        {&#xA;            long incrementedCurrentLow = Interlocked.Increment(ref currentLo);&#xA;            if (incrementedCurrentLow &gt; capacity)&#xA;            {&#xA;                lock (generatorLock)&#xA;                {&#xA;                    if (Thread.VolatileRead(ref currentLo) &gt; capacity)&#xA;                    {&#xA;                        currentHi = GetNextHi();&#xA;                        currentLo = 1;&#xA;                        incrementedCurrentLow = 1;&#xA;                    }&#xA;                }&#xA;            }&#xA;            return (currentHi - 1)*capacity &#x2B; (incrementedCurrentLow);&#xA;        }&#xA;  &#xA;&#xA;It contains a bug, can you see it? I took a long time to figure it out, I am ashamed to say. &#xA;&#xA;BTW, you can safely assume that GetNextHi is correct.</p>
        </article>
        <article id="article-5479">
            <a href="https://ayende.com/blog/4585/nhibernate-course-in-australia" target="_blank">
                <h2 class="title mb-6" id="article-5479">NHibernate course in Australia?</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 12, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">I am going to be visiting Australia in December, and I thought that I might take advantage of that to give my 3 days NHibernate course.  Before doing that, I thought that I should test the waters. Thoughts?</p>
        </article>
        <article id="article-5480">
            <a href="https://ayende.com/blog/4584/ravendb-includes" target="_blank">
                <h2 class="title mb-6" id="article-5480">RavenDB</h2>
            </a>
            <p class="mb-2">by Oren Eini</p>
            <p class="mb-6 flex gap-1.5">
                    <span>
                        <svg width="1.25rem" fill="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg"><path
                                xmlns="http://www.w3.org/2000/svg"
                                d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C12.5523 6 13 6.44772 13 7V11.5858L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V7C11 6.44772 11.4477 6 12 6Z"></path></svg>
                    </span>
                posted on: August 12, 2010
            </p>
            <p class="max-w-full w-full line-clamp-5 text-justify mb-20">When I set out to build RavenDB, I had a very clear idea about what I wanted to do. I wanted to build an integrated, opinionated, solution. Something that will do the right thing most of the time, and let you override that if you really want to.  One of the things that really drove the design was 6 &#x2013; 7 years of experience in building applications based on RDBMS using ORMs. Let me put it gently, I am&#x2026; well acquainted with the problems that people may run into when they use an ORM. One of the things that I wanted to avoid was duplicating the possibility of error with RavenDB.  One of the major design decisions that I made was to disallow associations between documents. This is part of the core design of the system.  Let us take the following example:  &#xA0;   As you can see, we have two documents, an Order and a Customer. The order references a customer, but unlike in RDBMS, we use a denormalized reference, with both the Id and the Name of the customer stored inside the Order document. That is advantageous because it allows us to perform most operations on the Order document without having to load the Customer document.  From the C# model, it looks like this:     public class Order&#xA;{&#xA;      public string Id { get;set; }&#xA;      public Address ShippingAddress { get;set; }&#xA;      public Address BillingAddress { get;set; }&#xA;      public DenormalizedReference Customer { get;set; }&#xA;}&#xA;&#xA;public class DenormalizedReference&#xA;{&#xA;      public string Id { get;set; }&#xA;      public string Name { get;set; }&#xA;}&#xA;&#xA;public class Customer&#xA;{&#xA;      public string Id { get;set; }&#xA;      public string Name { get;set; }&#xA;      public string Email { get;set; }&#xA;&#xA;}&#xA;  &#xA;&#xA;Note that there isn&#x2019;t a direct reference between the Order and the Customer. Instead, Order holds a DenormalizedReference, which holds the interesting bits from Customer that we need to process requests on Order.&#xA;&#xA;So far so good, but, and this is important, you can&#x2019;t always set things up this way. There is a set of cases where you do want to be able to access the associated document.&#xA;&#xA;Well, that is easy enough, isn&#x2019;t it? All we need to do is load it:&#xA;&#xA;&#xA;  var order = session.Load&lt;Order&gt;(&quot;orders/9432&quot;);&#xA;var customer = session.Load&lt;Customer&gt;(order.Customer.Id);&#xA;  &#xA;&#xA;This is simple, easy to read, easy to understand and make me want to curl into a ball and weep. The problem is, of course, that this is going to generate two calls to Raven. And if there is one thing that I pay attention to is the number of remote calls that I am making.&#xA;&#xA;I started to think about how I can make this scenario work better, and I came up with the following design.&#xA;&#xA;Given the two documents &#xA;&#xA;&#xA;Then for GET /docs/orders/9432&#xA;&#xA;&#xA;   &#xA;&#xA;&#xA;&#xA;And for GET /docs/orders/9432?include=Customer.Id&#xA;&#xA;&#xA;   &#xA;  &#xA;&#xA;Note that in the second case, we get the full customer data merged into the order document.&#xA;&#xA;From an implementation perspective, this would be very easy to do. The problem is how to represent this in the client API. We had a very interesting discussion on the topic in the mailing list.&#xA;&#xA;&#xA;&#xA;Let me explain the problem in detail. Given the C# classes above, how do you express this notion of the include? You can&#x2019;t use the Order model above, because that Customer property is going to of type DenormalizedReference. We can&#x2019;t make that property of type Customer, either, because then the Customer data would be embedded inside the Order document, which isn&#x2019;t what we wanted.&#xA;&#xA;In the mailing list, there were a lot of proposal being raised, the one that seemed to be the most popular was to drop the 1:1 mapping between the C# model and the document model and move to something like this:&#xA;&#xA;&#xA;  [RootAggregate]&#xA;public class Order&#xA;{&#xA;    public string Id { get; set; }&#xA;    public string Name { get; set; }&#xA;    public Customer Customer { get; set; }&#xA;}&#xA;&#xA;[RootAggregate]&#xA;public class Customer&#xA;{&#xA;    public string Id { get; set; }&#xA;    [Denormalized]&#xA;    public string Name { get; set; }&#xA;    public string Email { get; set; }&#xA;&#xA;}&#xA;  &#xA;&#xA;And then make the client API smart enough to understand the attribute. The model above would generate the same documents as the previous model, but would allow much easier time when working on features such as this. This way, we can normally access the data that is embedded in the document, but also include the associated document when we need it.&#xA;&#xA;There are several problems here:&#xA;&#xA;&#xA;  This creates a misleading API, making people think that things are normalized when they aren&#x2019;t.&#xA;&#xA;  It is going to bring back ALL the problems associated with lazy loading (worse, it is going to bring back all the problems associated with EF 1.0 lazy loading).&#xA;&#xA;  It goes directly against the way I believe you should work with a document database.&#xA;&#xA;&#xA;But I couldn&#x2019;t think of any other way, nor could anyone else. &#xA;&#xA;Until Frank Schwieterman come to our rescue:&#xA;&#xA;&#xA;  Maybe rather then join the documents into one result, such a request would cause the &#x27;joined&#x27; entities to be preloaded instead.&#xA;    From the client API perspective, I would load do the joined load of the user object, and the user is returned in its original form.&#xA0; But now the session has the customer object preloaded, so when I try to load the customer object via the client API no request is made to the server.&#xA0; From the caller&#x27;s perspective, the only change to usage has been the preload hint passed in the original request.&#xA;&#xA;&#xA;Yes!&#xA;&#xA;The problem was (from my perspective) never with the way the model is structured, the problem was that the way the documents were model caused a performance problem. Frank&#x2019;s suggestion completely eliminated that issue.&#xA;&#xA;It took some interesting coding to get it to work properly, but essentially, it is just an application of the Future usage for loading large object graph in NHibernate. Now we can do:&#xA;&#xA;&#xA;  var order = session&#xA;    .Include(&quot;Customer.Id&quot;)&#xA;    .Load&lt;Order&gt;(&quot;orders/1&quot;);&#xA;&#xA;var customer = session.Load&lt;Customer&gt;(order.Customer.Id);&#xA;  &#xA;&#xA;And this code will only go to the server once!&#xA;&#xA;We get to keep the separate model, and we can manipulate how we are loading associations easily. I really like this solution.</p>
        </article>
        <div class="button flex justify-between">
            <a href="547.html"><span class="back arrow"></span></a>

            <a href="549.html"><span class="next arrow"></span></a>
        </div>
    </section>
</main>

<footer
    class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold text-gray-600 dark:text-gray-400 sm:flex-row sm:justify-between sm:text-xs">
    <div class="me-0 sm:me-4">
        <div class="flex flex-wrap items-end gap-x-2">
            <ul class="flex flex-1 items-center gap-x-2 sm:flex-initial">
                <li class="flex">
                    <p class="flex items-end gap-2 justify-center flex-wrap	">Â© Relatively General
                        .NET 2025<span
                            class="inline-block">&nbsp;ðŸš€&nbsp;Theme: Astro Cactus</span>

                        <a class="inline-block sm:hover:text-link" href="https://github.com/chrismwilliams/astro-cactus"
                           rel="noopener noreferrer " target="_blank">
                            <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6"
                                 focusable="false" data-icon="mdi:github">
                                <symbol id="ai:mdi:github">
                                    <path fill="currentColor"
                                          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path>
                                </symbol>
                                <use xlink:href="#ai:mdi:github"></use>
                            </svg>
                            <span class="sr-only">Github</span>
                        </a>
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <nav aria-label="More on this site" class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500">
        <a class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="index.html"> Home </a><a
            class="px-4 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline" href="about.html"> About </a>
    </nav>
</footer>
<script src="js/script.js?id=af8f4559935e7bf5bf6015373793411d"></script>
<script src="/pagefind/pagefind-ui.js"></script>

<!-- Cookie Consent Banner -->
<div class="cookie-consent" id="cookieConsent">
    <div>
        <p class="text-sm">We use cookies to analyze our website traffic and provide a better browsing experience. By
            continuing to use our site, you agree to our use of cookies.</p>
    </div>
    <div class="cookie-consent-buttons">
        <button class="cookie-consent-decline" onclick="declineCookies()">Decline</button>
        <button class="cookie-consent-accept" onclick="acceptCookies()">Accept</button>
    </div>
</div>

<script>
    // Cookie consent management
    function showCookieConsent() {
        const consent = localStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookieConsent').classList.add('show');
        }
    }

    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookieConsent').classList.remove('show');
        loadGA(); // Load Google Analytics after consent
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookieConsent').classList.remove('show');
    }

    // Show the consent banner only for EU visitors (you can add more country codes as needed)
    fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                const euCountries = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
                if (euCountries.includes(data.country_code)) {
                    showCookieConsent();
                } else {
                    // For non-EU visitors, automatically load GA
                    if (!localStorage.getItem('cookieConsent')) {
                        localStorage.setItem('cookieConsent', 'accepted');
                        loadGA();
                    }
                }
            })
            .catch(() => {
                // If we can't determine location, show the consent banner to be safe
                showCookieConsent();
            });
</script>
</body>
</html>
